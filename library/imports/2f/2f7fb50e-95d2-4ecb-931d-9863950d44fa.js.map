{"version":3,"sources":["assets\\modules\\public\\script\\msgbox\\awardBox.js"],"names":["glGame","baseclass","extend","properties","title","cc","Label","coin","score","activeLevel","diamond","node_coin","Node","node_score","node_activeLevel","node_diamond","sp_frame","sp","Skeleton","audio_reward","type","AudioClip","onLoad","next","active","registerEvent","audio","playSoundEffect","setCompleteListener","node","getChildByName","getComponent","Button","interactable","unRegisterEvent","OnDestroy","onClick","name","confirm","console","error","showMsg","awarddata","string","index","award","log","user","get","awardtype","COIN","value","toString","SCORE","VITALITY","DIAMOND","remove"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        title: cc.Label,\r\n        coin: cc.Label,\r\n        score: cc.Label,\r\n        activeLevel: cc.Label,\r\n        diamond: cc.Label,\r\n        node_coin: cc.Node,\r\n        node_score: cc.Node,\r\n        node_activeLevel: cc.Node,\r\n        node_diamond: cc.Node,\r\n        sp_frame: sp.Skeleton,\r\n        audio_reward: {\r\n            type: cc.AudioClip,\r\n            default: null\r\n        },\r\n    },\r\n    onLoad() {\r\n        this.next = null;\r\n        this.node_coin.active = false;\r\n        this.node_score.active = false;\r\n        this.node_activeLevel.active = false;\r\n        this.registerEvent();\r\n        glGame.audio.playSoundEffect(this.audio_reward, true);\r\n        this.sp_frame.setCompleteListener(()=>{\r\n            this.node.getChildByName(\"btn_confirm\").getComponent(cc.Button).interactable = true;\r\n        });\r\n    },\r\n\r\n    registerEvent() { },\r\n    unRegisterEvent() { },\r\n\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_confirm\": this.confirm(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    /**\r\n     * @param title         标题\r\n     * @param awarddata     奖励类型列表（详见glGame.awardtype）金币，夺宝积分，任务活跃，钻石\r\n     * @param next          回调函数\r\n     */\r\n    showMsg(title, awarddata, next) {\r\n        this.title.string = title;\r\n\r\n        for (let index in awarddata) {\r\n            let award = awarddata[index];\r\n            console.log(\"这是当前的显示消息\",award,glGame.user.get(\"roomSwitch\"))\r\n            if (!award) continue;\r\n            if (award.type == glGame.awardtype.COIN) {\r\n                this.node_coin.active = true;\r\n                this.coin.string = typeof award.value != \"string\" ? award.value.toString() : award.value;\r\n            } else if (award.type == glGame.awardtype.SCORE) {\r\n                this.node_score.active = true;\r\n                this.score.string = typeof award.value != \"string\" ? award.value.toString() : award.value;\r\n            } else if (award.type == glGame.awardtype.VITALITY) {\r\n                this.node_activeLevel.active = true;\r\n                this.activeLevel.string = typeof award.value != \"string\" ? award.value.toString() : award.value;\r\n            } else if (award.type == glGame.awardtype.DIAMOND&&glGame.user.get(\"roomSwitch\") == 1) {\r\n                this.node_diamond.active = true;\r\n                this.diamond.string = typeof award.value != \"string\" ? award.value.toString() : award.value;\r\n            }\r\n        }\r\n\r\n        this.next = next;\r\n    },\r\n\r\n    //触发回调函数\r\n    confirm() {\r\n        if (this.next != null) this.next();\r\n        this.remove();\r\n    }\r\n});\r\n"]}