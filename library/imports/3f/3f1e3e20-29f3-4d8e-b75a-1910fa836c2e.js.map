{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\esydentry.js"],"names":["glGame","baseclass","extend","properties","BGM","type","cc","AudioClip","goldCount","Label","level","Node","record","Prefab","rule","sp_game_logo","sp","Skeleton","sp_deng","onLoad","gameid","node","zIndex","getChildByName","active","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","initAni","renwu_pos","index","length","pos","getPosition","push","x","width","_fadeTo","sequence","fadeTo","delayTime","_callFunc","callFunc","playShow","playMove","aniEvent","runAction","_index","action_node","roomSelect","forEach","i","children","tintTo","time","moveTo","v2","y","setAnimation","setCompleteListener","trackEntry","loopCount","name","animation","onClick","click_help","click_record","click_addgold","click_userinfo","enterGame","console","error","unregisterEvent","goldOnlineNum","onGameConfig","off","cutFloat","value","Number","div","toString","showUserInfo","panel","showRemoteImage","Playerhead","user","get","coin","string","GoldTemp","setGameId","updateBgInfo","showPanelByName","showShop","readyroom","reqExitArea","remove","showPanel","set","key","msg","gameConfig","initUI","gameID","scenetag","ESYD","log","count","getComponent","configure","BaseChips","EntranceRestrictions","parent","room","reqMyGameState","then","showMsgBox","isTourist","showRegisteredGift","suspicious","game","is_game","showDialog","showService","showJuHua","closeJuHua","setGoldRoomInfo","checkGold","minCion","parseInt","i18n","t","OnDestroy"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AAEpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,GAAG,EAAE;AACDC,MAAAA,IAAI,EAAEC,EAAE,CAACC,SADR;AAED,iBAAS;AAFR,KADG;AAKRC,IAAAA,SAAS,EAAEF,EAAE,CAACG,KALN;AAMRC,IAAAA,KAAK,EAAE;AACHL,MAAAA,IAAI,EAAEC,EAAE,CAACK,IADN;AAEH,iBAAS;AAFN,KANC;AAURC,IAAAA,MAAM,EAACN,EAAE,CAACO,MAVF;AAWRC,IAAAA,IAAI,EAACR,EAAE,CAACO,MAXA;AAYRE,IAAAA,YAAY,EAAEC,EAAE,CAACC,QAZT;AAaRC,IAAAA,OAAO,EAAEF,EAAE,CAACC;AAbJ,GAFQ;AAkBpB;AAEAE,EAAAA,MApBoB,oBAoBX;AACL,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,IAAL,CAAUC,MAAV,GAAmB,EAAnB;AACA,SAAKD,IAAL,CAAUE,cAAV,CAAyB,YAAzB,EAAuCC,MAAvC,GAAgD,KAAhD;AACAxB,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkBC,OAAO,CAACC,EAAR,CAAWC,eAA7B,EAA8C,KAAKC,YAAnD,EAAiE,IAAjE;AACA9B,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkBC,OAAO,CAACC,EAAR,CAAWG,eAA7B,EAA8C,KAAKC,YAAnD,EAAiE,IAAjE;AACAhC,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkB,YAAlB,EAAgC,KAAKO,UAArC,EAAiD,IAAjD;AACAjC,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkB,gBAAlB,EAAoC,KAAKQ,cAAzC,EAAyD,IAAzD;AACA,SAAKA,cAAL;AACA,SAAKC,aAAL;AACA,SAAKC,YAAL;AACH,GA/BmB;AAiCpBC,EAAAA,OAjCoB,qBAiCV;AACN,SAAKC,SAAL,GAAiB,EAAjB;;AACA,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAK7B,KAAL,CAAW8B,MAAvC,EAA+CD,KAAK,EAApD,EAAwD;AACpD,UAAIE,GAAG,GAAG,KAAK/B,KAAL,CAAW6B,KAAX,EAAkBG,WAAlB,EAAV;AACA,WAAKJ,SAAL,CAAeK,IAAf,CAAoBF,GAApB;;AACA,UAAIF,KAAK,GAAG,CAAZ,EAAe;AACX,aAAK7B,KAAL,CAAW6B,KAAX,EAAkBK,CAAlB,GAAsB,KAAKvB,IAAL,CAAUwB,KAAV,GAAgB,CAAhB,GAAoBJ,GAAG,CAACG,CAA9C;AACH,OAFD,MAEO;AACH,aAAKlC,KAAL,CAAW6B,KAAX,EAAkBK,CAAlB,GAAsBH,GAAG,CAACG,CAAJ,GAAQ,KAAKvB,IAAL,CAAUwB,KAAV,GAAgB,CAA9C;AACH;;AACD,WAAKnC,KAAL,CAAW6B,KAAX,EAAkBf,MAAlB,GAA2B,IAA3B;AACH;;AAED,QAAIsB,OAAO,GAAGxC,EAAE,CAACyC,QAAH,CAAYzC,EAAE,CAAC0C,MAAH,CAAU,GAAV,EAAe,GAAf,CAAZ,EAAiC1C,EAAE,CAAC2C,SAAH,CAAa,GAAb,CAAjC,EAAoD3C,EAAE,CAAC0C,MAAH,CAAU,IAAV,EAAgB,GAAhB,CAApD,CAAd;;AACA,QAAIE,SAAS,GAAG5C,EAAE,CAAC6C,QAAH,CAAY,YAAY;AACpC,WAAKC,QAAL;AACA,WAAKC,QAAL;AACA,WAAKC,QAAL;AACH,KAJe,EAIb,IAJa,CAAhB;;AAKA,SAAKjC,IAAL,CAAUkC,SAAV,CAAoBL,SAApB;AACH,GArDmB;AAuDpB;AACAE,EAAAA,QAxDoB,sBAwDT;AACP,QAAII,MAAM,GAAG,CAAb,CADO,CAEP;;AACA,QAAIC,WAAW,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAlB;AACA,QAAIC,UAAU,GAAG,KAAKrC,IAAL,CAAUE,cAAV,CAAyB,OAAzB,CAAjB;AACAkC,IAAAA,WAAW,CAACE,OAAZ,CAAoB,UAAAC,CAAC,EAAI;AACrBF,MAAAA,UAAU,CAACG,QAAX,CAAoBD,CAApB,EAAuBL,SAAvB,CAAiCjD,EAAE,CAACyC,QAAH,CAAazC,EAAE,CAAC2C,SAAH,CAAaO,MAAM,GAAG,IAAtB,CAAb,EAA0ClD,EAAE,CAACwD,MAAH,CAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,GAAzB,CAA1C,CAAjC;AACAN,MAAAA,MAAM;AACT,KAHD;AAIH,GAjEmB;AAmEpB;AACAH,EAAAA,QApEoB,sBAoET;AACP;AACA;AACA,SAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKlD,KAAL,CAAW8B,MAA/B,EAAuCoB,CAAC,EAAxC,EAA4C;AACxC,UAAIA,CAAC,GAAG,CAAR,EAAW;AACP,YAAIG,IAAI,GAAGH,CAAC,GAAG,GAAf;;AACA,gBAAQA,CAAR;AACI,eAAK,CAAL;AACIG,YAAAA,IAAI,GAAG,CAACH,CAAC,GAAG,CAAL,IAAU,GAAjB;AACA;;AACJ,eAAK,CAAL;AACIG,YAAAA,IAAI,GAAG,CAAP;AACA;AANR;;AAQA,aAAKrD,KAAL,CAAWkD,CAAX,EAAcL,SAAd,CAAwBjD,EAAE,CAACyC,QAAH,CACpBzC,EAAE,CAAC2C,SAAH,CAAac,IAAb,CADoB,EAEpBzD,EAAE,CAAC0D,MAAH,CAAU,IAAV,EAAgB1D,EAAE,CAAC2D,EAAH,CAAM,KAAK3B,SAAL,CAAesB,CAAf,EAAkBhB,CAAlB,GAAsB,EAA5B,EAAgC,KAAKN,SAAL,CAAesB,CAAf,EAAkBM,CAAlD,CAAhB,CAFoB,EAGpB5D,EAAE,CAAC0D,MAAH,CAAU,IAAV,EAAgB,KAAK1B,SAAL,CAAesB,CAAf,CAAhB,CAHoB,CAAxB;AAKH;AACJ;AACJ,GAzFmB;AA2FpB;AACAN,EAAAA,QA5FoB,sBA4FT;AAAA;;AACP,SAAKvC,YAAL,CAAkBoD,YAAlB,CAA+B,CAA/B,EAAkC,YAAlC,EAAgD,KAAhD;AACA,SAAKpD,YAAL,CAAkBqD,mBAAlB,CAAsC,UAACC,UAAD,EAAaC,SAAb,EAA2B;AAC7D,UAAIC,IAAI,GAAGF,UAAU,CAACG,SAAX,GAAuBH,UAAU,CAACG,SAAX,CAAqBD,IAA5C,GAAmD,EAA9D;;AACA,UAAIA,IAAI,IAAI,YAAZ,EAA0B;AACtB,QAAA,KAAI,CAACxD,YAAL,CAAkBoD,YAAlB,CAA+B,CAA/B,EAAkC,YAAlC,EAAgD,IAAhD;AACH;AACJ,KALD;AAMH,GApGmB;AAsGpBM,EAAAA,OAtGoB,mBAsGZF,IAtGY,EAsGNlD,IAtGM,EAsGA;AAChB,YAAQkD,IAAR;AACI,WAAK,UAAL;AAAiB,aAAKtC,UAAL;AAAmB;;AACpC,WAAK,UAAL;AAAiB,aAAKyC,UAAL;AAAmB;;AACpC,WAAK,YAAL;AAAmB,aAAKC,YAAL;AAAqB;;AACxC,WAAK,YAAL;AAAmB,aAAKC,aAAL;AAAsB;;AACzC,WAAK,QAAL;AAAe,aAAKC,cAAL;AAAuB;;AACtC,WAAK,cAAL;AAAqB,aAAKD,aAAL;AAAsB;;AAC3C,WAAK,WAAL;AAAkB,aAAKE,SAAL,CAAeP,IAAf,EAAqBlD,IAArB;AAA4B;;AAC9C;AAAS0D,QAAAA,OAAO,CAACC,KAAR,CAAc,2BAAd,EAA2CT,IAA3C;AARb;AAUH,GAjHmB;AAkHpBzC,EAAAA,YAlHoB,0BAkHN;AACV,SAAKT,IAAL,CAAUG,MAAV,GAAmB,IAAnB;AACA,SAAKW,aAAL;AACA,SAAKC,YAAL;AACH,GAtHmB;AAuHpBJ,EAAAA,YAvHoB,0BAuHN;AACV,SAAKX,IAAL,CAAUG,MAAV,GAAmB,KAAnB;AACA,SAAKyD,eAAL;AACH,GA1HmB;AA2HpB;AACA9C,EAAAA,aA5HoB,2BA4HJ;AACZnC,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkB,eAAlB,EAAmC,KAAKwD,aAAxC,EAAuD,IAAvD;AACAlF,IAAAA,MAAM,CAACyB,OAAP,CAAeC,EAAf,CAAkB,cAAlB,EAAkC,KAAKyD,YAAvC,EAAqD,IAArD;AACH,GA/HmB;AAgIpB;AACAF,EAAAA,eAjIoB,6BAiIF;AACdjF,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmB,eAAnB,EAAoC,IAApC;AACApF,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmB,cAAnB,EAAmC,IAAnC;AACH,GApImB;AAqIpBC,EAAAA,QArIoB,oBAqIXC,KArIW,EAqIJ;AACZ,WAAQC,MAAM,CAACD,KAAD,CAAN,CAAcE,GAAd,CAAkB,GAAlB,CAAD,CAAyBC,QAAzB,EAAP;AACH,GAvImB;AAwIpBC,EAAAA,YAxIoB,0BAwIL;AACX1F,IAAAA,MAAM,CAAC2F,KAAP,CAAaC,eAAb,CAA6B,KAAKC,UAAlC,EAA8C7F,MAAM,CAAC8F,IAAP,CAAYC,GAAZ,CAAgB,SAAhB,CAA9C;AACH,GA1ImB;AA2IpB7D,EAAAA,cA3IoB,4BA2IH;AACb,QAAI8D,IAAI,GAAGhG,MAAM,CAAC8F,IAAP,CAAYC,GAAZ,CAAgB,MAAhB,CAAX;AACA,SAAKvF,SAAL,CAAeyF,MAAf,GAAwBjG,MAAM,CAAC8F,IAAP,CAAYI,QAAZ,CAAqBF,IAArB,CAAxB;AACH,GA9ImB;AAgJpBG,EAAAA,SAhJoB,qBAgJV/E,MAhJU,EAgJF;AACd,SAAKA,MAAL,GAAcA,MAAd;AACH,GAlJmB;AAoJpBgF,EAAAA,YApJoB,0BAoJL,CAEd,CAtJmB;AAuJpBvB,EAAAA,cAvJoB,4BAuJH;AACb7E,IAAAA,MAAM,CAAC2F,KAAP,CAAaU,eAAb,CAA6B,UAA7B;AACH,GAzJmB;AA0JpBzB,EAAAA,aA1JoB,2BA0JJ;AACZ5E,IAAAA,MAAM,CAAC2F,KAAP,CAAaW,QAAb,CAAsB,EAAtB;AACH,GA5JmB;AA6JpBrE,EAAAA,UA7JoB,wBA6JP;AACTjC,IAAAA,MAAM,CAACuG,SAAP,CAAiBC,WAAjB;AACA,SAAKC,MAAL;AACH,GAhKmB;AAiKpB/B,EAAAA,UAjKoB,wBAiKP;AACT;AACA,QAAIiB,KAAK,GAAG3F,MAAM,CAAC2F,KAAP,CAAae,SAAb,CAAuB,KAAK5F,IAA5B,CAAZ;AACA6E,IAAAA,KAAK,CAACrE,MAAN,GAAe,EAAf;AACH,GArKmB;AAsKpBqD,EAAAA,YAtKoB,0BAsKL;AACX;AACA,QAAIgB,KAAK,GAAG3F,MAAM,CAAC2F,KAAP,CAAae,SAAb,CAAuB,KAAK9F,MAA5B,CAAZ;AACA+E,IAAAA,KAAK,CAACrE,MAAN,GAAe,EAAf;AACH,GA1KmB;AA4KpBqF,EAAAA,GA5KoB,eA4KhBC,GA5KgB,EA4KXtB,KA5KW,EA4KJ;AACZ,SAAKsB,GAAL,IAAYtB,KAAZ;AACH,GA9KmB;AA+KpBS,EAAAA,GA/KoB,eA+KhBa,GA/KgB,EA+KX;AACL,WAAO,KAAKA,GAAL,CAAP;AACH,GAjLmB;AAkLpBzB,EAAAA,YAlLoB,wBAkLP0B,GAlLO,EAkLF;AACd,SAAKC,UAAL,GAAkBD,GAAlB;AACA,SAAKE,MAAL;AACH,GArLmB;AAsLpB3E,EAAAA,YAtLoB,0BAsLL;AACX,SAAK4E,MAAL,GAAchH,MAAM,CAACiH,QAAP,CAAgBC,IAA9B;AACAlH,IAAAA,MAAM,CAACuG,SAAP,CAAiBnE,YAAjB,CAA8BpC,MAAM,CAACiH,QAAP,CAAgBC,IAA9C;AACH,GAzLmB;AA0LpBhC,EAAAA,aA1LoB,yBA0LN2B,GA1LM,EA0LD;AACf9B,IAAAA,OAAO,CAACoC,GAAR,CAAY,WAAZ,EAAyBN,GAAzB;AACA,QAAIO,KAAK,GAAG,KAAK1G,KAAL,CAAW8B,MAAvB;;AACA,SAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwD,KAApB,EAA2BxD,CAAC,EAA5B,EAAgC;AAC5B,UAAIiD,GAAG,CAACjD,CAAC,GAAG,CAAL,CAAP,EAAgB;AACZ,aAAKlD,KAAL,CAAWkD,CAAX,EAAcrC,cAAd,CAA6B,YAA7B,EAA2C8F,YAA3C,CAAwD/G,EAAE,CAACG,KAA3D,EAAkEwF,MAAlE,GAA2EY,GAAG,CAACjD,CAAC,GAAG,CAAL,CAA9E;AACH;AACJ;AACJ,GAlMmB;AAmMpBmD,EAAAA,MAnMoB,oBAmMX;AACL,SAAK1F,IAAL,CAAUE,cAAV,CAAyB,YAAzB,EAAuCC,MAAvC,GAAgD,IAAhD;AACA,QAAI8F,SAAS,GAAG,KAAKR,UAArB;AACA,QAAIM,KAAK,GAAG,KAAK1G,KAAL,CAAW8B,MAAvB;;AACA,SAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwD,KAApB,EAA2BxD,CAAC,EAA5B,EAAgC;AAC5B,WAAKlD,KAAL,CAAWkD,CAAX,EAAcrC,cAAd,CAA6B,YAA7B,EAA2CA,cAA3C,CAA0D,WAA1D,EAAuE8F,YAAvE,CAAoF/G,EAAE,CAACG,KAAvF,EAA8FwF,MAA9F,GAAuG,KAAKZ,QAAL,CAAciC,SAAS,CAAC1D,CAAD,CAAT,CAAa2D,SAA3B,CAAvG;AACA,WAAK7G,KAAL,CAAWkD,CAAX,EAAcrC,cAAd,CAA6B,cAA7B,EAA6CA,cAA7C,CAA4D,YAA5D,EAA0E8F,YAA1E,CAAuF/G,EAAE,CAACG,KAA1F,EAAiGwF,MAAjG,GAA0G,KAAKZ,QAAL,CAAciC,SAAS,CAAC1D,CAAD,CAAT,CAAa4D,oBAA3B,CAA1G;AACH;;AAED,SAAKnF,OAAL;AACH,GA7MmB;;AA+MpB;;;;AAIAyC,EAAAA,SAnNoB,qBAmNVP,IAnNU,EAmNJlD,IAnNI,EAmNE;AAAA;;AAClB,QAAIX,KAAK,GAAG6E,MAAM,CAAClE,IAAI,CAACoG,MAAL,CAAYlD,IAAb,CAAlB;AACAvE,IAAAA,MAAM,CAAC0H,IAAP,CAAYC,cAAZ,CAA2B,KAAKX,MAAhC,EAAwCtG,KAAxC,EAA+CkH,IAA/C,CAAoD,YAAM;AACtD,UAAIZ,MAAM,GAAG,MAAI,CAACA,MAAlB;;AACA,UAAI,MAAI,CAACF,UAAL,CAAgBpG,KAAhB,KAA0B,IAA9B,EAAoC;AAChCV,QAAAA,MAAM,CAAC2F,KAAP,CAAakC,UAAb,CAAwB,IAAxB,EAA8B,kBAA9B;AACA;AACH;;AACD,UAAI7H,MAAM,CAAC8F,IAAP,CAAYgC,SAAZ,EAAJ,EAA6B;AACzB,YAAIpH,KAAK,IAAI,EAAb,EAAiB;AACbV,UAAAA,MAAM,CAAC2F,KAAP,CAAaoC,kBAAb,CAAgC,IAAhC;AACA;AACH;AACJ;;AACD,UAAI/H,MAAM,CAAC8F,IAAP,CAAYkC,UAAZ,IAA0B,CAA1B,IAA8BhI,MAAM,CAAC8F,IAAP,CAAYmC,IAAZ,IAAoB,CAAnD,IAA0DjI,MAAM,CAAC8F,IAAP,CAAYoC,OAAZ,IAAuB,CAApF,EAAuF;AACnFlI,QAAAA,MAAM,CAAC2F,KAAP,CAAawC,UAAb,CAAwB,EAAxB,EAA4B,+BAA5B,EAA6D,YAAM;AAAEnI,UAAAA,MAAM,CAAC2F,KAAP,CAAayC,WAAb;AAA4B,SAAjG,EAAmG,YAAM,CAAE,CAA3G,EAA6G,MAA7G,EAAqH,MAArH;AACA;AACH;;AACD,UAAI,MAAI,CAACtB,UAAL,CAAgBpG,KAAhB,EAAuB8G,oBAAvB,GAA8CxH,MAAM,CAAC8F,IAAP,CAAYC,GAAZ,CAAgB,MAAhB,CAAlD,EAA2E;AACvEhB,QAAAA,OAAO,CAACoC,GAAR,CAAY,WAAZ,EAAyB,MAAI,CAACL,UAA9B;AACA,YAAIb,MAAM,yHAAsD,MAAI,CAACZ,QAAL,CAAc,MAAI,CAACyB,UAAL,CAAgBpG,KAAhB,EAAuB8G,oBAArC,CAAtD,8HAAV;AACAxH,QAAAA,MAAM,CAAC2F,KAAP,CAAawC,UAAb,CAAwB,EAAxB,EAA4BlC,MAA5B,EAAoC,YAAM;AAAEjG,UAAAA,MAAM,CAAC2F,KAAP,CAAaW,QAAb,CAAsB,GAAtB;AAA4B,SAAxE,EAA0E,YAAM,CAAG,CAAnF,EAAqF,IAArF,EAA2F,IAA3F;AACA;AACH;;AACDtG,MAAAA,MAAM,CAAC2F,KAAP,CAAa0C,SAAb,GAtBsD,CAuBtD;;AACA,MAAA,MAAI,CAAChH,IAAL,CAAUkC,SAAV,CAAoBjD,EAAE,CAACyC,QAAH,CAChBzC,EAAE,CAAC2C,SAAH,CAAa,EAAb,CADgB,EAEhB3C,EAAE,CAAC6C,QAAH,CAAY,YAAM;AACdnD,QAAAA,MAAM,CAAC2F,KAAP,CAAa2C,UAAb;AACH,OAFD,CAFgB,CAApB,EAxBsD,CA8BtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAtI,MAAAA,MAAM,CAAC0H,IAAP,CAAYa,eAAZ,CAA4BvB,MAA5B,EAAoCtG,KAApC;AACH,KAvCD;AAwCH,GA7PmB;;AA8PpB;;;;AAIA8H,EAAAA,SAlQoB,qBAkQVxC,IAlQU,EAkQJyC,OAlQI,EAkQK;AACrB1D,IAAAA,OAAO,CAACoC,GAAR,CAAY,MAAZ,EAAoBnB,IAApB,EAA0ByC,OAA1B;;AACA,QAAIC,QAAQ,CAAC1C,IAAD,CAAR,GAAiB0C,QAAQ,CAACD,OAAD,CAA7B,EAAwC;AACpCzI,MAAAA,MAAM,CAAC2F,KAAP,CAAawC,UAAb,CAAwBnI,MAAM,CAAC2I,IAAP,CAAYC,CAAZ,CAAc,qBAAd,CAAxB,EAA8D5I,MAAM,CAAC2I,IAAP,CAAYC,CAAZ,CAAc,uBAAd,CAA9D,EAAsG,YAAM;AACxG5I,QAAAA,MAAM,CAAC2F,KAAP,CAAaU,eAAb,CAA6B,MAA7B;AACH,OAFD,EAEG,IAFH;AAGA,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACH,GA3QmB;AA6QpBwC,EAAAA,SA7QoB,uBA6QR;AACR7I,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmBzD,OAAO,CAACC,EAAR,CAAWC,eAA9B,EAA8C,IAA9C;AACA7B,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmBzD,OAAO,CAACC,EAAR,CAAWG,eAA9B,EAA8C,IAA9C;AACA/B,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmB,YAAnB,EAAiC,IAAjC;AACApF,IAAAA,MAAM,CAACyB,OAAP,CAAe2D,GAAf,CAAmB,gBAAnB,EAAoC,IAApC;AACA,SAAKH,eAAL;AACH,GAnRmB,CAoRpB;;AApRoB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        goldCount: cc.Label,\r\n        level: {\r\n            type: cc.Node,\r\n            default: []\r\n        },\r\n        record:cc.Prefab,\r\n        rule:cc.Prefab,\r\n        sp_game_logo: sp.Skeleton,\r\n        sp_deng: sp.Skeleton,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n        this.node.getChildByName(\"esydselect\").active = false;\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.updateuserInfo();\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n\r\n    initAni() {\r\n        this.renwu_pos = [];\r\n        for (let index = 0; index < this.level.length; index++) {\r\n            let pos = this.level[index].getPosition()\r\n            this.renwu_pos.push(pos);\r\n            if (index > 1) {\r\n                this.level[index].x = this.node.width/2 + pos.x;\r\n            } else {\r\n                this.level[index].x = pos.x - this.node.width/2;\r\n            }\r\n            this.level[index].active = true\r\n        }\r\n\r\n        let _fadeTo = cc.sequence(cc.fadeTo(0.1, 130), cc.delayTime(0.1), cc.fadeTo(0.05, 220));\r\n        let _callFunc = cc.callFunc(function () {\r\n            this.playShow();\r\n            this.playMove();\r\n            this.aniEvent();\r\n        }, this);\r\n        this.node.runAction(_callFunc);\r\n    },\r\n\r\n    // 任务渐变出来\r\n    playShow() {\r\n        let _index = 0;\r\n        // let action_node = [2, 1, 3, 0];\r\n        let action_node = [1, 2, 0, 3];\r\n        let roomSelect = this.node.getChildByName(\"girls\");\r\n        action_node.forEach(i => {\r\n            roomSelect.children[i].runAction(cc.sequence( cc.delayTime(_index * 0.15), cc.tintTo(0.1, 255, 255, 255)));\r\n            _index++;\r\n        });\r\n    },\r\n\r\n    //打开界面的图标移动动作\r\n    playMove() {\r\n        // let roomSelect = this.node.getChildByName(\"qznnselect\");\r\n        // for (let i = 0; i < roomSelect.childrenCount; i++) {\r\n        for (let i = 0; i < this.level.length; i++) {\r\n            if (i < 4) {\r\n                let time = i * 0.1;\r\n                switch (i) {\r\n                    case 0:\r\n                        time = (i + 1) * 0.1;\r\n                        break;\r\n                    case 1:\r\n                        time = 0;\r\n                        break;\r\n                }\r\n                this.level[i].runAction(cc.sequence(\r\n                    cc.delayTime(time),\r\n                    cc.moveTo(0.15, cc.v2(this.renwu_pos[i].x - 40, this.renwu_pos[i].y)),\r\n                    cc.moveTo(0.07, this.renwu_pos[i])\r\n                ))\r\n            }\r\n        }\r\n    },\r\n\r\n    //骨骼动画播放结束的回调\r\n    aniEvent() {\r\n        this.sp_game_logo.setAnimation(0, \"animation1\", false);\r\n        this.sp_game_logo.setCompleteListener((trackEntry, loopCount) => {\r\n            let name = trackEntry.animation ? trackEntry.animation.name : \"\";\r\n            if (name == \"animation1\") {\r\n                this.sp_game_logo.setAnimation(0, \"animation2\", true);\r\n            }\r\n        })\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            case \"btn_start\": this.enterGame(name, node); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    RootNodeShow(){\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n    RootNodeHide(){\r\n        this.node.active = false;\r\n        this.unregisterEvent();\r\n    },\r\n    //事件监听\r\n    registerEvent() {\r\n        glGame.emitter.on(\"goldOnlineNum\", this.goldOnlineNum, this);\r\n        glGame.emitter.on(\"onGameConfig\", this.onGameConfig, this);\r\n    },\r\n    //事件销毁\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"goldOnlineNum\", this);\r\n        glGame.emitter.off(\"onGameConfig\", this);\r\n    },\r\n    cutFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n        \r\n    },\r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n    click_help() {\r\n        // glGame.panel.showNewGameRule(this.gameid,30);\r\n        let panel = glGame.panel.showPanel(this.rule);\r\n        panel.zIndex = 30;\r\n    },\r\n    click_record() {\r\n        // glGame.panel.showNewGameRecord(this.gameid,30);\r\n        let panel = glGame.panel.showPanel(this.record);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n    onGameConfig(msg) {\r\n        this.gameConfig = msg;\r\n        this.initUI();\r\n    },\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.ESYD;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.ESYD);\r\n    },\r\n    goldOnlineNum(msg) {\r\n        console.log(\"这是在线人数的消息\", msg)\r\n        let count = this.level.length;\r\n        for (let i = 0; i < count; i++) {\r\n            if (msg[i + 1]) {\r\n                this.level[i].getChildByName(\"people_num\").getComponent(cc.Label).string = msg[i + 1]\r\n            }\r\n        }\r\n    },\r\n    initUI() {\r\n        this.node.getChildByName(\"esydselect\").active = true;\r\n        let configure = this.gameConfig;\r\n        let count = this.level.length;\r\n        for (let i = 1; i < count; i++) {\r\n            this.level[i].getChildByName(\"dizhulaout\").getChildByName(\"dizhu_num\").getComponent(cc.Label).string = this.cutFloat(configure[i].BaseChips);\r\n            this.level[i].getChildByName(\"zhunrulayout\").getChildByName(\"zhunru_num\").getComponent(cc.Label).string = this.cutFloat(configure[i].EntranceRestrictions);\r\n        }\r\n\r\n        this.initAni();\r\n    },\r\n  \r\n    /**\r\n     * 进入金币场房间\r\n     * @param level 场次类型 1:初级场 2:中级场 3:高级场 4:土豪场 5:至尊场\r\n     */\r\n    enterGame(name, node) {\r\n        let level = Number(node.parent.name);\r\n        glGame.room.reqMyGameState(this.gameID, level).then(() => {\r\n            let gameID = this.gameID;\r\n            if (this.gameConfig[level] == null) {\r\n                glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');\r\n                return;\r\n            }\r\n            if (glGame.user.isTourist()) {\r\n                if (level != 99) {\r\n                    glGame.panel.showRegisteredGift(true)\r\n                    return;\r\n                }\r\n            }\r\n            if((glGame.user.suspicious == 1 &&glGame.user.game == 2 ) || glGame.user.is_game == 2 ){\r\n                glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => {}, \"我知道了\", \"联系客服\")\r\n                return;\r\n            }\r\n            if (this.gameConfig[level].EntranceRestrictions > glGame.user.get(\"coin\")) {\r\n                console.log(\"这是当前的房间限制\", this.gameConfig)\r\n                let string = `<color=#99C7FF>您的金币不足，该房间需要</c> <color=#ff0000> ${this.cutFloat(this.gameConfig[level].EntranceRestrictions)}  </c><color=#99C7FF>金币才可下注，是否马上前往充值？</c>`\r\n                glGame.panel.showDialog(\"\", string, () => { glGame.panel.showShop(100) }, () => { }, \"取消\", \"充值\");\r\n                return\r\n            }\r\n            glGame.panel.showJuHua();\r\n            // glGame.readyroom.reqExitArea();\r\n            this.node.runAction(cc.sequence(\r\n                cc.delayTime(15),\r\n                cc.callFunc(() => {\r\n                    glGame.panel.closeJuHua();\r\n                })\r\n            ))\r\n            // TODO\r\n            // reqGoldRoomVerify为旧的进入房间方法，需要先请求验证，再进入房间\r\n            // setGoldRoomInfo 新的进入房间方法，无需验证，设置游戏类型以及房间信息后，直接进入房间\r\n            // if (glGame.enterRoomVerification) {\r\n            //     glGame.room.reqGoldRoomVerify(gameID, level);\r\n            // } else {\r\n            //     glGame.room.setGoldRoomInfo(gameID, level);\r\n            // }\r\n            glGame.room.setGoldRoomInfo(gameID, level);\r\n        })\r\n    },\r\n    /**\r\n     * 检查玩家金币是否足够\r\n     * @returns {boolean}\r\n     */\r\n    checkGold(coin, minCion) {\r\n        console.log(\"金币检测\", coin, minCion);\r\n        if (parseInt(coin) < parseInt(minCion)) {\r\n            glGame.panel.showDialog(glGame.i18n.t(\"USER.GOLDLACK.TITLE\"), glGame.i18n.t(\"USER.GOLDLACK.CONTENT\"), () => {\r\n                glGame.panel.showPanelByName(\"shop\");\r\n            }, null);\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n   \r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW,this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE,this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\",this);\r\n        this.unregisterEvent();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}