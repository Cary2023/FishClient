{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\signin\\signin.js"],"names":["glGame","baseclass","extend","properties","everyday","cc","Node","receiveed","close","lab_hint","Label","lab_prompt","normalMaterial","Material","grayMaterial","onLoad","emitter","on","MESSAGE","UI","FORBIDDEN_SIGN","onForbbidden","initData","reqannounceInfo","designSize","size","signMax","start","node","getComponent","Widget","updateAlignment","rewardInfo","todayIsSign","signTimes","fitFunc","designRate","height","width","winSize","view","getVisibleSize","curRate","scaleRate","setScale","gameNet","send_msg","route","msg","signinfo","today_is_sign","todayBet","today_bet","todayRecharge","today_recharge","todayTotalBet","todayTotalRecharge","updateUi","console","log","initUI","i","children","getChildByName","active","tiplayout","length","is_sign","coinframe","coin","strCoin","coin_range","getFixNumber","string","turnframe","integral","strTurn","integral_range","today","fadeOut","fadeTo","fadeIn","delay","delayTime","seq","sequence","runAction","repeatForever","setButton","btnNode","bState","Button","interactable","RenderComponent","setMaterial","sevenInfo","awardlist","push","type","awardtype","COIN","value","SCORE","panel","showAwardBox","tips","SIGNIN","CONGRATULATE","user","reqGetCoin","ReqRedDot","onClick","name","click_receive","click_close","error","showFirstEnterPanel","remove","signinSwitch","callFunc","Number","div","toString","isTourist","showRegisteredGift","draw","upDraw","childrenCount","str","HASCHECKED","UNREADY","showErrorTip","COMETOMORROW","position_recelive","destroy","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 礼物label：当天未签到显示白色，其他显示黄色\r\n * 礼物labelbg:当前未签到显示深色底，其他显示浅色底。\r\n */\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        everyday: cc.Node,\r\n        receiveed: cc.Node,\r\n        interface: cc.Node,\r\n        close: cc.Node,\r\n        lab_hint: cc.Label,\r\n        lab_prompt: cc.Label,\r\n        normalMaterial: cc.Material,\r\n        grayMaterial: cc.Material,\r\n    },\r\n\r\n    onLoad() {\r\n        glGame.emitter.on(MESSAGE.UI.FORBIDDEN_SIGN, this.onForbbidden, this);\r\n        this.initData();\r\n        this.reqannounceInfo();\r\n        this.designSize = cc.size(1920, 1080);\r\n        this.signMax = 7;\r\n    },\r\n\r\n    start() {\r\n        if (this.node.getComponent(cc.Widget)) this.node.getComponent(cc.Widget).updateAlignment();\r\n    },\r\n\r\n    initData() {\r\n        this.rewardInfo = null;\r\n        this.todayIsSign = false;\r\n        this.signTimes = 0;\r\n    },\r\n\r\n    //适配\r\n    fitFunc() {\r\n        let designRate = this.designSize.height / this.designSize.width;\r\n        let winSize = cc.view.getVisibleSize();\r\n        let curRate = winSize.height / winSize.width;\r\n        let scaleRate = curRate < designRate ? winSize.height / this.designSize.height : winSize.width / this.designSize.width;\r\n        this.interface.setScale(scaleRate);\r\n    },\r\n\r\n    //请求签到的信息\r\n    reqannounceInfo() {\r\n        //拉取七天信息\r\n        glGame.gameNet.send_msg(\"http.reqSigninWeekInfo\", {}, (route, msg) => {\r\n            this.rewardInfo = msg.signinfo;//今日是否领取奖励\r\n            this.todayIsSign = msg.today_is_sign;\r\n            this.todayBet = msg.today_bet;\r\n            this.todayRecharge = msg.today_recharge;\r\n            this.todayTotalBet = msg.todayTotalBet;\r\n            this.todayTotalRecharge = msg.todayTotalRecharge;\r\n            this.updateUi();\r\n            console.log('signinfo', msg)\r\n        })\r\n\r\n    },\r\n\r\n    initUI() {\r\n        for (let i = 0; i < this.signMax; i++) {\r\n            this.everyday.children[i].getChildByName('receive').active = false;\r\n            this.everyday.children[i].getChildByName('getReceive').active = false;\r\n            this.everyday.children[i].getChildByName('today').active = false;\r\n        }\r\n    },\r\n    updateUi() {\r\n        this.initUI();\r\n        this.signTimes = 0;\r\n        let tiplayout;\r\n\r\n        for (let i = 0; i < this.rewardInfo.length; i++) {\r\n            tiplayout = this.everyday.children[i].getChildByName(\"tiplayout\")\r\n\r\n            //是否已签到\r\n            if (this.rewardInfo[i].is_sign) {\r\n                this.everyday.children[this.signTimes].getChildByName('receive').active = true;\r\n                this.everyday.children[this.signTimes].getChildByName('today').active = false;\r\n                this.everyday.children[this.signTimes].getChildByName('getReceive').active = true;\r\n                this.signTimes++;\r\n            }\r\n            tiplayout.active = true;\r\n            //渲染金币\r\n            let coinframe = tiplayout.getChildByName(\"coinframe\");\r\n            if (this.rewardInfo[i].coin) {\r\n                coinframe.active = true;\r\n                let strCoin = \"\";\r\n                if (this.rewardInfo[i].coin_range.length == 1) {\r\n                    strCoin = this.getFixNumber(this.rewardInfo[i].coin_range[0]);\r\n                } else if (this.rewardInfo[i].coin_range.length == 2) {\r\n                    strCoin = this.getFixNumber(this.rewardInfo[i].coin_range[0]) + \"~\" + this.getFixNumber(this.rewardInfo[i].coin_range[1]);\r\n                }\r\n                coinframe.getChildByName(\"cointip\").getComponent(cc.Label).string = strCoin;\r\n            } else coinframe.active = false;\r\n            //渲染转盘积分\r\n            let turnframe = tiplayout.getChildByName(\"turnframe\");\r\n            if (this.rewardInfo[i].integral) {\r\n                turnframe.active = true;\r\n                let strTurn = \"\";\r\n                if (this.rewardInfo[i].integral_range.length == 1) {\r\n                    strTurn = this.getFixNumber(this.rewardInfo[i].integral_range[0]);\r\n                } else if (this.rewardInfo[i].integral_range.length == 2) {\r\n                    strTurn = this.getFixNumber(this.rewardInfo[i].integral_range[0]) + \"~\" + this.getFixNumber(this.rewardInfo[i].integral_range[1]);\r\n                }\r\n                turnframe.getChildByName(\"turntip\").getComponent(cc.Label).string = strTurn;\r\n            } else turnframe.active = false;\r\n        }\r\n        if (this.signTimes > 6) this.signTimes = 6;\r\n        //今日还没签到\r\n        if (!this.todayIsSign) {\r\n            let today = this.everyday.children[this.signTimes].getChildByName('today');\r\n            today.active = true;\r\n\r\n            let fadeOut = cc.fadeTo(0.75, 50);\r\n            let fadeIn = cc.fadeTo(0.75, 255);\r\n            let delay = cc.delayTime(0.15);\r\n            let seq = cc.sequence(fadeOut, fadeIn, delay);\r\n            today.runAction(cc.repeatForever(seq));\r\n\r\n            this.setButton(this.receiveed, true);\r\n        } else {\r\n            this.setButton(this.receiveed, false);\r\n        }\r\n\r\n        this.lab_hint.node.active = true;\r\n        this.lab_prompt.node.active = true;\r\n        if (this.todayBet && this.todayRecharge) {\r\n            this.lab_hint.string = `今日签到条件：充值金额达到 ${this.getFixNumber(this.todayRecharge)} 元，并且打码量达到 ${this.getFixNumber(this.todayBet)} `;\r\n            this.lab_prompt.string = `今日已充值:${this.getFixNumber(this.todayTotalRecharge)}元   今日打码量:${this.getFixNumber(this.todayTotalBet)}`;\r\n        } else if (this.todayBet || this.todayRecharge) {\r\n            this.lab_hint.string = \"今日签到条件：\"\r\n            this.todayRecharge ? this.lab_hint.string += `充值金额达到 ${this.getFixNumber(this.todayRecharge)}元 ` : \"\";\r\n            this.todayBet ? this.lab_hint.string += `打码量达到 ${this.getFixNumber(this.todayBet)} ` : \"\";\r\n            this.todayRecharge ? this.lab_prompt.string = `今日已充值:${this.getFixNumber(this.todayTotalRecharge)}元` : \"\";\r\n            this.todayBet ? this.lab_prompt.string = `今日打码量:${this.getFixNumber(this.todayTotalBet)}` : \"\";\r\n        } else {\r\n            this.lab_hint.string = \"连续签到天数越多,奖励越丰富哟!\";\r\n            this.lab_prompt.node.active = false;\r\n        }\r\n\r\n        if(this.todayTotalBet >= this.todayBet && this.todayTotalRecharge >= this.todayRecharge) {\r\n            this.lab_hint.string = \"签到条件已达成，可领取签到奖励！\";\r\n            this.lab_prompt.node.active = false;\r\n        }\r\n\r\n        if(this.todayIsSign) {\r\n            this.lab_hint.string = \"连续签到天数越多，奖励越丰富呦！\";\r\n            this.lab_prompt.node.active = false;\r\n        }\r\n    },\r\n\r\n    setButton(btnNode, bState) {\r\n        btnNode.getComponent(cc.Button).interactable = bState;\r\n        if(bState) {\r\n            btnNode.getChildByName(\"img_lingqu\").getComponent(cc.RenderComponent).setMaterial(0, this.normalMaterial);\r\n        } else {\r\n            btnNode.getChildByName(\"img_lingqu\").getComponent(cc.RenderComponent).setMaterial(0, this.grayMaterial);\r\n        }\r\n    },\r\n\r\n    //金币数量或积分\r\n    sevenInfo() {\r\n        glGame.gameNet.send_msg(\"http.reqSignin\", {}, (route, msg) => {\r\n            this.reqannounceInfo();\r\n            let awardlist = [];\r\n            msg.coin != 0 ? awardlist.push({ type: glGame.awardtype.COIN, value: this.getFixNumber(msg.coin) }) : null;\r\n            msg.integral != 0 ? awardlist.push({ type: glGame.awardtype.SCORE, value: this.getFixNumber(msg.integral) }) : null\r\n            glGame.panel.showAwardBox(glGame.tips.SIGNIN.CONGRATULATE, awardlist);\r\n            glGame.user.reqGetCoin();\r\n            glGame.user.ReqRedDot();\r\n        })\r\n\r\n    },\r\n\r\n    // 重写父类按钮点击事件\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"one\": case \"two\": case \"three\": case \"four\": case \"five\":\r\n            case \"six\": case \"seven\":\r\n            case \"receiveed\": this.click_receive(name); break; //领取\r\n            case \"close\": this.click_close(); break;   //关闭\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n\r\n    click_close() {\r\n        glGame.panel.showFirstEnterPanel();\r\n        this.remove();\r\n    },\r\n\r\n    onForbbidden() {\r\n        glGame.user.signinSwitch = 0;\r\n        // glGame.panel.showMsgBox(\"该功能暂未开放\", \"该功能暂未开放\",\r\n        //     () => { this.remove(); });\r\n\r\n        this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(()=> {\r\n            this.remove();\r\n        })));\r\n    },\r\n\r\n    getFixNumber(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    //判断今天星期几，领取后显示相关的奖励\r\n    click_receive(name) {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return\r\n        }\r\n        let draw = false;\r\n        let upDraw = false;\r\n        for (let i = 0; i < this.everyday.childrenCount; i++) {\r\n            if (this.everyday.children[i].name == name) {\r\n                upDraw = this.signTimes > i;\r\n                if ((this.todayIsSign && i == this.signTimes - 1) || (!this.todayIsSign && i == this.signTimes)) {\r\n                    draw = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!draw && name != \"receiveed\") {\r\n            let str = upDraw ? glGame.tips.SIGNIN.HASCHECKED : glGame.tips.SIGNIN.UNREADY;\r\n            glGame.panel.showErrorTip(str);\r\n            return\r\n        }\r\n        if (!this.todayIsSign) {\r\n            this.sevenInfo();\r\n            this.setButton(this.receiveed, false);\r\n        } else {\r\n            glGame.panel.showErrorTip(glGame.tips.SIGNIN.COMETOMORROW);\r\n        }\r\n    },\r\n\r\n    //点击任意位置，关闭界面\r\n    position_recelive() {\r\n        this.node.destroy();\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.FORBIDDEN_SIGN, this);\r\n    },\r\n\r\n});\r\n"]}