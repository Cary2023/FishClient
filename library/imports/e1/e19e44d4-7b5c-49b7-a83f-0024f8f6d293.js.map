{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\getrecord.js"],"names":["glGame","baseclass","extend","properties","now_get_commission","cc","Label","yet_get_commission","history_commission","norecord","Node","infoItem","content","Lab_CurPage","Lab_totalPage","onLoad","CurPage","string","recordData","onClick","name","node","btn_pageupCB","btn_pagedownCB","initUI","pandectdata","data","getFloat","can_receive_extension","received_profit","page_total","setTable","list","ReqPlayerExtensionCountlessFlow","page","page_size","gameNet","send_msg","route","msg","destroyAllChildren","removeAllChildren","count","length","active","hiadShowNode","i","instantiate","parent","getChildByName","getComponent","create_time","teamMembler","number","panel","settingTableLabelColor","getStringState","state","color","getColor","showEffectNode","isBool","value","Number","div","toString","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        now_get_commission: cc.Label,\r\n        yet_get_commission: cc.Label,\r\n        history_commission: cc.Label,\r\n\r\n        norecord: cc.Node,//noneLab\r\n        infoItem: cc.Node,\r\n        content: cc.Node,\r\n        Lab_CurPage: cc.Label,\r\n        Lab_totalPage: cc.Label,\r\n    },\r\n    onLoad() {\r\n        this.CurPage = 1;\r\n        this.Lab_CurPage.string = this.CurPage;\r\n        this.recordData = {};\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_pageup\": this.btn_pageupCB(); break;\r\n            case \"btn_pagedown\": this.btn_pagedownCB(); break;\r\n        }\r\n    },\r\n    initUI(pandectdata, data) {\r\n        this.pandectdata = pandectdata;\r\n        this.recordData[this.CurPage] = data;\r\n        this.now_get_commission.string = this.getFloat(this.pandectdata.data.can_receive_extension);\r\n        this.yet_get_commission.string = this.getFloat(this.pandectdata.data.received_profit);\r\n        this.history_commission.string = this.getFloat(this.pandectdata.data.history_commission);\r\n\r\n        this.Lab_totalPage.string = this.recordData[this.CurPage].page_total == 0 ? 1 : this.recordData[this.CurPage].page_total;\r\n        this.setTable(this.recordData[this.CurPage].list);\r\n    },\r\n    ReqPlayerExtensionCountlessFlow(page = 1, page_size = 8) {\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessFlow', { page: page, page_size: page_size }, (route, msg) => {\r\n            this.recordData[this.CurPage] = msg;\r\n            this.Lab_CurPage.string = page;\r\n            this.setTable(this.recordData[this.CurPage].list)\r\n        })\r\n    },\r\n    setTable(data) {\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        let count = data.length;\r\n        if (count == 0) {\r\n            this.norecord.active = true;\r\n            return;\r\n        }\r\n        this.hiadShowNode(count > 0);\r\n        for (let i = 0; i < count; i++) {\r\n            let infoItem = cc.instantiate(this.infoItem);\r\n            infoItem.parent = this.content;\r\n            infoItem.active = false;\r\n            infoItem.getChildByName(\"bg\").active = i % 2 == 1;\r\n            infoItem.getChildByName(\"time\").getComponent(cc.Label).string = data[i].create_time;\r\n            let teamMembler = infoItem.getChildByName(\"teamMembler\")\r\n            // teamMembler.color = data[i].number < 0 ? glGame.plazaColor.loss : glGame.plazaColor.gain\r\n            teamMembler.getComponent(cc.Label).string = this.getFloat(data[i].number);\r\n            glGame.panel.settingTableLabelColor(teamMembler);\r\n            infoItem.getChildByName(\"state\").getComponent(cc.Label).string = this.getStringState(data[i].state);\r\n            infoItem.getChildByName(\"state\").color = this.getColor(data[i].state);\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n    hiadShowNode(isBool) {\r\n        this.node.getChildByName(\"btn_pageup\").active = isBool;\r\n        this.node.getChildByName(\"pagelayout\").active = isBool;\r\n        this.node.getChildByName(\"btn_pagedown\").active = isBool;\r\n        this.node.getChildByName(\"explain\").active = isBool;\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    getColor(state) {\r\n        let color = cc.color(0x00, 0xff, 0x36);\r\n        switch (state) {\r\n            case 0: case 1: case 4:\r\n                color = cc.color(0x00, 0xff, 0x36);\r\n                break;\r\n            case 2: case 3:\r\n                color = cc.color(0x66, 0xcc, 0xc8);\r\n                break;\r\n            case 5:\r\n            case 6:\r\n                color = cc.color(0x66, 0x90, 0xcc);\r\n                break;\r\n        }\r\n        return color;\r\n    },\r\n    getStringState(state) {\r\n        let color = \"审核中\"\r\n        switch (state) {\r\n            case 0: case 1: case 4:\r\n                color = \"已发放\"\r\n                break;\r\n            case 2: case 3:\r\n                color = \"审核中\"\r\n                break;\r\n            case 5:\r\n                color = \"取消退回\"\r\n                break\r\n            case 6:\r\n                color = \"审核拒绝\"\r\n                break;\r\n        }\r\n        return color;\r\n    },\r\n    btn_pagedownCB() {\r\n        this.CurPage++\r\n        if (this.CurPage > this.Lab_totalPage.string) {\r\n            this.CurPage = this.Lab_totalPage.string\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessFlow(this.CurPage)\r\n    },\r\n    btn_pageupCB() {\r\n        this.CurPage--\r\n        if (this.CurPage < 1) {\r\n            this.CurPage = 1\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessFlow(this.CurPage)\r\n    },\r\n    OnDestroy() {\r\n\r\n    },\r\n});\r\n"]}