{"version":3,"sources":["assets\\frames\\base\\animation.js"],"names":["Animation","resetData","animation","prototype","g_instance","MOVE_TO","MOVE_DOWN","MOVE_LEFT","MOVE_RIGHT","oneStairLisr","twoStairLisr","threeStairList","oneStairTime","twoStairTime","checkInterface","nowNode","bolStair","forEach","element","name","toLowerCase","indexOf","find","openInterface","maskNode","openOneStairList","destroy","scale","glGame","systemclass","convertInterface","cc","size","width","height","nodeMask","getChildByName","old","opacity","getComponent","Widget","enabled","x","visibleSize","view","getVisibleSize","cutAct","moveNum","spawnAct","spawn","moveTo","fadeIn","push","easing","easeElasticOut","delayTime","callFunc","updateAlignment","Number","left","right","top","bottom","emitter","emit","MESSAGE","UI","ACTION_END","runAction","sequence","moveInterface","moveType","_posBegin","_actionBegin","y","console","error","movex","movey","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["let\r\n    Animation = function () {\r\n        this.resetData();\r\n    },\r\n    animation = Animation.prototype,\r\n    g_instance = null;\r\n\r\nanimation.MOVE_TO = 0;\r\nanimation.MOVE_DOWN = 1;\r\nanimation.MOVE_LEFT = 2;\r\nanimation.MOVE_RIGHT = 3;\r\n\r\nanimation.resetData = function () {\r\n    //配置需要做一级界面的滚动的动画 \r\n    //[个人中心,全民推广,活动,余额宝,返水,消息,任务,客服,提现,充值,幸运夺宝,排行榜]\r\n    this.oneStairLisr = [\"userinfo\", \"popularize\", \"announce\",\r\n        \"yubao\", \"backWater\", \"email\", \"Task\",\r\n        \"withdrawal\", \"shop\", \"luckDraw\", \"rank\", 'setting', 'settings'];\r\n    this.twoStairLisr = ['rule', 'help', 'record', 'setting'];//包含这些关键字的加入动效 1 （记录，帮助）详情不算内 预制体 必须带 _\r\n    // TODO 后续游戏统一可使用关键字排查（目前命名相冲突 百人牛牛）\r\n    this.threeStairList = [\"hh_trendChartPop\", \"hh_playerList\", \"bjl_playerList\", \"bjl_trendChartPop\"];   //子游戏内需要播放动画效果的预支\r\n    this.oneStairTime = 0.4;\r\n    this.twoStairTime = 0.2;\r\n};\r\n\r\nanimation.checkInterface = function (nowNode) {\r\n    let bolStair = false;\r\n    //排查第二级动画播放预支\r\n    this.twoStairLisr.forEach(element => {\r\n        if (nowNode.name.toLowerCase().indexOf(\"detail\") == -1) {\r\n            if (nowNode.name.toLowerCase().indexOf(element) != -1 && nowNode.name.indexOf(\"_\") != -1) bolStair = true;\r\n        }\r\n    })\r\n    return this.oneStairLisr.find(name => name == nowNode.name) || this.threeStairList.find(name => name == nowNode.name) || bolStair;\r\n}\r\n\r\n\r\n/**\r\n * @param {object} nowNode 界面是否执行动画效果\r\n * @param {object} maskNode 遮罩界面传递\r\n * @exports 校验通用一级界面是否成功播放\r\n */\r\nanimation.openInterface = function (nowNode, maskNode) {\r\n    // 校验通用一级界面是否成功播放\r\n    if (this.openOneStairList(nowNode, maskNode)) return true;\r\n    if (maskNode) maskNode.destroy();\r\n    return false;\r\n}\r\n\r\n/**\r\n * @param {object} nowNode 界面是否执行动画效果\r\n * @param {object} maskNode 遮罩界面传递\r\n * @returns {boolean} 是否属于一级界面\r\n */\r\nanimation.openOneStairList = function (nowNode, maskNode) {\r\n    let bolStair = this.checkInterface(nowNode);\r\n    if (bolStair) {\r\n        // 动画开始准备\r\n        nowNode.scale = glGame.systemclass.convertInterface(cc.size(nowNode.width, nowNode.height));\r\n        let nodeMask = nowNode.getChildByName(\"mask\");\r\n        let old = 0;\r\n        if (nodeMask) {\r\n            old = nodeMask.opacity + \"\";\r\n            nodeMask.opacity = 0;\r\n        }\r\n        if (nowNode.getComponent(cc.Widget)) {\r\n            nowNode.getComponent(cc.Widget).enabled = false\r\n        }\r\n        nowNode.x = nowNode.width;\r\n        let visibleSize = cc.view.getVisibleSize();\r\n        // 进入动画环节\r\n        let cutAct = [], moveNum = 100;\r\n        let spawnAct = cc.spawn(cc.moveTo(this.oneStairTime / 10 * 3, visibleSize.width / 2 - moveNum, visibleSize.height / 2), cc.fadeIn(this.oneStairTime / 5))\r\n        cutAct.push(spawnAct);\r\n        cutAct.push(cc.moveTo(this.oneStairTime / 10 * 7, visibleSize.width / 2, visibleSize.height / 2).easing(cc.easeElasticOut(2.0)));\r\n        cutAct.push(cc.delayTime(0.15));\r\n        cutAct.push(cc.callFunc(() => {\r\n            if (nowNode.getComponent(cc.Widget)) {\r\n                nowNode.getComponent(cc.Widget).enabled = true;\r\n                nowNode.getComponent(cc.Widget).updateAlignment();\r\n            }\r\n            if (nodeMask) {\r\n                nodeMask.opacity = Number(old);\r\n                nodeMask.getComponent(cc.Widget).left = 0;\r\n                nodeMask.getComponent(cc.Widget).right = 0;\r\n                nodeMask.getComponent(cc.Widget).top = 0;\r\n                nodeMask.getComponent(cc.Widget).bottom = 0;\r\n                nodeMask.getComponent(cc.Widget).enabled = true;\r\n                nodeMask.getComponent(cc.Widget).updateAlignment();\r\n            }\r\n            if (maskNode) maskNode.destroy();\r\n            glGame.emitter.emit(`${nowNode.name}${MESSAGE.UI.ACTION_END}`)\r\n        }));\r\n        if (nodeMask) {\r\n            nodeMask.opacity = Number(old);\r\n            nodeMask.getComponent(cc.Widget).left -= moveNum * 2;\r\n            nodeMask.getComponent(cc.Widget).right -= moveNum * 2;\r\n            nodeMask.getComponent(cc.Widget).enabled = true;\r\n            nodeMask.getComponent(cc.Widget).updateAlignment();\r\n        }\r\n        nowNode.runAction(cc.sequence(cutAct));\r\n    }\r\n    return !!bolStair;\r\n}\r\n\r\n\r\n/**\r\n * @param {object} nowNode 界面是否执行动画效果\r\n * @param {object} maskNode 遮罩界面传递\r\n * @param {object} moveType 界面出现方向\r\n * @returns {boolean} 是否属于一级界面\r\n */\r\nanimation.moveInterface = function (nowNode, maskNode, moveType) {\r\n    // 动画开始准备\r\n    nowNode.scale = glGame.systemclass.convertInterface(cc.size(nowNode.width, nowNode.height));\r\n    let nodeMask = nowNode.getChildByName(\"mask\");\r\n    let old = 0;\r\n    if (nodeMask) {\r\n        old = nodeMask.opacity + \"\";\r\n        nodeMask.opacity = 0;\r\n    }\r\n    if (nowNode.getComponent(cc.Widget)) {\r\n        nowNode.getComponent(cc.Widget).enabled = false\r\n    }\r\n    this._posBegin(nowNode, moveType);\r\n    let visibleSize = cc.view.getVisibleSize();\r\n    // 进入动画环节\r\n    let cutAct = [], moveNum = 100;\r\n    let spawnAct = cc.spawn(this._actionBegin(moveType, moveNum), cc.fadeIn(this.oneStairTime / 5))\r\n    cutAct.push(spawnAct);\r\n    cutAct.push(cc.moveTo(this.oneStairTime / 10 * 7, visibleSize.width / 2, visibleSize.height / 2).easing(cc.easeElasticOut(2.0)));\r\n    cutAct.push(cc.delayTime(0.15));\r\n    cutAct.push(cc.callFunc(() => {\r\n        if (nowNode.getComponent(cc.Widget)) {\r\n            nowNode.getComponent(cc.Widget).enabled = true;\r\n            nowNode.getComponent(cc.Widget).updateAlignment();\r\n        }\r\n        if (nodeMask) {\r\n            nodeMask.opacity = Number(old);\r\n            nodeMask.getComponent(cc.Widget).left = 0;\r\n            nodeMask.getComponent(cc.Widget).right = 0;\r\n            nodeMask.getComponent(cc.Widget).top = 0;\r\n            nodeMask.getComponent(cc.Widget).bottom = 0;\r\n            nodeMask.getComponent(cc.Widget).enabled = true;\r\n            nodeMask.getComponent(cc.Widget).updateAlignment();\r\n        }\r\n        if (maskNode) maskNode.destroy();\r\n        glGame.emitter.emit(`${nowNode.name}${MESSAGE.UI.ACTION_END}`)\r\n    }));\r\n    nowNode.runAction(cc.sequence(cutAct));\r\n    if (nodeMask) {\r\n        nodeMask.opacity = Number(old);\r\n        nodeMask.getComponent(cc.Widget).left -= moveNum * 2;\r\n        nodeMask.getComponent(cc.Widget).right -= moveNum * 2;\r\n        nodeMask.getComponent(cc.Widget).top -= moveNum * 2;\r\n        nodeMask.getComponent(cc.Widget).bottom -= moveNum * 2;\r\n        nodeMask.getComponent(cc.Widget).enabled = true;\r\n        nodeMask.getComponent(cc.Widget).updateAlignment();\r\n    }\r\n}\r\n\r\n/**\r\n * 获取界面坐标初始化位置\r\n * @param {number} moveType 移动类型\r\n * \r\n */\r\nanimation._posBegin = function (nowNode, moveType) {\r\n    switch (moveType) {\r\n        case this.MOVE_TO:\r\n            nowNode.y = nowNode.height;\r\n            break;\r\n        case this.MOVE_DOWN:\r\n            nowNode.y = -nowNode.height;\r\n            break;\r\n        case this.MOVE_LEFT:\r\n            nowNode.x = -nowNode.width;\r\n            break;\r\n        case this.MOVE_RIGHT:\r\n            nowNode.x = nowNode.width;\r\n            break;\r\n        default: console.error(\"moveType error\"); break;\r\n    }\r\n}\r\n\r\n/**\r\n * 获取初始化抖动位置\r\n * @param {number} moveType 移动类型\r\n * @param {number} moveNum  移动距离\r\n */\r\nanimation._actionBegin = function (moveType, moveNum) {\r\n    let movex = 0, movey = 0;\r\n    switch (moveType) {\r\n        case this.MOVE_TO:\r\n            movey -= moveNum;\r\n            break;\r\n        case this.MOVE_DOWN:\r\n            movey += moveNum;\r\n            break;\r\n        case this.MOVE_LEFT:\r\n            movex += moveNum;\r\n            break;\r\n        case this.MOVE_RIGHT:\r\n            movex -= moveNum;\r\n            break;\r\n        default: console.error(\"moveType error\"); break;\r\n    }\r\n    let visibleSize = cc.view.getVisibleSize();\r\n    return cc.moveTo(this.oneStairTime / 10 * 3, visibleSize.width / 2 + movex, visibleSize.height / 2 + movey);\r\n}\r\n\r\n\r\nmodule.exports = function () {\r\n    if (!g_instance) {\r\n        g_instance = new Animation();\r\n    }\r\n    return g_instance;\r\n};"]}