{"version":3,"sources":["assets\\frames\\openInstall\\OpenInstall.js"],"names":["openinstall","installCallback","appData","wakeupCallback","getInstall","s","callback","fun_error","cc","sys","OS_ANDROID","os","console","log","jsb","reflection","callStaticMethod","OS_IOS","_installCallback","registerWakeUpHandler","reportRegister","reportEffectPoint","pointId","pointValue","channelCode","bindData","key","_wakeupCallback","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nvar openinstall= {\r\n\r\n    installCallback(appData){\r\n    },\r\n\r\n    wakeupCallback(appData){\r\n    },\r\n    // 初始化\r\n    getInstall: function (s, callback) {\r\n        this.installCallback = callback;\r\n        this.fun_error = null;\r\n        if (cc.sys.OS_ANDROID == cc.sys.os) {\r\n            console.log(\"调用java getInstall============================\")\r\n            this.fun_error = jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\r\n                \"getInstall\", \"(I)Z\", s);\r\n        } else if(cc.sys.OS_IOS == cc.sys.os){\r\n            this.fun_error = jsb.reflection.callStaticMethod(\"IOSOpenInstallBridge\",\"getInstall:\",s);\r\n        }\r\n\r\n        console.log(\"js to openinstall this.fun_error\", this.fun_error)\r\n        if (!this.fun_error) {\r\n            console.log(\"js to openinstall 方法不存或者调用出错\")\r\n            this._installCallback({\"channelCode\":\"\",\"bindData\":\"\"})\r\n        }\r\n    },\r\n    // 唤醒\r\n    registerWakeUpHandler: function (callback) {\r\n        this.wakeupCallback = callback;\r\n        if (cc.sys.OS_ANDROID == cc.sys.os) {\r\n            console.log(\"调用java registerWakeUpHandler============================\")\r\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\r\n                \"registerWakeup\", \"()V\");\r\n        } else if(cc.sys.OS_IOS == cc.sys.os){\r\n            jsb.reflection.callStaticMethod(\"IOSOpenInstallBridge\",\"registerWakeUpHandler\");\r\n        }\r\n    },\r\n\r\n    reportRegister: function () {\r\n        if (cc.sys.OS_ANDROID == cc.sys.os) {\r\n            jsb.reflection.callStaticMethod(\"com/fm/openinstall/OpenInstall\",\r\n                \"reportRegister\", \"()V\");\r\n        } else if(cc.sys.OS_IOS == cc.sys.os){\r\n            jsb.reflection.callStaticMethod(\"IOSOpenInstallBridge\",\"reportRegister\");\r\n        }\r\n    },\r\n\r\n    reportEffectPoint: function (pointId, pointValue) {\r\n        if (cc.sys.OS_ANDROID == cc.sys.os) {\r\n            jsb.reflection.callStaticMethod(\"com/fm/openinstall/OpenInstall\",\r\n                \"reportEffectPoint\", \"(Ljava/lang/String;J)V\", pointId, pointValue);\r\n        } else if(cc.sys.OS_IOS == cc.sys.os){\r\n            jsb.reflection.callStaticMethod(\"IOSOpenInstallBridge\",\"reportEffectPoint:Value:\",pointId,pointValue);\r\n        }\r\n    },\r\n\r\n    _installCallback: function (appData) {\r\n        console.log(\"安装参数：\", appData.channelCode, appData.bindData);\r\n        for (let key in appData.bindData) {\r\n            console.log(\"installCallback\", key, appData.bindData[key]);\r\n        }\r\n        this.installCallback(appData);\r\n    },\r\n\r\n    _wakeupCallback: function (appData) {\r\n        console.log(\"唤醒参数:\", appData.channelCode, appData.bindData);\r\n        for (let key in appData.bindData) {\r\n            console.log(\"wakeupCallback\", key, appData.bindData[key]);\r\n        }\r\n        this.wakeupCallback(appData);\r\n    },\r\n\r\n};\r\nmodule.exports = openinstall;\r\n"]}