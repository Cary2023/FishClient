{"version":3,"sources":["assets\\modules\\public\\script\\shop\\shoprecord.js"],"names":["rechargeType","rechargestate","glGame","baseclass","extend","properties","content","cc","Node","Item","curPage","Label","totalPage","onLoad","page","record","color","ReqPayOrderList","string","setTable","console","log","gameNet","send_msg","pageSize","route","msg","result","data","pageTotal","onClick","name","node","btn_closeCb","upPage","downPage","error","destroyAllChildren","removeAllChildren","getChildByName","active","length","i","instantiate","parent","getComponent","orderSn","getFloat","rechargeMoney","panel","settingTableLabelColor","rechargeTime","rechargeState","showEffectNode","value","Number","div","toString","remove","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["const rechargeType = {\r\n    1:\"代理充值\",\r\n    2:\"专享闪付\",\r\n    3:\"快捷支付\",\r\n    4:\"支付宝充值\",\r\n    5:\"微信充值\",\r\n    6:\"银行卡充值\",\r\n    7:\"云闪付支付\",\r\n    100:\"其他\"\r\n}\r\nconst rechargestate = {\r\n    2:\"处理中\",\r\n    3:\"处理中\",\r\n    4:\"充值成功\",\r\n    6:\"充值失败\",\r\n    7:\"充值成功\",\r\n    10:\"充值成功\",\r\n}\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        content:cc.Node,\r\n        Item:cc.Node,\r\n        curPage:cc.Label,\r\n        totalPage:cc.Label\r\n    },\r\n    onLoad() {\r\n        this.page = 1\r\n        this.record = {};\r\n        this.color = {\r\n            2:cc.color(49,214,255),\r\n            3:cc.color(49,214,255),\r\n            4:cc.color(70,255,0),\r\n            6:cc.color(255,0,0),\r\n            7:cc.color(70,255,0),\r\n        }\r\n       this.ReqPayOrderList();\r\n    },\r\n    ReqPayOrderList(){\r\n        if (this.record[this.page]) {\r\n            this.curPage.string = this.page;\r\n            this.setTable(this.record[this.page]);\r\n            return\r\n        }\r\n        console.log(\"请求当前的页数\",this.page)\r\n        glGame.gameNet.send_msg('http.ReqPayOrderList', {page: this.page, pageSize: 8}, (route, msg) => {\r\n            this.record[this.page] = msg.result.data;\r\n            this.curPage.string = this.page;\r\n            this.totalPage.string = msg.result.pageTotal\r\n            this.setTable(msg.result.data)\r\n            console.log(\"这是创建订单的记录\", msg);\r\n        })\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.btn_closeCb(); break;\r\n            case \"btn_upPage\": this.upPage(); break;\r\n            case \"btn_downPage\": this.downPage(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    setTable(data){\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        this.node.getChildByName(\"img_wujilu\").active = data.length == 0;\r\n        this.node.getChildByName(\"pageLayout\").active = data.length > 0;\r\n        this.node.getChildByName(\"btn_upPage\").active = data.length > 0;\r\n        this.node.getChildByName(\"btn_downPage\").active = data.length > 0;\r\n        this.node.getChildByName(\"bg\").getChildByName(\"tip\").active = data.length > 0;\r\n        for(let i=0;i<data.length;i++){\r\n            let Item = cc.instantiate(this.Item);\r\n            Item.parent = this.content;\r\n            Item.active = false;\r\n            Item.getChildByName(\"number\").getComponent(cc.Label).string = data[i].orderSn;\r\n            Item.getChildByName(\"coin\").getComponent(cc.Label).string = `${this.getFloat(data[i].rechargeMoney)}元`;\r\n            glGame.panel.settingTableLabelColor(Item.getChildByName(\"coin\"));\r\n            Item.getChildByName(\"time\").getComponent(cc.Label).string = data[i].rechargeTime;\r\n            Item.getChildByName(\"type\").getComponent(cc.Label).string = rechargeType[data[i].rechargeType]?rechargeType[data[i].rechargeType]:'其他';\r\n            Item.getChildByName(\"state\").getComponent(cc.Label).string = rechargestate[data[i].rechargeState];\r\n            Item.getChildByName(\"state\").color = this.color[data[i].rechargeState];\r\n            Item.getChildByName(\"bg\").active = i%2 != 0\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    upPage() {\r\n        if (this.page - 1 < 1) {\r\n            return\r\n        }\r\n        this.page--;\r\n        this.ReqPayOrderList();\r\n    },\r\n    downPage() {\r\n        if (this.page + 1 > Number(this.totalPage.string)) {\r\n            return\r\n        }\r\n        this.page++;\r\n        this.ReqPayOrderList();\r\n    },\r\n    btn_closeCb() {\r\n        this.remove();\r\n    },\r\n    OnDestroy() {\r\n\r\n    }\r\n});"]}