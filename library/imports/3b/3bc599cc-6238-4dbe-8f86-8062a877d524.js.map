{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\prefab\\nfish_turntable.js"],"names":["CONST","require","glGame","baseclass","extend","properties","turntablePosList","cc","Node","turntable","mask_turntable","turntableMask","turntableBg","turntableBg2","spine_IdleEffect","spine_showEffect","moneyEffect_Atlas","displayName","tooltip","type","SpriteAtlas","onLoad","logic","getInstance","isInitIng","initTurntableView","res","Normal","node","opacity","active","i","childrenCount","heightLine","children","getChildByName","getComponent","BlockInputEvents","enabled","data","rewardArray","sort","a","b","reward","rewardMultiple","warn","initTurntableData","playSpine","SpineName","TurnTableShowTime","BoomHighTime","ShowTimeOver","NotOpacity","NotScale","NormalOpacity","scale","stopAllActions","scheduleOnce","TurnTableIdle","starTurn","MaxIcon","lab_number","Label","string","getFloat","getIndex","rewardIndex","NormalScale","angle","index","times","RunTime","WaitTime","emitter","emit","clientEvent","fishSound","runAction","sequence","delayTime","rotateBy","easing","easeExponentialOut","callFunc","flyGoldEffect","glodEndPosPre","getIsRotation","targetPosition","seatNum","position","Multiple","MaxCoin","CoinSaclc","effectCoin","Math","ceil","rewardGold","StartName","endName","plyTime","isHaveZero","speed","plyedDestroy","isRandomPly","RandomOffsexX","RandomOffsexY","RandomMinY","OneDelayTime","ScaleToTime","BezierToTime","ScaleToArg","FadeToTime","MoveToTime","EndOpacity","glodStartPosPre","startPos","parseInt","random","ui_CoinEffect","creatorEffect","x","y","parent","playName","initEffect","addChild","upPos","v2","Seat","LeftTop","RightTop","bounceAct1","spawn","fadeTo","moveTo","bounceAct2","bezierPoint","act","scaleTo","bezierTo","endGlodTime","TurntableFadeTo","indexNode","RepeatTimes","SubTimes","Number","currentCoin","schedule","RepeatBuiBuiBuiTimes","isYuRuyiRuning","Not","addGoldEffect","_easeExponentialOutObj","dt","pow","reverse","_easeExponentialInObj","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["//玉如意转盘\r\nlet CONST = require(\"nfishConst\");\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        turntablePosList: cc.Node,\r\n        turntable: cc.Node,\r\n        mask_turntable: cc.Node,\r\n        turntableMask: cc.Node,\r\n        turntableBg:cc.Node,\r\n        turntableBg2:cc.Node,\r\n        spine_IdleEffect:cc.Node,\r\n        spine_showEffect:cc.Node,\r\n        //金币银币漂移动画 图集\r\n        moneyEffect_Atlas: {\r\n            default: null,\r\n            displayName: \"moneyEffect_Atlas\",\r\n            tooltip: \"金币银币漂移动画 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n    },\r\n    onLoad(){\r\n        this.logic = require(\"nfishlogic\").getInstance();//数据中心\r\n        this.isInitIng = false;\r\n    },\r\n    //启动转盘\r\n    initTurntableView(res){\r\n        if(res == null || this.isInitIng){\r\n            return;\r\n        }\r\n        const Normal = 255;\r\n        this.node.opacity = Normal;\r\n        this.node.active = true;\r\n\r\n        for (let i = 0; i < this.turntable.childrenCount; i++) {\r\n            let heightLine = this.turntable.children[i].getChildByName(\"heightLine\");\r\n            heightLine.active = false;\r\n        }\r\n\r\n        this.turntableMask.getComponent(cc.BlockInputEvents).enabled = true;\r\n        this.isInitIng = true;\r\n        this.node.active = true;\r\n        this.data = res.rewardArray.sort(function(a,b){return a-b});//奖励列表（聚宝盆、玉如意）\r\n        this.reward = res.rewardMultiple;//最总奖励倍数（聚宝盆、玉如意）\r\n        cc.warn(\">>>> 玉如意 转盘 data  \",this.data,\" reward \",this.reward);\r\n\r\n        this.initTurntableData();\r\n\r\n        this.logic.playSpine(this.spine_showEffect,false,true,CONST.SpineName.TurnTableShowTime);\r\n\r\n        const BoomHighTime = 0.8;\r\n        const ShowTimeOver = 0.8;\r\n\r\n        const NotOpacity = 0;\r\n        const NotScale = 0;\r\n        const NormalOpacity = 255;\r\n\r\n        this.turntableBg.scale = NotScale;\r\n        this.turntableBg2.scale = NotScale;\r\n        this.turntable.scale = NotScale;\r\n        this.mask_turntable.scale = NotScale;\r\n        this.turntableBg.opacity = NotOpacity;\r\n        this.turntableBg2.opacity = NotOpacity;\r\n        this.turntable.opacity = NotOpacity;\r\n        this.mask_turntable.opacity = NotOpacity;\r\n\r\n        this.spine_IdleEffect.stopAllActions();\r\n        this.spine_IdleEffect.opacity = NotOpacity;\r\n\r\n        this.scheduleOnce(()=>{\r\n            this.spine_IdleEffect.opacity = NormalOpacity;\r\n            this.logic.playSpine(this.spine_IdleEffect,true,false,CONST.SpineName.TurnTableIdle);\r\n        },BoomHighTime);\r\n\r\n        this.scheduleOnce(()=>{\r\n            this.starTurn(res);\r\n            this.isInitIng = false;\r\n        },ShowTimeOver);\r\n    },\r\n    //初始化转盘上面的数字\r\n    initTurntableData() {\r\n        let MaxIcon = 8;\r\n        for (let i = 0; i < MaxIcon; i++) {\r\n            let lab_number = this.turntable.getChildByName(i+\"\").getComponent(cc.Label);\r\n            lab_number.string = this.logic.getFloat(this.data[i]);\r\n        }\r\n    },\r\n    //传入获奖结果获得转盘的index\r\n    getIndex(reward) {\r\n        let MaxIcon = 8;\r\n        for (let i = 0; i < MaxIcon; i++) {\r\n            let lab_number = this.turntable.getChildByName(i+\"\").getComponent(cc.Label);\r\n            let rewardIndex = lab_number.string;\r\n            if (rewardIndex == this.logic.getFloat(reward)) {\r\n                switch (i) {//根据图片金币大小种类规则来\r\n                    case 6 :\r\n                        return 0;\r\n                    case 1 :\r\n                        return 1;\r\n                    case 5 :\r\n                        return 2;\r\n                    case 3 :\r\n                        return 3;\r\n                    case 4 :\r\n                        return 4;\r\n                    case 0 :\r\n                        return 5;\r\n                    case 7 :\r\n                        return 6;\r\n                    case 2 :\r\n                        return 7;\r\n\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //开始转动\r\n    starTurn(res) {\r\n        const NormalScale = 1;\r\n        const NormalOpacity = 255;\r\n\r\n        this.turntable.angle = 0;\r\n        this.mask_turntable.angle = 0;\r\n        let index = this.getIndex(this.reward);\r\n        let times = 3;\r\n        let angle = 360 - index * 45 + 360 * times;\r\n\r\n        this.node.stopAllActions();\r\n        this.turntableBg.opacity = NormalOpacity;\r\n        this.turntableBg2.opacity = NormalOpacity;\r\n        this.turntable.opacity = NormalOpacity;\r\n        this.mask_turntable.opacity = NormalOpacity;\r\n\r\n        this.turntableBg.scale = NormalScale;\r\n        this.turntableBg2.scale = NormalScale;\r\n        this.turntable.scale = NormalScale;\r\n        this.mask_turntable.scale = NormalScale;\r\n\r\n        this.turntableBg.stopAllActions();\r\n        this.turntableBg2.stopAllActions();\r\n        this.turntable.stopAllActions();\r\n\r\n        const RunTime = 5;\r\n        const WaitTime = 1;\r\n\r\n        this.scheduleOnce(()=>{\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"userYuRuYi\");//玉如意转盘使用\r\n        },1);\r\n        this.turntable.runAction(cc.sequence(\r\n            cc.delayTime(WaitTime),\r\n            cc.rotateBy(RunTime, angle).easing(this.easeExponentialOut()),\r\n            cc.delayTime(0.6),\r\n            cc.callFunc(() => {\r\n                this.flyGoldEffect(res,index);\r\n            })\r\n        ))\r\n\r\n        this.mask_turntable.stopAllActions();\r\n        this.mask_turntable.runAction(\r\n            cc.sequence(\r\n                cc.delayTime(WaitTime),\r\n                cc.rotateBy(RunTime, angle).easing(this.easeExponentialOut())\r\n            )\r\n        )\r\n    },\r\n    //漂移金币动画\r\n    flyGoldEffect(res,index){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"yuRuGet\");//玉如意获得\r\n        let glodEndPosPre  = this.logic.getIsRotation() ? \"glodEndPosR\" : \"glodEndPos\";\r\n        let targetPosition = this.turntablePosList.getChildByName(glodEndPosPre + res.seatNum).position;\r\n        const Multiple     = 100;\r\n        const MaxCoin      = 70;//最大数量\r\n        const CoinSaclc    = 3;\r\n        let effectCoin     = Math.ceil(res.rewardGold/Multiple)*CoinSaclc;\r\n        if(effectCoin > MaxCoin){\r\n            effectCoin = MaxCoin;\r\n        }\r\n        const StartName = 0;\r\n        const endName   = 9;\r\n        const plyTime   = 8;\r\n        const isHaveZero    = false;\r\n        const speed         = 0.035;\r\n        const plyedDestroy  = false;\r\n        const isRandomPly   = 1;\r\n\r\n        const RandomOffsexX  = 30;\r\n        const RandomOffsexY  = 50;\r\n        const RandomMinY     = 20;\r\n\r\n        const OneDelayTime   = 0.01;\r\n        const ScaleToTime    = 0.3;\r\n        const BezierToTime   = 0.5;\r\n        const ScaleToArg     = 0.8;\r\n        const FadeToTime    = 0.1;\r\n        const MoveToTime    = 0.15;\r\n        const EndOpacity    = 255;\r\n\r\n        let glodStartPosPre = this.logic.getIsRotation() ? \"glodStartPosR\" : \"glodStartPos\";\r\n        for (let i=0;i<effectCoin;i++){\r\n            let startPos          = this.turntablePosList.getChildByName(glodStartPosPre + parseInt(Math.random() * 5 +1)).position;\r\n            let ui_CoinEffect     = this.logic.creatorEffect();\r\n            ui_CoinEffect.x       = startPos.x;\r\n            ui_CoinEffect.y       = startPos.y;\r\n            ui_CoinEffect.active  = true;\r\n            ui_CoinEffect.parent  = null;\r\n            ui_CoinEffect.opacity = 0;\r\n            let playName          = \"gold\";\r\n\r\n            ui_CoinEffect.getComponent(\"nfish_MovieClip\").initEffect(this.moneyEffect_Atlas,playName,StartName,endName,plyTime,isHaveZero,speed,plyedDestroy,null,isRandomPly);\r\n            this.node.addChild(ui_CoinEffect);\r\n            let upPos         = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y + Math.random() * RandomOffsexY + RandomMinY );\r\n\r\n            if(res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop){\r\n                upPos         = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y - ( Math.random() * RandomOffsexY + RandomMinY ));\r\n            }\r\n            let bounceAct1    = cc.spawn(cc.fadeTo(FadeToTime,EndOpacity),cc.moveTo(MoveToTime,ui_CoinEffect.position));\r\n            let bounceAct2    = cc.moveTo(MoveToTime,upPos);\r\n            let bezierPoint   = cc.v2(targetPosition.x,ui_CoinEffect.position.y);\r\n            let act           = cc.spawn(cc.scaleTo(ScaleToTime,ScaleToArg,ScaleToArg),cc.bezierTo(BezierToTime,[upPos,bezierPoint,cc.v2(targetPosition.x,targetPosition.y)]));\r\n\r\n            ui_CoinEffect.runAction(cc.sequence(cc.delayTime(i*OneDelayTime),bounceAct1,bounceAct2,act));\r\n        }\r\n\r\n        let endGlodTime       = 2.7;//最后一个金币漂移的时间\r\n        const TurntableFadeTo = 0.6;\r\n\r\n        this.turntableBg.stopAllActions();\r\n        this.turntableBg2.stopAllActions();\r\n        this.turntable.stopAllActions();\r\n        this.mask_turntable.stopAllActions();\r\n        this.spine_IdleEffect.stopAllActions();\r\n\r\n        let indexNode;\r\n        switch (index) {//根据图片金币大小种类规则来\r\n            case 0 :\r\n                indexNode = 6;\r\n                break;\r\n            case 1 :\r\n                indexNode = 1;\r\n                break;\r\n            case 2 :\r\n                indexNode = 5;\r\n                break;\r\n            case 3 :\r\n                indexNode = 3;\r\n                break;\r\n            case 4 :\r\n                indexNode = 4;\r\n                break;\r\n            case 5 :\r\n                indexNode = 0;\r\n                break;\r\n            case 6 :\r\n                indexNode = 7;\r\n                break;\r\n            case 7 :\r\n                indexNode = 2;\r\n                break;\r\n        }\r\n\r\n        let lab_number = this.turntable.getChildByName(indexNode+\"\").getComponent(cc.Label);\r\n        let heightLine = this.turntable.getChildByName(indexNode+\"\").getChildByName(\"heightLine\");\r\n        const RepeatTimes = 14;\r\n        const SubTimes = Math.ceil(Number(lab_number.string)/RepeatTimes);\r\n        let currentCoin = Number(lab_number.string);\r\n        //读数消失\r\n        this.schedule(()=>{\r\n            currentCoin -= SubTimes;\r\n            if(currentCoin <= 0){\r\n                lab_number.string = \"0\";\r\n            }else{\r\n                lab_number.string = currentCoin + \"\";\r\n            }\r\n        },0.1,RepeatTimes-1);\r\n\r\n        const RepeatBuiBuiBuiTimes = 4;\r\n        this.schedule(()=>{\r\n            heightLine.active = !heightLine.active;\r\n        },0.3,RepeatBuiBuiBuiTimes-1);\r\n\r\n        this.turntableBg.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.fadeTo(TurntableFadeTo,0),cc.callFunc(()=>{\r\n            this.logic.isYuRuyiRuning = false;\r\n            this.turntableMask.getComponent(cc.BlockInputEvents).enabled = false;\r\n            const Not = 0;\r\n            this.node.opacity = Not;\r\n            this.node.active = false;\r\n            if(this.logic.seatNum == res.seatNum){\r\n                glGame.emitter.emit(CONST.clientEvent.addGoldEffect,res);\r\n            }\r\n        })));\r\n\r\n        this.turntableBg2.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.fadeTo(TurntableFadeTo,0)));\r\n        this.turntable.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.fadeTo(TurntableFadeTo,0)));\r\n        this.mask_turntable.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.fadeTo(TurntableFadeTo,0)));\r\n        this.spine_IdleEffect.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.fadeTo(TurntableFadeTo,0)));\r\n    },\r\n\r\n    easeExponentialOut() {\r\n        let _easeExponentialOutObj = {\r\n            easing: function (dt) {\r\n                return (-(Math.pow(2, -10 * dt)) + 1);\r\n            },\r\n            reverse: function () {\r\n                return _easeExponentialInObj;\r\n            }\r\n        }\r\n        return _easeExponentialOutObj;\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.logic = null;\r\n    }\r\n});\r\n"]}