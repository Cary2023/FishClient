{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\pandect.js"],"names":["glGame","baseclass","extend","properties","scalecommission","cc","Prefab","activemember","mylogicID","Label","myName","myhead","Node","myVipLevel","lb_daili","lb_rebate","commission","pDirectCommission","pContributeSubCommission","directAchievement","teamAchievement","yesterdayCommission","yDirectCommission","yContributeSubCommission","yDirectAchievement","yTeamAchievement","teamEffectiveNumber","directNumber","directNumberNow","subNumber","subNumberNow","effectiveNumber","historyCommission","canReceiveExtension","btn_validaward","node_QRcode","save_QRcode","node_QRcodeScreenshot","QRcodeCamera","Camera","onLoad","emitter","on","activeRedclose","isAftetrDraw","director","once","Director","EVENT_AFTER_DRAW","onClick","name","node","getbrokerageCB","brokerage","validaward","sharefriend","sharefriendscircle","copyCB","saveqrcode","getChildByName","active","initUI","pandectdata","ruleDetaildata","string","user","get","panel","showHeadImage","reward_red_dot","data","achievement","exp","length","level","getFloat","reward","i","direct_commission","sub_commission","direct_achievement","yesterday_commission","yesterday_direct_commission","yesterday_sub_commission","yesterday_direct_achievement","yesterday_achievement","effective_number","direct_number","new_direct_number","sub_number","new_sub_number","direct_effective_number","history_commission","can_receive_extension","reward_show","initShareQRcodeUI","value","Number","div","toString","ReqAccountsShare","gameNet","send_msg","route","msg","extract_limit","showMsgBox","tips","POPULARIZE","MINLIMIT","format","mode","strTitle","CONGRATULATE","showAwardBox","type","awardtype","COIN","APPLYSUCCESS","ReqRedDot","reqGetCoin","emit","showChildPanel","parent","script","getComponent","initCode","isEnableHotUpdate","initCodeScreenshot","qrcode","QRCode","QRErrorCorrectLevel","H","addData","promo_url","make","ctx","Graphics","tileW","width","getModuleCount","tileH","height","row","col","isDark","fillColor","Color","BLACK","WHITE","w","Math","ceil","floor","h","rect","round","fill","sys","isNative","isLoginSelect","checkWeChatApp","share_config","WX_SHARE_TYPE","platform","shareTotWX","WX_SHARE_TITLE","WX_SHARE_INFO","WX_SHARE_JUMP_URL","WX_SHARE_IMG_URL","shareImage","servercfg","turnOtherApp","copyToClip","COPYLINKSUCCESS","getQrCodePic","console","error","texture","RenderTexture","initWithSize","targetTexture","alignWithScreen","orthoSize","render","readPixels","fileName","fileType","filePath","jsb","fileUtils","getWritablePath","saveImageData","saveToLocal","canvas","document","createElement","getContext","rowBytes","srow","imageData","createImageData","start","putImageData","str","toDataURL","img","Image","onload","urlData","arr","split","mime","match","bytes","dataURItoBlob","textFileAsBlob","Blob","downloadLink","download","innerHTML","window","webkitURL","href","createObjectURL","URL","onclick","destroyClickedElement","style","display","body","appendChild","click","position","setAttribute","src","isWxAppInstalled","CANTFINDWX","base64Data","byteString","indexOf","atob","unescape","ia","Uint8Array","charCodeAt","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        scalecommission: cc.Prefab,\r\n        activemember: cc.Prefab,\r\n        //myinfo\r\n        mylogicID: cc.Label,\r\n        myName: cc.Label,\r\n        myhead: cc.Node,\r\n        myVipLevel: cc.Label,\r\n        lb_daili: cc.Label,\r\n        lb_rebate: cc.Label,\r\n\r\n        //预计\r\n        commission: cc.Label,\r\n        pDirectCommission: cc.Label,\r\n        pContributeSubCommission: cc.Label,\r\n        directAchievement: cc.Label,\r\n        teamAchievement: cc.Label,\r\n\r\n        //昨日\r\n        yesterdayCommission: cc.Label,\r\n        yDirectCommission: cc.Label,\r\n        yContributeSubCommission: cc.Label,\r\n        yDirectAchievement: cc.Label,\r\n        yTeamAchievement: cc.Label,\r\n\r\n        //团队\r\n        teamEffectiveNumber: cc.Label,\r\n        directNumber: cc.Label,\r\n        directNumberNow: cc.Label,\r\n        subNumber: cc.Label,\r\n        subNumberNow: cc.Label,\r\n        effectiveNumber: cc.Label,\r\n\r\n        //可领取佣金\r\n        historyCommission: cc.Label,\r\n        canReceiveExtension: cc.Label,\r\n\r\n        //有效成员按钮\r\n        btn_validaward: cc.Node,\r\n\r\n        //二维码\r\n        node_QRcode: cc.Node,\r\n        \r\n        save_QRcode: cc.Node,\r\n        node_QRcodeScreenshot: cc.Node,\r\n        QRcodeCamera: cc.Camera,\r\n    },\r\n    onLoad() {\r\n        glGame.emitter.on(\"activeRedclose\", this.activeRedclose, this);\r\n        this.isAftetrDraw = false;\r\n        cc.director.once(cc.Director.EVENT_AFTER_DRAW, () => {\r\n            this.isAftetrDraw = true;\r\n        });\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_getbrokerage\": this.getbrokerageCB(); break;\r\n            case \"btn_brokerage\": this.brokerage(); break;\r\n            case \"btn_validaward\": this.validaward(); break;\r\n            //二维码\r\n            case \"btn_sharefriend\": this.sharefriend(); break;\r\n            case \"btn_sharefriendscircle\": this.sharefriendscircle(); break;\r\n            case \"btn_copy\": this.copyCB(); break;\r\n            case \"btn_saveqrcode\": this.saveqrcode(); break;\r\n            default: break;\r\n        }\r\n    },\r\n    activeRedclose() {\r\n        this.btn_validaward.getChildByName(\"redmark\").active = false\r\n    },\r\n\r\n    initUI(pandectdata, ruleDetaildata) {\r\n        this.pandectdata = pandectdata;\r\n        this.ruleDetaildata = ruleDetaildata;\r\n\r\n        this.mylogicID.string = glGame.user.get(\"logicID\");\r\n        this.myName.string = glGame.user.get(\"nickname\");\r\n        this.myVipLevel.string = glGame.user.get(\"vip_name\");\r\n        glGame.panel.showHeadImage(this.myhead, glGame.user.get(\"headURL\"));\r\n\r\n        this.btn_validaward.getChildByName(\"redmark\").active = pandectdata.reward_red_dot == 1\r\n        if (this.pandectdata.data.achievement >= this.ruleDetaildata[0].exp) {\r\n            if (this.pandectdata.data.achievement >= this.ruleDetaildata[this.ruleDetaildata.length - 1].exp) {\r\n                this.lb_daili.string = this.ruleDetaildata[this.ruleDetaildata.length - 1].level;\r\n                this.lb_rebate.string = `每万返佣${this.getFloat(this.ruleDetaildata[this.ruleDetaildata.length - 1].reward)}元`;\r\n            } else {\r\n                for (let i = 0; i < this.ruleDetaildata.length; i++) {\r\n                    if (this.pandectdata.data.achievement < this.ruleDetaildata[i].exp) {\r\n                        this.lb_daili.string = this.ruleDetaildata[i - 1].level;\r\n                        this.lb_rebate.string = `每万返佣${this.getFloat(this.ruleDetaildata[i - 1].reward)}元`;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            this.lb_daili.string = `未达到最低条件`;\r\n            this.lb_rebate.string = `0`;\r\n        }\r\n\r\n        //up\r\n\r\n\r\n        //mid\r\n        //今日佣金\r\n        this.commission.string = this.getFloat(this.pandectdata.data.commission);\r\n        this.pDirectCommission.string = this.getFloat(this.pandectdata.data.direct_commission);\r\n        this.pContributeSubCommission.string = this.getFloat(this.pandectdata.data.sub_commission);\r\n        this.directAchievement.string = this.getFloat(this.pandectdata.data.direct_achievement);\r\n        this.teamAchievement.string = this.getFloat(this.pandectdata.data.achievement);\r\n\r\n\r\n        //昨日佣金\r\n        this.yesterdayCommission.string = this.getFloat(this.pandectdata.data.yesterday_commission);\r\n        this.yDirectCommission.string = this.getFloat(this.pandectdata.data.yesterday_direct_commission);\r\n        this.yContributeSubCommission.string = this.getFloat(this.pandectdata.data.yesterday_sub_commission);\r\n        this.yDirectAchievement.string = this.getFloat(this.pandectdata.data.yesterday_direct_achievement);\r\n        this.yTeamAchievement.string = this.getFloat(this.pandectdata.data.yesterday_achievement);\r\n\r\n\r\n        //团队佣金`${this.pandectdata.data.effective_number}/${this.pandectdata.data.direct_effective_number}`\r\n        this.teamEffectiveNumber.string = `${this.pandectdata.data.effective_number}`\r\n\r\n        this.directNumber.string = `${this.pandectdata.data.direct_number}`;\r\n        this.directNumberNow.string = `(${this.pandectdata.data.new_direct_number > 0 ? '+' : ''}${this.pandectdata.data.new_direct_number})`\r\n\r\n        this.subNumber.string = `${this.pandectdata.data.sub_number}`;\r\n        this.subNumberNow.string = `(${this.pandectdata.data.new_sub_number > 0 ? '+' : ''}${this.pandectdata.data.new_sub_number})`\r\n\r\n        this.effectiveNumber.string = `${this.pandectdata.data.direct_effective_number}`\r\n\r\n        //可领取佣金\r\n        this.historyCommission.string = this.getFloat(this.pandectdata.data.history_commission);\r\n        this.canReceiveExtension.string = this.getFloat(this.pandectdata.data.can_receive_extension);\r\n\r\n        // 设置有效成员显示\r\n        this.btn_validaward.active = this.pandectdata.reward_show == 1;\r\n\r\n        //处理二维码\r\n        this.initShareQRcodeUI();\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    ReqAccountsShare() {\r\n        glGame.gameNet.send_msg('http.ReqAccountsShare', {}, (route, msg) => { })\r\n    },\r\n    getbrokerageCB() {\r\n        if (this.pandectdata.data.can_receive_extension < this.pandectdata.extract_limit) {\r\n            glGame.panel.showMsgBox(\"消息\", glGame.tips.POPULARIZE.MINLIMIT.format(`${this.getFloat(this.pandectdata.extract_limit)}`), () => { })\r\n            return;\r\n        }\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessApply', {}, (route, msg) => {\r\n            if (this.pandectdata.mode == 1) {\r\n                let strTitle = glGame.tips.POPULARIZE.CONGRATULATE;\r\n                glGame.panel.showAwardBox(strTitle, [{ type: glGame.awardtype.COIN, value: this.getFloat(this.pandectdata.data.can_receive_extension) }]);\r\n            } else if (this.pandectdata.mode == 2) {\r\n                glGame.panel.showMsgBox(\"\", glGame.tips.POPULARIZE.APPLYSUCCESS.format(`${this.getFloat(this.pandectdata.data.can_receive_extension)}`));\r\n            }\r\n\r\n            glGame.user.ReqRedDot();\r\n            glGame.user.reqGetCoin();\r\n            glGame.emitter.emit(\"refreshPopularize\");\r\n        })\r\n    },\r\n    brokerage() {\r\n        let scalecommission = glGame.panel.showChildPanel(this.scalecommission, this.node.parent.parent);\r\n        let script = scalecommission.getComponent(\"scalecommission\");\r\n        script.initUI(this.ruleDetaildata, this.pandectdata.data.achievement)\r\n    },\r\n    validaward() {\r\n        let activemember = glGame.panel.showChildPanel(this.activemember, this.node.parent.parent);\r\n        let script = activemember.getComponent(\"activemember\");\r\n        script.initUI(this.pandectdata)\r\n    },\r\n\r\n    initShareQRcodeUI() {\r\n        this.initCode();\r\n        if (!glGame.isEnableHotUpdate) this.initCodeScreenshot();\r\n    },\r\n\r\n    //截屏用的对象\r\n    initCodeScreenshot() {\r\n        var qrcode = new QRCode(8, QRErrorCorrectLevel.H);\r\n        qrcode.addData(this.pandectdata.data.promo_url);\r\n        qrcode.make();\r\n\r\n        var ctx = this.node_QRcodeScreenshot.getComponent(cc.Graphics);\r\n\r\n        var tileW = this.node_QRcodeScreenshot.width / qrcode.getModuleCount();\r\n        var tileH = this.node_QRcodeScreenshot.height / qrcode.getModuleCount();\r\n\r\n        // draw in the Graphics\r\n        for (var row = 0; row < qrcode.getModuleCount(); row++) {\r\n            for (var col = 0; col < qrcode.getModuleCount(); col++) {\r\n                if (qrcode.isDark(row, col)) {\r\n                    ctx.fillColor = cc.Color.BLACK;\r\n                } else {\r\n                    ctx.fillColor = cc.Color.WHITE;\r\n                }\r\n                var w = (Math.ceil((col + 1) * tileW) - Math.floor(col * tileW));\r\n                var h = (Math.ceil((row + 1) * tileW) - Math.floor(row * tileW));\r\n                ctx.rect(Math.round(col * tileW), Math.round(row * tileH), w, h);\r\n                ctx.fill();\r\n            }\r\n        }\r\n    },\r\n\r\n    initCode() {\r\n        var qrcode = new QRCode(8, QRErrorCorrectLevel.H);\r\n        qrcode.addData(this.pandectdata.data.promo_url);\r\n        qrcode.make();\r\n\r\n        var ctx = this.node_QRcode.getComponent(cc.Graphics);\r\n\r\n        var tileW = this.node_QRcode.width / qrcode.getModuleCount();\r\n        var tileH = this.node_QRcode.height / qrcode.getModuleCount();\r\n\r\n        // draw in the Graphics\r\n        for (var row = 0; row < qrcode.getModuleCount(); row++) {\r\n            for (var col = 0; col < qrcode.getModuleCount(); col++) {\r\n                if (qrcode.isDark(row, col)) {\r\n                    ctx.fillColor = cc.Color.BLACK;\r\n                } else {\r\n                    ctx.fillColor = cc.Color.WHITE;\r\n                }\r\n                var w = (Math.ceil((col + 1) * tileW) - Math.floor(col * tileW));\r\n                var h = (Math.ceil((row + 1) * tileW) - Math.floor(row * tileW));\r\n                ctx.rect(Math.round(col * tileW), Math.round(row * tileH), w, h);\r\n                ctx.fill();\r\n            }\r\n        }\r\n    },\r\n\r\n    //分享微信好友\r\n    sharefriend() {\r\n        //已安装微信\r\n        if (cc.sys.isNative && glGame.isLoginSelect) {\r\n            if (!this.checkWeChatApp()) return;\r\n            let data = this.pandectdata.share_config;\r\n            if (data.WX_SHARE_TYPE == 1) {\r\n                glGame.platform.shareTotWX(data.WX_SHARE_TITLE, data.WX_SHARE_INFO, data.WX_SHARE_JUMP_URL, 0, data.WX_SHARE_IMG_URL);\r\n            } else {\r\n                glGame.platform.shareImage(data.WX_SHARE_IMG_URL, 0);\r\n            }\r\n            this.ReqAccountsShare();\r\n        } else {\r\n            glGame.servercfg.turnOtherApp(2);\r\n        }\r\n    },\r\n    //分享微信朋友圈\r\n    sharefriendscircle() {\r\n        //已安装微信\r\n        if (cc.sys.isNative && glGame.isLoginSelect) {\r\n            if (!this.checkWeChatApp()) return;\r\n            let data = this.pandectdata.share_config;\r\n            if (data.WX_SHARE_TYPE == 1) {\r\n                glGame.platform.shareTotWX(data.WX_SHARE_TITLE, data.WX_SHARE_INFO, data.WX_SHARE_JUMP_URL, 1, data.WX_SHARE_IMG_URL);\r\n            } else {\r\n                glGame.platform.shareImage(data.WX_SHARE_IMG_URL, 1);\r\n            }\r\n            this.ReqAccountsShare();\r\n        } else {\r\n            glGame.servercfg.turnOtherApp(2);\r\n        }\r\n    },\r\n\r\n    copyCB() {\r\n        glGame.platform.copyToClip(this.pandectdata.data.promo_url, glGame.tips.POPULARIZE.COPYLINKSUCCESS);\r\n    },\r\n\r\n    getQrCodePic() {\r\n        if (!this.isAftetrDraw) {\r\n            console.error(\"Not yet rendered from get qrcode!\")\r\n            return;\r\n        }\r\n        let texture = new cc.RenderTexture();\r\n        texture.initWithSize(270, 270);\r\n        this.save_QRcode.active = true;\r\n        this.QRcodeCamera.targetTexture = texture;\r\n        this.QRcodeCamera.alignWithScreen = false;\r\n        this.QRcodeCamera.orthoSize = 140;\r\n        this.QRcodeCamera.render();\r\n        let data = texture.readPixels();\r\n        if (cc.sys.isNative) {//真机\r\n            let fileName = \"Image\";\r\n            let fileType = \".png\";\r\n            let filePath = jsb.fileUtils.getWritablePath() + fileName + fileType;\r\n            jsb.saveImageData(data, 270, 270, filePath)\r\n            glGame.platform.saveToLocal(filePath);\r\n        } else {\r\n            let canvas = document.createElement('canvas');\r\n            let ctx = canvas.getContext('2d');\r\n            let width = canvas.width = texture.width = 270;\r\n            let height = canvas.height = texture.height = 270;\r\n            canvas.width = texture.width;\r\n            canvas.height = texture.height;\r\n            let rowBytes = width * 4;\r\n            for (let row = 0; row < height; row++) {\r\n                let srow = height - 1 - row;\r\n                let imageData = ctx.createImageData(width, 1);\r\n                let start = srow * width * 4;\r\n                for (let i = 0; i < rowBytes; i++) {\r\n                    imageData.data[i] = data[start + i];\r\n                }\r\n                ctx.putImageData(imageData, 0, row);\r\n            }\r\n            let str = canvas.toDataURL(\"image/png\");\r\n            let div = document.createElement(\"div\");\r\n            let img = new Image();\r\n            img.onload = () => {\r\n                let urlData = str;\r\n                let arr = urlData.split(',');\r\n                let mime = arr[0].match(/:(.*?);/)[1] || \"image/png\";\r\n                let bytes = this.dataURItoBlob(urlData);\r\n                textFileAsBlob = new Blob([bytes], { type: mime });\r\n                let downloadLink = document.createElement(\"a\");\r\n                downloadLink.download = \"qrcode.png\";\r\n                downloadLink.innerHTML = \"Download File\";\r\n                if (window.webkitURL != null) {\r\n                    downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);\r\n                } else {\r\n                    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n                    downloadLink.onclick = destroyClickedElement;\r\n                    downloadLink.style.display = \"none\";\r\n                    document.body.appendChild(downloadLink);\r\n                }\r\n                downloadLink.click();\r\n            };\r\n            div.style.position = 'absolute';\r\n            div.setAttribute('z-index', '99');\r\n            img.src = str;\r\n            div.appendChild(img);\r\n        }\r\n    },\r\n\r\n    saveqrcode() {\r\n        this.getQrCodePic();\r\n    },\r\n\r\n    //是否有安装微信\r\n    checkWeChatApp() {\r\n        //判断 是否有安装微信\r\n        if (!glGame.platform.isWxAppInstalled()) {\r\n            glGame.panel.showMsgBox(\"提示\", glGame.tips.POPULARIZE.CANTFINDWX);\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    //base64 解码 图片 转为 二进制字节数组\r\n    dataURItoBlob(base64Data) {\r\n        var byteString;\r\n        if (base64Data.split(',')[0].indexOf('base64') >= 0)\r\n            byteString = atob(base64Data.split(',')[1]);//base64 解码\r\n        else {\r\n            byteString = unescape(base64Data.split(',')[1]);\r\n        }\r\n        var ia = new Uint8Array(byteString.length);//创建视图\r\n        for (var i = 0; i < byteString.length; i++) {\r\n            ia[i] = byteString.charCodeAt(i);\r\n        }\r\n        return ia;\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(\"activeRedclose\", this);\r\n    },\r\n});\r\n"]}