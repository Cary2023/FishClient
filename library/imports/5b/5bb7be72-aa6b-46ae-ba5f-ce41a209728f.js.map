{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\sssentry.js"],"names":["glGame","baseclass","extend","properties","BGM","type","cc","AudioClip","goldCount","Label","sssRecord","Prefab","sssRule","ptf_text","gbf_text","fhf_text","sp_role","sp","Skeleton","level","Node","onLoad","limitTxt","tyf_text","gameid","node","zIndex","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","aniEvent","active","unregisterEvent","goldOnlineNum","onGameConfig","off","gameID","scenetag","SSS","readyroom","msg","gameConfig","initUI","configure","count","length","i","string","getFloat","BaseChips","EntranceRestrictions","tiem","runAction","sequence","delayTime","callFunc","setAnimation","setCompleteListener","trackEntry","loopCount","name","animation","checkGold","coin","minCion","parseInt","panel","showDialog","i18n","t","showPanelByName","value","Number","div","toString","onClick","enterGame","click_help","click_record","click_addgold","click_userinfo","console","error","room","reqMyGameState","then","showMsgBox","user","isTourist","showRegisteredGift","suspicious","game","is_game","showService","get","log","showShop","showJuHua","closeJuHua","setGoldRoomInfo","showUserInfo","showRemoteImage","Playerhead","GoldTemp","setGameId","updateBgInfo","reqExitArea","remove","showPanel","set","key","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        goldCount: cc.Label,\r\n        sssRecord: cc.Prefab,\r\n        sssRule: cc.Prefab,\r\n\r\n        ptf_text: [cc.Label],\r\n        gbf_text: [cc.Label],\r\n        fhf_text: [cc.Label],\r\n\r\n        sp_role: [sp.Skeleton],\r\n\r\n        level: {\r\n            type: cc.Node,\r\n            default: []\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        this.limitTxt = [\r\n            this.tyf_text,\r\n            this.ptf_text,\r\n            this.gbf_text,\r\n            this.fhf_text\r\n        ];\r\n\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n        this.updateuserInfo();\r\n        this.aniEvent();\r\n    },\r\n\r\n    RootNodeShow(){\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n\r\n    RootNodeHide(){\r\n        this.node.active = false;\r\n        this.unregisterEvent();\r\n    },\r\n\r\n    registerEvent() {\r\n        glGame.emitter.on(\"goldOnlineNum\", this.goldOnlineNum, this);\r\n        glGame.emitter.on(\"onGameConfig\", this.onGameConfig, this);\r\n    },\r\n\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"goldOnlineNum\", this);\r\n        glGame.emitter.off(\"onGameConfig\", this);\r\n    },\r\n\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.SSS;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.SSS);\r\n    },\r\n\r\n    onGameConfig(msg) {\r\n        this.gameConfig = msg;\r\n        this.initUI();\r\n    },\r\n\r\n    initUI() {\r\n        this.node.active = true;\r\n        let configure = this.gameConfig;\r\n        let count = this.level.length;\r\n        for (let i = 0; i < count; i++) {\r\n            if (i > 0) {\r\n                // 底注\r\n                this.limitTxt[i][0].string = this.getFloat(configure[i].BaseChips);\r\n                // 准入\r\n                this.limitTxt[i][1].string = this.getFloat(configure[i].EntranceRestrictions);\r\n            }\r\n        }\r\n    },\r\n\r\n    //骨骼动画播放结束的回调\r\n    aniEvent() {\r\n        let count = this.level.length;\r\n        for (let i = 0; i < count; i++) {\r\n            let tiem = i * 0.13;\r\n            this.node.runAction(cc.sequence(cc.delayTime(tiem), cc.callFunc(() => {\r\n                this.sp_role[i].node.active = true;\r\n                this.sp_role[i].setAnimation(0, \"idle3\", false);\r\n                this.sp_role[i].setCompleteListener((trackEntry, loopCount) => {\r\n                    let name = trackEntry.animation ? trackEntry.animation.name : \"\";\r\n                    if (name == \"idle3\") {\r\n                        this.sp_role[i].setAnimation(0, \"idle2\", true);\r\n                    }\r\n                })\r\n            })))\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 检查玩家金币是否足够\r\n     * @returns {boolean}\r\n     */\r\n    checkGold(coin, minCion) {\r\n        if (parseInt(coin) < parseInt(minCion)) {\r\n            glGame.panel.showDialog(glGame.i18n.t(\"USER.GOLDLACK.TITLE\"), glGame.i18n.t(\"USER.GOLDLACK.CONTENT\"), () => {\r\n                glGame.panel.showPanelByName(\"shop\");\r\n            }, null);\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"primary\": this.enterGame(99); break;\r\n            case \"intermediate\": this.enterGame(1); break;\r\n            case \"senior\": this.enterGame(2); break;\r\n            case \"tuhao\": this.enterGame(3); break;\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 进入金币场房间\r\n     * @param level 场次类型 1:普通场 2:贵宾场 3:富豪场\r\n     */\r\n    enterGame(level) {\r\n        glGame.room.reqMyGameState(this.gameID, level).then(() => {\r\n            let gameID = this.gameID;\r\n            if (this.gameConfig[level] == null) {\r\n                glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');\r\n                return;\r\n            }\r\n            if (glGame.user.isTourist()) {\r\n                if (level != 99) {\r\n                    glGame.panel.showRegisteredGift(true)\r\n                    return;\r\n                }\r\n            }\r\n            if((glGame.user.suspicious == 1 &&glGame.user.game == 2 ) || glGame.user.is_game == 2 ){\r\n                glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => {}, \"我知道了\", \"联系客服\")\r\n                return;\r\n            }\r\n            if (this.gameConfig[level].EntranceRestrictions > glGame.user.get(\"coin\")) {\r\n                console.log(\"这是当前的房间限制\", this.gameConfig)\r\n                let string = `<color=#99C7FF>您的金币不足，该房间需要</c> <color=#ff0000> ${this.getFloat(this.gameConfig[level].EntranceRestrictions)}  </c><color=#99C7FF>金币才可下注，是否马上前往充值？</c>`\r\n                glGame.panel.showDialog(\"\", string, () => { glGame.panel.showShop(100) }, () => { }, \"取消\", \"充值\");\r\n                return\r\n            }\r\n            glGame.panel.showJuHua();\r\n            this.node.runAction(cc.sequence(\r\n                cc.delayTime(15),\r\n                cc.callFunc(() => {\r\n                    glGame.panel.closeJuHua();\r\n                })\r\n            ))\r\n            \r\n            glGame.room.setGoldRoomInfo(gameID, level);\r\n        })\r\n    },\r\n\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin); //glGame.user.cutFloat(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n    },\r\n\r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n\r\n    click_help() {\r\n        let panel = glGame.panel.showPanel(this.sssRule);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    click_record() {\r\n        let panel = glGame.panel.showPanel(this.sssRecord);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW,this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE,this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\",this);\r\n        this.unregisterEvent();\r\n    }\r\n});\r\n"]}