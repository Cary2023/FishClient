{"version":3,"sources":["assets\\modules\\public\\script\\service\\serviceQuestion.js"],"names":["glGame","baseclass","extend","properties","item","cc","Node","item1","content","onLoad","node","zIndex","pageSize","page","isReceive","customList","severice","registerEvent","user","ReqCustomHelpList","active","emitter","on","updateReqCustomHelpList","unRegisterEvent","off","onClick","name","data","page_size","total_page","totalPage","list","concat","initQuestion","customData","initQuestion1","contenHeight","i","length","cowItem","instantiate","parent","children","getComponent","Label","string","title","RichText","push","height","panel","showEffectNode","start","onScrollEvent","scroll","event","ScrollView","EventType","SCROLL_TO_BOTTOM","index","childrenCount","scaleY"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        item: cc.Node,\r\n        item1: cc.Node,\r\n        content: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.node.zIndex = 1001;\r\n        this.pageSize = 10;\r\n        this.page = 1;\r\n        this.isReceive = false;\r\n        this.customList = [];\r\n        this.severice = {};\r\n        this.registerEvent()\r\n        glGame.user.ReqCustomHelpList(this.page, this.pageSize, true);\r\n        this.node.active = false;\r\n    },\r\n    registerEvent() {\r\n        glGame.emitter.on(\"updateReqCustomHelpList\", this.updateReqCustomHelpList, this);\r\n    },\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"updateReqCustomHelpList\", this);\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case '': ; break;\r\n            case '': ; break;\r\n\r\n        }\r\n    },\r\n\r\n    updateReqCustomHelpList(data) {\r\n        this.node.active = true;\r\n        this.severice.page = data.page;\r\n        this.severice.page_size = data.pageSize;\r\n        this.severice.total_page = data.totalPage;\r\n        if (!this.severice.list) this.severice.list = data.list;\r\n        else this.severice.list = this.severice.list.concat(data.list);\r\n        this.initQuestion();\r\n        // this.initQuestion1();\r\n    },\r\n\r\n    customData() {\r\n        // this.severice = glGame.user.get(\"customSever\").result;\r\n        // console.log('客服信息111question',this.severice)\r\n        // this.initQuestion();\r\n    },\r\n    initQuestion1() {\r\n        this.isReceive = true;\r\n        this.contenHeight = 0;\r\n        for (let i = (this.page - 1) * this.pageSize; i < this.severice.list.length; i++) {\r\n            let cowItem = cc.instantiate(this.item);\r\n            cowItem.active = false;\r\n            cowItem.parent = this.content;\r\n            cowItem.children[0].getComponent(cc.Label).string = 'Q：' + this.severice.list[i].title,\r\n                cowItem.children[1].getComponent(cc.RichText).string = 'A：' + this.severice.list[i].content,\r\n                this.customList.push(this.severice.list[i])\r\n            this.contenHeight += cowItem.height\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n\r\n    initQuestion() {\r\n        this.isReceive = true;\r\n        this.contenHeight = 0;\r\n        for (let i = (this.page - 1) * this.pageSize; i < this.severice.list.length; i++) {\r\n            let cowItem = cc.instantiate(this.item1);\r\n            cowItem.active = false;\r\n            cowItem.parent = this.content;\r\n            cowItem.name = \"item\" + i\r\n            // 展示的内容\r\n            cowItem.children[0].children[0].getComponent(cc.RichText).string = 'A：' + this.severice.list[i].content;\r\n            // 展示标题\r\n            cowItem.children[1].children[0].getComponent(cc.Label).string = 'Q：' + this.severice.list[i].title;\r\n            this.customList.push(this.severice.list[i])\r\n            this.contenHeight += cowItem.height\r\n            glGame.panel.showEffectNode(this, this.content, 0.02, true);\r\n        }\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    onScrollEvent(scroll, event) {\r\n        for (let i = 0; i < this.pageSize; i++) {\r\n            if (this.severice.list[i] == null) {\r\n                this.isReceive = false;\r\n            }\r\n        }\r\n        if (event === cc.ScrollView.EventType.SCROLL_TO_BOTTOM && this.isReceive == true) {\r\n            if (this.contenHeight >= 400) {\r\n                this.page++;\r\n                if (this.page > this.severice.total_page) return;\r\n                this.isReceive == false;\r\n                glGame.user.ReqCustomHelpList(this.page, this.pageSize);\r\n            }\r\n        }\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"title_bg\":\r\n                for (let index = 0; index < this.content.childrenCount; index++) {\r\n                    if (this.content.children[index].name == node.parent.name && node.parent.children[0].active) continue;\r\n                    this.content.children[index].children[0].active = false;\r\n                    this.content.children[index].children[1].children[1].scaleY = 1;\r\n                }\r\n                node.parent.children[0].active = !node.parent.children[0].active;\r\n                if (node.parent.children[0].active) {\r\n                    node.children[1].scaleY = -1;\r\n                } else {\r\n                    node.children[1].scaleY = 1;\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    \r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}