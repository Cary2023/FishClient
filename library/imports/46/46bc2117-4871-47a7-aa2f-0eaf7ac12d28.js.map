{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\scalecommission.js"],"names":["glGame","baseclass","extend","properties","achievementStr","cc","Label","nextStr","rebaterate","Node","rebate_item","onLoad","ruleDetaildata","index","onClick","name","node","remove","initUI","data","achievement","string","getFloat","count","length","exp","i","rebateItem","instantiate","parent","active","getChildByName","getComponent","level","strText","getExpNumber","getExpText","RichText","reward","panel","showEffectNode","value","Number","div","toString","num","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        achievementStr: cc.Label,\r\n        nextStr: cc.Label,\r\n        rebaterate: cc.Node,\r\n        rebate_item: cc.Node,\r\n    },\r\n    onLoad() {\r\n        this.ruleDetaildata = null;\r\n        this.index = 0;\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n        }\r\n    },\r\n    initUI(data, achievement) {\r\n        this.ruleDetaildata = data;\r\n        this.achievementStr.string = this.getFloat(achievement);\r\n        let count = this.ruleDetaildata.length;\r\n\r\n        if (achievement >= this.ruleDetaildata[count - 1].exp) {\r\n            this.nextStr.string = 0;\r\n            this.index = count - 1;\r\n        }else{\r\n            for (let i = 0; i < count; i++) {\r\n                if (this.ruleDetaildata[i].exp > achievement) {\r\n                    this.nextStr.string = this.getFloat(this.ruleDetaildata[i].exp - achievement);\r\n                    this.index = i - 1;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        for (let i = 0; i < this.ruleDetaildata.length; i++) {\r\n            let rebateItem = cc.instantiate(this.rebate_item);\r\n            rebateItem.parent = this.rebaterate;\r\n            rebateItem.active = false;\r\n            rebateItem.getChildByName(\"bg\").active = i % 2 == 1;\r\n            if (this.index == i) {\r\n                rebateItem.getChildByName(\"bg\").active = false;\r\n                rebateItem.getChildByName(\"img_picxz\").active = true;\r\n            }\r\n            rebateItem.getChildByName(\"level\").getComponent(cc.Label).string = this.ruleDetaildata[i].level;\r\n            let strText = \"\";\r\n            if (this.ruleDetaildata[i + 1]) {\r\n                strText = `<color=#f4c404>${this.getExpNumber(this.ruleDetaildata[i].exp)}</color>${this.getExpText(this.ruleDetaildata[i].exp)} - <color=#f4c404>${this.getExpNumber(this.ruleDetaildata[i + 1].exp)}</color>${this.getExpText(this.ruleDetaildata[i + 1].exp)}`;\r\n            } else {\r\n                strText = `<color=#f4c404>${this.getExpNumber(this.ruleDetaildata[i].exp)}</color>${this.getExpText(this.ruleDetaildata[i].exp)}以上`\r\n            }\r\n            rebateItem.getChildByName(\"money\").getComponent(cc.RichText).string = strText;\r\n            rebateItem.getChildByName(\"rete\").getComponent(cc.RichText).string = `每万返佣<color=#f4c404>${this.getFloat(this.ruleDetaildata[i].reward)}</color>元`;\r\n        }\r\n        glGame.panel.showEffectNode(this,this.rebaterate,0.02,true);\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    getExpNumber(num) {\r\n        return num >= 1000000 ? `${Number(num).div(1000000)}` : `${Number(num).div(100)}`;\r\n    },\r\n    getExpText(num) {\r\n        return num >= 1000000 ? `万` : ``;\r\n    },\r\n    OnDestroy() {\r\n\r\n    },\r\n});\r\n"]}