{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\backWater\\backWater.js"],"names":["GAMETYPE","CHESS","COMPLEX","glGame","baseclass","extend","properties","sonPanel","cc","Node","onLoad","gameDisplayType","user","get","registerEvent","showPanel","panel","showEffectPariticle","node","start","emitter","on","MESSAGE","UI","FORBIDDEN_BACKWATER","onForbbidden","unRegisterEvent","off","OnDestroy","onClick","name","remove","rebateSwitchEx","showMsgBox","hideAllPanel","childrenCount","i","children","active","panelName","panellist","getChildByName","getPanelByName","then","panelData","parent"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 返水信息面板\r\n * 有效投注*比例 = 返水金额\r\n * 今日有效投注 = 总的子游戏有效投注之和\r\n * 今日预计返水 = 总的子游戏返水金额之和\r\n */\r\nconst GAMETYPE = {\r\n    CHESS:1,    //棋牌版\r\n    COMPLEX:2,  //综合版\r\n}\r\n\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        sonPanel: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.gameDisplayType = glGame.user.get(\"gameDisplayType\");\r\n        this.registerEvent();\r\n        this.showPanel(\"mywater\");\r\n        glGame.panel.showEffectPariticle(this.node);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    registerEvent() {\r\n        glGame.emitter.on(MESSAGE.UI.FORBIDDEN_BACKWATER, this.onForbbidden, this);\r\n    },\r\n\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(MESSAGE.UI.FORBIDDEN_BACKWATER, this);\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"close\": this.remove(); break;\r\n            case \"mywater\":\r\n            case \"rateexplain\":\r\n            case \"record\":\r\n                this.showPanel(name);\r\n                break;\r\n            default: break;\r\n        }\r\n    },\r\n\r\n    onForbbidden() {\r\n        glGame.user.rebateSwitchEx = 0;\r\n        glGame.panel.showMsgBox(\"该功能暂未开放\", \"该功能暂未开放\",\r\n            () => { this.remove(); })\r\n    },\r\n\r\n    //隐藏所有界面\r\n    hideAllPanel() {\r\n        if (!this.sonPanel.childrenCount) return;\r\n        for (let i = 0; i < this.sonPanel.childrenCount; i++) {\r\n            this.sonPanel.children[i].active = false;\r\n        }\r\n    },\r\n    //显示某个界面。按名字来显示\r\n    showPanel(panelName) {\r\n        // this.gameDisplayType = GAMETYPE.CHESS;\r\n        this.hideAllPanel()\r\n        let panellist = {}\r\n        panellist[\"mywater\"] = this.gameDisplayType == GAMETYPE.CHESS ? \"mybackWater\" :\"mybackWater_complex\";\r\n        panellist[\"rateexplain\"] = this.gameDisplayType == GAMETYPE.CHESS ? \"porpor\" :\"porpor_complex\";;\r\n        panellist[\"record\"] = \"waterrecord\";\r\n\r\n        if (this.sonPanel.getChildByName(panellist[panelName])) {\r\n            this.sonPanel.getChildByName(panellist[panelName]).active = true;\r\n            return;\r\n        }\r\n\r\n        glGame.panel.getPanelByName(panellist[panelName]).then(panelData => { panelData.parent = this.sonPanel; })\r\n    },\r\n});\r\n"]}