{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\qznnentry.js"],"names":["glGame","baseclass","extend","properties","goldCount","cc","Label","game_Logo","sp","Skeleton","qznn_record","Prefab","qznn_gamerule","level","type","Node","BGM","AudioClip","onLoad","gameid","node","zIndex","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","active","resetView","unregisterEvent","gameID","scenetag","QZNN","readyroom","goldOnlineNum","onGameConfig","off","msg","gameConfig","initUI","console","log","count","length","i","getChildByName","getComponent","string","onClick","name","click_help","click_record","click_addgold","click_userinfo","enterGame","error","configure","cutFloat","BaseChips","EntranceRestrictions","playMove","setAnimation","roomSelect","posList","childrenCount","push","v2","children","position","x","y","width","runAction","sequence","delayTime","moveTo","room","reqMyGameState","then","panel","showMsgBox","user","isTourist","showRegisteredGift","get","showDialog","showShop","suspicious","game","is_game","showService","showJuHua","callFunc","closeJuHua","setGoldRoomInfo","checkGold","coin","minCion","parseInt","i18n","t","showPanelByName","value","Number","div","toString","showUserInfo","showRemoteImage","Playerhead","GoldTemp","setGameId","updateBgInfo","reqExitArea","remove","showPanel","set","key","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        goldCount: cc.Label,\r\n        game_Logo:sp.Skeleton,\r\n        qznn_record:cc.Prefab,\r\n        qznn_gamerule:cc.Prefab,\r\n        level: {\r\n            type: cc.Node,\r\n            default: []\r\n        },\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.updateuserInfo();\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n    RootNodeShow() {\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n    RootNodeHide() {\r\n        this.node.active = false;\r\n        this.resetView();\r\n        this.unregisterEvent();\r\n    },\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.QZNN;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.QZNN);\r\n\r\n    },\r\n    //事件监听\r\n    registerEvent() {\r\n        glGame.emitter.on(\"goldOnlineNum\", this.goldOnlineNum, this);\r\n        glGame.emitter.on(\"onGameConfig\", this.onGameConfig, this);\r\n    },\r\n    //事件销毁\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"goldOnlineNum\", this);\r\n        glGame.emitter.off(\"onGameConfig\", this);\r\n    },\r\n    onGameConfig(msg) {\r\n        this.gameConfig = msg;\r\n        this.initUI();\r\n    },\r\n    goldOnlineNum(msg) {\r\n        console.log(\"这是在线人数的消息\", msg)\r\n        let count = this.level.length;\r\n        for (let i = 0; i < count; i++) {\r\n            if (msg[i + 1]) {\r\n                this.level[i].getChildByName(\"people_num\").getComponent(cc.Label).string = msg[i + 1]\r\n            }\r\n        }\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            case \"primary\": this.enterGame(99); break;\r\n            case \"intermediate\": this.enterGame(1); break;\r\n            case \"senior\": this.enterGame(2); break;\r\n            case \"tuhao\": this.enterGame(3); break;\r\n            case \"supremacy\": this.enterGame(4); break;\r\n            case \"volvo\": this.enterGame(5); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    initUI() {\r\n        this.node.active = true;\r\n        let configure = this.gameConfig;\r\n\r\n        let count = this.level.length;\r\n        for (let i = 1; i < 4; i++) {\r\n            this.level[i].getChildByName(\"dizhulaout\").getChildByName(\"dizhu_num\").getComponent(cc.Label).string = this.cutFloat(configure[i].BaseChips);\r\n            this.level[i].getChildByName(\"zhunrulayout\").getChildByName(\"zhunru_num\").getComponent(cc.Label).string = this.cutFloat(configure[i].EntranceRestrictions);\r\n        }\r\n        this.playMove();\r\n        this.game_Logo.setAnimation(0,\"animation\",false)\r\n    },\r\n    //打开界面的图标移动动作\r\n    playMove() {\r\n        let roomSelect = this.node.getChildByName(\"qznnselect\");\r\n        let posList = [];\r\n        for (let i = 0; i < roomSelect.childrenCount; i++) {\r\n            posList.push(cc.v2(roomSelect.children[i].position.x,roomSelect.children[i].position.y));\r\n        }\r\n        for (let i = 0; i < roomSelect.childrenCount; i++) {\r\n            roomSelect.children[i].position.x += 1300;\r\n        }\r\n\r\n        for (let i = 0; i < roomSelect.childrenCount; i++) {\r\n            roomSelect.children[i].x = this.node.width/2+this.level[i].width/2;\r\n            roomSelect.children[i].active = true;\r\n            roomSelect.children[i].runAction(cc.sequence(\r\n                cc.delayTime(i*0.05),\r\n                cc.moveTo(0.2,cc.v2(posList[i].x - 40,posList[i].y)),\r\n                cc.moveTo(0.1,posList[i])\r\n            ))\r\n        }\r\n        \r\n    },\r\n    resetView(){\r\n        for (let i = 0; i < 4; i++) {\r\n            this.level[i].active = false;\r\n        }\r\n    },\r\n    /**\r\n    * 进入金币场房间\r\n    * @param level 场次类型 1:初级场 2:中级场 3:高级场 4:土豪场 5:至尊场\r\n    */\r\n    enterGame(level) {\r\n        glGame.room.reqMyGameState(this.gameID, level).then(() => {\r\n            let gameID = this.gameID;\r\n            if (this.gameConfig[level] == null) {\r\n                glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');\r\n                return;\r\n            }\r\n            if (glGame.user.isTourist()) {\r\n                if (level != 99) {\r\n                    glGame.panel.showRegisteredGift(true)\r\n                    return;\r\n                }\r\n            }\r\n            if (this.gameConfig[level].EntranceRestrictions > glGame.user.get(\"coin\")) {\r\n                console.log(\"这是当前的房间限制\", this.gameConfig)\r\n                let string = `<color=#99C7FF>您的金币不足，该房间需要</c> <color=#ff0000> ${this.cutFloat(this.gameConfig[level].EntranceRestrictions)}  </c><color=#99C7FF>金币才可下注，是否马上前往充值？</c>`\r\n                glGame.panel.showDialog(\"\", string, () => { glGame.panel.showShop(100) }, () => { }, \"取消\", \"充值\");\r\n                return\r\n            }\r\n            if ((glGame.user.suspicious == 1 && glGame.user.game == 2) || glGame.user.is_game == 2) {\r\n                glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => { }, \"我知道了\", \"联系客服\")\r\n                return;\r\n            }\r\n            glGame.panel.showJuHua();\r\n            // glGame.readyroom.reqExitArea();\r\n            this.node.runAction(cc.sequence(\r\n                cc.delayTime(15),\r\n                cc.callFunc(() => {\r\n                    glGame.panel.closeJuHua();\r\n                })\r\n            ))\r\n            // TODO\r\n            // reqGoldRoomVerify为旧的进入房间方法，需要先请求验证，再进入房间\r\n            // setGoldRoomInfo 新的进入房间方法，无需验证，设置游戏类型以及房间信息后，直接进入房间\r\n            // if (glGame.enterRoomVerification) {\r\n            //     glGame.room.reqGoldRoomVerify(gameID, level);\r\n            // } else {\r\n            //     glGame.room.setGoldRoomInfo(gameID, level);\r\n            // }\r\n            glGame.room.setGoldRoomInfo(gameID, level);\r\n        })\r\n    },\r\n    /**\r\n     * 检查玩家金币是否足够\r\n     * @returns {boolean}\r\n     */\r\n    checkGold(coin, minCion) {\r\n        console.log(\"金币检测\", coin, minCion);\r\n        if (parseInt(coin) < parseInt(minCion)) {\r\n            glGame.panel.showDialog(glGame.i18n.t(\"USER.GOLDLACK.TITLE\"), glGame.i18n.t(\"USER.GOLDLACK.CONTENT\"), () => {\r\n                glGame.panel.showPanelByName(\"shop\");\r\n            }, null);\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    cutFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n\r\n    },\r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n    click_help() {\r\n        let qznn_gamerule = glGame.panel.showPanel(this.qznn_gamerule);\r\n        qznn_gamerule.zIndex = 30;\r\n    },\r\n    click_record() {\r\n        let qznn_record = glGame.panel.showPanel(this.qznn_record);\r\n        qznn_record.zIndex = 30;\r\n    },\r\n\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\", this);\r\n        this.unregisterEvent();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}