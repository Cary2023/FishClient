{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\withdrawal\\popup\\setExtractpass.js"],"names":["glGame","baseclass","extend","properties","pwd","cc","EditBox","pwdCheck","tips","Node","onLoad","emitter","on","withdrawSuccess","onClick","name","node","remove","reqSetDrawPassword","setTips","mode","active","set","key","value","checkPassword","psw","confimpsw","panel","showErrorTip","REGISTRATION","LOGPSWNULL","length","EXCHANGE","PSWLENGTH","test","PSWCOFAIL","string","confirm","newPwd","md5","msg","cpwd","gameNet","send_msg","route","data","user","reqWithdraw","Number","coin","type","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        pwd: cc.EditBox,\r\n        pwdCheck: cc.EditBox,\r\n        tips:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        glGame.emitter.on(\"withdrawSuccess\", this.withdrawSuccess, this);\r\n     },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            case \"btn_sure\": this.reqSetDrawPassword(); break;\r\n        }\r\n    },\r\n    setTips(mode){\r\n        this.tips.active = mode == 2;\r\n    },\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    // 密码检查\r\n    checkPassword(psw, confimpsw) {\r\n        if (!psw) {\r\n            glGame.panel.showErrorTip(glGame.tips.REGISTRATION.LOGPSWNULL);\r\n            return null;\r\n        }\r\n        if (psw.length < 4 || psw.length > 12) {\r\n            glGame.panel.showErrorTip(glGame.tips.EXCHANGE.PSWLENGTH);\r\n            return false;\r\n        }\r\n        if (!/^[A-Za-z0-9]{4,12}$/.test(psw)) {\r\n            glGame.panel.showErrorTip(glGame.tips.EXCHANGE.PSWLENGTH);\r\n            return null;\r\n        }\r\n        if (confimpsw == null) return psw;\r\n        if (!confimpsw || psw !== confimpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWCOFAIL);\r\n            return null;\r\n        }\r\n        return psw;\r\n    },\r\n    reqSetDrawPassword() {\r\n        let psw = this.checkPassword(this.pwd.string)\r\n        let confirm = this.checkPassword(this.pwd.string, this.pwdCheck.string)\r\n        if (!psw) return;\r\n        if (!confirm) return;\r\n        let newPwd = md5(this.pwd.string)\r\n        let msg = {\r\n            cpwd: md5(this.pwdCheck.string),\r\n            pwd: md5(this.pwd.string)\r\n        }\r\n        glGame.gameNet.send_msg(\"http.reqSetWithdrawPwd\", msg, (route, data) => {\r\n            //刷新当前界面为输入密码界面\r\n            glGame.user.reqWithdraw(Number(this.coin), this.type, newPwd);\r\n            // this.initData();\r\n\r\n        })\r\n    },\r\n    withdrawSuccess(){\r\n        this.remove();\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(\"withdrawSuccess\",this);\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}