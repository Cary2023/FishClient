{"version":3,"sources":["assets\\frames\\base\\baseclass.js"],"names":["window","glGame","baseclass","cc","Component","extend","OnClickButton","event","type","buttonName","target","name","buttonNode","curClickState","allCurTimeout","push","setTimeout","console","log","audio","closeCurEffect","playLoadSoundEffectByPath","onClick","OnClickToggle","node","ButtonName","ButtonNode","OnSlider","process","progress","onSliderProcess","update","lateUpdate","onLoad","start","onEnable","onDisable","onDestroy","OnDestroy","clearCurTimeout","indexOf","goBackPlazaAudio","remove","blRemove","panel","isHaveEntry","emitter","emit","MESSAGE","UI","PLAZA_OPEN","destroy","isEnableHotUpdate","PrefabRelease","count","length","i","clearTimeout","fitScreen","nowSize","winSize","cutSize","view","getDesignResolutionSize","nowRatio","width","height","cutRatio","setDesignResolutionSize","ResolutionPolicy","FIXED_WIDTH","FIXED_HEIGHT"],"mappings":";;;;;;AAAAA,MAAM,CAACC,MAAP,GAAgBD,MAAM,CAACC,MAAP,IAAiB,EAAjC;AAEAA,MAAM,CAACC,SAAP,GAAmBC,EAAE,CAACC,SAAH,CAAaC,MAAb,CAAoB;AACnC;;;;;AAKAC,EAAAA,aANmC,yBAMrBC,KANqB,EAMdC,IANc,EAMR;AAAA;;AACvB,QAAIC,UAAU,GAAGF,KAAK,CAACG,MAAN,CAAaC,IAA9B;AACA,QAAIC,UAAU,GAAGL,KAAK,CAACG,MAAvB;;AAEA,QAAI,CAACF,IAAD,IAASA,IAAI,IAAI,QAArB,EAA8B;AAC1B,UAAI,KAAKK,aAAT,EAAwB;AACxB,WAAKA,aAAL,GAAqB,IAArB;AACA,WAAKC,aAAL,GAAqB,KAAKA,aAAL,IAAsB,EAA3C;AACA,WAAKA,aAAL,CAAmBC,IAAnB,CAAwBC,UAAU,CAAC,YAAM;AACrC,QAAA,KAAI,CAACH,aAAL,GAAqB,KAArB;AACH,OAFiC,EAE/B,GAF+B,CAAlC;AAGH;;AAEDI,IAAAA,OAAO,CAACC,GAAR,uCAA4BT,UAA5B;;AACA,YAAQA,UAAR;AACI,WAAK,WAAL;AAAyB;AACrBR,QAAAA,MAAM,CAACkB,KAAP,CAAaC,cAAb;AACAnB,QAAAA,MAAM,CAACkB,KAAP,CAAaE,yBAAb,CAAuC,OAAvC;AACA;;AACJ,WAAK,OAAL;AACIpB,QAAAA,MAAM,CAACkB,KAAP,CAAaE,yBAAb,CAAuC,OAAvC;AACA;;AACJ;AACI,YAAIb,IAAI,IAAI,QAAZ,EAAsBP,MAAM,CAACkB,KAAP,CAAaE,yBAAb,CAAuC,QAAvC,EAAtB,KACKpB,MAAM,CAACkB,KAAP,CAAaE,yBAAb,CAAuC,OAAvC;AAVb;;AAYA,SAAKC,OAAL,CAAab,UAAb,EAAyBG,UAAzB;AACH,GAjCkC;;AAkCnC;;;;AAIAW,EAAAA,aAtCmC,yBAsCrBhB,KAtCqB,EAsCd;AACjB,QAAIE,UAAU,GAAGF,KAAK,CAACiB,IAAN,CAAWb,IAA5B;AACA,QAAIC,UAAU,GAAGL,KAAK,CAACiB,IAAvB;AACAP,IAAAA,OAAO,CAACC,GAAR,uCAA4BT,UAA5B;AACAR,IAAAA,MAAM,CAACkB,KAAP,CAAaE,yBAAb,CAAuC,QAAvC;AACA,SAAKC,OAAL,CAAab,UAAb,EAAyBG,UAAzB;AACH,GA5CkC;;AA6CnC;;;;;AAKAU,EAAAA,OAlDmC,mBAkD3BG,UAlD2B,EAkDfC,UAlDe,EAkDH,CAAG,CAlDA;AAoDnCC,EAAAA,QApDmC,oBAoD1BpB,KApD0B,EAoDnB;AACZ,QAAIiB,IAAI,GAAGjB,KAAK,CAACiB,IAAjB;AACA,QAAII,OAAO,GAAGrB,KAAK,CAACsB,QAApB;AACA,SAAKC,eAAL,CAAqBN,IAArB,EAA2BI,OAA3B;AACH,GAxDkC;AAyDnCE,EAAAA,eAzDmC,2BAyDnBN,IAzDmB,EAyDbI,OAzDa,EAyDJ,CAAG,CAzDC;AA2DnC;AACAG,EAAAA,MA5DmC,oBA4D1B,CAAG,CA5DuB;AA6DnC;AACAC,EAAAA,UA9DmC,wBA8DtB,CAAG,CA9DmB;AA+DnC;AACAC,EAAAA,MAhEmC,oBAgE1B,CAAG,CAhEuB;AAiEnC;AACAC,EAAAA,KAlEmC,mBAkE3B,CAAG,CAlEwB;AAmEnC;AACAC,EAAAA,QApEmC,sBAoExB,CAAG,CApEqB;AAqEnC;AACAC,EAAAA,SAtEmC,uBAsEvB,CAAG,CAtEoB;AAuEnC;AACAC,EAAAA,SAxEmC,uBAwEvB;AACR,SAAKC,SAAL;AACA,SAAKC,eAAL;AACA,QAAI,KAAKf,IAAL,CAAUb,IAAV,CAAe6B,OAAf,CAAuB,OAAvB,KAAmC,CAAC,CAAxC,EAA2CvC,MAAM,CAACkB,KAAP,CAAasB,gBAAb,CAA8B,KAAKjB,IAAL,CAAUb,IAAxC,EAHnC,CAIR;AACH,GA7EkC;AA8EnC;AACA2B,EAAAA,SA/EmC,uBA+EvB,CAAG,CA/EoB;;AAgFnC;;;AAGAI,EAAAA,MAnFmC,oBAmFX;AAAA,QAAjBC,QAAiB,uEAAN,IAAM;AACpB,QAAI1C,MAAM,CAAC2C,KAAP,CAAaC,WAAb,EAAJ,EAAgC5C,MAAM,CAAC6C,OAAP,CAAeC,IAAf,CAAoBC,OAAO,CAACC,EAAR,CAAWC,UAA/B,EAA2C,KAAK1B,IAAL,CAAUb,IAArD;AAChC,SAAKa,IAAL,CAAU2B,OAAV,GAFoB,CAGpB;;AACA,QAAIC,iBAAiB,IAAIT,QAAzB,EAAmC1C,MAAM,CAAC2C,KAAP,CAAaS,aAAb,CAA2B,KAAK7B,IAAL,CAAUb,IAArC;AACtC,GAxFkC;AAyFnC4B,EAAAA,eAzFmC,6BAyFjB;AACd,QAAI,CAAC,KAAKzB,aAAV,EAAyB;AACzB,QAAIwC,KAAK,GAAG,KAAKxC,aAAL,CAAmByC,MAA/B;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAApB,EAA2BE,CAAC,EAA5B,EAAgC;AAC5BC,MAAAA,YAAY,CAAC,KAAK3C,aAAL,CAAmB0C,CAAnB,CAAD,CAAZ;AACH;AACJ,GA/FkC;;AAiGnC;;;AAGAE,EAAAA,SApGmC,uBAoGvB;AACR,QAAIC,OAAO,GAAGxD,EAAE,CAACyD,OAAjB;AAAA,QACIC,OAAO,GAAG1D,EAAE,CAAC2D,IAAH,CAAQC,uBAAR,EADd;AAAA,QAEIC,QAAQ,GAAGL,OAAO,CAACM,KAAR,GAAgBN,OAAO,CAACO,MAFvC;AAAA,QAGIC,QAAQ,GAAGN,OAAO,CAACI,KAAR,GAAgBJ,OAAO,CAACK,MAHvC;;AAKA,QAAIF,QAAQ,GAAGG,QAAf,EAAyB;AACrBhE,MAAAA,EAAE,CAAC2D,IAAH,CAAQM,uBAAR,CAAgCP,OAAO,CAACI,KAAxC,EAA+CJ,OAAO,CAACK,MAAvD,EAA+D/D,EAAE,CAACkE,gBAAH,CAAoBC,WAAnF;AACH,KAFD,MAEO;AACHnE,MAAAA,EAAE,CAAC2D,IAAH,CAAQM,uBAAR,CAAgCP,OAAO,CAACI,KAAxC,EAA+CN,OAAO,CAACO,MAAvD,EAA+D/D,EAAE,CAACkE,gBAAH,CAAoBE,YAAnF;AACH;AACJ;AA/GkC,CAApB,CAAnB","sourceRoot":"/","sourcesContent":["window.glGame = window.glGame || {};\r\n\r\nglGame.baseclass = cc.Component.extend({\r\n    /**\r\n     * @param event\r\n     * @param type UI编辑器传参 有值就不做按钮连点过滤(且不等于特殊音效字段)  使用select分页按钮\r\n     * @Explain Button点击事件统一调用\r\n     */\r\n    OnClickButton(event, type) {\r\n        let buttonName = event.target.name;\r\n        let buttonNode = event.target;\r\n\r\n        if (!type || type == \"select\"){\r\n            if (this.curClickState) return;\r\n            this.curClickState = true;\r\n            this.allCurTimeout = this.allCurTimeout || [];\r\n            this.allCurTimeout.push(setTimeout(() => {\r\n                this.curClickState = false;\r\n            }, 500));\r\n        }\r\n\r\n        console.log(`点击了button -> ${buttonName}`);\r\n        switch (buttonName) {\r\n            case \"close_eff\":        //当前界面有播放特长音效的关闭按钮\r\n                glGame.audio.closeCurEffect();\r\n                glGame.audio.playLoadSoundEffectByPath(\"close\");\r\n                break;\r\n            case \"close\":\r\n                glGame.audio.playLoadSoundEffectByPath(\"close\");\r\n                break;\r\n            default:\r\n                if (type == \"select\") glGame.audio.playLoadSoundEffectByPath(\"select\");\r\n                else glGame.audio.playLoadSoundEffectByPath(\"click\");\r\n        }\r\n        this.onClick(buttonName, buttonNode);\r\n    },\r\n    /**\r\n     * @param event\r\n     * @Explain Toggle点击事件统一调用\r\n     */\r\n    OnClickToggle(event) {\r\n        let buttonName = event.node.name;\r\n        let buttonNode = event.node;\r\n        console.log(`点击了toggle -> ${buttonName}`);\r\n        glGame.audio.playLoadSoundEffectByPath(\"select\");\r\n        this.onClick(buttonName, buttonNode);\r\n    },\r\n    /**\r\n     * @param ButtonName\r\n     * @param ButtonNode\r\n     * @Explain 子类需要重写这个接口来触发点击事件\r\n     */\r\n    onClick(ButtonName, ButtonNode) { },\r\n\r\n    OnSlider(event) {\r\n        let node = event.node;\r\n        let process = event.progress;\r\n        this.onSliderProcess(node, process);\r\n    },\r\n    onSliderProcess(node, process) { },\r\n\r\n    // 组件启用时,每帧调用\r\n    update() { },\r\n    // 同update一样\r\n    lateUpdate() { },\r\n    // 当附加到一个激活的节点上或者其节点第一次激活时候调用。因此只会在刚创建的时候被调用一次后面都不在调用\r\n    onLoad() { },\r\n    // 如果该组件第一次启用，则在所有组件的 update 之前调用。\r\n    start() { },\r\n    // 当该组件被启用，并且它的节点也激活时。\r\n    onEnable() { },\r\n    // 当该组件被禁用或节点变为无效时调用。\r\n    onDisable() { },\r\n    // 当该组件被销毁时调用\r\n    onDestroy() {\r\n        this.OnDestroy();\r\n        this.clearCurTimeout();\r\n        if (this.node.name.indexOf(\"entry\") != -1) glGame.audio.goBackPlazaAudio(this.node.name);\r\n        //if (!cc.isValid(this.node)) this.node.removeFromParent();\r\n    },\r\n    // 子类重写此销毁函数\r\n    OnDestroy() { },\r\n    /**\r\n     * 销毁自己\r\n     */\r\n    remove(blRemove = true) {\r\n        if (glGame.panel.isHaveEntry()) glGame.emitter.emit(MESSAGE.UI.PLAZA_OPEN, this.node.name);\r\n        this.node.destroy();\r\n        // TODO 羞耻修改，必须要改\r\n        if (isEnableHotUpdate && blRemove) glGame.panel.PrefabRelease(this.node.name);\r\n    },\r\n    clearCurTimeout() {\r\n        if (!this.allCurTimeout) return;\r\n        let count = this.allCurTimeout.length;\r\n        for (let i = 0; i < count; i++) {\r\n            clearTimeout(this.allCurTimeout[i]);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 给予适配比例\r\n     */\r\n    fitScreen() {\r\n        let nowSize = cc.winSize,\r\n            cutSize = cc.view.getDesignResolutionSize(),\r\n            nowRatio = nowSize.width / nowSize.height,\r\n            cutRatio = cutSize.width / cutSize.height;\r\n\r\n        if (nowRatio < cutRatio) {\r\n            cc.view.setDesignResolutionSize(cutSize.width, cutSize.height, cc.ResolutionPolicy.FIXED_WIDTH);\r\n        } else {\r\n            cc.view.setDesignResolutionSize(cutSize.width, nowSize.height, cc.ResolutionPolicy.FIXED_HEIGHT);\r\n        }\r\n    }\r\n\r\n});\r\n"]}