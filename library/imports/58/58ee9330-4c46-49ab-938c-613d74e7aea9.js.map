{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\prefab\\nfish_deskUIContainer.js"],"names":["CONST","require","glGame","baseclass","extend","properties","moneyEffect_Atlas","displayName","tooltip","type","cc","SpriteAtlas","laserBornEffect_Atlas","icon_Atlas","icon_2_3_4_Atlas","speciaIcon_Atlas","explosionAndLightning_Atlas","illustratedBook","Prefab","record_pre","setting_pre","turntable","cornucopia","bulletEffect","fishTip","changeCannonEffectList","sp","SkeletonData","batteryList","ui_Actionable","Node","bulletTips","ui_skillAuto","ui_skillLock","bossConeInTip","bossBornTip","bossNormalPos","spine_csrcdh","effect_csrcdh","spine_ryxwrcdh","effect_ryxwrcdh","ui_menu","ui_menuBtn","chick_act","chick_meihua","alert_container","text_exitBossClearSocre","text_exitLosCannan","text_netOff","btn_quit","btn_queding","btn_queding_net","onLoad","creatSmear","bossTipMoveToTime","node","isInit","bulletTipTime","clickFishPoolEvent","clickFishPoolTime","lastAngle","logic","getInstance","fireTime","fireTimeFrequency","isFire","cannonLevel","sys","localStorage","getItem","user","userID","Number","isExit","turntableView","cornucopiaView","runSpecial0","runSpecial1","runSpecial2","runSpecial3","followFishTipList","gameZoomX","winSize","width","DesignSize","gameZoomY","height","registerEvent","initSpeciaNode","start","Invisible","MaxUserNum","Normal","FadeToTime","DelayTime","i","getChildByName","active","ui_gun","ui_pos","ui_wait","addComponent","getComponent","BoxCollider","enabled","opacity","stopAllActions","runAction","repeatForever","sequence","fadeTo","delayTime","gameNet","send_msg","gameid","route","msg","result","fishMutipleCfg","console","log","special_Cantainer","instantiate","addChild","hide","NormalOpacity","isEnterRoom","emitter","on","clientEvent","comeInPlayer","comeInPlayerHandler","leaveRoomPlayer","leaveRoomPlayerHandler","clickFishPool","clickFishPoolHandler","hiddenLocationTip","hiddenLocationTipHandler","playFiringEffect","playFiringEffectHandler","updateShootGold","updateShootGoldHandler","updateGunRate","updateGunRatedHandler","updateGunRecoil","updateGunRecoilHandler","onFreezeShowUI","onFreezeShowUIHandler","fireSettingRecoil","fireSettingRecoilHandler","onCoinChanged","onCoinChangedHandler","playCoinEffect","playCoinEffectHandler","onSurfStart","onSurfStartHandler","showFishTideTitle","showFishTideTitleHandler","myUpdateMoney","myUpdateMoneyHandler","checkAutoAndLock","checkAutoAndLockHandler","upSpecialGunCoin","upSpecialGunCoinHandler","getSpecialCannon","getSpecialCannonHandler","restoreCannon","restoreCannonHandler","bossComein","bossComeinHandler","sprinkleRedBag","sprinkleRedBagHandler","showTurntable","showTurntableHandler","otherPlayerShowSpecialAward","oPSSAHandler","specialBulletStatistics","checkSpecialBullet","checkSpecialBulletHandler","checkRotation","checkRotationHandler","hideBossConinUI","hideBossConinUIHandler","updateUserStatus","updateUserStatusHandler","addGoldEffect","addGoldEffectHandler","showAlert","showAlertHandler","accumulate","accumulateHandler","clearbossComein","clearbossComeinHandler","clearSpecialBulletPool","clearSpecialHandler","bossGodOfWealthCoin","bossGodOfWealthCoinHandler","bossLavaBasaltComin","bossLavaBasaltCominHandler","checkSpecialCannon","checkSpecialCannonHandler","followFishTip","followFishTipHandler","clearFollowFishTip","clearFollowFishTipHandler","EventType","TOUCH_START","onFireHooHandler","TOUCH_END","TOUCH_CANCEL","TOUCH_MOVE","onMoveHandler","unregisterEvent","off","roomLockAutoData","storage","SkillisLockAutoChange","roomId","onSkillAutoHandler","roomSkillData","SkillLock","onSkillLockHandler","evt","isAuto","getAngle","getLocation","emit","fishCancelShoot","res","initPlayer","seatNum","ui_other","netSt","userStatus","UserStatus","OffLine","play","myid","tower_bg","ui_bg","ui_unWait","lab_coin","error","Label","string","GoldTemp","gold","uid","spine_restoreCannon","playSpine","SpineName","undefined","ui_Tip","spineName","Seat","RightTop","LeftTop","YouHereTop","YouHereButtom","getIsRotation","offLineMissileData","warn","onSpecialBulletExp","JSON","parse","stringify","cannonType","CannonType","battery","batterySkeletonData","Lightning","CannonSkin","PartialBomb","Laser","Missile","Skeleton","skeletonData","Idle","cannonAmount","NormalCannonOffsex","cannon","gunType","batteryMask","spineNode","destroy","isSetRecoil","angle","fireBulletSettingRecoil","pos","OffsexY","y","MaxBullte","bullteNum","nextClickFishPoolHandler","ShootGapTime","isLock","getState","coin","baseConsume","NewGround","roomRule","Rank","showNotMoneyDialog","isYuRuyiRuning","HaveSpecialCannon","playerInfo","arg","gunLevel","currentIsMissile","currentBullteType","nextIsHaveMissile","hitMax","specialBulletPool","startFire","lockFishID","lock","indexNum","lockFishIndex","callFunc","ui_physicalPool","parent","len","childrenCount","fishLen","MaxFish","n","children","fish_Unit","getFishID","NormalAngle","ZeroAngle","adjustGunAngle","dialogPanelIsShow","isLockAutoChange","getFloat","panel","showDialog","showShop","direction","convertToNodeSpaceAR","startPos","position","getP1ToP2Angle","Attack","scheduleOnce","onClick","name","NotExit","IstExit","closeViewHandler","menuViewHandler","rechargeClickHandler","openFishGroupHandler","historyClickHandler","settingClickHandler","plusClickHandler","subClickHandler","onQuitHandler","onQuedingHandler","onQuedingOffNetHandler","IsRestore","FixTime","Idle2","radius","FirepillarWidth","newSize","size","isNew","fish","fishId","v2","x","setGunRate","isRefreshNow","isChange","key","UserMax","callBack","Date","now","Math","random","isNow","nextTime","isRestoreIng","restoreCB","checkGunStyle","isCheckGunSkin","Not","isHaveSpcCannon","myinfo","NotHaveSpecialCanon","fishSound","NormalCannonMinLevel","NormalCannonMaxLevel","changeCannonData","op","Opention","ChangeCannonLv","room","getPlayerOp","scenetag","FISH2","setItem","GunLevel","spine","otherAccumulate","DelayTime2","gunRate","specialCannonFishPos","isRestore","changeGun","ani","FiexUpdateCannonCoinTime","NowUpdateCannonCoinTime","time","changeGunStyle","NormalLevel","isGunMoving","oldNode","oldLastNode","MoveStart","laserBornEffect","creatorEffect","spCannContainer","mcName","changeCannonSkeletonData","animationName","isRotation","Min","Max","CannonGetEddect","CannonChangeEffect","CannonGotEddect","LoopTime","IsHaveZero","Speed","PayEdRemove","changeCannonEffect","rotateBy","initEffect","MoveTime","act","Get","MoveOver","moveTo","cannonTypeSc","Restore","isInFreeze","showPanel","zIndex","lockLab","img_offsuoding","useLockSkill","roomSkillLockData","roomSkillAutoData","lastLockFishID","useAutoSkill","leaveRoomUnLock","roomData","autoLab","img_offzidong","isClose","ui_upIcon","ui_leftIcon","isTourist","showRegisteredGift","showSuspicious","AwardType","RUYI","initTurntableView","startRunCornucopia","EffectMaxRunTime","IsExit4","IsExit3","SkillAuto","exitRoom","IsExit","currentUid","AlertType","LosCannan","BossClearSocre","NetOff","fishPos","coinContainer","ui_coinEffectPos","pre","targetPosition","effectPosition","ui_CoinEffect","isRemoveSelf","playName","lab_number","formatMoney","rewardGold","effectCoin","MaxCoin","RandomoffSex","RandomMin","RandomOffsexX","RandomOffsexY","RandomMinY","StartName","endName","plyTime","isHaveZero","speed","plyedDestroy","isRandomPly","OneDelayTime","TwoDelayTime","ScaleToTime","BezierToTime","ScaleToArg","MoveToTime","EndOpacity","Gold","Silver","upPos","bounceAct1","spawn","bounceAct2","bezierPoint","scaleTo","bezierTo","effectRotateLevel","EffectRotateLevel","OneLevel","resGroupId","fishPoolData","fishTypeId","json_fishTable","effectRotate","killType","Bomb","TowLevel","ThreeLevel","FourLevel","flyGoldEffect","flyRotateEffect","startShowPos","flySeatNum","effectContainer","moveToPos","spine_effect","spineCantainer","bg","BossLavaBasalt","lab","RepeatTimes","SubTimes","ceil","currentCoin","schedule","isDestroy","_components","currStartNum","indexOf","toFixed","sprF","getSpriteFrame","scale","getOriginalSize","TwoScale","ThreeScale","FourScale","Sprite","spriteFrame","oldScale","Centont","HalfScale","posNodeName","BasezIndex","lastzIndex","callBalk","EffScaleToArg","EffScaleToTime","EffDelayTime","EffectNum","EffectPre","fourEffect","otherEffect","CoinLabOffsexY","coinlab","moveToAct","lab_coinMask","base_labNode","labNode","oldx","oldy","MoveOffsex","MoveOffsex2","endPos","endPos2","anchorX","oldPos","currRewardGold","startHide","setPosition","GoTime","endTime","DelayStateTime","ScaleToTime2","Hide","FadeTo","moveBy","checkGold","total","isDispose","currCoin","spinec","oldCoin","startRun","totalReward","removeChild","NotOpacity","NotScale","QScale","NormalScale","FadeTime","ScalTTime","Scale","isRo","Frequency","frequency","isoffNet","labName","runSpecialBulletStatistics","dt","split","DeayTime","lastCannType","isDisSpecial","isLevel","specialBulletStatisticsClear","ui_coinEffectContainer","lastcurrCoin","FadeToArg","typeName","posPreName","nodeName","posName","startShowSpacil","flyGoldEffectForSpacil","Multiple","endGoldTime","HideOpacity","arrvalCoin","offset","showGodOfWealth","push","ui_tip","tipName","tip","length","id","text","scaleX","update","ShowMaxTime","MaxClickFishPoolTime","ChangeSecond","exitTimeMsg","floor","curWaitTime","showTimeMsg","HaveSpecialFish","ToSecond","ThreeHideTime","ShowTime","specialFishListBornLen","specialFishListBorn","wellBornTime","showTime","Format","BossGodOfWealth","isSetTime","settingActiveTime","BossSYLW","icon","fishData1","fishData2","fishData","SpeciaResPre","isFishTideRuning","isRun","IsHave","Widget","updateAlignment","bet","replace","desc_lab","oldX","PlayBGMTime","fishBgSound","BossSYLWBgMusic","BossLavaBasaltBgMusic","PositiveDirection","OppositeDirection","MaxLight","MinLight","subD","liveTime","serverTime","createTime","NotBorn","abs","isNeedSet180Angle","ui_surfCantainer","bgIndex","OutWinSizeOffceX","OutWinSizeX","ui_fishTideTitle","HidOpacity","OnDestroy","unscheduleAllCallbacks","OnClickButton","event","buttonName","target","buttonNode","curClickState","allCurTimeout","setTimeout","audio","closeCurEffect","playLoadSoundEffectByPath"],"mappings":"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","sourceRoot":"/","sourcesContent":["/***\r\n *  捕鱼：桌子UI 菜单、充值、炮台\r\n * **/\r\nlet CONST = require(\"nfishConst\");\r\n\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        //金币银币漂移动画 图集\r\n        moneyEffect_Atlas: {\r\n            default: null,\r\n            displayName: \"moneyEffect_Atlas\",\r\n            tooltip: \"金币银币漂移动画 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        //特殊炮台出生动画 图集\r\n        laserBornEffect_Atlas: {\r\n            default: null,\r\n            displayName: \"laserBornEffect_Atlas\",\r\n            tooltip: \"特殊炮台出生动画 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        //鱼Icon 图集\r\n        icon_Atlas: {\r\n            default: null,\r\n            displayName: \"icon_Atlas\",\r\n            tooltip: \"鱼Icon 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        //2 3 4 档鱼 捕获 Icon 图集\r\n        icon_2_3_4_Atlas: {\r\n            default: null,\r\n            displayName: \"get_rawar_Atlas\",\r\n            tooltip: \"2 3 4 档鱼 捕获 Icon 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        //特殊鱼Tip Icon 图集\r\n        speciaIcon_Atlas: {\r\n            default: null,\r\n            displayName: \"speciaIcon_Atlas\",\r\n            tooltip: \"特殊鱼Tip Icon 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        explosionAndLightning_Atlas: {\r\n            default: null,\r\n            displayName: \"特效图集\",\r\n            tooltip: \"爆炸，灰烬，闪电\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n        illustratedBook: cc.Prefab, //图鉴\r\n        record_pre: cc.Prefab,      //记录详情\r\n        setting_pre: cc.Prefab,     //设置界面\r\n\r\n        turntable: cc.Prefab,       //自己的 玉如意转盘\r\n        cornucopia: cc.Prefab,      //自己的 聚宝盆\r\n\r\n        bulletEffect: cc.Prefab,    //炮台子弹射出炮口时动画的 播放器\r\n        fishTip: cc.Prefab,         //鱼冒泡\r\n\r\n        changeCannonEffectList:[sp.SkeletonData],//4个特殊炮台变身特效\r\n        batteryList:[sp.SkeletonData],//注意了！！  下标0-9的炮台 是 对应 1-10号炮台 ，下标 10 - 13 是特殊炮台\r\n\r\n        //ui容器\r\n        ui_Actionable:cc.Node,\r\n        bulletTips:cc.Node,\r\n\r\n        //技能按钮\r\n        ui_skillAuto:cc.Node,\r\n        ui_skillLock:cc.Node,\r\n\r\n        //特殊鱼即将出生 ui\r\n        bossConeInTip:cc.Node,\r\n        bossBornTip:cc.Node,\r\n        bossNormalPos:cc.Node,\r\n\r\n        //财神、熔岩玄武 入场效果\r\n        spine_csrcdh:cc.Node,\r\n        effect_csrcdh:cc.Node,\r\n        spine_ryxwrcdh:cc.Node,\r\n        effect_ryxwrcdh:cc.Node,\r\n\r\n        //菜单\r\n        ui_menu:cc.Node,\r\n        ui_menuBtn:cc.Node,\r\n\r\n        //粒子\r\n        chick_act: cc.Node,\r\n        chick_meihua: cc.Node,\r\n\r\n        //弹出窗口\r\n        alert_container: cc.Node,\r\n        text_exitBossClearSocre: cc.Node,\r\n        text_exitLosCannan: cc.Node,\r\n        text_netOff: cc.Node,\r\n        btn_quit: cc.Node,\r\n        btn_queding: cc.Node,\r\n        btn_queding_net: cc.Node,\r\n    },\r\n    onLoad () {\r\n        this.creatSmear         = true;\r\n        this.bossTipMoveToTime  = 0.5\r\n        this.node.isInit        = 1;\r\n        this.bulletTipTime      = 0;\r\n        this.clickFishPoolEvent = null;\r\n        this.clickFishPoolTime  = 0;\r\n        this.lastAngle          = null;\r\n        this.logic              = require(\"nfishlogic\").getInstance();//数据中心\r\n        this.fireTime           = 0;    //开火计时器\r\n        this.fireTimeFrequency  = 0.17; //开火频率\r\n        this.isFire             = true; //是否可以开火\r\n        this.logic.cannonLevel  = cc.sys.localStorage.getItem(\"gunLevel_\"+glGame.user.userID) ? Number(cc.sys.localStorage.getItem(\"gunLevel_\"+glGame.user.userID)) : 1;\r\n        this.isExit             = true;\r\n        this.turntableView      = null;\r\n        this.cornucopiaView     = null;\r\n        this.runSpecial0        = false;\r\n        this.runSpecial1        = false;\r\n        this.runSpecial2        = false;\r\n        this.runSpecial3        = false;\r\n        this.followFishTipList  = [];\r\n        this.logic.gameZoomX    = cc.winSize.width/CONST.DesignSize.width;\r\n        this.logic.gameZoomY    = cc.winSize.height/CONST.DesignSize.height;\r\n        this.registerEvent();\r\n        this.initSpeciaNode();\r\n    },\r\n    start () {\r\n        //初始化界面隐藏ui，等待数据\r\n        const Invisible = 0;\r\n        const MaxUserNum = 4;\r\n\r\n        const Normal = 255;\r\n        const FadeToTime = 1.3;\r\n        const DelayTime = 0.6;\r\n        for (let i = 0;i<MaxUserNum;i++){\r\n            this.ui_Actionable.getChildByName(\"ui_bg\"+i).active = false;\r\n            this.ui_Actionable.getChildByName(\"tower_bg\"+i).active = false;\r\n            let ui_gun  = this.ui_Actionable.getChildByName(\"ui_gun\"+i);\r\n            let ui_pos  = this.ui_Actionable.getChildByName(\"ui_pos\"+i);\r\n            let ui_wait = ui_pos.getChildByName(\"ui_wait\");\r\n            ui_gun.getChildByName(\"batteryMask\").addComponent(\"nfish_laserhitNode\");\r\n            ui_gun.getChildByName(\"batteryMask\").getComponent(cc.BoxCollider).enabled = false;\r\n            ui_gun.getChildByName(\"batteryMask\").opacity = Invisible;\r\n            ui_gun.active = false;\r\n            ui_wait.stopAllActions();\r\n            ui_wait.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(FadeToTime,Invisible),cc.delayTime(DelayTime),cc.fadeTo(FadeToTime,Normal))));\r\n        }\r\n\r\n        glGame.gameNet.send_msg('http.ReqNewFishConfig', { gameid: 49 }, (route, msg) => {\r\n            if(msg.result != null){\r\n                glGame.fishMutipleCfg = msg.result;\r\n            }\r\n            console.log(\"fish_books----------------\", msg)\r\n        });\r\n    },\r\n    //初始化特殊奖励（玉如意、聚宝盆）有关的\r\n    initSpeciaNode(){\r\n        let special_Cantainer = this.node.getChildByName(\"special_Cantainer\");\r\n\r\n        this.turntableView = cc.instantiate(this.turntable);\r\n        special_Cantainer.addChild(this.turntableView);\r\n        this.turntableView.opacity = 0;\r\n\r\n        this.cornucopiaView = cc.instantiate(this.cornucopia);\r\n        special_Cantainer.addChild(this.cornucopiaView);\r\n        this.cornucopiaView.opacity = 0;\r\n    },\r\n    //初始化界面隐藏ui，等待数据\r\n    hide(){\r\n        const Normal = 255;\r\n        let spine_csrcdh = this.node.getChildByName(\"spine_effect\").getChildByName(\"spine_csrcdh\");\r\n        let spine_ryxwrcdh = this.node.getChildByName(\"spine_effect\").getChildByName(\"spine_ryxwrcdh\");\r\n        spine_csrcdh.active = false;\r\n        spine_csrcdh.opacity = Normal;\r\n        spine_ryxwrcdh.active = false;\r\n        spine_ryxwrcdh.opacity = Normal;\r\n        this.ui_menu.active = false;\r\n        this.node.getChildByName(\"ui_ExitTip\").active = false;\r\n        this.node.getChildByName(\"ui_fireEffect\").active = false;\r\n        const MaxUserNum = 4;\r\n        const NormalOpacity = 255;\r\n        for (let i = 0;i<MaxUserNum;i++){\r\n            if(!this.logic.isEnterRoom){\r\n                this.ui_Actionable.getChildByName(\"ui_bg\"+i).active = false;\r\n                this.ui_Actionable.getChildByName(\"tower_bg\"+i).active = false;\r\n                let ui_gun = this.ui_Actionable.getChildByName(\"ui_gun\"+i);\r\n                ui_gun.getChildByName(\"batteryMask\").opacity = NormalOpacity;\r\n                ui_gun.getChildByName(\"batteryMask\").getComponent(cc.BoxCollider).enabled = false;\r\n                ui_gun.active = false;\r\n            }\r\n        }\r\n    },\r\n    //注册监听\r\n    registerEvent() {\r\n        glGame.emitter.on(CONST.clientEvent.comeInPlayer,this.comeInPlayerHandler,this);            //用户进入\r\n        glGame.emitter.on(CONST.clientEvent.leaveRoomPlayer,this.leaveRoomPlayerHandler,this);      //用户离开\r\n        glGame.emitter.on(CONST.clientEvent.clickFishPool,this.clickFishPoolHandler,this);          //点击鱼池子\r\n        glGame.emitter.on(CONST.clientEvent.hiddenLocationTip,this.hiddenLocationTipHandler,this);  //隐藏位置提示\r\n        glGame.emitter.on(CONST.clientEvent.playFiringEffect,this.playFiringEffectHandler,this);    //播放开炮效果\r\n        glGame.emitter.on(CONST.clientEvent.updateShootGold,this.updateShootGoldHandler,this);      //更新用户射击余额\r\n        glGame.emitter.on(CONST.clientEvent.updateGunRate,this.updateGunRatedHandler,this);         //更新炮台倍率\r\n        glGame.emitter.on(CONST.clientEvent.updateGunRecoil,this.updateGunRecoilHandler,this);      //为其他玩家设置后坐力\r\n        glGame.emitter.on(CONST.clientEvent.onFreezeShowUI,this.onFreezeShowUIHandler,this);        //冰冻显示UI\r\n        glGame.emitter.on(CONST.clientEvent.fireSettingRecoil,this.fireSettingRecoilHandler,this);  //为自己设置后坐力\r\n        glGame.emitter.on(CONST.clientEvent.onCoinChanged,this.onCoinChangedHandler,this);          //充值到账财神爷动画\r\n        glGame.emitter.on(CONST.clientEvent.playCoinEffect,this.playCoinEffectHandler,this);        //死鱼飘金币\r\n        glGame.emitter.on(CONST.clientEvent.onSurfStart,this.onSurfStartHandler,this);              //海浪鱼群 - 海浪UI\r\n        glGame.emitter.on(CONST.clientEvent.showFishTideTitle,this.showFishTideTitleHandler,this);  //显示浪潮来临\r\n        glGame.emitter.on(CONST.clientEvent.myUpdateMoney,this.myUpdateMoneyHandler,this);          //更新自己钱\r\n        glGame.emitter.on(CONST.clientEvent.checkAutoAndLock,this.checkAutoAndLockHandler,this);    //检查锁定和自动按钮\r\n        glGame.emitter.on(CONST.clientEvent.upSpecialGunCoin,this.upSpecialGunCoinHandler,this);    //更新特殊炮台子弹数量\r\n        glGame.emitter.on(CONST.clientEvent.getSpecialCannon,this.getSpecialCannonHandler,this);    //获取到一个特殊炮台\r\n        glGame.emitter.on(CONST.clientEvent.restoreCannon,this.restoreCannonHandler,this);          //特殊子弹用完，恢复炮台\r\n        glGame.emitter.on(CONST.clientEvent.bossComein,this.bossComeinHandler,this);                //boss出现\r\n        glGame.emitter.on(CONST.clientEvent.sprinkleRedBag,this.sprinkleRedBagHandler,this);        //财神出金币\r\n        glGame.emitter.on(CONST.clientEvent.showTurntable,this.showTurntableHandler,this);          //玉如意 出转盘 聚宝盆 出拉霸\r\n        glGame.emitter.on(CONST.clientEvent.otherPlayerShowSpecialAward,this.oPSSAHandler,this);    //其他人的 如意 聚宝鹏 展示\r\n        glGame.emitter.on(CONST.clientEvent.specialBulletStatistics,this.specialBulletStatistics,this);    //特殊子弹统计\r\n        glGame.emitter.on(CONST.clientEvent.checkSpecialBullet,this.checkSpecialBulletHandler,this);       //特殊子弹统计 - 检查器\r\n        glGame.emitter.on(CONST.clientEvent.checkRotation,this.checkRotationHandler,this);          //设置旋转\r\n        glGame.emitter.on(CONST.clientEvent.hideBossConinUI,this.hideBossConinUIHandler,this);      //隐藏boss来了\r\n        glGame.emitter.on(CONST.clientEvent.updateUserStatus,this.updateUserStatusHandler,this);    //隐藏boss来了\r\n        glGame.emitter.on(CONST.clientEvent.addGoldEffect,this.addGoldEffectHandler,this);          //飘分\r\n        glGame.emitter.on(CONST.clientEvent.showAlert,this.showAlertHandler,this);                  //alert弹出框\r\n        glGame.emitter.on(CONST.clientEvent.accumulate,this.accumulateHandler,this);                //蓄力播放\r\n        glGame.emitter.on(CONST.clientEvent.clearbossComein,this.clearbossComeinHandler,this);      //清理boss进入\r\n        glGame.emitter.on(CONST.clientEvent.clearSpecialBulletPool,this.clearSpecialHandler,this);  //清理特殊子弹\r\n        glGame.emitter.on(CONST.clientEvent.bossGodOfWealthCoin,this.bossGodOfWealthCoinHandler,this);  //财神进入\r\n        glGame.emitter.on(CONST.clientEvent.bossLavaBasaltComin,this.bossLavaBasaltCominHandler,this);  //熔岩玄武进入\r\n        glGame.emitter.on(CONST.clientEvent.checkSpecialCannon,this.checkSpecialCannonHandler,this);   //检查特殊炮台\r\n        glGame.emitter.on(CONST.clientEvent.followFishTip,this.followFishTipHandler,this);          //显示鱼气泡\r\n        glGame.emitter.on(CONST.clientEvent.clearFollowFishTip,this.clearFollowFishTipHandler,this);          //显示鱼气泡\r\n        this.node.on(cc.Node.EventType.TOUCH_START,this.onFireHooHandler,this);                     //开始 点击屏幕 开始 发射\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.onFireHooHandler,this);                       //结束 点击屏幕 停止 发射\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onFireHooHandler,this);                    //取消 点击屏幕 停止 发射\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMoveHandler,this);                         //移动 点击还移动，自动射击的时候更新角度\r\n    },\r\n    //反注册监听\r\n    unregisterEvent() {\r\n        glGame.emitter.off(CONST.clientEvent.comeInPlayer,this);\r\n        glGame.emitter.off(CONST.clientEvent.leaveRoomPlayer,this);\r\n        glGame.emitter.off(CONST.clientEvent.clickFishPool,this);\r\n        glGame.emitter.off(CONST.clientEvent.hiddenLocationTip,this);\r\n        glGame.emitter.off(CONST.clientEvent.playFiringEffect,this);\r\n        glGame.emitter.off(CONST.clientEvent.updateShootGold,this);\r\n        glGame.emitter.off(CONST.clientEvent.updateGunRate,this);\r\n        glGame.emitter.off(CONST.clientEvent.updateGunRecoil,this);\r\n        glGame.emitter.off(CONST.clientEvent.onFreezeShowUI,this);\r\n        glGame.emitter.off(CONST.clientEvent.fireSettingRecoil,this);\r\n        glGame.emitter.off(CONST.clientEvent.onCoinChanged,this);\r\n        glGame.emitter.off(CONST.clientEvent.playCoinEffect,this);\r\n        glGame.emitter.off(CONST.clientEvent.onSurfStart,this);\r\n        glGame.emitter.off(CONST.clientEvent.showFishTideTitle,this);\r\n        glGame.emitter.off(CONST.clientEvent.myUpdateMoney,this);\r\n        glGame.emitter.off(CONST.clientEvent.checkAutoAndLock,this);\r\n        glGame.emitter.off(CONST.clientEvent.getSpecialCannon,this);\r\n        glGame.emitter.off(CONST.clientEvent.upSpecialGunCoin,this);\r\n        glGame.emitter.off(CONST.clientEvent.restoreCannon,this);\r\n        glGame.emitter.off(CONST.clientEvent.bossComein,this);\r\n        glGame.emitter.off(CONST.clientEvent.sprinkleRedBag,this);\r\n        glGame.emitter.off(CONST.clientEvent.showTurntable,this);\r\n        glGame.emitter.off(CONST.clientEvent.otherPlayerShowSpecialAward,this);\r\n        glGame.emitter.off(CONST.clientEvent.specialBulletStatistics,this);\r\n        glGame.emitter.off(CONST.clientEvent.checkSpecialBullet,this);\r\n        glGame.emitter.off(CONST.clientEvent.checkRotation,this);\r\n        glGame.emitter.off(CONST.clientEvent.hideBossConinUI,this);\r\n        glGame.emitter.off(CONST.clientEvent.updateUserStatus,this);\r\n        glGame.emitter.off(CONST.clientEvent.addGoldEffect,this);\r\n        glGame.emitter.off(CONST.clientEvent.showAlert,this);\r\n        glGame.emitter.off(CONST.clientEvent.accumulate,this);\r\n        glGame.emitter.off(CONST.clientEvent.clearbossComein,this);\r\n        glGame.emitter.off(CONST.clientEvent.clearSpecialBulletPool,this);\r\n        glGame.emitter.off(CONST.clientEvent.bossGodOfWealthCoin,this);\r\n        glGame.emitter.off(CONST.clientEvent.bossLavaBasaltComin,this);\r\n        glGame.emitter.off(CONST.clientEvent.checkSpecialCannon,this);\r\n        glGame.emitter.off(CONST.clientEvent.followFishTip,this);\r\n        glGame.emitter.off(CONST.clientEvent.clearFollowFishTip,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_START,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE,this);\r\n    },\r\n    //检查自动按钮\r\n    checkAutoAndLockHandler(){\r\n        let roomLockAutoData = glGame.storage.getItem(CONST.SkillisLockAutoChange);\r\n        if(roomLockAutoData != null && roomLockAutoData[this.logic.roomId] == \"o\"){\r\n            this.onSkillAutoHandler();\r\n        }\r\n\r\n        let roomSkillData = glGame.storage.getItem(CONST.SkillLock);\r\n        if(roomSkillData != null && roomSkillData[this.logic.roomId] == \"o\"){\r\n            this.onSkillLockHandler();\r\n        }\r\n    },\r\n    //自动射击的时候获取角度\r\n    onMoveHandler(evt){\r\n        if(this.logic.isAuto)this.lastAngle = this.getAngle(evt.getLocation());\r\n    },\r\n    //点击屏幕 发射\r\n    onFireHooHandler(evt){\r\n        glGame.emitter.emit(CONST.clientEvent.fishCancelShoot,evt);\r\n    },\r\n    //用户进入，显示炮台\r\n    comeInPlayerHandler(res){\r\n        this.initPlayer(res,true);\r\n    },\r\n    //用户离开\r\n    leaveRoomPlayerHandler(res){\r\n        this.initPlayer(res,false);\r\n    },\r\n    //更新用户状态 seatNum 座位 isOnLine 是否在线\r\n    updateUserStatusHandler(res){\r\n        let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+res.seatNum);\r\n        let ui_other      = ui_pos.getChildByName(\"ui_other\");\r\n        let netSt         = ui_other.getChildByName(\"netStatusContainer\");\r\n        netSt.active      = res.userStatus == CONST.UserStatus.OffLine;\r\n    },\r\n    //初始化用户\r\n    initPlayer(play,isInit){\r\n        if(!play)return;\r\n        let myid          = glGame.user.userID;\r\n        let seatNum       = play.seatNum;\r\n        let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+seatNum);\r\n        let ui_gun        = this.ui_Actionable.getChildByName(\"ui_gun\"+seatNum);\r\n        let tower_bg      = this.ui_Actionable.getChildByName(\"tower_bg\"+seatNum);\r\n        let ui_bg         = this.ui_Actionable.getChildByName(\"ui_bg\"+seatNum);\r\n        let ui_unWait     = ui_bg.getChildByName(\"ui_unWait\");\r\n        let lab_coin      = ui_unWait.getChildByName(\"coinBg_cantainer\").getChildByName(\"lab_coin\");\r\n\r\n        if(ui_pos == null){\r\n            cc.error(\">> 出错了 \",play)\r\n            return;\r\n        }\r\n        let ui_other      = ui_pos.getChildByName(\"ui_other\");\r\n        let netSt         = ui_other.getChildByName(\"netStatusContainer\");\r\n        ui_other.active   = isInit;\r\n        netSt.active      = false;\r\n        ui_pos.active     = true;\r\n        ui_gun.active     = isInit;\r\n        tower_bg.active   = isInit;\r\n        if(isInit){\r\n            lab_coin.getComponent(cc.Label).string = glGame.user.GoldTemp(play.gold);\r\n        }\r\n        ui_pos.getChildByName(\"ui_wait\").active = !isInit;\r\n        ui_bg.active = isInit;\r\n        ui_bg.getChildByName(\"ui_unWait\").active = isInit;\r\n        ui_bg.getChildByName(\"ui_unWait\").getChildByName(\"img_zijipaotai\").active = myid == play.uid;\r\n        if (myid != play.uid){\r\n            let spine_restoreCannon = ui_gun.getChildByName(\"spine_restoreCannon\");\r\n            this.logic.playSpine(spine_restoreCannon,false,true,CONST.SpineName.Normal);\r\n        }\r\n        if(play.uid != undefined && myid == play.uid){\r\n            this.logic.isEnterRoom = true;\r\n            this.logic.seatNum = seatNum;\r\n            let ui_Tip = this.node.getChildByName(\"ui_Tip\");\r\n            ui_Tip.getChildByName(\"ui_\"+seatNum).active = isInit;\r\n            let spineName = play.seatNum == CONST.Seat.RightTop || play.seatNum == CONST.Seat.LeftTop ? CONST.SpineName.YouHereTop : CONST.SpineName.YouHereButtom;\r\n            if(this.logic.getIsRotation()){\r\n                spineName = play.seatNum == CONST.Seat.RightTop || play.seatNum == CONST.Seat.LeftTop ? CONST.SpineName.YouHereButtom : CONST.SpineName.YouHereTop;\r\n            }\r\n            this.logic.playSpine(ui_Tip.getChildByName(\"ui_\"+seatNum),true,false,spineName);\r\n            ui_other.getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = play.cannonLevel;\r\n            if(this.logic.offLineMissileData != null){//人物进入初始化房间结束后继续初始化断线重连的数据\r\n                cc.warn(\"> 人物进入初始化房间结束后继续初始化断线重连的数据 \")\r\n                glGame.emitter.emit(CONST.clientEvent.onSpecialBulletExp,JSON.parse(JSON.stringify(this.logic.offLineMissileData)));\r\n                this.logic.offLineMissileData = null;\r\n            }\r\n        }else {\r\n            this.updateGunRecoilHandler(play);\r\n        }\r\n        if(play.cannonType == CONST.CannonType.Normal){//普通炮台样式\r\n            ui_other.getChildByName(\"img_paobeikuang1\").active = true;\r\n            ui_other.getChildByName(\"lab_gunLv\").active = true;\r\n\r\n            ui_other.getChildByName(\"img_paobeikuang2\").active = false;\r\n            ui_other.getChildByName(\"ui_gunLvBg\").active = false;\r\n            ui_other.getChildByName(\"lab_gunLv2\").active = false;\r\n        }else{//特殊炮台样式\r\n            ui_other.getChildByName(\"img_paobeikuang1\").active = false;\r\n            ui_other.getChildByName(\"lab_gunLv\").active = false;\r\n\r\n            ui_other.getChildByName(\"img_paobeikuang2\").active = true;\r\n            ui_other.getChildByName(\"ui_gunLvBg\").active = true;\r\n            ui_other.getChildByName(\"lab_gunLv2\").active = true;\r\n        }\r\n        if(isInit){\r\n            let battery = ui_gun.getChildByName(\"battery\");\r\n            let batterySkeletonData;\r\n            switch (play.cannonType) {\r\n                case CONST.CannonType.Lightning :   // 闪电\r\n                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Lightning];\r\n                    break;\r\n                case CONST.CannonType.PartialBomb : // 炎爆\r\n                    batterySkeletonData = this.batteryList[CONST.CannonSkin.PartialBomb];\r\n                    break;\r\n                case CONST.CannonType.Laser :       // 龙息\r\n                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Laser];\r\n                    break;\r\n                case CONST.CannonType.Missile :     // 仙剑\r\n                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Missile];\r\n                    break;\r\n                case CONST.CannonType.Normal :     // 普通1-10级别\r\n                    break;\r\n                default:\r\n                    cc.error(\"===================初始化 炮台有误 ！\",play)\r\n            }\r\n            if(play.cannonType != CONST.CannonType.Normal) {//刚进来 如果数据有 龙溪炮台 那么现实龙溪炮台\r\n                if(batterySkeletonData == null){\r\n                    cc.warn(\">>>> 无法实例化 炮台 \",play)\r\n                }\r\n                if(this.logic.seatNum == play.seatNum)cc.warn(\"7 ======更换炮台====== cannonType \"+play.cannonType)\r\n                battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                ui_gun.cannonType = play.cannonType;\r\n                this.logic.playSpine(battery,true,false,CONST.SpineName.Idle);\r\n                ui_other.getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = play.cannonAmount+\"\"; //特殊炮台 现实 炮弹数量\r\n                ui_other.getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = play.cannonAmount+\"\";\r\n                //特殊炮炮台 不显示 加减号\r\n                ui_other.getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnPlus\").active = false;\r\n                ui_other.getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnSub\").active = false;\r\n            }else{\r\n                ui_other.getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnPlus\").active = myid == play.uid;\r\n                ui_other.getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnSub\").active = myid == play.uid;\r\n                ui_other.getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = play.cannonLevel+\"\";\r\n                ui_other.getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = play.cannonLevel+\"\";\r\n                const NormalCannonOffsex = 1;\r\n                let cannon = Number(play.cannonLevel) - NormalCannonOffsex;\r\n                if(cannon < 0){\r\n                    cannon = 0;\r\n                }\r\n                if(this.logic.seatNum == play.seatNum)cc.warn(\"6 ======更换炮台====== cannonType \"+play.cannonType)\r\n                battery.getComponent(sp.Skeleton).skeletonData = this.batteryList[cannon];\r\n                ui_gun.cannonType = play.cannonType;\r\n                this.logic.playSpine(battery,true,false,CONST.SpineName.Idle);\r\n            }\r\n        }\r\n    },\r\n    //播放开炮效果\r\n    playFiringEffectHandler(res){\r\n        let gunType = res.gunType;\r\n        let seatNum = res.seatNum;\r\n        let ui_gun  = this.ui_Actionable.getChildByName(\"ui_gun\"+seatNum);\r\n        if(gunType == CONST.CannonType.Laser){//这个是 龙溪的擎天柱 独有的 ，其余的 暂时没有开炮效果\r\n            const Invisible = 0;\r\n            const NormalOpacity = 255;\r\n            let batteryMask = ui_gun.getChildByName(\"batteryMask\");\r\n            batteryMask.opacity = NormalOpacity;\r\n            batteryMask.getComponent(cc.BoxCollider).enabled = true;\r\n            let spineNode = cc.instantiate(batteryMask.getChildByName(\"spcGun\"));\r\n            spineNode.active = true;\r\n            batteryMask.addChild(spineNode);\r\n            this.logic.playSpine(spineNode,false,false,CONST.SpineName.Idle,(spineName)=>{\r\n                batteryMask.getComponent(cc.BoxCollider).enabled = false;\r\n                batteryMask.opacity = Invisible;\r\n                spineNode.destroy();\r\n            });\r\n        }else{\r\n            //停用老的 开炮效果 等待替图资源到位\r\n            // let ui_bulletEff = cc.instantiate(this.bulletEffect);\r\n            // ui_bulletEff.active = true;\r\n            // ui_bulletEff.position = ui_gun.getChildByName(\"ui_bulletEffect\").position;\r\n            // ui_gun.addChild(ui_bulletEff);\r\n            // let fish_MovieClip = ui_bulletEff.getComponent(\"nfish_MovieClip\");\r\n            // fish_MovieClip.type = CONST.EffectType.Effect;\r\n            // fish_MovieClip.initEffect(this.button_gun_help_nzzl_tower_Atlas,\"bullet_2_\",2,6,1,false,0.02,true);\r\n\r\n            // let scale;\r\n            // if(res.gunType == 2){//能量炮\r\n            //     scale = 1;\r\n            // }else{\r\n            //     scale = 0.5;\r\n            //     for (let i=0;i<gunRate;i++){\r\n            //         if(i>4){\r\n            //             scale+=0.07;\r\n            //         }else{\r\n            //             scale+=0.04;\r\n            //         }\r\n            //     }\r\n            // }\r\n            // ui_bulletEff.scale = scale;\r\n        }\r\n    },\r\n    //更新自己的钱\r\n    myUpdateMoneyHandler(){\r\n        let ui_bg         = this.ui_Actionable.getChildByName(\"ui_bg\"+this.logic.seatNum);\r\n        let ui_unWait     = ui_bg.getChildByName(\"ui_unWait\");\r\n        let lab_coin      = ui_unWait.getChildByName(\"coinBg_cantainer\").getChildByName(\"lab_coin\");\r\n        lab_coin.getComponent(cc.Label).string = glGame.user.GoldTemp(Number(this.logic.gold + \"\"));\r\n    },\r\n    //其他玩家射击，更新余额\r\n    updateShootGoldHandler(res){\r\n        if(this.logic.seatNum == res.seatNum){\r\n            return;\r\n        }\r\n        let ui_bg         = this.ui_Actionable.getChildByName(\"ui_bg\"+res.seatNum);\r\n        let ui_unWait     = ui_bg.getChildByName(\"ui_unWait\");\r\n        let lab_coin      = ui_unWait.getChildByName(\"coinBg_cantainer\").getChildByName(\"lab_coin\");\r\n        lab_coin.getComponent(cc.Label).string = glGame.user.GoldTemp(res.gold);\r\n    },\r\n    //其他玩家射击-设置 炮台角度-后坐力\r\n    updateGunRecoilHandler(res,isSetRecoil = true){\r\n        let ui_gun        = this.ui_Actionable.getChildByName(\"ui_gun\"+res.seatNum);\r\n        if(res.angle != undefined)ui_gun.angle      = res.angle;\r\n        if(isSetRecoil){\r\n            this.fireBulletSettingRecoil(res.seatNum);\r\n            // cc.error(\">>>>  炮台 后坐力 == 开始 播放 2 seatNum \"+res.seatNum+\" ui_gun angle \"+ui_gun.angle);\r\n        }\r\n    },\r\n    //点击鱼池,调整炮台角度，发射子弹，设置后坐力\r\n    clickFishPoolHandler(evt){\r\n        if(evt != null){//射击 范围判断\r\n            let pos = evt.getLocation();\r\n            if(this.logic.seatNum == CONST.Seat.LeftTop || this.logic.seatNum == CONST.Seat.RightTop){\r\n                const OffsexY = 1044;\r\n                if(pos.y > OffsexY){\r\n                    return;\r\n                }\r\n            }else{\r\n                const OffsexY = 60;\r\n                if(pos.y < OffsexY){\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        if(this.logic.MaxBullte == 0){\r\n            cc.error(\"未初始化，无法发射\")\r\n            return;\r\n        }\r\n        if(this.logic.bullteNum >= this.logic.MaxBullte){\r\n            cc.warn(\">> 子弹数量超过 \"+this.logic.MaxBullte+\" ，不予发射 \",this.logic.bullteNum)\r\n            this.bulletTips.active = true;\r\n            return;\r\n        }\r\n        if(!evt){\r\n            this.nextClickFishPoolHandler(null);\r\n        }else{\r\n            const ShootGapTime = -0.125;\r\n            if(this.logic.isLock){\r\n                this.clickFishPoolTime = ShootGapTime;\r\n            }\r\n            this.clickFishPoolEvent = evt;\r\n        }\r\n    },\r\n    //点击鱼池,调整炮台角度，发射子弹，设置后坐力\r\n    nextClickFishPoolHandler(evt){\r\n        if(!this.logic.isEnterRoom){\r\n            return;\r\n        }\r\n        if(!glGame.gameNet.getState()){\r\n            this.logic.isEnterRoom = false;\r\n            cc.error(\"当前是 断网状态 无法发射\");\r\n            return;\r\n        }\r\n        let coin = this.logic.baseConsume * this.logic.cannonLevel;\r\n        if(this.logic.gold == undefined || this.logic.gold < coin){//余额检查\r\n            const NewGround = 99;\r\n            if(this.logic.roomRule.Rank != NewGround){\r\n                this.showNotMoneyDialog();\r\n            }\r\n            return;\r\n        }\r\n        //控制频率\r\n        if(!this.isFire){\r\n            cc.log(\">> 控制频率 无法发射\")\r\n            return;\r\n        }\r\n        if(this.logic.isYuRuyiRuning){\r\n            cc.warn(\">正在使用玉如意转盘，停火 \")\r\n            return;\r\n        }\r\n        if(this.logic[\"isGunMoving\"+this.logic.seatNum] == 1){\r\n            cc.warn(\">正在更换炮台 播放特效 无法发射子弹 \",this.logic[\"isGunMoving\"+this.logic.seatNum],\" seatNum \",this.logic.seatNum)\r\n            return;\r\n        }\r\n        const HaveSpecialCannon = 1;\r\n        let playerInfo          = this.logic.playerInfo[Number(glGame.user.userID)];\r\n\r\n        if(playerInfo == null){\r\n            cc.error(\">> 找不到用户 \",this.logic.playerInfo)\r\n            return;\r\n        }\r\n        this.isFire             = false;\r\n        let angle               = undefined;\r\n        let myid                = glGame.user.userID;\r\n        let arg                 = {uid:myid,seatNum:this.logic.seatNum,gunType:this.logic.gunType,gunLevel:this.logic.cannonLevel};\r\n        let currentIsMissile    = this.logic.currentBullteType == CONST.CannonType.Missile;  //true 当前是仙剑\r\n        let nextIsHaveMissile   = playerInfo.hitMax != null       && playerInfo.cannonAmount > HaveSpecialCannon && playerInfo.cannonType == CONST.CannonType.Missile; //下一发子弹是不是 仙剑\r\n\r\n        if(this.logic.specialBulletPool[Number(this.logic.seatNum)] != null){\r\n            cc.warn(\">>>不能重复发送 屏幕已有特殊子弹  子弹类型 : \"+this.logic.specialBulletPool[Number(this.logic.seatNum)]);\r\n            return;\r\n        }\r\n        if(this.logic.currentBullteType == CONST.CannonType.Missile){\r\n            cc.warn(\">>>不能重复发送仙剑子弹 2 \");\r\n            return;\r\n        }\r\n        if(this.logic.currentBullteType == CONST.CannonType.Laser){\r\n            cc.warn(\">>有 龙溪 子弹 正在屏幕内\");\r\n            return;\r\n        }\r\n        if(currentIsMissile && nextIsHaveMissile){\r\n            cc.warn(\"当前是仙剑子弹，下一发还是仙剑，无法射击\")\r\n            return;\r\n        }\r\n        if(this.logic.currentBullteType == CONST.CannonType.Lightning){\r\n            cc.warn(\">>有 闪电 子弹 正在屏幕内\");\r\n            return;\r\n        }\r\n        if(this.logic.currentBullteType == CONST.CannonType.PartialBomb){\r\n            cc.warn(\">>有 炎爆 子弹 正在屏幕内\");\r\n            return;\r\n        }\r\n        if(evt != null){//正常点击\r\n            if(!this.logic.startFire){\r\n                cc.warn(\">鱼潮来临，发射停用\")\r\n                return;\r\n            }\r\n            if(this.logic.isLock == true){\r\n                if(this.logic.lockFishID != null){\r\n                    arg.lock = Number(this.logic.lockFishID);\r\n                    arg.indexNum = Number(this.logic.lockFishIndex);\r\n                    arg.angle = null;\r\n                }else{\r\n                    this.node.getChildByName(\"noClickFIsh_tips\").active = true;\r\n                    this.node.getChildByName(\"noClickFIsh_tips\").stopAllActions();\r\n                    this.node.getChildByName(\"noClickFIsh_tips\").runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(()=>{\r\n                        this.node.getChildByName(\"noClickFIsh_tips\").active = false;\r\n                    })))\r\n                    return;\r\n                }\r\n            }\r\n            if(this.logic.lockFishID != null){\r\n                arg.lock = Number(this.logic.lockFishID);\r\n                arg.indexNum = Number(this.logic.lockFishIndex);\r\n                arg.angle = null;\r\n            }else{\r\n                let pos   = evt.getLocation();\r\n                angle     = this.getAngle(pos);\r\n                arg.angle = angle;\r\n            }\r\n        }else//自动射击\r\n        {\r\n            let ui_physicalPool  = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n            let len = ui_physicalPool.childrenCount;\r\n            let fishLen = 0;\r\n            const MaxFish = 10;\r\n            for (let i=0;i<len;i++){\r\n                let n = ui_physicalPool.children[i];\r\n                if(n != null){\r\n                    let fish_Unit = n.getComponent(\"nfish_Unit\");\r\n                    if(fish_Unit != null && fish_Unit.getFishID() != null){\r\n                        fishLen++;\r\n                        if(fishLen > MaxFish){\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(!this.logic.startFire){\r\n                cc.warn(\">鱼潮来临，自动发射停用\")\r\n                return;\r\n            }\r\n            if(this.logic.isLock == true && this.logic.lockFishID != null){\r\n                //锁定  有目标\r\n                arg.lock = Number(this.logic.lockFishID);\r\n                arg.angle = null;\r\n            }else{\r\n                const NormalAngle = 180;\r\n                const ZeroAngle   = 0;\r\n                //未锁定\r\n                if(this.logic.seatNum == 0 ||this.logic.seatNum == 1){\r\n                    angle = this.lastAngle == null ? ZeroAngle : this.lastAngle;\r\n                }else{\r\n                    angle = this.lastAngle == null ? NormalAngle : this.lastAngle;\r\n                }\r\n                arg.angle = angle;\r\n            }\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.adjustGunAngle,arg);\r\n    },\r\n    //金额不足弹窗\r\n    showNotMoneyDialog(){\r\n        if(this.logic.dialogPanelIsShow)return;\r\n        this.logic.dialogPanelIsShow = true;\r\n        if(this.logic.isAuto || this.logic.isLockAutoChange){//如果自动 那么解除\r\n            this.onSkillAutoHandler();\r\n        }\r\n        if(this.logic.isLock){//如果锁定 那么解除\r\n            this.onSkillLockHandler();\r\n        }\r\n        let string = `<color=#CFECFC>您的金币不足，该炮倍需要</c> <color=#FDC916> ${this.logic.getFloat(this.logic.cannonLevel * this.logic.baseConsume)}  </c><color=#CFECFC>金币才可开炮，是否马上前往充值？</c>`\r\n        glGame.panel.showDialog(\"\", string, () => {\r\n            this.logic.dialogPanelIsShow = false;\r\n            glGame.panel.showShop(9999);\r\n        }, () => {\r\n            this.logic.dialogPanelIsShow = false;\r\n        }, \"取消\", \"充值\", 9999);\r\n    },\r\n    //获取朝向\r\n    getAngle(pos){\r\n        let direction       = this.node.convertToNodeSpaceAR(pos);\r\n        let startPos        = this.ui_Actionable.getChildByName(\"ui_gun\"+this.logic.seatNum).position;\r\n        return this.logic.getP1ToP2Angle(startPos,direction);\r\n    },\r\n    //赋值后坐力\r\n    fireSettingRecoilHandler(res){\r\n        let angle           = res.angle;\r\n        if(angle != undefined)this.ui_Actionable.getChildByName(\"ui_gun\"+this.logic.seatNum).angle = angle;\r\n        this.lastAngle      = angle;\r\n        this.fireBulletSettingRecoil(this.logic.seatNum);\r\n    },\r\n    //实现后坐力逻辑\r\n    fireBulletSettingRecoil(seatNum){\r\n        let battery        = this.ui_Actionable.getChildByName(\"ui_gun\"+seatNum).getChildByName(\"battery\");\r\n        this.logic.playSpine(battery,false,false,CONST.SpineName.Attack,null,CONST.SpineName.Idle,true);\r\n    },\r\n    //隐藏位置提示\r\n    hiddenLocationTipHandler(){\r\n        this.scheduleOnce(()=>{\r\n            let ui_Tip = this.node.getChildByName(\"ui_Tip\");\r\n            if(ui_Tip.getChildByName(\"ui_\"+this.logic.seatNum)){\r\n                ui_Tip.getChildByName(\"ui_\"+this.logic.seatNum).active = false;\r\n            }\r\n        },3);\r\n    },\r\n    onClick(name, node){\r\n        const NotExit = 4;\r\n        const IstExit = 1;\r\n        switch(name){\r\n            case \"ui_mask\":return this.closeViewHandler(NotExit);       //退出\r\n            case \"ui_menuBtn\":return this.menuViewHandler();            //菜单\r\n            case \"ui_rechargeBtn\":return this.rechargeClickHandler();   //充值\r\n            case \"btn_chongzhi\":return this.rechargeClickHandler();     //充值\r\n            case \"btn_tuichu\":return this.closeViewHandler(IstExit);    //退出\r\n            case \"btn_yuzhong\":return this.openFishGroupHandler();      //打开图鉴\r\n            case \"btn_jilu\":return this.historyClickHandler();          //记录\r\n            case \"btn_shezhi\":return this.settingClickHandler();        //设置\r\n            case \"ui_BtnPlus\":return this.plusClickHandler();           //加号 + 炮台\r\n            case \"ui_BtnSub\":return this.subClickHandler();             //减号 - 炮台\r\n            case \"ui_skillLock\":return this.onSkillLockHandler();       //锁定\r\n            case \"ui_skillAuto\":return this.onSkillAutoHandler();       //自动\r\n            case \"btn_quit\":return this.onQuitHandler();                //alert-取消\r\n            case \"btn_queding\":return this.onQuedingHandler();          //alert-确认\r\n            case \"btn_queding_net\":return this.onQuedingOffNetHandler();      //alert-确认-断网\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    //更新特殊炮台数量\r\n    upSpecialGunCoinHandler(res){\r\n        let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+res.seatNum);\r\n        ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = res.cannonLevel + \"\";\r\n        ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = res.cannonLevel + \"\";\r\n    },\r\n    //获取到一个特殊炮台\r\n    getSpecialCannonHandler(res) {\r\n        let myid = Number(glGame.user.userID);\r\n        const IsRestore = 0;\r\n        let playerInfo = this.logic.playerInfo[Number(res.uid)];\r\n        if(Number(res.uid) == myid){\r\n            cc.warn(\"====== 获取到一个特殊炮台 ====== \",playerInfo)\r\n        }\r\n        let ui_physicalPool  = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n        //根据实时配置设置龙溪碰撞宽度\r\n        let ui_gun          = this.ui_Actionable.getChildByName(\"ui_gun\"+res.seatNum);\r\n        let FixTime         = 2;//纠正时间\r\n        this.scheduleOnce(()=>{\r\n            ui_gun.cannonType = playerInfo.cannonType;\r\n            if(ui_gun.cannonType != playerInfo.cannonType){\r\n                let batterySkeletonData;\r\n                let cannonType = Number(playerInfo.cannonType);\r\n                switch (cannonType) {\r\n                    case CONST.CannonType.Lightning :   // 闪电\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Lightning];\r\n                        break;\r\n                    case CONST.CannonType.PartialBomb : // 炎爆\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.PartialBomb];\r\n                        break;\r\n                    case CONST.CannonType.Laser :       // 龙息\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Laser];\r\n                        break;\r\n                    case CONST.CannonType.Missile :     // 仙剑\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Missile];\r\n                        break;\r\n                }\r\n                let battery = ui_gun.getChildByName(\"battery\");\r\n                if(CONST.CannonType.Normal == cannonType){\r\n                    let cannon = Number(this.logic.cannonLevel) - 1;\r\n                    if(cannon < 0){\r\n                        cannon = 0;\r\n                    }\r\n                    battery.getComponent(sp.Skeleton).skeletonData = this.batteryList[cannon];\r\n                }else{\r\n                    battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                }\r\n                this.logic.playSpine(battery,false,false,CONST.SpineName.Idle2);\r\n                if(this.logic.seatNum == res.seatNum){\r\n                    this.logic[\"isGunMoving\"+this.logic.seatNum] = -1;\r\n                }\r\n                cc.warn(\">> 通过数据纠正UI：ui_gun.cannonType \"+ui_gun.cannonType+\"   data cannonType \"+playerInfo.cannonType)\r\n            }\r\n        },FixTime);\r\n        if(playerInfo.cannonType == CONST.CannonType.Laser){\r\n            if(ui_gun == null){\r\n                cc.warn(\">>> seatNum \",res.seatNum,\"  res \",res)\r\n            }\r\n            let radius        =  Number(this.logic.roomRule.FirepillarWidth);// 龙息的宽度（单位：像素）\r\n            let newSize       = cc.size(radius,ui_gun.getChildByName(\"batteryMask\").getComponent(cc.BoxCollider).size.height)\r\n            ui_gun.getChildByName(\"batteryMask\").getComponent(cc.BoxCollider).size = newSize;\r\n        }\r\n        if(myid == Number(res.uid)){\r\n            let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+res.seatNum);\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnPlus\").active = playerInfo.cannonType == CONST.CannonType.Normal;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnSub\").active = playerInfo.cannonType == CONST.CannonType.Normal;\r\n        }\r\n\r\n        if(ui_gun.cannonType != playerInfo.cannonType && !res.isNew){\r\n            res.isNew = true;//强行篡改\r\n            cc.warn(\">> 获得特殊炮台 仍然还使用 普通 炮台 正在 修正\")\r\n        }\r\n\r\n        if(res.isNew){\r\n            let pos = null;\r\n            let fish = ui_physicalPool.getChildByName(\"\"+res.fishId);\r\n            if(fish != null){\r\n                pos = cc.v2(fish.position.x,fish.position.y);\r\n            }else{\r\n                cc.warn(\"> 鱼池里 找不到鱼 id: \"+res.fishId,\" res \",res);\r\n            }\r\n            if(Number(res.uid) == myid){\r\n                cc.warn(\"====== 成功替换炮台 ====== cannonType \"+playerInfo.cannonType)\r\n            }\r\n            this.setGunRate(res.seatNum,playerInfo.cannonAmount,playerInfo.cannonType,pos,IsRestore);\r\n        }else{\r\n            let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+res.seatNum);\r\n            if(playerInfo.cannonType == CONST.CannonType.Normal){\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = playerInfo.cannonLevel+\"\";\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = playerInfo.cannonLevel+\"\";\r\n            }else{\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = playerInfo.cannonAmount+\"\";\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = playerInfo.cannonAmount+\"\";\r\n            }\r\n        }\r\n    },\r\n    //检查特殊炮台\r\n    checkSpecialCannonHandler(isRefreshNow){\r\n        let isChange =  false;\r\n        for (let key in this.logic.playerInfo) {\r\n            let playerInfo = this.logic.playerInfo[key];\r\n            if (playerInfo != null && this.logic[\"isGunMoving\" + playerInfo.seatNum] != 1) {\r\n                let ui_gun = this.ui_Actionable.getChildByName(\"ui_gun\" + playerInfo.seatNum);\r\n                if (ui_gun != null && ui_gun.cannonType != playerInfo.cannonType) {\r\n                    isChange = true;\r\n                }\r\n            }\r\n        }\r\n        let UserMax = 4;\r\n        for (let i=0;i<UserMax;i++){\r\n            let ui_gun = this.ui_Actionable.getChildByName(\"ui_gun\" + i);\r\n            if(ui_gun.cannonType != CONST.CannonType.Normal && !isChange){\r\n                isChange = true;\r\n                // cc.error(\">> 遍历 炮台 >> ui_gun . cannonType \"+ui_gun.cannonType+\"  seatNum \"+i);\r\n            }\r\n        }\r\n        if(isChange){\r\n            const DelayTime = 2.6;\r\n            let callBack = ()=>{\r\n                for (let key in this.logic.playerInfo){\r\n                    let playerInfo = this.logic.playerInfo[key];\r\n                    if(playerInfo != null && this.logic[\"isGunMoving\"+playerInfo.seatNum] != 1){\r\n                        let ui_gun  = this.ui_Actionable.getChildByName(\"ui_gun\"+playerInfo.seatNum);\r\n                        if(ui_gun != null && ui_gun.cannonType != playerInfo.cannonType) {\r\n                            ui_gun.cannonType = playerInfo.cannonType;\r\n                            let batterySkeletonData;\r\n                            let cannonType = Number(playerInfo.cannonType);\r\n                            switch (cannonType) {\r\n                                case CONST.CannonType.Lightning :   // 闪电\r\n                                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Lightning];\r\n                                    break;\r\n                                case CONST.CannonType.PartialBomb : // 炎爆\r\n                                    batterySkeletonData = this.batteryList[CONST.CannonSkin.PartialBomb];\r\n                                    break;\r\n                                case CONST.CannonType.Laser :       // 龙息\r\n                                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Laser];\r\n                                    break;\r\n                                case CONST.CannonType.Missile :     // 仙剑\r\n                                    batterySkeletonData = this.batteryList[CONST.CannonSkin.Missile];\r\n                                    break;\r\n                            }\r\n                            let battery = ui_gun.getChildByName(\"battery\");\r\n                            if (CONST.CannonType.Normal == cannonType) {\r\n                                let cannon = Number(playerInfo.cannonLevel) - 1;\r\n                                if (cannon < 0) {\r\n                                    cannon = 0;\r\n                                }\r\n                                battery.getComponent(sp.Skeleton).skeletonData = this.batteryList[cannon];\r\n                            } else {\r\n                                battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                            }\r\n                            this.logic.playSpine(battery, false, false, CONST.SpineName.Idle2);\r\n                            if (this.logic.seatNum == playerInfo.seatNum) {\r\n                                this.logic[\"isGunMoving\" + this.logic.seatNum] = -1;\r\n                            }\r\n\r\n                            let ui_pos   = this.ui_Actionable.getChildByName(\"ui_pos\"+playerInfo.seatNum);\r\n                            let ui_other = ui_pos.getChildByName(\"ui_other\");\r\n                            if(playerInfo.cannonType == CONST.CannonType.Normal){//普通炮台样式\r\n                                ui_other.getChildByName(\"img_paobeikuang1\").active = true;\r\n                                ui_other.getChildByName(\"lab_gunLv\").active = true;\r\n\r\n                                ui_other.getChildByName(\"img_paobeikuang2\").active = false;\r\n                                ui_other.getChildByName(\"ui_gunLvBg\").active = false;\r\n                                ui_other.getChildByName(\"lab_gunLv2\").active = false;\r\n                            }else{//特殊炮台样式\r\n                                ui_other.getChildByName(\"img_paobeikuang1\").active = false;\r\n                                ui_other.getChildByName(\"lab_gunLv\").active = false;\r\n\r\n                                ui_other.getChildByName(\"img_paobeikuang2\").active = true;\r\n                                ui_other.getChildByName(\"ui_gunLvBg\").active = true;\r\n                                ui_other.getChildByName(\"lab_gunLv2\").active = true;\r\n                            }\r\n                            // this.checkGunStyle(playerInfo.uid,false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(isRefreshNow){\r\n                cc.error(\">>>> 服务器数据错误 立即刷新 ！\")\r\n                callBack();\r\n            }else {\r\n                this.scheduleOnce(()=>{\r\n                    callBack();\r\n                },DelayTime);\r\n            }\r\n        }\r\n    },\r\n    //恢复炮台\r\n    restoreCannonHandler(msg){\r\n        let uid = msg.uid;\r\n        let myid = Number(glGame.user.userID);\r\n        if(Number(uid) == myid){\r\n            cc.warn(\"==== 恢复炮台 ==== Time  \"+Date.now()+\"  Math.random \"+Math.random())\r\n        }\r\n\r\n        let ui_gun        = this.ui_Actionable.getChildByName(\"ui_gun\"+this.logic.playerInfo[Number(uid)].seatNum);\r\n        if(Number(uid) == myid)cc.warn(\"==========当前炮的类型： \"+ui_gun.cannonType,\" 当前的数据 \"+this.logic.playerInfo[Number(uid)].cannonType)\r\n        if(this.logic.playerInfo[Number(uid)].cannonType ==  ui_gun.cannonType){\r\n            if(Number(uid) == myid)cc.warn(\">> ！！ 2 ===== 无需恢复炮台==== 因为又获得了 \")\r\n            return;\r\n        }\r\n        let isNow = msg.isNow;\r\n        let nextTime = isNow ? 0.1 : 1;\r\n        if(this.logic.isRestoreIng[uid] != undefined){\r\n            cc.log(\">>> 当前座位的炮台正在恢复 >>>\")\r\n            return;\r\n        }\r\n        let restoreCB = ()=>{\r\n            this.checkGunStyle(uid,true);\r\n        }\r\n        const IsRestore = 1;\r\n        this.logic.isRestoreIng[uid] = IsRestore;\r\n        this.scheduleOnce(restoreCB,nextTime);\r\n    },\r\n    //检查炮台类型\r\n    checkGunStyle(uid,isCheckGunSkin){\r\n        const IsRestore = 1;\r\n        let res = this.logic.playerInfo[Number(uid)];\r\n        if(res != null){\r\n            let myid = glGame.user.userID;\r\n            const Not = 0;\r\n            let isHaveSpcCannon = res.cannonAmount == Not ? false : true;\r\n            if(myid == Number(uid)){\r\n                let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+res.seatNum);\r\n                //-----------------------------------------加减号按钮-----------------------------------------------\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnPlus\").active       = !isHaveSpcCannon;\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"btn_sub_plus_cantainer\").getChildByName(\"ui_BtnSub\").active        = !isHaveSpcCannon;\r\n                //-----------------------------------------加减号按钮-----------------------------------------------\r\n\r\n                //----------------------------------------普通炮台样式-----------------------------------------------\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang1\").active =  !isHaveSpcCannon;\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").active        =  !isHaveSpcCannon;\r\n                //----------------------------------------普通炮台样式-----------------------------------------------\r\n\r\n                //----------------------------------------特殊炮台样式-----------------------------------------------\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang2\").active = isHaveSpcCannon;\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"ui_gunLvBg\").active       = isHaveSpcCannon;\r\n                ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").active       = isHaveSpcCannon;\r\n                //----------------------------------------特殊炮台样式-----------------------------------------------\r\n\r\n                if(isCheckGunSkin)this.setGunRate(res.seatNum,this.logic.cannonLevel,CONST.CannonType.Normal,null,IsRestore,uid);\r\n            }else{\r\n                if(isCheckGunSkin)this.setGunRate(res.seatNum,res.cannonLevel,CONST.CannonType.Normal,null,IsRestore,uid);\r\n            }\r\n        }else{\r\n            cc.error(\">> 恢复炮台 出了问题 找不到数据 uid\",uid,\" list : \",this.logic.playerInfo)\r\n        }\r\n    },\r\n    //炮台-切换 + ，仅限自己\r\n    plusClickHandler(){\r\n        let myid = Number(glGame.user.userID);\r\n        let myinfo = this.logic.playerInfo[myid];\r\n        const NotHaveSpecialCanon = 0;\r\n        if(myinfo.cannonAmount != null && myinfo.cannonAmount > NotHaveSpecialCanon){\r\n            cc.warn(\"当前是特殊炮台，无法切换炮倍\")\r\n            return;\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        this.logic.cannonLevel ++;\r\n        const NormalCannonMinLevel = 1;\r\n        const NormalCannonMaxLevel = 10;\r\n        if(this.logic.cannonLevel > NormalCannonMaxLevel){\r\n            this.logic.cannonLevel = NormalCannonMinLevel;\r\n        }\r\n        this.logic.playerInfo[glGame.user.userID].cannonLevel = this.logic.cannonLevel;\r\n        this.setGunRate(this.logic.seatNum,this.logic.cannonLevel,this.logic.gunType,null,null,myid);\r\n        if(this.logic.isEnterRoom){\r\n            let changeCannonData = {op:CONST.Opention.ChangeCannonLv,\"level\": this.logic.cannonLevel};\r\n            // cc.warn(\"--==-->发送 炮台切换 \",changeCannonData);\r\n            glGame.gameNet.send_msg(glGame.room.getPlayerOp(glGame.scenetag.FISH2),changeCannonData);//炮台切换\r\n        }\r\n        cc.sys.localStorage.setItem(CONST.GunLevel+glGame.user.userID, this.logic.cannonLevel);\r\n    },\r\n    //炮台-切换 - ， 仅限自己\r\n    subClickHandler(){\r\n        let myid = Number(glGame.user.userID);\r\n        let myinfo = this.logic.playerInfo[myid];\r\n        const NotHaveSpecialCanon = 0;\r\n        if(myinfo.cannonAmount != null && myinfo.cannonAmount > NotHaveSpecialCanon){\r\n            cc.warn(\"当前是特殊炮台，无法切换炮倍\")\r\n            return;\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        const NormalCannonMaxLevel = 10;\r\n        const NormalCannonMinLevel = 1;\r\n        this.logic.cannonLevel --;\r\n        if(this.logic.cannonLevel < NormalCannonMinLevel){\r\n            this.logic.cannonLevel = NormalCannonMaxLevel;\r\n        }\r\n        this.logic.playerInfo[glGame.user.userID].cannonLevel = this.logic.cannonLevel;\r\n        this.setGunRate(this.logic.seatNum,this.logic.cannonLevel,this.logic.gunType,null,null,myid);\r\n        if(this.logic.isEnterRoom){\r\n            let changeCannonData = {op:CONST.Opention.ChangeCannonLv,\"level\": this.logic.cannonLevel};\r\n            // cc.warn(\"--==-->发送 炮台切换 \",changeCannonData);\r\n            glGame.gameNet.send_msg(glGame.room.getPlayerOp(glGame.scenetag.FISH2),changeCannonData);//炮台切换\r\n        }\r\n        cc.sys.localStorage.setItem(CONST.GunLevel+glGame.user.userID, this.logic.cannonLevel);\r\n    },\r\n    //更新炮台 - 自己 或 其他人\r\n    updateGunRatedHandler(res){\r\n        this.setGunRate(res.seatNum,res.cannonLevel,res.gunType,null,null,res.uid);\r\n    },\r\n    //蓄力播放\r\n    accumulateHandler(res){\r\n        let ui_gun        = this.ui_Actionable.getChildByName(\"ui_gun\"+res.seatNum);\r\n        if(res.cannonType == CONST.CannonType.Lightning){//闪电专用蓄力，其他的是通用的\r\n            let spine = ui_gun.getChildByName(\"spine_LightningAccumulate\");\r\n            this.logic.playSpine(spine,false,true,CONST.SpineName.Normal);\r\n        }else{\r\n            let otherAccumulate = ui_gun.getChildByName(\"spine_OtherAccumulate\");\r\n            const DelayTime = 1;\r\n            const DelayTime2 = 1.1;\r\n            ui_gun.stopAllActions();\r\n            ui_gun.runAction(cc.sequence(cc.callFunc(()=>{\r\n                otherAccumulate.active = true;\r\n            }),cc.delayTime(DelayTime),cc.callFunc(()=>{\r\n                otherAccumulate.active = false;\r\n            })));\r\n            this.scheduleOnce(()=>{\r\n                if(otherAccumulate.active)otherAccumulate.active = false;\r\n            },DelayTime2);\r\n        }\r\n    },\r\n    //更新炮台-设置ui,如果是特殊炮台 那么 gunRate 就是用作显示 特殊炮台可发射的子弹数量\r\n    setGunRate(seatNum,gunRate,cannonType,specialCannonFishPos = null,isRestore = null,uid = null){\r\n        this.changeGun(seatNum,gunRate,cannonType,specialCannonFishPos,isRestore,uid);\r\n        let ui_gun        = this.ui_Actionable.getChildByName(\"ui_gun\"+seatNum);\r\n        let ani           = ui_gun.getChildByName(\"ui_ToggleTurretAnimation\");\r\n        ani.active        = true;\r\n        const FiexUpdateCannonCoinTime = 0.1;\r\n        const NowUpdateCannonCoinTime  = 1.5;\r\n        let time = cannonType == CONST.CannonType.Normal ? FiexUpdateCannonCoinTime : NowUpdateCannonCoinTime;\r\n        this.scheduleOnce(()=>{\r\n            this.changeGunStyle(seatNum,cannonType,gunRate);\r\n        },time);\r\n        //暂停老的 切换炮台 效果\r\n        // ani.getComponent(\"nfish_MovieClip\").initEffectScaleTo(this.button_gun_help_nzzl_tower_Atlas,\"bomb_line_head\",0.15,0.2,1,1,false);\r\n    },\r\n    //改变炮台类型\r\n    changeGunStyle(seatNum,cannonType,gunRate){\r\n        const NormalLevel = 1;\r\n        const Not = 0;\r\n        let ui_pos        = this.ui_Actionable.getChildByName(\"ui_pos\"+seatNum);\r\n        if(cannonType == CONST.CannonType.Normal){//当目前是普通炮台\r\n            //----------------------------------------普通炮台样式-----------------------------------------------\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang1\").active = true;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").active        = true;\r\n            //----------------------------------------普通炮台样式-----------------------------------------------\r\n\r\n            //----------------------------------------特殊炮台样式-----------------------------------------------\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang2\").active = false;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"ui_gunLvBg\").active       = false;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").active       = false;\r\n            //----------------------------------------特殊炮台样式-----------------------------------------------\r\n        }else{//当目前是特殊炮台\r\n            //----------------------------------------普通炮台样式-----------------------------------------------\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang1\").active = false;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").active        = false;\r\n            //----------------------------------------普通炮台样式-----------------------------------------------\r\n\r\n            //----------------------------------------特殊炮台样式-----------------------------------------------\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"img_paobeikuang2\").active = true;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"ui_gunLvBg\").active       = true;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").active       = true;\r\n            //----------------------------------------特殊炮台样式-----------------------------------------------\r\n        }\r\n        if(cannonType == CONST.CannonType.Normal && gunRate == Not){\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = NormalLevel+\"\";\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = NormalLevel+\"\";\r\n        }else{\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv\").getComponent(cc.Label).string = gunRate;\r\n            ui_pos.getChildByName(\"ui_other\").getChildByName(\"lab_gunLv2\").getComponent(cc.Label).string = gunRate;\r\n        }\r\n    },\r\n    //换炮 gunType = cannonType\r\n    changeGun(seatNum,gunRate,cannonType,specialCannonFishPos = null,isRestore = null,uid = null) {\r\n        let ui_gun = this.ui_Actionable.getChildByName(\"ui_gun\" + seatNum);\r\n        if(ui_gun.isGunMoving != null){\r\n            ui_gun.stopAllActions();\r\n            ui_gun.getChildByName(\"changeCannonEffect\").active = false;\r\n            let oldNode = this.ui_Actionable.getChildByName(\"spCannContainer\"+seatNum);\r\n            if(oldNode){\r\n                oldNode.stopAllActions();\r\n                oldNode.destroy();\r\n                let oldLastNode = oldNode.getChildByName(\"laserBornEffect\");\r\n                if(oldNode){\r\n                    oldLastNode.stopAllActions();\r\n                    oldLastNode.destroy();\r\n                }\r\n            }\r\n            ui_gun.isGunMoving = null;\r\n        }\r\n        ui_gun.isGunMoving = \"isGunMoving\"+seatNum;\r\n        let battery = ui_gun.getChildByName(\"battery\");\r\n        if(cannonType != CONST.CannonType.Normal){//特殊炮台做个获得表现\r\n            if(specialCannonFishPos != null){\r\n                ui_gun.stopAllActions();\r\n                const MoveStart = 1;\r\n                this.logic[\"isGunMoving\"+seatNum] = MoveStart;\r\n                //播放移动球\r\n                let laserBornEffect  = this.logic.creatorEffect();\r\n                laserBornEffect.isGunMoving = \"isGunMoving\"+seatNum;\r\n                laserBornEffect.parent = null;\r\n                laserBornEffect.active = true;\r\n                laserBornEffect.name = \"laserBornEffect\";\r\n                let spCannContainer = new cc.Node();\r\n                spCannContainer.name = \"spCannContainer\"+seatNum;\r\n                spCannContainer.position = specialCannonFishPos;\r\n                spCannContainer.addChild(laserBornEffect);\r\n                this.ui_Actionable.addChild(spCannContainer);\r\n                let mcName;\r\n                let batterySkeletonData;\r\n                let changeCannonSkeletonData;\r\n                let animationName;\r\n                let isRotation = false;\r\n                let Min = 1;\r\n                let Max = 5;\r\n                switch (cannonType) {\r\n                    case CONST.CannonType.Lightning :   // 闪电\r\n                        mcName = CONST.CannonGetEddect.Lightning;\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Lightning];\r\n                        changeCannonSkeletonData = this.changeCannonEffectList[CONST.CannonChangeEffect.Lightning];\r\n                        animationName = CONST.CannonGotEddect.Lightning;\r\n                        break;\r\n                    case CONST.CannonType.PartialBomb : // 炎爆\r\n                        Max = 8;\r\n                        mcName = CONST.CannonGetEddect.PartialBomb;\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.PartialBomb];\r\n                        changeCannonSkeletonData = this.changeCannonEffectList[CONST.CannonChangeEffect.PartialBomb];\r\n                        animationName = CONST.CannonGotEddect.PartialBomb;\r\n                        break;\r\n                    case CONST.CannonType.Laser :       // 龙息\r\n                        Max = 8;\r\n                        mcName = CONST.CannonGetEddect.Laser;\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Laser];\r\n                        changeCannonSkeletonData = this.changeCannonEffectList[CONST.CannonChangeEffect.Laser];\r\n                        animationName = CONST.CannonGotEddect.Laser;\r\n                        break;\r\n                    case CONST.CannonType.Missile :     // 仙剑\r\n                        mcName = CONST.CannonGetEddect.Missile;\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Missile];\r\n                        changeCannonSkeletonData = this.changeCannonEffectList[CONST.CannonChangeEffect.Missile];\r\n                        animationName = CONST.CannonGotEddect.Missile;\r\n                        isRotation = true;\r\n                        break;\r\n                }\r\n                const LoopTime = 40;\r\n                const IsHaveZero = false;\r\n                const Speed = 0.12;\r\n                const PayEdRemove = false;\r\n                //播放变身动画\r\n                let changeCannonEffect = ui_gun.getChildByName(\"changeCannonEffect\");\r\n                if(isRotation){\r\n                    if(this.logic.seatNum == seatNum)cc.warn(\"1 ======更换炮台====== cannonType \"+cannonType)\r\n                    changeCannonEffect.getComponent(sp.Skeleton).skeletonData = changeCannonSkeletonData;\r\n                    battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                    ui_gun.cannonType = cannonType;\r\n                    this.logic.playSpine(changeCannonEffect,false,false,animationName,()=>{\r\n                        changeCannonEffect.active = false;\r\n                    });\r\n                    this.logic.playSpine(battery,false,false,CONST.SpineName.Idle2);\r\n                    laserBornEffect.runAction(cc.repeatForever(cc.rotateBy(0.8,360)));\r\n                }\r\n                laserBornEffect.getComponent(\"nfish_MovieClip\").initEffect(this.laserBornEffect_Atlas,mcName,Min,Max,LoopTime,IsHaveZero,Speed,PayEdRemove);\r\n                spCannContainer.stopAllActions();\r\n                let MoveTime;\r\n                let act;\r\n                if(isRotation){\r\n                    MoveTime = 1.6;\r\n                    this.scheduleOnce(()=>{\r\n                        spCannContainer.destroy();\r\n                        this.logic.playSpine(battery,false,false,CONST.SpineName.Get,(spineName)=>{\r\n                            this.logic.playSpine(battery,false,false,CONST.SpineName.Idle,(spineName)=>{\r\n                                //仙剑炮台 变身完成\r\n                                const MoveOver = -1;\r\n                                this.logic[ui_gun.isGunMoving] = MoveOver;\r\n                                this.logic[\"isGunMoving\"+seatNum] = MoveOver;\r\n                                ui_gun.isGunMoving = null;\r\n                            });\r\n                        });\r\n                    },1);\r\n                    act = cc.moveTo(MoveTime, ui_gun.position);\r\n                }else{\r\n                    MoveTime = 1.2;\r\n                    act = cc.sequence(cc.moveTo(MoveTime, ui_gun.position),cc.callFunc(()=>{\r\n                        spCannContainer.destroy();\r\n                        if(this.logic.seatNum == seatNum)cc.warn(\"2 ======更换炮台====== cannonType \"+cannonType)\r\n                        changeCannonEffect.getComponent(sp.Skeleton).skeletonData = changeCannonSkeletonData;\r\n                        this.logic.playSpine(changeCannonEffect,false,false,animationName,(spineName)=>{\r\n                            if (spineName == animationName) {\r\n                                //其他炮台 变身完成\r\n                                if(this.logic.seatNum == seatNum)cc.warn(\"3 ======更换炮台====== cannonType \"+cannonType)\r\n                                battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                                ui_gun.cannonType = cannonType;\r\n                                this.logic.playSpine(battery,true,false,CONST.SpineName.Idle);\r\n                                const MoveOver = -1;\r\n                                this.logic[ui_gun.isGunMoving] = MoveOver;\r\n                                changeCannonEffect.active = false;\r\n                                this.logic[\"isGunMoving\"+seatNum] = MoveOver;\r\n                                ui_gun.isGunMoving = null;\r\n                            }\r\n                        });\r\n                    }));\r\n                }\r\n                spCannContainer.runAction(act);\r\n            }\r\n        }else{\r\n            const NormalCannonOffsex = 1;\r\n            let cannon = Number(gunRate) - NormalCannonOffsex;\r\n            if(cannon < 0){\r\n                cannon = 0;\r\n            }\r\n            let playerInfo = this.logic.playerInfo[Number(uid)];\r\n            if(playerInfo != null){\r\n                let cannonTypeSc = Number(playerInfo.cannonType);\r\n                let batterySkeletonData;\r\n                switch (cannonTypeSc) {\r\n                    case CONST.CannonType.Lightning :   // 闪电\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Lightning];\r\n                        break;\r\n                    case CONST.CannonType.PartialBomb : // 炎爆\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.PartialBomb];\r\n                        break;\r\n                    case CONST.CannonType.Laser :       // 龙息\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Laser];\r\n                        break;\r\n                    case CONST.CannonType.Missile :     // 仙剑\r\n                        batterySkeletonData = this.batteryList[CONST.CannonSkin.Missile];\r\n                        break;\r\n                }\r\n                let battery = ui_gun.getChildByName(\"battery\");\r\n                if(CONST.CannonType.Normal == cannonTypeSc){\r\n                    battery.getComponent(sp.Skeleton).skeletonData = this.batteryList[cannon];\r\n                    if(this.logic.seatNum == seatNum) cc.warn(\"4.0 ======更换炮台====== cannonType \"+cannonType+\" uid \"+uid + \" data cannonType \"+cannonTypeSc)\r\n\r\n                }else{\r\n                    battery.getComponent(sp.Skeleton).skeletonData = batterySkeletonData;\r\n                    if(this.logic.seatNum == seatNum) cc.warn(\"4.1 ======更换炮台====== cannonType \"+cannonType+\" uid \"+uid + \" data cannonType \"+cannonTypeSc)\r\n                }\r\n                ui_gun.cannonType = cannonTypeSc;\r\n                if(this.logic.seatNum == seatNum){\r\n                    this.logic[\"isGunMoving\"+this.logic.seatNum] = -1;\r\n                }\r\n                this.logic.playSpine(battery,true,false,CONST.SpineName.Idle);\r\n                if(this.logic.seatNum == seatNum) cc.warn(\"4.x ======play 炮台====== cannonType \"+cannonType+\" uid \"+uid + \" data cannonType \"+cannonTypeSc)\r\n\r\n                let ui_pos   = this.ui_Actionable.getChildByName(\"ui_pos\"+seatNum);\r\n                let ui_other = ui_pos.getChildByName(\"ui_other\");\r\n                if(cannonTypeSc == CONST.CannonType.Normal){//普通炮台样式\r\n                    ui_other.getChildByName(\"img_paobeikuang1\").active = true;\r\n                    ui_other.getChildByName(\"lab_gunLv\").active = true;\r\n\r\n                    ui_other.getChildByName(\"img_paobeikuang2\").active = false;\r\n                    ui_other.getChildByName(\"ui_gunLvBg\").active = false;\r\n                    ui_other.getChildByName(\"lab_gunLv2\").active = false;\r\n                }else{//特殊炮台样式\r\n                    ui_other.getChildByName(\"img_paobeikuang1\").active = false;\r\n                    ui_other.getChildByName(\"lab_gunLv\").active = false;\r\n\r\n                    ui_other.getChildByName(\"img_paobeikuang2\").active = true;\r\n                    ui_other.getChildByName(\"ui_gunLvBg\").active = true;\r\n                    ui_other.getChildByName(\"lab_gunLv2\").active = true;\r\n                }\r\n\r\n            }\r\n        }\r\n        const Restore = 1;\r\n        //恢复炮台播放一个恢复动画\r\n        if(isRestore != null && isRestore == Restore){\r\n            let spine_restoreCannon = ui_gun.getChildByName(\"spine_restoreCannon\");\r\n            this.logic.playSpine(spine_restoreCannon,false,false,CONST.SpineName.Normal,()=>{\r\n                this.logic.isRestoreIng[uid] = null;\r\n                spine_restoreCannon.active = false;\r\n            });\r\n        }\r\n    },\r\n    //冰冻 - 开始 - 结束\r\n    onFreezeShowUIHandler(){\r\n        if(this.logic.isInFreeze){\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"effect_frozen\");\r\n        }\r\n    },\r\n    //记录\r\n    historyClickHandler(){\r\n        let panel = glGame.panel.showPanel(this.record_pre);\r\n        panel.zIndex = 30;\r\n        this.menuViewHandler(false);\r\n    },\r\n    //技能 锁定/解锁\r\n    onSkillLockHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        this.logic.isLock = !this.logic.isLock;\r\n        let lockLab = this.ui_skillLock.getChildByName(\"img_suoding\");\r\n        let img_offsuoding = this.ui_skillLock.getChildByName(\"img_offsuoding\");\r\n        let spine = this.ui_skillLock.getChildByName(\"spine\");\r\n        lockLab.active = !this.logic.isLock;\r\n        img_offsuoding.active = !lockLab.active;\r\n\r\n        spine.active = this.logic.isLock;\r\n        glGame.emitter.emit(CONST.clientEvent.useLockSkill);\r\n\r\n        let roomSkillLockData = {};\r\n        roomSkillLockData[this.logic.roomId] = this.logic.isLock ? \"o\":\"c\";\r\n        glGame.storage.setItem(CONST.SkillLock, roomSkillLockData);\r\n\r\n        let roomSkillAutoData = {};\r\n        roomSkillAutoData[this.logic.roomId] = this.logic.isLock ? \"o\":\"c\";\r\n        glGame.storage.setItem(CONST.SkillLock, roomSkillAutoData);\r\n\r\n        if(!this.logic.isLock){\r\n            this.logic.lastLockFishID = Number(this.logic.lockFishID+\"\");\r\n            this.logic.lockFishID = null;\r\n            if(this.logic.isLockAutoChange == false){\r\n                this.logic.isAuto = false;\r\n                glGame.emitter.emit(CONST.clientEvent.useAutoSkill);\r\n            }\r\n            glGame.emitter.emit(CONST.clientEvent.leaveRoomUnLock,this.logic.seatNum);\r\n        }\r\n    },\r\n    //是否自动 切换\r\n    onSkillAutoHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        this.logic.isLockAutoChange = !this.logic.isLockAutoChange;\r\n        if(this.logic.lockFishID == null){\r\n            this.logic.isAuto = this.logic.isLockAutoChange;\r\n            let spine = this.ui_skillAuto.getChildByName(\"spine\");\r\n            spine.active = this.logic.isAuto;\r\n        }else{\r\n            let spine = this.ui_skillAuto.getChildByName(\"spine\");\r\n            spine.active = this.logic.isLockAutoChange;\r\n        }\r\n        let roomData = {};\r\n        roomData[this.logic.roomId] = this.logic.isLockAutoChange ? \"o\":\"c\";\r\n        glGame.storage.setItem(CONST.SkillisLockAutoChange, roomData);\r\n\r\n        let autoLab = this.ui_skillAuto.getChildByName(\"img_zidong\");\r\n        let img_offzidong = this.ui_skillAuto.getChildByName(\"img_offzidong\");\r\n        autoLab.active = !this.logic.isLockAutoChange;\r\n        img_offzidong.active = !autoLab.active;\r\n        glGame.emitter.emit(CONST.clientEvent.useAutoSkill);\r\n    },\r\n    //菜单\r\n    menuViewHandler(isClose = false){\r\n        if(isClose){\r\n            this.ui_menu.active = false;\r\n        }else{\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n            this.ui_menu.active = !this.ui_menu.active;\r\n            let ui_upIcon       = this.ui_menuBtn.getChildByName(\"ui_upIcon\");\r\n            let ui_leftIcon     = this.ui_menuBtn.getChildByName(\"ui_leftIcon\");\r\n            ui_upIcon.active    = !ui_upIcon.active;\r\n            ui_leftIcon.active  = !ui_upIcon.active;\r\n        }\r\n    },\r\n    //打开鱼群鉴赏\r\n    openFishGroupHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        let panel = glGame.panel.showPanel(this.illustratedBook);\r\n        panel.zIndex = 30;\r\n        this.menuViewHandler(false);\r\n    },\r\n    //充值\r\n    rechargeClickHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        if(glGame.panel.showSuspicious(\"recharge\")){\r\n            return;\r\n        }\r\n        glGame.panel.showShop();\r\n        this.menuViewHandler(false);\r\n    },\r\n    //设置\r\n    settingClickHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n        let panel = glGame.panel.showPanel(this.setting_pre);\r\n        panel.zIndex = 30;\r\n        this.menuViewHandler(false);\r\n    },\r\n    //自己的 玉如意 出转盘 / 聚宝鹏 出拉霸\r\n    showTurntableHandler(res){\r\n        this.logic.isYuRuyiRuning = true;\r\n        if(res.type == CONST.AwardType.RUYI){\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"getYuRu\");//捕获玉如意一瞬间播放\r\n            this.turntableView.getComponent(\"nfish_turntable\").initTurntableView(res);\r\n        }else{\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"getJuBao\");//捕获聚宝盆一瞬间播放\r\n            this.cornucopiaView.getComponent(\"nfish_cornucopia\").startRunCornucopia(res);\r\n        }\r\n        const EffectMaxRunTime = 10;\r\n        this.scheduleOnce(()=>{//玉如意运行时间最大10秒，10秒后强制结束 发射锁\r\n            if(this.logic.isYuRuyiRuning){\r\n                this.logic.isYuRuyiRuning = false;\r\n            }\r\n        },EffectMaxRunTime);\r\n    },\r\n    //退出菜单\r\n    closeViewHandler(arg){\r\n        const IsExit4 = 4;\r\n        if(arg === IsExit4){\r\n            this.menuViewHandler(false);\r\n            return;\r\n        }\r\n        const IsExit3 = 3;\r\n        if(arg === IsExit3){\r\n            cc.sys.localStorage.setItem(CONST.SkillisLockAutoChange, \"\");\r\n            cc.sys.localStorage.setItem(CONST.SkillLock, \"\");\r\n            cc.sys.localStorage.setItem(CONST.SkillAuto, \"\");\r\n            this.logic.isEnterRoom = false;\r\n            glGame.room.exitRoom();\r\n            return;\r\n        }\r\n        const IsExit = 1;\r\n        if(arg === IsExit){\r\n            let currentUid = Number(glGame.user.userID);\r\n            let playerInfo = this.logic.playerInfo[currentUid];\r\n            if(playerInfo != null && playerInfo.cannonType != CONST.CannonType.Normal){\r\n                if(playerInfo.cannonAmount > 0){\r\n                    glGame.emitter.emit(CONST.clientEvent.showAlert,CONST.AlertType.LosCannan);\r\n                    return;\r\n                }\r\n            }\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"button\");\r\n            this.menuViewHandler(false);\r\n            cc.sys.localStorage.setItem(CONST.SkillisLockAutoChange, \"\");\r\n            cc.sys.localStorage.setItem(CONST.SkillLock, \"\");\r\n            cc.sys.localStorage.setItem(CONST.SkillAuto, \"\");\r\n            this.logic.isEnterRoom = false;\r\n            glGame.room.exitRoom();\r\n        }\r\n    },\r\n    //alert - 取消\r\n    showAlertHandler(arg){\r\n        switch (arg) {\r\n            case CONST.AlertType.BossClearSocre :\r\n                this.text_exitBossClearSocre.active = true;\r\n                this.btn_quit.active = true;\r\n                this.btn_queding.active = true;\r\n                this.btn_queding_net.active = false;\r\n                break;\r\n            case CONST.AlertType.LosCannan :\r\n                this.text_exitLosCannan.active = true;\r\n                this.btn_quit.active = true;\r\n                this.btn_queding.active = true;\r\n                this.btn_queding_net.active = false;\r\n                break;\r\n            case CONST.AlertType.NetOff :\r\n                this.text_netOff.active = true;\r\n                this.btn_quit.active = false;\r\n                this.btn_queding.active = false;\r\n                this.btn_queding_net.active = true;\r\n                break;\r\n        }\r\n        this.alert_container.active = true;\r\n    },\r\n    //alert - 取消\r\n    onQuitHandler(){\r\n        this.menuViewHandler(false);\r\n        this.alert_container.active = false;\r\n    },\r\n    //alert - 确认\r\n    onQuedingHandler(){\r\n        const IsExit = 3;\r\n        this.closeViewHandler(IsExit);\r\n    },\r\n    //断网确认\r\n    onQuedingOffNetHandler(){\r\n        cc.sys.localStorage.setItem(CONST.SkillisLockAutoChange, \"\");\r\n        cc.sys.localStorage.setItem(CONST.SkillLock, \"\");\r\n        cc.sys.localStorage.setItem(CONST.SkillAuto, \"\");\r\n        this.logic.isEnterRoom = false;\r\n        glGame.room.exitRoom();\r\n    },\r\n    //打财神boss 获得红包\r\n    sprinkleRedBagHandler(res){\r\n        let ui_physicalPool  = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n        let fish             = ui_physicalPool.getChildByName(\"\"+res.fishId);\r\n        if(!fish){\r\n            cc.warn(\">>找不到鱼 无法漂移红包 res \",res);\r\n            return;\r\n        }\r\n        let fishPos          = fish.position;\r\n        let coinContainer    = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let pre              = this.logic.getIsRotation() ? \"coinFlyR\" : \"coinFly\";\r\n        let targetPosition   = ui_coinEffectPos.getChildByName(pre+res.seatNum).position;\r\n        let effectPosition   = ui_coinEffectPos.getChildByName(\"redBag\"+res.seatNum).position;\r\n        let ui_CoinEffect    = coinContainer.getChildByName(\"sprinkleRedBag\"+res.seatNum);\r\n        if(ui_CoinEffect){\r\n            ui_CoinEffect.isRemoveSelf = 1;\r\n            ui_CoinEffect.stopAllActions();\r\n            ui_CoinEffect.destroy();\r\n        }\r\n        ui_CoinEffect    = cc.instantiate(this.node.getChildByName(\"spine_effect\").getChildByName(\"spine_redEnvelopeStatistics\"));\r\n        ui_CoinEffect.position = effectPosition;\r\n        ui_CoinEffect.name = \"sprinkleRedBag\"+res.seatNum;\r\n        ui_CoinEffect.active = true;\r\n        if(this.logic.getIsRotation()){\r\n            ui_CoinEffect.angle = 180;\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"getCaiShenRew\");//捕获到财神出现小UI时，播放\r\n        coinContainer.addChild(ui_CoinEffect);\r\n        this.logic.playSpine(ui_CoinEffect.getChildByName(\"spine\"),false,false,CONST.SpineName.Normal,()=>{\r\n            ui_CoinEffect.stopAllActions();\r\n            ui_CoinEffect.destroy();\r\n        });\r\n        ui_CoinEffect.stopAllActions();\r\n        ui_CoinEffect.runAction(cc.sequence(cc.delayTime(0.1),cc.callFunc(()=>{\r\n            if(ui_CoinEffect != null){\r\n                let playName = this.logic.seatNum == res.seatNum ? \"labG\" : \"labS\";\r\n                let lab_number = ui_CoinEffect.getChildByName(\"spine\").getChildByName(\"ATTACHED_NODE_TREE\").getChildByName(\"ATTACHED_NODE:root\").getChildByName(\"ATTACHED_NODE:zong\").getChildByName(playName);\r\n                lab_number.active = true;\r\n                lab_number.getComponent(cc.Label).string = \"+\"+this.logic.formatMoney(res.rewardGold);\r\n            }\r\n        })));\r\n\r\n        let effectCoin       = 10;\r\n        const MaxCoin        = 100;//最大数量\r\n        const RandomoffSex   = 60;//xy坐标偏移值\r\n        const RandomMin      = 15;//xy坐标偏移最小值\r\n        const RandomOffsexX  = 30;\r\n        const RandomOffsexY  = 50;\r\n        const RandomMinY     = 20;\r\n        const StartName      = 0;\r\n        const endName        = 9;\r\n        const plyTime        = 8;\r\n        const isHaveZero     = false;\r\n        const speed          = 0.035;\r\n        const plyedDestroy   = false;\r\n        const isRandomPly    = 1;\r\n        const OneDelayTime   = 0.1;\r\n        const TwoDelayTime   = 0.05;\r\n        const ScaleToTime    = 1;\r\n        const BezierToTime   = 0.7;\r\n        const ScaleToArg     = 0.8;\r\n        const FadeToTime     = 0.1;\r\n        const MoveToTime     = 0.15;\r\n        const EndOpacity     = 255;\r\n        const Gold           = \"gold\";\r\n        const Silver         = \"silver\";\r\n        if(effectCoin > MaxCoin){\r\n            effectCoin = MaxCoin;\r\n        }\r\n        ui_CoinEffect.zIndex -= effectCoin;\r\n        for (let i=0;i<effectCoin;i++){\r\n            let ui_CoinEffect     = this.logic.creatorEffect();\r\n            ui_CoinEffect.x       = fishPos.x + Math.random() * RandomoffSex + RandomMin;\r\n            ui_CoinEffect.y       = fishPos.y + Math.random() * RandomoffSex + RandomMin;\r\n            ui_CoinEffect.active  = true;\r\n            ui_CoinEffect.parent  = null;\r\n            ui_CoinEffect.opacity = 0;\r\n\r\n            let playName = this.logic.seatNum == res.seatNum ? Gold : Silver;\r\n            ui_CoinEffect.getComponent(\"nfish_MovieClip\").initEffect(this.moneyEffect_Atlas,playName,StartName,endName,plyTime,isHaveZero,speed,plyedDestroy,null,isRandomPly);\r\n            if(this.logic.getIsRotation()){\r\n                ui_CoinEffect.angle = 180;\r\n            }\r\n            coinContainer.addChild(ui_CoinEffect);\r\n            let upPos       = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y + Math.random() * RandomOffsexY + RandomMinY);\r\n            if(res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop){\r\n                upPos       = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y - ( Math.random() * RandomOffsexY + RandomMinY));\r\n            }\r\n            let bounceAct1  = cc.spawn(cc.fadeTo(FadeToTime,EndOpacity),cc.moveTo(MoveToTime,ui_CoinEffect.position));\r\n            let bounceAct2  = cc.moveTo(MoveToTime,upPos);\r\n            let bezierPoint = cc.v2(targetPosition.x,ui_CoinEffect.position.y);\r\n            let act         = cc.spawn(cc.scaleTo(ScaleToTime,ScaleToArg,ScaleToArg),cc.bezierTo(BezierToTime,[upPos,bezierPoint,cc.v2(targetPosition.x,targetPosition.y)]));\r\n            ui_CoinEffect.runAction(cc.sequence(cc.delayTime((i+1)*OneDelayTime),bounceAct1,bounceAct2,act,cc.delayTime(i*TwoDelayTime),cc.callFunc(()=>{\r\n                ui_CoinEffect.destroy();\r\n            })));\r\n        }\r\n    },\r\n    //死鱼后：金币旋转、漂移 + 金币增长动画 获取鱼的坐标 转换坐标到本地坐标 播放金币旋转动画，2秒后 漂移+缩放 到炮台位置 ，流程结束 释放、隐藏\r\n    playCoinEffectHandler(res){\r\n        let rewardGold = Number(res.rewardGold);\r\n        if(rewardGold <= 0){\r\n            return;\r\n        }\r\n        //检查该鱼是否有转盘\r\n        let effectRotateLevel = CONST.EffectRotateLevel.OneLevel;//0 一档 1 2 3\r\n        let resGroupId;\r\n        if(this.logic.fishPoolData[Number(res.fishId)] != null){\r\n            let fishTypeId = this.logic.fishPoolData[Number(res.fishId)].fishTypeId + \"\";\r\n            if(this.logic.json_fishTable[fishTypeId] != null){\r\n                effectRotateLevel = this.logic.json_fishTable[fishTypeId].effectRotate;\r\n                resGroupId = this.logic.json_fishTable[fishTypeId].resGroupId;\r\n            }\r\n        }\r\n        if(res.killType == CONST.CannonType.Bomb){//熔岩玄武炸死的一律飘1档次\r\n            effectRotateLevel = CONST.EffectRotateLevel.OneLevel;\r\n        }\r\n        let ui_physicalPool  = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n        let fish             = ui_physicalPool.getChildByName(\"\"+res.fishId);\r\n        if(fish == null){\r\n            //找不到鱼\r\n            cc.warn(\">> 找不到鱼 id:\",res.fishId)\r\n            return;\r\n        }\r\n        if(this.logic.seatNum == res.seatNum){\r\n            switch (effectRotateLevel) {\r\n                case CONST.EffectRotateLevel.OneLevel :\r\n                    glGame.emitter.emit(CONST.clientEvent.fishSound,\"getVoice1\");//1挡\r\n                    break\r\n                case CONST.EffectRotateLevel.TowLevel   :\r\n                    glGame.emitter.emit(CONST.clientEvent.fishSound,\"getVoice2\");//2挡\r\n                    break\r\n                case CONST.EffectRotateLevel.ThreeLevel :\r\n                    glGame.emitter.emit(CONST.clientEvent.fishSound,\"getVoice3\");//3挡\r\n                    break\r\n                case CONST.EffectRotateLevel.FourLevel  :\r\n                    glGame.emitter.emit(CONST.clientEvent.fishSound,\"getVoice4\");//4挡\r\n                    break\r\n            }\r\n        }\r\n\r\n        switch (effectRotateLevel) {\r\n            case CONST.EffectRotateLevel.OneLevel :\r\n                this.flyGoldEffect(effectRotateLevel,res);//飞金币动画\r\n                break\r\n            case CONST.EffectRotateLevel.TowLevel   :\r\n            case CONST.EffectRotateLevel.ThreeLevel :\r\n            case CONST.EffectRotateLevel.FourLevel  :\r\n                this.flyRotateEffect(effectRotateLevel,fish.position,resGroupId,res);\r\n                break\r\n        }\r\n    },\r\n    //捕获效果 - 展示转盘飞转盘动画 effectRotateLevel 档次  rewardGold 奖励数值  startShowPos 开始显示点 flySeatNum 需要飞到的座位 resGroupId 图片显示\r\n    flyRotateEffect(effectRotateLevel,startShowPos,resGroupId,res){\r\n        let rewardGold       = res.rewardGold;\r\n        let flySeatNum       = res.seatNum;\r\n        let effectContainer  = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let pre              = this.logic.getIsRotation() ? \"coinFlyR\" : \"coinFly\";\r\n        let moveToPos        = ui_coinEffectPos.getChildByName(pre+res.seatNum).position;\r\n        let spine_effect     = this.node.getChildByName(\"spine_effect\");\r\n        let spineCantainer   = null;\r\n        let bg;\r\n        let fish;\r\n        if(res.fishTypeId == CONST.BossLavaBasalt){\r\n            spineCantainer   = cc.instantiate(spine_effect.getChildByName(\"spine_bossRongYan\"));\r\n            bg               = spineCantainer.getChildByName(\"ATTACHED_NODE_TREE\").getChildByName(\"img_bg\");\r\n        }else{\r\n            if(this.logic.seatNum == flySeatNum && effectRotateLevel == CONST.EffectRotateLevel.FourLevel) {\r\n                spineCantainer   = cc.instantiate(spine_effect.getChildByName(\"spine_rewardANew4\"));\r\n                this.scheduleOnce(()=>{//爆炸 出现时机\r\n                    spineCantainer.getChildByName(\"spine_boom_1\").active = true;\r\n                },0.1);\r\n                this.scheduleOnce(()=>{//爆炸 出现时机\r\n                    spineCantainer.getChildByName(\"spine_boom_2\").active = true;\r\n                },0.3);\r\n                this.scheduleOnce(()=>{//爆炸 出现时机\r\n                    spineCantainer.getChildByName(\"spine_boom_3\").active = true;\r\n                },0.6);\r\n            }else {\r\n                //捕获效果  have two spine style so need trinocular expression\r\n                spineCantainer = cc.instantiate(spine_effect.getChildByName(this.logic.seatNum == flySeatNum ? \"spine_rewardA\"+effectRotateLevel :  \"spine_rewardB\"+effectRotateLevel));\r\n            }\r\n            bg               = spineCantainer.getChildByName(\"img_bg\");\r\n            fish             = spineCantainer.getChildByName(\"fish\");\r\n        }\r\n        if(bg != null){\r\n            let lab = bg.getChildByName(this.logic.seatNum == flySeatNum ? \"gold_lab\" : \"silver_lab\");\r\n            lab.active = true;\r\n            if(res.fishTypeId == CONST.BossLavaBasalt){\r\n                lab.getComponent(cc.Label).string = \"\";\r\n                const RepeatTimes = 10;\r\n                const coin = this.logic.formatMoney(rewardGold);\r\n                const SubTimes = Math.ceil(Number(coin+\"\")/RepeatTimes);\r\n                let currentCoin = 0;\r\n                let i = 0;\r\n                //读数消失\r\n                this.schedule(()=>{\r\n                    if(spineCantainer != null && spineCantainer.isDestroy == null && lab != null && lab._components != undefined){\r\n                        currentCoin += SubTimes;\r\n                        if(currentCoin >= coin){\r\n                            lab.getComponent(cc.Label).string = \"+\" + coin;\r\n                        }else{\r\n                            lab.getComponent(cc.Label).string = \"+\" + currentCoin;\r\n                        }\r\n                        i++;\r\n                        if(i == RepeatTimes){\r\n\r\n                        }\r\n                    }\r\n                },0.09,RepeatTimes-1);\r\n            }else{\r\n                let currStartNum = this.logic.formatMoney(rewardGold)+\"\";\r\n                if(currStartNum.indexOf(\".\") != -1){\r\n                    lab.getComponent(cc.Label).string = Number(currStartNum).toFixed(1);\r\n                }else{\r\n                    lab.getComponent(cc.Label).string = currStartNum;\r\n                }\r\n            }\r\n        }\r\n        if(fish){\r\n            let sprF         = this.icon_Atlas.getSpriteFrame(resGroupId);\r\n            let scale        = spineCantainer.height / sprF.getOriginalSize().height;\r\n            const TwoScale   = 0.55;\r\n            const ThreeScale = 0.75;\r\n            const FourScale  = 1;\r\n            if(effectRotateLevel == CONST.EffectRotateLevel.TowLevel){\r\n                scale = TwoScale;\r\n                sprF  = this.icon_2_3_4_Atlas.getSpriteFrame(resGroupId);\r\n            }\r\n            if(effectRotateLevel == CONST.EffectRotateLevel.ThreeLevel){\r\n                scale = ThreeScale;\r\n                sprF  = this.icon_2_3_4_Atlas.getSpriteFrame(resGroupId);\r\n            }\r\n            if(effectRotateLevel == CONST.EffectRotateLevel.FourLevel){\r\n                scale = FourScale;\r\n                sprF  = this.icon_2_3_4_Atlas.getSpriteFrame(resGroupId);\r\n            }\r\n            fish.getComponent(cc.Sprite).spriteFrame = sprF;\r\n            fish.oldScale = scale;\r\n            fish.scale = 0;\r\n            fish.stopAllActions();\r\n            fish.runAction(cc.sequence(cc.scaleTo(0.2,fish.oldScale*2),cc.scaleTo(0.2,fish.oldScale)))\r\n        }\r\n        let DelayTime       = effectRotateLevel * 0.25;//停留时间 - 根据不同级别的动画表现的k的帧数多少 决定停留时间\r\n\r\n        if(effectRotateLevel == CONST.EffectRotateLevel.TowLevel){\r\n            DelayTime += 0.45;\r\n        }\r\n        if(effectRotateLevel == CONST.EffectRotateLevel.ThreeLevel){\r\n            DelayTime += 1;\r\n        }\r\n\r\n        const Centont     = 0;\r\n        const HalfScale   = 0.5;\r\n\r\n        if(this.logic.seatNum != flySeatNum && effectRotateLevel == CONST.EffectRotateLevel.FourLevel){\r\n            spineCantainer.scale = HalfScale;\r\n            let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n            let posNodeName = this.logic.getIsRotation() ? \"effectRotatePosR\"+flySeatNum : \"effectRotatePos\"+flySeatNum;\r\n            let pos = ui_coinEffectPos.getChildByName(posNodeName).position;\r\n            spineCantainer.x = pos.x;\r\n            spineCantainer.y = pos.y;\r\n        }else{\r\n            spineCantainer.position = effectRotateLevel == CONST.EffectRotateLevel.FourLevel ?  cc.v2(Centont,Centont) : startShowPos;\r\n        }\r\n        spineCantainer.active = true;\r\n        const BasezIndex = 100 * effectRotateLevel;\r\n        if(this.lastzIndex){\r\n            spineCantainer.zIndex = BasezIndex + this.lastzIndex;\r\n        }else{\r\n            spineCantainer.zIndex = BasezIndex\r\n            this.lastzIndex = spineCantainer.zIndex;\r\n        }\r\n        if(effectRotateLevel == CONST.EffectRotateLevel.FourLevel){\r\n            DelayTime += 1.1;\r\n        }\r\n        let callBalk = cc.callFunc(()=>{//动画结束回调函数 - 加金币 读数动画\r\n            this.addGoldEffect(effectRotateLevel,res);//飘分\r\n            spineCantainer.isDestroy = 1;\r\n            spineCantainer.destroy();\r\n        });\r\n        if(this.logic.getIsRotation()){\r\n            spineCantainer.angle = 180;\r\n        }\r\n        effectContainer.addChild(spineCantainer);\r\n        spineCantainer.stopAllActions();\r\n\r\n        const MoveToTime    = 0.25;\r\n        const ScaleToTime   = 0.55;\r\n        const ScaleToArg    = 0;\r\n        const EffScaleToArg = 1;\r\n        const EffScaleToTime= 0.1;\r\n        const EffDelayTime  = 0.5;\r\n        const EffectNum     = (Number(res.fishId))%7 + 1;\r\n        const EffectPre     = \"effectTitle_\";\r\n        if(res.fishTypeId != CONST.BossLavaBasalt && effectRotateLevel == CONST.EffectRotateLevel.FourLevel){//第四档捕获效果不发生漂移效果，动画表现稍微有点不太一样\r\n            spineCantainer.getChildByName(\"effectTitle\").getComponent(cc.Sprite).spriteFrame = this.explosionAndLightning_Atlas.getSpriteFrame(EffectPre+EffectNum);\r\n            let fourEffect = cc.sequence(cc.delayTime(DelayTime),cc.scaleTo(ScaleToTime,ScaleToArg,ScaleToArg),callBalk);\r\n            spineCantainer.runAction(fourEffect);\r\n            spineCantainer.getChildByName(\"effectTitle\").scale = ScaleToArg;\r\n            spineCantainer.getChildByName(\"effectTitle\").stopAllActions();\r\n            spineCantainer.getChildByName(\"effectTitle\").runAction(cc.sequence(cc.delayTime(EffDelayTime),cc.scaleTo(EffScaleToTime,EffScaleToArg,EffScaleToArg)));\r\n        }else if(res.fishTypeId != CONST.BossLavaBasalt){\r\n            let otherEffect = cc.sequence(cc.delayTime(DelayTime),cc.spawn(cc.scaleTo(ScaleToTime,ScaleToArg,ScaleToArg),cc.moveTo(MoveToTime,moveToPos)),callBalk);\r\n            spineCantainer.runAction(otherEffect);\r\n        }else{\r\n            let otherEffect = cc.sequence(cc.delayTime(DelayTime),callBalk);\r\n            spineCantainer.runAction(otherEffect);\r\n\r\n        }\r\n    },\r\n    //漂移金币动画\r\n    flyGoldEffect(effectRotateLevel,res){\r\n        let coinContainer    = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let pre              = this.logic.getIsRotation() ? \"coinFlyR\" : \"coinFly\";\r\n        let targetPosition   = ui_coinEffectPos.getChildByName(pre+res.seatNum).position;\r\n        let ui_physicalPool  = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n        let fish             = ui_physicalPool.getChildByName(\"\"+res.fishId);\r\n        let effectCoin       = Math.ceil(Math.random() * 5 + 1);\r\n        const MaxCoin        = 100;//最大数量\r\n        const RandomoffSex   = 60;//xy坐标偏移值\r\n        const RandomMin      = 15;//xy坐标偏移最小值\r\n        const RandomOffsexX  = 30;\r\n        const RandomOffsexY  = 50;\r\n        const RandomMinY     = 20;\r\n        const StartName      = 0;\r\n        const endName        = 9;\r\n        const plyTime        = 8;\r\n        const isHaveZero     = false;\r\n        const speed          = 0.035;\r\n        const plyedDestroy   = false;\r\n        const isRandomPly    = 1;\r\n        const OneDelayTime   = 0.1;\r\n        const TwoDelayTime   = 0.05;\r\n        const ScaleToTime    = 1;\r\n        const BezierToTime   = 0.7;\r\n        const ScaleToArg     = 0.8;\r\n        const FadeToTime     = 0.1;\r\n        const MoveToTime     = 0.15;\r\n        const EndOpacity     = 255;\r\n        const Gold           = \"gold\";\r\n        const Silver         = \"silver\";\r\n        if(effectCoin > MaxCoin){\r\n            effectCoin = MaxCoin;\r\n        }\r\n\r\n        const CoinLabOffsexY = 158;\r\n\r\n        let coinlab = cc.instantiate(coinContainer.getChildByName(this.logic.seatNum == res.seatNum ? \"flyGoldCoinLab\" : \"flySilverCoinLab\"));\r\n        coinlab.active = true;\r\n        coinlab.getComponent(cc.Label).string = \"+\"+this.logic.formatMoney(res.rewardGold);\r\n        let fishPos = fish.position;\r\n        coinlab.x = fishPos.x + Math.random() * RandomoffSex + RandomMin;\r\n        let moveToAct;\r\n        if(this.logic.getIsRotation()){\r\n            coinlab.angle = 180;\r\n            coinlab.y = fishPos.y;\r\n            moveToAct = cc.moveTo(0.3,coinlab.x,coinlab.y - CoinLabOffsexY)\r\n        }else {\r\n            coinlab.y = fishPos.y;\r\n            moveToAct = cc.moveTo(0.3,coinlab.x,coinlab.y + CoinLabOffsexY)\r\n        }\r\n        coinContainer.addChild(coinlab);\r\n\r\n        coinlab.runAction(cc.sequence(cc.delayTime(0.3),moveToAct,cc.callFunc(()=>{\r\n            coinlab.destroy();\r\n        })))\r\n\r\n        for (let i=0;i<effectCoin;i++){\r\n            let ui_CoinEffect     = this.logic.creatorEffect();\r\n            ui_CoinEffect.x       = fishPos.x + Math.random() * RandomoffSex + RandomMin;\r\n            ui_CoinEffect.y       = fishPos.y + Math.random() * RandomoffSex + RandomMin;\r\n            ui_CoinEffect.active  = true;\r\n            ui_CoinEffect.parent  = null;\r\n            ui_CoinEffect.opacity = 0;\r\n\r\n\r\n            let playName = this.logic.seatNum == res.seatNum ? Gold : Silver;\r\n            ui_CoinEffect.getComponent(\"nfish_MovieClip\").initEffect(this.moneyEffect_Atlas,playName,StartName,endName,plyTime,isHaveZero,speed,plyedDestroy,null,isRandomPly);\r\n            if(this.logic.getIsRotation()){\r\n                ui_CoinEffect.angle = 180;\r\n            }\r\n            coinContainer.addChild(ui_CoinEffect);\r\n            let upPos         = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y + Math.random() * RandomOffsexY + RandomMinY);\r\n\r\n            if(res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop){\r\n                upPos         = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX,ui_CoinEffect.position.y - ( Math.random() * RandomOffsexY + RandomMinY));\r\n            }\r\n            let bounceAct1    = cc.spawn(cc.fadeTo(FadeToTime,EndOpacity),cc.moveTo(MoveToTime,ui_CoinEffect.position));\r\n            let bounceAct2    = cc.moveTo(MoveToTime,upPos);\r\n            let bezierPoint   = cc.v2(targetPosition.x,ui_CoinEffect.position.y);\r\n            let act           = cc.spawn(cc.scaleTo(ScaleToTime,ScaleToArg,ScaleToArg),cc.bezierTo(BezierToTime,[upPos,bezierPoint,cc.v2(targetPosition.x,targetPosition.y)]));\r\n            ui_CoinEffect.runAction(cc.sequence(cc.delayTime((i+1)*OneDelayTime),bounceAct1,bounceAct2,act,cc.delayTime(i*TwoDelayTime),cc.callFunc(()=>{\r\n                ui_CoinEffect.destroy();\r\n            })));\r\n        }\r\n\r\n        if(this.logic.seatNum == res.seatNum && CONST.EffectRotateLevel.OneLevel == effectRotateLevel){\r\n            glGame.emitter.emit(CONST.clientEvent.fishSound,\"flyGold\");//飞金币\r\n        }\r\n\r\n        if(CONST.EffectRotateLevel.OneLevel != effectRotateLevel){\r\n            this.scheduleOnce(()=>{\r\n                this.addGoldEffect(effectRotateLevel,res);//加金币 读数动画\r\n            },1);\r\n        }\r\n    },\r\n    //飘分\r\n    addGoldEffect(effectRotateLevel,res){\r\n        let pre = res.seatNum == this.logic.seatNum ? \"lab_coinGlod\":\"lab_coinSilver\";\r\n\r\n        let lab_coinMask        = this.node.getChildByName(\"ui_coinEffectContainer\").getChildByName(\"lab_coinMask\"+res.seatNum);\r\n        if(this.logic.getIsRotation()){\r\n            lab_coinMask        = this.node.getChildByName(\"ui_coinEffectContainer\").getChildByName(\"lab_coinMaskR\"+res.seatNum);\r\n        }\r\n        let base_labNode        = lab_coinMask.getChildByName(pre);\r\n        let labNode             = cc.instantiate(base_labNode);\r\n        if(base_labNode.oldx == undefined){\r\n            base_labNode.oldx   = Number(base_labNode.x + \"\");\r\n            base_labNode.oldy   = Number(base_labNode.y + \"\");\r\n        }\r\n        labNode.oldx            = Number(base_labNode.oldx + \"\");\r\n        labNode.oldy            = Number(base_labNode.oldy + \"\");\r\n        lab_coinMask.addChild(labNode);\r\n        const MoveOffsex        = Math.random() * 5 + 5;\r\n        const MoveOffsex2       = MoveOffsex + 5;\r\n        let endPos              = cc.v2(labNode.oldx,labNode.oldy + MoveOffsex);\r\n        if(res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop){\r\n            endPos              = cc.v2(labNode.oldx,labNode.oldy - MoveOffsex);\r\n        }\r\n\r\n        let endPos2             = cc.v2(labNode.oldx,endPos.y + MoveOffsex2);\r\n        if(res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop){\r\n            endPos2             = cc.v2(labNode.oldx,endPos.y - MoveOffsex2);\r\n        }\r\n\r\n        if(this.logic.getIsRotation()){\r\n            labNode.angle = 180;\r\n            labNode.anchorX = 0;\r\n        }\r\n\r\n        const oldPos            = cc.v2(labNode.oldx,labNode.oldy);\r\n        labNode.currRewardGold  = 0;\r\n        labNode.startHide       = 0;\r\n        labNode.rewardGold      = res.rewardGold;\r\n        labNode.scale           = 0;\r\n        labNode.setPosition(lab_coinMask.getChildByName(\"lab_startPos\").position);\r\n        labNode.stopAllActions();\r\n        labNode.getComponent(cc.Label).string = \"+\"+this.logic.formatMoney(res.rewardGold);\r\n        labNode.active          = true;\r\n        const GoTime            = 0.17;\r\n        const endTime           = 0.4;\r\n        const DelayTime         = 0.35;\r\n        const DelayStateTime    = 0.05;\r\n        const Normal            = 1.2;\r\n        const ScaleToTime       = 0.2;\r\n        const ScaleToTime2      = 0.2;\r\n        const FadeToTime        = 0.3;\r\n        const Hide              = 0;\r\n        const FadeTo            = 0;\r\n        labNode.runAction(\r\n            cc.sequence(\r\n                cc.delayTime(DelayTime),\r\n                cc.spawn(cc.scaleTo(ScaleToTime,Normal),cc.moveTo(GoTime,oldPos)),\r\n                cc.delayTime(DelayStateTime),\r\n                cc.moveTo(endTime,endPos2),\r\n                cc.sequence(\r\n                    cc.fadeTo(FadeToTime,Hide),\r\n                    cc.scaleTo(ScaleToTime2,FadeTo),\r\n                    cc.moveBy(endTime,endPos2),\r\n                ),\r\n                cc.callFunc(()=>{\r\n                    if(res.msg != null){\r\n                        if(this.logic.seatNum == res.seatNum){\r\n                            this.logic.gold = Number(res.msg.coin);\r\n                            this.logic.checkGold();\r\n                            // cc.error(\">> 更新我的钱  ok！\")\r\n                            glGame.emitter.emit(CONST.clientEvent.myUpdateMoney);\r\n                        }else{\r\n                            // cc.error(\">> 射击 更新其他用户的钱 ok!\")\r\n                            glGame.emitter.emit(CONST.clientEvent.updateShootGold,res.msg);\r\n                        }\r\n                        this.logic[\"isUpdateMoney\"+res.msg.seatNum] = true;//玉如意、聚宝盆 结束 恢复更新余额机制\r\n                    }\r\n                    labNode.destroy();\r\n                })\r\n            )\r\n        );\r\n    },\r\n    //特殊子弹统计\r\n    specialBulletStatistics(res){\r\n        if(res.total < 0.1){//打死掉鱼没分就不播了\r\n            return;\r\n        }\r\n        //仙剑比较特殊 生命周期较长\r\n        let coinContainer    = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let spineCantainer   = coinContainer.getChildByName(\"spineCantainer\"+res.seatNum);\r\n        if(spineCantainer != null){\r\n            if(spineCantainer.isDispose == null && spineCantainer.cannonType == res.cannonType){//isDispose=1则为正在销毁的路上、同样类型\r\n                if(res.total > 0){\r\n                    spineCantainer.currCoin = null;\r\n                    this[\"runSpecial\"+res.seatNum] = false;\r\n                    this.scheduleOnce(()=>{\r\n                        if(spineCantainer == null){\r\n                            spineCantainer  = coinContainer.getChildByName(\"spineCantainer\"+res.seatNum);\r\n                        }\r\n                        if(spineCantainer != null && spineCantainer._components != undefined){\r\n                            let spinec = spineCantainer.getChildByName(res.seatNum == this.logic.seatNum ? \"gold_lab\" : \"silver_lab\")\r\n                            if(spinec != null){\r\n                                if(spinec._components != undefined && spinec.getComponent(cc.Label)) {\r\n                                    let lab = spinec.getComponent(cc.Label);\r\n                                    let oldCoin = lab.string == undefined || lab.string == \"\" ? 0 : Number(lab.string);\r\n                                    spineCantainer.startRun = res.totalReward;\r\n                                    if(spineCantainer.currCoin == null){\r\n                                        spineCantainer.currCoin = Number(oldCoin);\r\n                                    }\r\n                                    this[\"runSpecial\"+res.seatNum] = true;\r\n                                }\r\n                            }else{\r\n                                cc.error(\" 统计框已经不存在 统计错误！ res \",res)\r\n                            }\r\n                        }\r\n                    },0.2);\r\n                }\r\n            }else{//清理\r\n                this[\"runSpecial\"+res.seatNum] = false;\r\n                spineCantainer.opacity = 0;\r\n                spineCantainer.stopAllActions();\r\n                coinContainer.removeChild(spineCantainer);\r\n                spineCantainer.destroy();\r\n                spineCantainer = null;\r\n            }\r\n        }\r\n\r\n        if(spineCantainer == null){\r\n            this[\"runSpecial\"+res.seatNum] = false;\r\n            let spine_effect        = this.node.getChildByName(\"spine_effect\");\r\n            spineCantainer          = cc.instantiate(spine_effect.getChildByName(\"spine_speciaCoinNum\"));\r\n            spineCantainer.cannonType = res.cannonType;\r\n            spineCantainer.oldScale = spineCantainer.scale;\r\n            const NotOpacity        = 0;\r\n            const NotScale          = 0;\r\n\r\n            spineCantainer.active   = true;\r\n            spineCantainer.position = ui_coinEffectPos.getChildByName(\"statisticsPos\"+res.seatNum).position;\r\n            spineCantainer.name     = \"spineCantainer\"+res.seatNum;\r\n            spineCantainer.opacity  = NotOpacity;\r\n            spineCantainer.scale    = NotScale;\r\n            if(this.logic.getIsRotation()){\r\n                spineCantainer.angle = 180;\r\n            }\r\n            coinContainer.addChild(spineCantainer);\r\n\r\n            const NormalOpacity = 255;\r\n            const QScale        = 2;\r\n            const NormalScale   = spineCantainer.oldScale;\r\n            const FadeTime      = 0.2;\r\n            const ScalTTime     = 0.2;\r\n\r\n            spineCantainer.stopAllActions();\r\n            let act = cc.sequence(cc.spawn(cc.fadeTo(FadeTime,NormalOpacity),cc.scaleTo(ScalTTime,QScale)),cc.scaleTo(ScalTTime,NormalScale),cc.callFunc(()=>{\r\n                //播放移动球\r\n                const Scale = 1.33;\r\n                let laserBornEffect  = this.logic.creatorEffect();\r\n                laserBornEffect.parent = null;\r\n                laserBornEffect.active = true;\r\n                laserBornEffect.setPosition(spineCantainer.getChildByName(\"effect\").position);\r\n                laserBornEffect.scale = Scale;\r\n                spineCantainer.addChild(laserBornEffect);\r\n                let mcName;\r\n                let scale = 1;\r\n                let isRo = false;\r\n                switch (Number(res.cannonType)) {\r\n                    case CONST.CannonType.Lightning :   // 闪电\r\n                        mcName = CONST.CannonGetEddect.Lightning;\r\n                        break;\r\n                    case CONST.CannonType.PartialBomb : // 炎爆\r\n                        mcName = CONST.CannonGetEddect.PartialBomb;\r\n                        break;\r\n                    case CONST.CannonType.Laser :       // 龙息\r\n                        mcName = CONST.CannonGetEddect.Laser;\r\n                        break;\r\n                    case CONST.CannonType.Missile :     // 仙剑\r\n                        mcName = CONST.CannonGetEddect.Missile;\r\n                        scale = 0.95;\r\n                        laserBornEffect.y = -3;\r\n                        isRo = true;\r\n                        break;\r\n                }\r\n                const Min = 1;\r\n                const Max = 5;\r\n                const LoopTime = 0;\r\n                const IsHaveZero = false;\r\n                const Speed = 0.12;\r\n                const PayEdRemove = false;\r\n\r\n                laserBornEffect.scale = scale;\r\n                if(isRo){\r\n                    laserBornEffect.stopAllActions();\r\n                    laserBornEffect.runAction(cc.repeatForever(cc.sequence(cc.moveTo(0.9,cc.v2(laserBornEffect.x,laserBornEffect.y+6)),cc.moveTo(0.9,cc.v2(laserBornEffect.x,laserBornEffect.y-6)))));\r\n                }\r\n                laserBornEffect.getComponent(\"nfish_MovieClip\").initEffect(this.laserBornEffect_Atlas,mcName,Min,Max,LoopTime,IsHaveZero,Speed,PayEdRemove);\r\n\r\n                const Frequency = 10; //设置频率 读数次数 10 次\r\n                spineCantainer.frequency = res.total/Frequency;\r\n                if(res.isoffNet == null){//非断线重连\r\n                    //开始进行度数\r\n                    spineCantainer.startRun = Number(res.totalReward);\r\n                    spineCantainer.currCoin = 0;//读数当前指针值\r\n                    this[\"runSpecial\"+res.seatNum] = true;\r\n                }else{\r\n                    spineCantainer.startRun = Number(res.total);\r\n                    spineCantainer.currCoin = res.total;//读数当前指针值\r\n                    let labName = res.seatNum == this.logic.seatNum ? \"gold_lab\" : \"silver_lab\";\r\n                    spineCantainer.getChildByName(labName).getComponent(cc.Label).string = res.total+\"\";\r\n                }\r\n            }));\r\n            spineCantainer.runAction(act);\r\n        }\r\n    },\r\n    //开始读数\r\n    runSpecialBulletStatistics(dt){\r\n        const UserMax = 4;\r\n        for (let i=0;i<UserMax;i++){\r\n            if(!this[\"runSpecial\"+i]){\r\n                continue;\r\n            }\r\n            let spineCantainer = this.node.getChildByName(\"ui_coinEffectContainer\").getChildByName(\"spineCantainer\"+i);\r\n            if(spineCantainer != null && spineCantainer.currCoin != null && spineCantainer.currCoin != undefined && spineCantainer.startRun != null){\r\n                spineCantainer.currCoin +=  Number(spineCantainer.frequency);\r\n                let lab = spineCantainer.getChildByName(i == this.logic.seatNum ? \"gold_lab\" : \"silver_lab\").getComponent(cc.Label);\r\n                let oldCoin = lab.string == undefined || lab.string == \"\" ? 0 : Number(lab.string);\r\n                if(spineCantainer.currCoin >= spineCantainer.startRun){//读数完成\r\n                    if(spineCantainer.startRun > oldCoin){\r\n                        let currStartNum = spineCantainer.startRun+\"\";\r\n                        if(currStartNum.indexOf(\".\") != -1){\r\n                            lab.string = Number(spineCantainer.startRun).toFixed(1);\r\n                        }else{\r\n                            lab.string = spineCantainer.startRun;\r\n                        }\r\n                        cc.warn(\">>>>>2. 计分成功 =====> end startRun \"+spineCantainer.startRun)\r\n                    }else{\r\n                        // cc.error(\">>> 3. 计数失败 =====> : \"+spineCantainer.currCoin+\" 当前数: \"+oldCoin)\r\n                    }\r\n                    spineCantainer.currCoin = null;\r\n                    glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n                }else{//正在读数\r\n                    if(spineCantainer.currCoin > oldCoin){\r\n                        let currStartNum = spineCantainer.currCoin+\"\";\r\n                        if(currStartNum.indexOf(\".\") != -1){\r\n                            lab.string = currStartNum.split(\".\")[0];\r\n                        }else{\r\n                            lab.string = spineCantainer.currCoin;\r\n                        }\r\n                    }else{\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //清除特殊子弹\r\n    clearSpecialHandler(seatNum){\r\n        const DeayTime = 1.5;\r\n        this.scheduleOnce(()=>{\r\n            let lastCannType = Number(this.logic.specialBulletPool[seatNum] + \"\");\r\n            delete this.logic.specialBulletPool[seatNum];//根据规则：每个玩家同屏下只允许有一个特殊子弹\r\n            if(this.logic.seatNum == seatNum)cc.warn(\"=== 删除特殊子弹状态 ============ seatNum \"+seatNum+\" lastCannType \"+lastCannType)\r\n            glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n        },DeayTime);\r\n    },\r\n    //检查当前计数器计数完成之后是否需要销毁\r\n    checkSpecialBulletHandler(){\r\n        let isDisSpecial = null;\r\n        const UserMax = 4;\r\n        for (let i=0;i<UserMax;i++){\r\n            let spineCantainer = this.node.getChildByName(\"ui_coinEffectContainer\").getChildByName(\"spineCantainer\"+i);\r\n            if(spineCantainer != null && spineCantainer.currCoin == null){ //如果计数器存在,并且 读数完成\r\n                let isLevel = true;\r\n                for(let key in this.logic.playerInfo){\r\n                    let playerInfo = this.logic.playerInfo[key];\r\n                    if(playerInfo != null && Number(playerInfo.seatNum) == i) {//按照座位找到当前用户身上的子弹信息\r\n                        isLevel = false;\r\n                        if(this.logic.specialBulletPool[i] == undefined && this.logic.specialBulletPool[i] == null){\r\n                            if(spineCantainer.cannonType == CONST.CannonType.Missile) {//仙剑子弹 的销毁逻辑 要特殊处理\r\n                                if(playerInfo.cannonAmount != undefined && playerInfo.cannonAmount == 0){//如果当前没有仙剑子弹在飞、并且身上已经没有了子弹\r\n                                    isDisSpecial = \"======= 1 结果 仙剑结束  seatNum \"+i+\" mySeatNum \"+this.logic.seatNum;\r\n                                    // if(this.logic.seatNum == i) cc.error(\">>>>>>>>>>>>>>>>>>>>>  1111 \")\r\n                                    this.specialBulletStatisticsClear(playerInfo);//开始销毁\r\n                                }\r\n                            }\r\n                            if(playerInfo.cannonType == CONST.CannonType.Normal){\r\n                                isDisSpecial = \"======= 2 结果 当前是普通子弹 seatNum \"+i+\" mySeatNum \"+this.logic.seatNum;\r\n                                // if(this.logic.seatNum == i)cc.error(\">>>>  2222.1  当前是普通子弹 playerInfo \"+playerInfo.cannonType,\" playerInfo \",playerInfo)\r\n                                this.specialBulletStatisticsClear(playerInfo);//开始销毁\r\n                            }\r\n                            if(spineCantainer.cannonType != playerInfo.cannonType){//如果当前统计框的类型和身上子弹类型不一样\r\n                                isDisSpecial = \"======== 3 结果 切换了 子弹 seatNum\"+i+\" mySeatNum \"+this.logic.seatNum;\r\n                                // if(this.logic.seatNum == i)cc.error(\">>>>  3333  当前是普通子弹 playerInfo \"+playerInfo.cannonType,\" playerInfo \",playerInfo);\r\n                                this.specialBulletStatisticsClear(playerInfo);//开始销毁\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n                if(isLevel){\r\n                    isDisSpecial = \"====== 4 结果 用户离开 seatNum \"+i+\" mySeatNum \"+this.logic.seatNum;\r\n                    this.specialBulletStatisticsClear({seatNum:i});//开始销毁\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //销毁 - 计数器 取消计算数字 - 升级到所有子弹销毁\r\n    specialBulletStatisticsClear(res){\r\n        this[\"runSpecial\"+res.seatNum] = false;\r\n        let ui_coinEffectContainer = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let spineCantainer = ui_coinEffectContainer.getChildByName(\"spineCantainer\"+res.seatNum);\r\n\r\n        if(spineCantainer != null && spineCantainer.isDispose != null){\r\n            // if(this.logic.seatNum == res.seatNum)cc.error(\">>> 正在销毁 ----seatNum \"+res.seatNum);\r\n            return;\r\n        }\r\n        if(spineCantainer != null){\r\n            spineCantainer.isDispose = 1;\r\n            // if(this.logic.seatNum == res.seatNum)cc.error(\"===================销毁 cannonType : \"+spineCantainer.cannonType+\" seatNum \"+res.seatNum)\r\n            // if(this.logic.seatNum == res.seatNum)cc.error(\"\");\r\n            // if(this.logic.seatNum == res.seatNum)cc.error(\"\");\r\n            // if(this.logic.seatNum == res.seatNum)cc.error(\"\");\r\n            spineCantainer.currCoin = null;\r\n            spineCantainer.lastcurrCoin = null;\r\n            const DelayTime  = 0.9;\r\n            const FadeToTime = 0.2;\r\n            const FadeToArg  = 0;\r\n            const DelayTime2 = 2;\r\n\r\n            this.scheduleOnce(()=>{\r\n                spineCantainer = ui_coinEffectContainer.getChildByName(\"spineCantainer\"+res.seatNum);\r\n                if(spineCantainer != null){\r\n                    spineCantainer.stopAllActions();\r\n                    ui_coinEffectContainer.removeChild(spineCantainer);\r\n                    spineCantainer.destroy();\r\n                }\r\n            },DelayTime+(FadeToTime*DelayTime2));\r\n\r\n            spineCantainer.stopAllActions();\r\n            spineCantainer.runAction(cc.sequence(cc.delayTime(DelayTime),cc.fadeTo(FadeToTime,FadeToArg)),cc.callFunc(()=>{\r\n                ui_coinEffectContainer.removeChild(spineCantainer);\r\n                spineCantainer.opacity = 0;\r\n                spineCantainer.destroy();\r\n            }));\r\n        }else{\r\n            if(this.logic.seatNum == res.seatNum){\r\n                cc.error(\">>销毁 失败 \"+res.seatNum+\"  spineCantainer is null  >> spineCantainer \",spineCantainer);\r\n            }\r\n        }\r\n    },\r\n    //其他人的 如意 聚宝鹏 展示\r\n    oPSSAHandler(res){\r\n        const NormalOpacity  = 255;\r\n        let effectContainer  = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let spine_effect     = this.node.getChildByName(\"spine_effect\");\r\n        let type             = res.type;\r\n        let typeName         = type == CONST.AwardType.RUYI ? \"YuRu\" : \"juBao\";\r\n        let seatNum          = res.seatNum;\r\n        let posPreName       = type == CONST.AwardType.RUYI ? \"yuRuPos\" : \"juBaoPos\";\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let nodeName         = typeName+seatNum;\r\n        let posName          = posPreName+seatNum;\r\n        let targetPosition;\r\n        if(this.logic.getIsRotation()){\r\n            posPreName       = type == CONST.AwardType.RUYI ? \"yuRuPos_R_\" : \"juBaoPos_R_\";\r\n            posName          = posPreName+seatNum;\r\n            targetPosition = ui_coinEffectPos.getChildByName(posName).position;\r\n        }else{\r\n            targetPosition = ui_coinEffectPos.getChildByName(posName).position;\r\n        }\r\n        let spineCantainer   = effectContainer.getChildByName(nodeName);\r\n        if(spineCantainer == null){\r\n            let spineName         = type == CONST.AwardType.RUYI ? \"spine_YuRu\" : \"spine_JuBao\";\r\n            spineCantainer        = cc.instantiate(spine_effect.getChildByName(spineName));\r\n            spineCantainer.name   = nodeName;\r\n            spineCantainer.active = true;\r\n            spineCantainer.setPosition(targetPosition);\r\n            effectContainer.addChild(spineCantainer);\r\n            if(this.logic.getIsRotation()){\r\n                spineCantainer.angle = 180;\r\n            }\r\n        }else{\r\n            spineCantainer.active = true;\r\n            spineCantainer.opacity = NormalOpacity;\r\n            spineCantainer.stopAllActions();\r\n        }\r\n        this.startShowSpacil(res,type,spineCantainer);\r\n    },\r\n    //开始显示 特殊\r\n    startShowSpacil(res,type,spineCantainer){\r\n        if(type == CONST.AwardType.RUYI){\r\n            spineCantainer.runAction(cc.sequence(\r\n                cc.scaleTo(0.5, 1, 1),\r\n                cc.delayTime(6),\r\n                cc.callFunc(() => {\r\n                    this.flyGoldEffectForSpacil(res)\r\n                })\r\n            ))\r\n        }else {\r\n            spineCantainer.runAction(cc.sequence(\r\n                cc.scaleTo(0.5, 1, 1),\r\n                cc.delayTime(6),\r\n                cc.callFunc(() => {\r\n                    this.flyGoldEffectForSpacil(res)\r\n                })\r\n            ))\r\n        }\r\n    },\r\n    //飞金币\r\n    flyGoldEffectForSpacil(res){\r\n        let type             = res.type;\r\n        let seatNum          = res.seatNum;\r\n        let typeName         = type == CONST.AwardType.RUYI ? \"YuRu\" : \"juBao\";\r\n        let posPreName       = type == CONST.AwardType.RUYI ? \"yuRuPos\" : \"juBaoPos\";\r\n        let ui_coinEffectPos = this.node.getChildByName(\"ui_coinEffectPos\");\r\n        let startPos         = ui_coinEffectPos.getChildByName(posPreName+seatNum).position;\r\n        let effectContainer  = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let coinContainer    = this.node.getChildByName(\"ui_coinEffectContainer\");\r\n        let pre              = this.logic.getIsRotation() ? \"coinFlyR\" : \"coinFly\";\r\n        let targetPosition   = ui_coinEffectPos.getChildByName(pre+seatNum).position;\r\n        let spineCantainer   = effectContainer.getChildByName(typeName+seatNum);\r\n        const Multiple = 100;\r\n        const MaxCoin = 20;//最大数量\r\n\r\n        let effectCoin = Math.ceil(res.rewardGold / Multiple);\r\n        if (effectCoin > MaxCoin) {\r\n            effectCoin = MaxCoin;\r\n        }\r\n\r\n        const StartName = 1;\r\n        const endName = 16;\r\n        const plyTime = 3;\r\n        const isHaveZero = false;\r\n        const speed = 0.035;\r\n        const plyedDestroy = false;\r\n        const isRandomPly = 1;\r\n\r\n        const RandomOffsexX = 30;\r\n        const RandomOffsexY = 50;\r\n        const RandomMinY = 20;\r\n\r\n        const OneDelayTime = 0.1;\r\n        const TwoDelayTime = 0.05;\r\n        const ScaleToTime = 1;\r\n        const BezierToTime = 0.7;\r\n        const ScaleToArg = 0.8;\r\n        const FadeToTime = 0.1;\r\n        const MoveToTime = 0.15;\r\n        const EndOpacity = 255;\r\n\r\n        for (let i = 0; i < effectCoin; i++) {\r\n            let ui_CoinEffect = this.logic.creatorEffect();\r\n            ui_CoinEffect.x = startPos.x;\r\n            ui_CoinEffect.y = startPos.y;\r\n            ui_CoinEffect.active = true;\r\n            ui_CoinEffect.parent = null;\r\n            ui_CoinEffect.opacity = 0;\r\n            let playName = \"silver\";\r\n\r\n            ui_CoinEffect.getComponent(\"nfish_MovieClip\").initEffect(this.moneyEffect_Atlas, playName, StartName, endName, plyTime, isHaveZero, speed, plyedDestroy, null, isRandomPly);\r\n\r\n            coinContainer.addChild(ui_CoinEffect);\r\n            let upPos = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX, ui_CoinEffect.position.y + Math.random() * RandomOffsexY + RandomMinY);\r\n\r\n            if (res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop) {\r\n                upPos = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX, ui_CoinEffect.position.y - (Math.random() * RandomOffsexY + RandomMinY));\r\n            }\r\n            let bounceAct1 = cc.spawn(cc.fadeTo(FadeToTime, EndOpacity), cc.moveTo(MoveToTime, ui_CoinEffect.position));\r\n            let bounceAct2 = cc.moveTo(MoveToTime, upPos);\r\n            let bezierPoint = cc.v2(targetPosition.x, ui_CoinEffect.position.y);\r\n            let act = cc.spawn(cc.scaleTo(ScaleToTime, ScaleToArg, ScaleToArg), cc.bezierTo(BezierToTime, [upPos, bezierPoint, cc.v2(targetPosition.x, targetPosition.y)]));\r\n\r\n            ui_CoinEffect.runAction(cc.sequence(cc.delayTime(i * OneDelayTime), bounceAct1, bounceAct2, act, cc.delayTime(i * TwoDelayTime), cc.callFunc(() => {\r\n                ui_CoinEffect.destroy();\r\n            })));\r\n        }\r\n        let endGoldTime = effectCoin * OneDelayTime + effectCoin * TwoDelayTime;//最后一个金币漂移的时间\r\n        const HideOpacity = 0;\r\n        spineCantainer.stopAllActions();\r\n        spineCantainer.runAction(cc.sequence(\r\n            cc.delayTime(endGoldTime),\r\n            cc.scaleTo(0.5, 0, 0),\r\n            cc.callFunc(()=>{\r\n                spineCantainer.opacity = HideOpacity;\r\n            })\r\n        ));\r\n    },\r\n    //飘分\r\n    addGoldEffectHandler(res){\r\n        this.addGoldEffect(0,res)\r\n    },\r\n    //充值到账财神爷\r\n    onCoinChangedHandler(res){\r\n        let myid = glGame.user.userID;\r\n        if(res.uid == myid){\r\n            let arrvalCoin = this.logic.getFloat(Number(res.offset));\r\n            glGame.emitter.emit(glGame.showGodOfWealth,{pos:3,coin:arrvalCoin});\r\n        }\r\n    },\r\n    //跟随鱼Tip 显示 队列处理\r\n    followFishTipHandler(res){\r\n        this.followFishTipList.push(res);\r\n    },\r\n    //清理显示鱼气泡\r\n    clearFollowFishTipHandler(res){\r\n        if(this.ui_tip == undefined){\r\n            return;\r\n        }\r\n        let tipName = \"fish_tip_\"+res.fishId;\r\n        let tip = this.ui_tip.getChildByName(tipName);\r\n        if(tip){\r\n            tip.destroy();\r\n            if(this.followFishTipList.length > 0) {\r\n                for (let i = 0; i < this.followFishTipList.length; i++) {\r\n                    if(this.followFishTipList[i] != null && this.followFishTipList[i].id == res.fishId){\r\n                        this.followFishTipList[i] = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //跟随鱼气泡 循环跟随体\r\n    followFishTip(dt){\r\n        if(this.ui_physicalPool == undefined){\r\n            this.ui_physicalPool = this.node.parent.getChildByName(\"nfish_deskContainer\").getChildByName(\"ui_physicalPool\");\r\n        }\r\n        if(this.ui_tip == undefined){\r\n            this.ui_tip = this.node.getChildByName(\"ui_fishTip\");\r\n        }\r\n        if(this.followFishTipList.length > 0){\r\n            for (let i=0;i<this.followFishTipList.length;i++){\r\n                if(this.followFishTipList[i]){\r\n                    let fishId = this.followFishTipList[i].id;\r\n                    let fish = this.ui_physicalPool.getChildByName(\"\"+fishId);\r\n                    let tipName = \"fish_tip_\"+fishId;\r\n                    if(fishId && fish){\r\n                        let tip;\r\n                        if(this.ui_tip.getChildByName(tipName) == null){\r\n                            tip = cc.instantiate(this.fishTip);\r\n                            tip.name = tipName;\r\n                            tip.active = true;\r\n                            this.ui_tip.addChild(tip);\r\n\r\n                            let lab = tip.getChildByName(\"bg\").getChildByName(\"lab\");\r\n                            if(tip.width == 0){\r\n                                let size = this.followFishTipList[i].size;\r\n                                tip.width  = size.width;\r\n                                tip.height = size.height;\r\n                                lab.getComponent(cc.Label).string = this.followFishTipList[i].text;\r\n                                // //test 代码\r\n                                // lab.getComponent(cc.Label).string = this.followFishTipList[i].data.fishName;\r\n                            }\r\n                            if(this.followFishTipList[i].direction){\r\n                                tip.scaleX = -1;\r\n                                lab.scaleX = -1;\r\n                            }\r\n                            if(this.logic.getIsRotation()){\r\n                                tip.angle = 180;\r\n                            }\r\n                        }else{\r\n                            tip = this.ui_tip.getChildByName(tipName);\r\n                        }\r\n                        tip.setPosition(fish.position);\r\n                        this.followFishTipList[i].time -= dt;\r\n                        if(this.followFishTipList[i].time <= 0){\r\n                            tip.destroy();\r\n                            this.followFishTipList[i] = null;\r\n                        }\r\n                    }\r\n                    if(fish == undefined && this.ui_tip.getChildByName(tipName) != null){\r\n                        this.ui_tip.getChildByName(tipName).destroy();\r\n                        this.followFishTipList[i] = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //判断退出 特殊鱼来了 显示倒计时，boss来了 播放特效\r\n    update(dt){\r\n        this.fireTime += dt;\r\n        if(this.fireTime > this.fireTimeFrequency){\r\n            this.fireTime = 0;\r\n            this.isFire = true;\r\n        }\r\n        if(this.bulletTips.active == true){\r\n            this.bulletTipTime += dt;\r\n            const ShowMaxTime = 2;\r\n            if(this.bulletTipTime >= ShowMaxTime){\r\n                this.bulletTips.active = false;\r\n                this.bulletTipTime = 0;\r\n            }\r\n        }\r\n        if(!this.logic.isEnterRoom){\r\n            return\r\n        }\r\n        this.followFishTip(dt);\r\n        this.runSpecialBulletStatistics(dt);\r\n        if(this.clickFishPoolEvent != null){\r\n            this.clickFishPoolTime += dt;\r\n            const MaxClickFishPoolTime = 0.053;\r\n            if(this.clickFishPoolTime > MaxClickFishPoolTime){\r\n                this.nextClickFishPoolHandler(this.clickFishPoolEvent);\r\n                this.clickFishPoolEvent = null;\r\n                this.clickFishPoolTime = 0;\r\n            }\r\n        }\r\n        const ChangeSecond = 1000;\r\n        let time = this.logic.exitTimeMsg - Math.floor((Date.now() - this.logic.curWaitTime) / ChangeSecond);\r\n        if (time < 0.9 && this.isExit) {\r\n            this.isExit = false;\r\n            this.logic.isEnterRoom = false;\r\n            glGame.room.exitRoom();\r\n        }else{\r\n            if (time <= this.logic.exitTimeMsg-this.logic.showTimeMsg) {\r\n                this.node.getChildByName(\"ui_ExitTip\").active = true;\r\n                this.node.getChildByName(\"ui_ExitTip\").getChildByName(\"lab_tip2\").getComponent(cc.Label).string = time > 0 ? time : 0;\r\n            }\r\n        }\r\n\r\n        if (time <= this.logic.exitTimeMsg-this.logic.showTimeMsg) {\r\n\r\n        } else {\r\n            this.node.getChildByName(\"ui_ExitTip\").active = false;\r\n        }\r\n        const HaveSpecialFish = 1;\r\n        const ToSecond        = 1000;\r\n        const ThreeHideTime   = ToSecond * 3;\r\n        const ShowTime        = ToSecond * 30;\r\n        if(this.logic.specialFishListBornLen > HaveSpecialFish && this.logic.specialFishListBorn != null){//有特属鱼即将出生，搞个计时器显示下\r\n            for (let id in this.logic.specialFishListBorn){\r\n                this.logic.specialFishListBorn[id].wellBornTime -= dt * ToSecond;\r\n                if(this.logic.specialFishListBorn[id].wellBornTime < 0){\r\n                    this.logic.specialFishListBorn[id].wellBornTime = 0;\r\n                }\r\n                let showTime =  new Date(this.logic.specialFishListBorn[id].wellBornTime).Format(\"mm：ss\");\r\n                let tip;\r\n                if(this.logic.specialFishListBorn[id].wellBornTime > HaveSpecialFish && this.logic.specialFishListBorn[id].wellBornTime < ThreeHideTime){\r\n\r\n                    if(this.logic.specialFishListBorn[id].fishTypeId == CONST.BossGodOfWealth && this.logic.specialFishListBorn[id].isSetTime == null){\r\n                        this.effect_csrcdh.settingActiveTime = 8;\r\n                        this.logic.specialFishListBorn[id].isSetTime = 1;\r\n                    }\r\n                    if(this.logic.specialFishListBorn[id].fishTypeId == CONST.BossLavaBasalt && this.logic.specialFishListBorn[id].isSetTime == null){\r\n                        this.effect_ryxwrcdh.settingActiveTime = 8;\r\n                        this.logic.specialFishListBorn[id].isSetTime = 1;\r\n                    }\r\n\r\n                    if(this.logic.specialFishListBorn[id].fishTypeId == CONST.BossSYLW && this.logic.specialFishListBorn[id].isSetTime == null){\r\n                        this.logic.specialFishListBorn[id].isSetTime = 1;\r\n                    }\r\n                }\r\n                if(this.logic.specialFishListBorn[id].wellBornTime > HaveSpecialFish && this.logic.specialFishListBorn[id].wellBornTime < ShowTime){\r\n                    tip = this.bossConeInTip.getChildByName(id+\"\");\r\n                    if(tip == null){\r\n                        tip             = cc.instantiate(this.bossBornTip);\r\n                        tip.name        = id+\"\";\r\n                        tip.active      = true;\r\n                        let icon        = tip.getChildByName(\"cantainer\").getChildByName(\"mask\").getChildByName(\"img_icon\");\r\n                        let fishData1   = this.logic.json_fishTable[this.logic.specialFishListBorn[id].fishTypeId+\"\"];\r\n                        let fishData2   = this.logic.json_fishTable[Number(this.logic.specialFishListBorn[id].fishTypeId)];\r\n                        let fishData    = fishData1 == undefined ? fishData2 :fishData1;\r\n                        let resGroupId  = fishData.resGroupId;\r\n                        icon.getComponent(cc.Sprite).spriteFrame = this.speciaIcon_Atlas.getSpriteFrame(CONST.SpeciaResPre+resGroupId);\r\n                        if(this.logic.getIsRotation()){\r\n                            icon.angle = 180;\r\n                        }\r\n                        this.bossConeInTip.addChild(tip);\r\n                        tip.x = tip.width;\r\n                        tip.stopAllActions();\r\n                        tip.runAction(cc.moveTo(this.bossTipMoveToTime,this.bossNormalPos.position));\r\n                    }\r\n                    tip.getChildByName(\"lab_Time\").getComponent(cc.Label).string = showTime + \"\";\r\n                    tip.active = !this.logic.isFishTideRuning;\r\n                }else{\r\n                    tip = this.bossConeInTip.getChildByName(id+\"\");\r\n                    if(tip != null && tip.isRun == null){\r\n                        const IsHave = 1;\r\n                        tip.active = !this.logic.isFishTideRuning;\r\n                        tip.isRun = IsHave;\r\n                        tip.getChildByName(\"lab_Time\").getComponent(cc.Label).string = showTime + \"\";\r\n                        tip.stopAllActions();\r\n                        tip.runAction(cc.sequence(cc.moveTo(this.bossTipMoveToTime,cc.v2(tip.width,tip.y)),cc.callFunc(()=>{\r\n                            this.bossConeInTip.removeChild(tip);\r\n                            tip.destroy();\r\n                        })));\r\n\r\n                        if(this.logic.specialFishListBorn[id].fishTypeId == CONST.BossGodOfWealth){\r\n                            glGame.emitter.emit(CONST.clientEvent.bossGodOfWealthCoin);//BOSS警告财神\r\n                            this.effect_csrcdh.getComponent(cc.Widget).updateAlignment();\r\n                            let bet;\r\n                            if(glGame.fishMutipleCfg == null){\r\n                                bet = \"0\";//出现这个就是：拿不到数据或者配表出错\r\n                            }else{\r\n                                bet = (glGame.fishMutipleCfg[CONST.BossGodOfWealth]+\"\").replace(\"-\",\"~\");\r\n                            }\r\n                            let desc_lab = this.spine_csrcdh.getChildByName(\"lab_betDesc\");\r\n                            if(desc_lab.oldX == undefined){\r\n                                desc_lab.oldX = desc_lab.x;\r\n                            }else{\r\n                                desc_lab.x = desc_lab.oldX;\r\n                            }\r\n                            desc_lab.stopAllActions();\r\n                            desc_lab.runAction(cc.sequence(cc.delayTime(2),cc.moveTo(0.25,cc.v2(cc.winSize.width,desc_lab.y))));\r\n                            desc_lab.getComponent(cc.Label).string = bet+\"倍\";\r\n                            this.logic.playSpine(this.spine_csrcdh,false,true,CONST.SpineName.Normal);\r\n                        }\r\n                        if(this.logic.specialFishListBorn[id].fishTypeId == CONST.BossLavaBasalt){\r\n                            glGame.emitter.emit(CONST.clientEvent.bossLavaBasaltComin);//BOSS警告财神\r\n                            this.effect_ryxwrcdh.getComponent(cc.Widget).updateAlignment();\r\n                            let bet;\r\n                            if(glGame.fishMutipleCfg == null){\r\n                                bet = \"0\";//出现这个就是：拿不到数据或者配表出错\r\n                            }else{\r\n                                bet = (glGame.fishMutipleCfg[CONST.BossLavaBasalt]+\"\").replace(\"-\",\"~\");\r\n                            }\r\n                            let desc_lab = this.spine_ryxwrcdh.getChildByName(\"lab_betDesc\");\r\n                            if(desc_lab.oldX == undefined){\r\n                                desc_lab.oldX = desc_lab.x;\r\n                            }else{\r\n                                desc_lab.x = desc_lab.oldX;\r\n                            }\r\n                            desc_lab.stopAllActions();\r\n                            desc_lab.runAction(cc.sequence(cc.delayTime(2),cc.moveTo(0.25,cc.v2(cc.winSize.width,desc_lab.y))));\r\n                            desc_lab.getComponent(cc.Label).string = bet+\"倍\";\r\n                            this.logic.playSpine(this.spine_ryxwrcdh,false,true,CONST.SpineName.Normal);\r\n                            let warn = this.spine_ryxwrcdh.getChildByName(\"warn\");\r\n                            warn.stopAllActions();\r\n                            warn.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(0.3,0),cc.delayTime(0.3),cc.fadeTo(0.3,255))));\r\n                        }\r\n\r\n                        const PlayBGMTime = 3;\r\n                        if (this.logic.specialFishListBorn[id].fishTypeId == CONST.BossSYLW) {\r\n                            this.scheduleOnce(()=> {\r\n                                glGame.emitter.emit(CONST.clientEvent.fishBgSound, CONST.BossSYLWBgMusic);//播放 深渊龙王 背景声音\r\n                            },PlayBGMTime);\r\n                        }\r\n\r\n                        if (this.logic.specialFishListBorn[id].fishTypeId == CONST.BossLavaBasalt) {\r\n                            this.scheduleOnce(()=> {\r\n                                glGame.emitter.emit(CONST.clientEvent.fishBgSound, CONST.BossLavaBasaltBgMusic);//播放 熔岩玄武 背景声音\r\n                            },PlayBGMTime);\r\n                        }\r\n\r\n                        delete this.logic.specialFishListBorn[id];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(this.effect_csrcdh != null && this.effect_csrcdh.settingActiveTime != null && !this.logic.isFishTideRuning){\r\n            const Frequency = 500;\r\n            const PositiveDirection = 1;//正方向\r\n            const OppositeDirection = -1;//反方向\r\n            const MaxLight = 254;\r\n            const MinLight = 1;\r\n            if(this.effect_csrcdh.settingActiveTime > 0)\r\n            {\r\n                if(this.effect_csrcdh.active == false){\r\n                    this.effect_csrcdh.active = true;\r\n                    this.effect_csrcdh.getComponent(cc.Widget).updateAlignment();\r\n                }\r\n                if(this.effect_csrcdh.subD == null){\r\n                    this.effect_csrcdh.subD = PositiveDirection;\r\n                }\r\n                if(this.effect_csrcdh.subD == PositiveDirection){\r\n                    this.effect_csrcdh.opacity += Math.ceil(dt * Frequency);\r\n                    if(this.effect_csrcdh.opacity > MaxLight){\r\n                        this.effect_csrcdh.subD = OppositeDirection;\r\n                    }\r\n                }else{\r\n                    this.effect_csrcdh.opacity -= Math.ceil(dt * Frequency);\r\n                    if(this.effect_csrcdh.opacity < MinLight){\r\n                        this.effect_csrcdh.subD = PositiveDirection;\r\n                    }\r\n                }\r\n                this.effect_csrcdh.settingActiveTime -= dt;\r\n            }else{\r\n                this.effect_csrcdh.settingActiveTime = null;\r\n                this.effect_csrcdh.active = false;\r\n            }\r\n        }\r\n        if(this.effect_ryxwrcdh != null && this.effect_ryxwrcdh.settingActiveTime != null && !this.logic.isFishTideRuning){\r\n            const Frequency = 500;\r\n            const PositiveDirection = 1;//正方向\r\n            const OppositeDirection = -1;//反方向\r\n            const MaxLight = 254;\r\n            const MinLight = 1;\r\n            if(this.effect_ryxwrcdh.settingActiveTime > 0)\r\n            {\r\n                if(this.effect_ryxwrcdh.active == false){\r\n                    this.effect_ryxwrcdh.active = true;\r\n                    this.effect_ryxwrcdh.getComponent(cc.Widget).updateAlignment();\r\n                }\r\n                this.effect_ryxwrcdh.settingActiveTime -= dt;\r\n                if(this.effect_ryxwrcdh.subD == null){\r\n                    this.effect_ryxwrcdh.subD = PositiveDirection;\r\n                }\r\n                if(this.effect_ryxwrcdh.subD == PositiveDirection){\r\n                    this.effect_ryxwrcdh.opacity += Math.ceil(dt * Frequency);\r\n                    if(this.effect_ryxwrcdh.opacity > MaxLight){\r\n                        this.effect_ryxwrcdh.subD = OppositeDirection\r\n                    }\r\n                }else{\r\n                    this.effect_ryxwrcdh.opacity -= Math.ceil(dt * Frequency);\r\n                    if(this.effect_ryxwrcdh.opacity < MinLight){\r\n                        this.effect_ryxwrcdh.subD = PositiveDirection\r\n                    }\r\n                }\r\n            }else{\r\n                this.effect_ryxwrcdh.settingActiveTime = null;\r\n                this.effect_ryxwrcdh.active = false;\r\n            }\r\n        }\r\n    },\r\n    //鱼潮来了隐藏 boss来了\r\n    hideBossConinUIHandler(){\r\n        this.effect_csrcdh.settingActiveTime = null;\r\n        this.effect_ryxwrcdh.settingActiveTime = null;\r\n        this.effect_csrcdh.active = false;\r\n        this.effect_ryxwrcdh.active = false;\r\n    },\r\n    //boss 过来 开始倒计时\r\n    bossComeinHandler(res){\r\n        let fishTypeId = res.fishTypeId;\r\n        let liveTime   = Number(res.serverTime - res.createTime); //出生时间\r\n        let NotBorn    = 0;\r\n        const ToSecond = 1000;\r\n        if(liveTime < NotBorn){//大于0 就是已经出生了不必再出提示\r\n            this.logic.specialFishListBornLen ++;\r\n            let wellBornTime = Math.abs(liveTime) + (Number(res.showTime) * ToSecond);//还要多久才出生 - 从屏幕边缘开始游动起来 并不是进入屏幕\r\n            this.logic.specialFishListBorn[res.id] = {fishTypeId:fishTypeId,wellBornTime:wellBornTime};\r\n        }\r\n    },\r\n    //财神进入\r\n    bossGodOfWealthCoinHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"bossCominCaiShen\");//BOSS警告财神\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"bossCsComin\");//BOSS 财神降临\r\n    },\r\n    //熔岩玄武进入\r\n    bossLavaBasaltCominHandler(){\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"bossCominXuanWu\");//BOSS警告玄武\r\n    },\r\n    //断线重连，清理数据\r\n    clearbossComeinHandler(){\r\n        for (let id in this.logic.specialFishListBorn){\r\n            let tip = this.bossConeInTip.getChildByName(id+\"\");\r\n            if(tip){\r\n                this.bossConeInTip.removeChild(tip);\r\n                tip.destroy();\r\n                delete this.logic.specialFishListBorn[id];\r\n            }\r\n        }\r\n        this.logic.specialFishListBornLen = 0;\r\n        this.logic.specialFishListBorn = {};\r\n    },\r\n    //设置旋转\r\n    checkRotationHandler(){\r\n        cc.warn(\">> 角度旋转180  checkRotationHandler\")\r\n        this.logic.isNeedSet180Angle(this.node);\r\n    },\r\n    //海浪鱼群-播放海浪\r\n    onSurfStartHandler(res){\r\n        let ui_surfCantainer = this.node.getChildByName(\"ui_surfCantainer\");\r\n        ui_surfCantainer.getChildByName(\"waves_texture1\").active = true;\r\n        ui_surfCantainer.getChildByName(\"waves_texture2\").active = false;\r\n        if(this.logic.bgIndex > 0){//每个bg 偏移量不一样\r\n            ui_surfCantainer.x       = cc.winSize.width - 750;//偏移量气泡在2个背景中间 背景宽度 2411 背景不适配\r\n        }else{\r\n            ui_surfCantainer.x       = cc.winSize.width - 100 + (this.logic.bgIndex * 100);//偏移量气泡在2个背景中间 背景宽度 2411 背景不适配\r\n        }\r\n\r\n        const MoveToTime         = 2;\r\n        const OutWinSizeOffceX   = 5;\r\n        const OutWinSizeX        = -cc.winSize.width;\r\n\r\n        ui_surfCantainer.stopAllActions();\r\n        ui_surfCantainer.runAction(cc.sequence(cc.moveTo(MoveToTime,cc.v2(OutWinSizeX,ui_surfCantainer.y)),cc.callFunc(()=>{\r\n            ui_surfCantainer.x = cc.winSize.width+OutWinSizeOffceX;\r\n            ui_surfCantainer.getChildByName(\"waves_texture1\").active = false;\r\n            ui_surfCantainer.getChildByName(\"waves_texture2\").active = false;\r\n        })));\r\n    },\r\n    //显示浪潮来临\r\n    showFishTideTitleHandler() {\r\n        let ui_fishTideTitle = this.node.getChildByName(\"ui_fishTideTitle\");\r\n        const HidOpacity         = 255;\r\n        ui_fishTideTitle.opacity = HidOpacity;\r\n        ui_fishTideTitle.active  = true;\r\n        this.logic.playSpine(ui_fishTideTitle.getChildByName(\"spine\"),false,true,CONST.SpineName.Normal);\r\n\r\n    },\r\n    //清理\r\n    OnDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n        this.logic       = null;\r\n        this.unregisterEvent();\r\n\r\n        this.bossTipMoveToTime  = 0.5\r\n        this.node.isInit        = 1;\r\n        this.bulletTipTime      = 0;\r\n        this.clickFishPoolEvent = null;\r\n        this.clickFishPoolTime  = 0;\r\n        this.lastAngle          = null;\r\n        this.logic              = require(\"nfishlogic\").getInstance();//数据中心\r\n        this.fireTime           = 0;    //开火计时器\r\n        this.fireTimeFrequency  = 0.17; //开火频率\r\n        this.isFire             = true; //是否可以开火\r\n        this.logic.cannonLevel  = null;\r\n        this.isExit             = true;\r\n        if(this.turntableView)this.turntableView.destroy();\r\n        this.turntableView = null;\r\n        if(this.cornucopiaView)this.cornucopiaView.destroy();\r\n        this.cornucopiaView = null;\r\n    },\r\n    /**\r\n     * @param event\r\n     * @param type UI编辑器传参 有值就不做按钮连点过滤(且不等于特殊音效字段)  使用select分页按钮\r\n     * @Explain Button点击事件统一调用\r\n     */\r\n    OnClickButton(event, type) {\r\n        let buttonName = event.target.name;\r\n        let buttonNode = event.target;\r\n\r\n        if(buttonName == \"ui_menuBtn\" || buttonName == \"ui_BtnSub\" || buttonName == \"ui_BtnPlus\" || buttonName == \"ui_skillAuto\" || buttonName == \"ui_skillLock\"){\r\n            //这5个按钮就不限制\r\n        }else{\r\n            if (!type || type == \"select\"){\r\n                if (this.curClickState) return;\r\n                this.curClickState = true;\r\n                this.allCurTimeout = this.allCurTimeout || [];\r\n                this.allCurTimeout.push(setTimeout(() => {\r\n                    this.curClickState = false;\r\n                }, 500));\r\n            }\r\n        }\r\n\r\n        console.log(`点击了button -> ${buttonName}`);\r\n        switch (buttonName) {\r\n            case \"close_eff\":        //当前界面有播放特长音效的关闭按钮\r\n                glGame.audio.closeCurEffect();\r\n                glGame.audio.playLoadSoundEffectByPath(\"close\");\r\n                break;\r\n            case \"close\":\r\n                glGame.audio.playLoadSoundEffectByPath(\"close\");\r\n                break;\r\n            default:\r\n                if (type == \"select\") glGame.audio.playLoadSoundEffectByPath(\"select\");\r\n                else glGame.audio.playLoadSoundEffectByPath(\"click\");\r\n        }\r\n        this.onClick(buttonName, buttonNode);\r\n    },\r\n});"]}