{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\moreButton.js"],"names":["glGame","baseclass","extend","properties","btn_bind","cc","Node","btn_lucky","btn_yuebao","btn_sign","onLoad","emitter","on","updatePlazaSwitch","active","user","dialSwitch","bindPhoneFirst","isTourist","bind_phone_gold","phone","is_receive_register_phone_coin","reqRedDot","signinSwitch","data","get","count","i","getChildByName","onClick","name","node","click_lucky","click_bindPhone","click_sign","click_yuebao","console","error","remove","panel","showSuspicious","showPanelByName","showRegisteredGift","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        btn_bind: cc.Node,\r\n        btn_lucky: cc.Node,\r\n        btn_yuebao: cc.Node,\r\n        btn_sign: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        glGame.emitter.on(\"updatePlazaSwitch\", this.updatePlazaSwitch, this);\r\n        this.btn_lucky.active = glGame.user.dialSwitch == 1;\r\n        this.btn_bind.active = glGame.user.bindPhoneFirst == 0;\r\n        if (glGame.user.isTourist()) {\r\n            this.btn_bind.active = glGame.user.bind_phone_gold == 0 ? false : true;\r\n        } else {\r\n            if (glGame.user.phone != 0 || glGame.user.is_receive_register_phone_coin == 1 || glGame.user.bind_phone_gold == 0) {\r\n                this.btn_bind.active = false\r\n            } else {\r\n                this.btn_bind.active = true\r\n            }\r\n        }\r\n        this.reqRedDot();\r\n        this.updatePlazaSwitch();\r\n    },\r\n\r\n    updatePlazaSwitch() {\r\n        this.btn_sign.active = glGame.user.signinSwitch == 1;\r\n    },\r\n    reqRedDot(data) {\r\n        if (!data) data = glGame.user.get('redDotData');\r\n        let count = 0;\r\n        for (let i in data) { count++ };\r\n        if (count == 0) return;\r\n        this.btn_lucky.getChildByName(\"redMark\").active = data['dialRed'] == 1;\r\n        this.btn_yuebao.getChildByName(\"redMark\").active = data['payingReq'] == 1;\r\n        this.btn_sign.getChildByName(\"redMark\").active = data['signinReq'] == 1;\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_lucky\": this.click_lucky(); break;\r\n            case \"btn_bind\": this.click_bindPhone(); break;\r\n            case \"btn_sign\": this.click_sign(); break;\r\n            case \"btn_yuebao\": this.click_yuebao(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n        this.remove();\r\n    },\r\n    click_lucky(){\r\n        if (glGame.panel.showSuspicious(\"point_treasure\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName(\"luckDraw\");\r\n    },\r\n    click_bindPhone(){\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName(\"bindPhone\");\r\n    },\r\n    click_sign() {\r\n        if (glGame.panel.showSuspicious(\"receive_Signin_award\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName('signin');\r\n    },\r\n    click_yuebao(){\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        if (glGame.panel.showSuspicious(\"balance\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName('yubao');\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(\"updatePlazaSwitch\", this);\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}