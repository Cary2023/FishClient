{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\qhbjlentry.js"],"names":["glGame","baseclass","extend","properties","BGM","type","cc","AudioClip","goldCount","Label","qhbjlselect","Node","record","Prefab","rule","fire_node","fireworks","launchPoint","onLoad","gameid","node","zIndex","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","nodeInfo","indexFire","playFireworks","onGameInfolist","onRoomInfo","onDeleteRoom","unregisterEvent","off","active","time","Math","random","indextemp","index","runAction","sequence","delayTime","callFunc","console","log","emissionFire","distance","height","aniList","scaleList","instantiate","parent","position","children","setScale","moveBy","opacity","getComponent","Animation","play","destroy","gameID","scenetag","QHBJL","readyroom","msg","gameInfoTest","get","key","getChildByName","lab_chiplimit","lab_chip","string","cutFloat","EntranceRestrictions","BaseChips","initAni","renwu_pos","childrenCount","pos","getPosition","push","x","width","i","moveTo","v2","y","onClick","name","click_help","click_record","click_addgold","click_userinfo","enterroom","error","user","isTourist","panel","showRegisteredGift","suspicious","game","is_game","showDialog","showService","showFieldSelectionJuHua","room","reqMyGameState","then","enterHundredsRoomOther","value","Number","div","toString","showUserInfo","showRemoteImage","Playerhead","coin","GoldTemp","setGameId","updateBgInfo","showPanelByName","showShop","reqExitArea","remove","showPanel","set","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        goldCount: cc.Label,\r\n        qhbjlselect: cc.Node,\r\n        record: cc.Prefab,\r\n        rule: cc.Prefab,\r\n        fire_node: cc.Node,\r\n        fireworks: cc.Node,\r\n        launchPoint: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.updateuserInfo();\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n        this.nodeInfo = {};\r\n        this.indexFire = 0;\r\n        this.playFireworks();\r\n    },\r\n    //事件监听\r\n    registerEvent() {\r\n        glGame.emitter.on(\"onGameInfolist_area\", this.onGameInfolist, this);\r\n        glGame.emitter.on(\"onRoomInfo_area\", this.onRoomInfo, this);\r\n        glGame.emitter.on(\"onDeleteRoom_area\", this.onDeleteRoom, this);\r\n    },\r\n    //事件销毁\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"onGameInfolist_area\", this);\r\n        glGame.emitter.off(\"onRoomInfo_area\", this);\r\n        glGame.emitter.off(\"onDeleteRoom_area\", this);\r\n    },\r\n    RootNodeShow() {\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n    RootNodeHide() {\r\n        this.node.active = false;\r\n        this.unregisterEvent();\r\n    },\r\n    playFireworks() {\r\n        let time = Math.random()*2;\r\n        let indextemp = [1,0,3,2]\r\n        let index = indextemp[this.indexFire%4];\r\n        this.node.runAction(cc.sequence(\r\n            cc.delayTime(time),\r\n            cc.callFunc(()=>{\r\n                this.indexFire++;\r\n                console.log(\"烟花发射111111\")\r\n                this.emissionFire(index)\r\n                this.playFireworks();\r\n            })\r\n        ))\r\n    },\r\n    emissionFire(index) {\r\n        let distance = [this.node.height / 3.5, this.node.height / 3.8, this.node.height / 3, this.node.height / 3.5];\r\n        let aniList = [\"bluefireworks\",\"redfireworks\",\"yellowfireworks\",\"bluefireworks\"];\r\n        let scaleList = [1.18, 1.78, 1.13, 1.3];\r\n\r\n        let fire_node = cc.instantiate(this.fire_node);\r\n        fire_node.parent = this.node;\r\n        fire_node.position = this.launchPoint.children[index].position;\r\n        fire_node.active = true;\r\n        let fireworks = cc.instantiate(this.fireworks);\r\n        fireworks.parent = this.node;\r\n        fireworks.setScale(scaleList[index]);\r\n        fire_node.runAction(cc.sequence(\r\n            cc.moveBy(1, 0, distance[index]),\r\n            cc.callFunc(() => {\r\n                fire_node.opacity = 0;\r\n                fireworks.position = fire_node.position;\r\n                fireworks.active = true;\r\n                fireworks.getComponent(cc.Animation).play(`${aniList[index]}`);\r\n            }),\r\n            cc.delayTime(1.2),\r\n            cc.callFunc(() => {\r\n                fire_node.destroy();\r\n                fireworks.destroy();\r\n            })\r\n        ))\r\n    },\r\n    //发包\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.QHBJL;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.QHBJL);\r\n    },\r\n    onGameInfolist(msg) {\r\n        //this.roomlist = glGame.readyroom.roomlist;\r\n        this.gameInfoTest = glGame.readyroom.get(\"gameInfo\");\r\n        console.log(\"这是当前房间配置\", this.gameInfoTest)\r\n        for (let key in this.gameInfoTest) {\r\n            if (this.qhbjlselect.getChildByName(`${key}`)) {\r\n                let lab_chiplimit = this.qhbjlselect.getChildByName(`${key}`).getChildByName('chiplimit').getChildByName('num').getComponent(cc.Label);\r\n                let lab_chip = this.qhbjlselect.getChildByName(`${key}`).getChildByName('chip').getChildByName('num').getComponent(cc.Label);\r\n                lab_chiplimit.string = this.cutFloat(this.gameInfoTest[key].EntranceRestrictions);\r\n                lab_chip.string = this.cutFloat(this.gameInfoTest[key].BaseChips);\r\n            }\r\n        }\r\n\r\n        this.initAni();\r\n\r\n        // console.log(\"这是当前的房间配置\",this.gameInfoTest);\r\n        // for (let bettype in this.roomlist) {\r\n        //     for (let roomid in this.roomlist[bettype]) {\r\n        //         if (!this.qhbjlselect.children[bettype - 1]) break;\r\n        //         let chiplimitNum = this.qhbjlselect.children[bettype - 1].getChildByName('chiplimit').getChildByName('num').getComponent(cc.Label);\r\n        //         let chipNum = this.qhbjlselect.children[bettype - 1].getChildByName('chip').getChildByName('num').getComponent(cc.Label);\r\n        //         chiplimitNum.string = this.cutFloat(this.gameInfoTest[bettype].BaseChips);\r\n        //         chipNum.string = this.cutFloat(this.gameInfoTest[bettype].EntranceRestrictions);\r\n        //         this.qhbjlselect.children[bettype - 1].name = roomid;\r\n        //         this.nodeInfo[roomid] = {\r\n        //             tag: this.roomlist[bettype][roomid].roomserverid,\r\n        //             type: bettype\r\n        //         }\r\n        //         break;\r\n        //     }\r\n        // }\r\n    },\r\n    onRoomInfo(msg) {\r\n\r\n    },\r\n    onDeleteRoom(msg) {\r\n\r\n    },\r\n\r\n    initAni() {\r\n        this.renwu_pos = [];\r\n        for (let index = 0; index < this.qhbjlselect.childrenCount; index++) {\r\n            let pos = this.qhbjlselect.children[index].getPosition()\r\n            this.renwu_pos.push(pos);\r\n            this.qhbjlselect.children[index].x = this.node.width / 2 + pos.x;\r\n            this.qhbjlselect.children[index].active = true\r\n        }\r\n\r\n        for (let i = 0; i < this.qhbjlselect.childrenCount; i++) {\r\n            this.qhbjlselect.children[i].runAction(cc.sequence(\r\n                cc.delayTime(i * 0.05),\r\n                cc.moveTo(0.25, cc.v2(this.renwu_pos[i].x - 40, this.renwu_pos[i].y)),\r\n                cc.moveTo(0.1, this.renwu_pos[i])\r\n            ))\r\n        }\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            case \"btn_start\": this.enterroom(name, node); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    //传房间id以及房间等级\r\n    enterroom(name, node) {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true)\r\n            return;\r\n        }\r\n        if ((glGame.user.suspicious == 1 && glGame.user.game == 2) || glGame.user.is_game == 2) {\r\n            glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => { }, \"我知道了\", \"联系客服\");\r\n            return;\r\n        }\r\n        glGame.panel.showFieldSelectionJuHua();\r\n        glGame.room.reqMyGameState(this.gameID, node.parent.name).then(() => {\r\n            glGame.readyroom.enterHundredsRoomOther(this.gameID, node.parent.name);\r\n        })\r\n    },\r\n    cutFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n\r\n    },\r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n    click_help() {\r\n        // glGame.panel.showNewGameRule(this.gameid, 30);\r\n        let panel = glGame.panel.showPanel(this.rule);\r\n        panel.zIndex = 30;\r\n    },\r\n    click_record() {\r\n        // glGame.panel.showNewGameRecord(this.gameid, 30);\r\n        let panel = glGame.panel.showPanel(this.record);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\", this);\r\n        this.unregisterEvent();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}