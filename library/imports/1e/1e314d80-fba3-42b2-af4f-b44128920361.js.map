{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\userInfo\\popups\\modifypsw.js"],"names":["glGame","baseclass","extend","properties","psw","cc","EditBox","newpsw","confirmpsw","onLoad","registerEvent","emitter","on","editpswsuccess","OnDestroy","unRegisterEvent","off","remove","onClick","name","node","click_close","click_confirm","console","error","checkPassword","string","user","reqEditPwd","old_pwd","md5","pwd","type","showErrorTip","tips","EDITBOX","PSWNULL","length","panel","REGISTRATION","PSWLENGTH","test","PSWWRONGFUL","NEWPSWNULL","NEWPSWWRONGFUL","CONFIRMPSWNULL","CONFIRMPSWWRONGFUL","OLDNEWPSWEQUALS","PSWCOFAIL","msg","showTip","clearUIData"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 修改账号登陆密码面板\r\n */\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        psw: cc.EditBox,        // 旧密码\r\n        newpsw: cc.EditBox,     // 新密码\r\n        confirmpsw: cc.EditBox  // 确认新密码\r\n    },\r\n    onLoad () {\r\n        this.registerEvent();\r\n    },\r\n    registerEvent () {\r\n        glGame.emitter.on(\"editpswsuccess\", this.editpswsuccess, this)\r\n    },\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n    unRegisterEvent () {\r\n        glGame.emitter.off(\"editpswsuccess\", this);\r\n    },\r\n    editpswsuccess () {\r\n        this.remove();\r\n    },\r\n    onClick (name, node) {\r\n        switch (name) {\r\n            case \"close\": this.click_close(); break;\r\n            case \"confirm\": this.click_confirm(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_close () {\r\n        this.remove();\r\n    },\r\n    // 确认更改密码\r\n    click_confirm () {\r\n        let psw = this.checkPassword(this.psw.string, this.newpsw.string, this.confirmpsw.string);\r\n        if (psw) {\r\n            glGame.user.reqEditPwd({old_pwd: md5(this.psw.string), pwd: md5(this.newpsw.string), type: 1});\r\n        }\r\n    },\r\n    // 密码检查\r\n    checkPassword (psw, newpsw, confirmpsw) {\r\n        if (!psw) return this.showErrorTip(glGame.tips.EDITBOX.PSWNULL);\r\n        if (psw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);\r\n        if (!/\\w$/.test(psw)) return this.showErrorTip(glGame.tips.EDITBOX.PSWWRONGFUL);\r\n        if (!newpsw) return this.showErrorTip(glGame.tips.EDITBOX.NEWPSWNULL);\r\n        if (newpsw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);\r\n        if (!/\\w$/.test(newpsw)) return this.showErrorTip(glGame.tips.EDITBOX.NEWPSWWRONGFUL);\r\n        if (!confirmpsw) return this.showErrorTip(glGame.tips.EDITBOX.CONFIRMPSWNULL);\r\n        if (confirmpsw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);\r\n        if (!/\\w$/.test(confirmpsw)) return this.showErrorTip(glGame.tips.EDITBOX.CONFIRMPSWWRONGFUL);\r\n        if (psw === newpsw) return this.showErrorTip(glGame.tips.EDITBOX.OLDNEWPSWEQUALS);\r\n        if (newpsw !== confirmpsw) return this.showErrorTip(glGame.tips.EDITBOX.PSWCOFAIL);\r\n        return psw;\r\n    },\r\n    showErrorTip (msg) {\r\n        glGame.panel.showTip(msg);\r\n        this.clearUIData();\r\n        return null;\r\n    },\r\n    clearUIData () {\r\n        // this.psw.string = \"\";\r\n        // this.newpsw.string = \"\";\r\n        // this.confirmpsw.string = \"\";\r\n    }\r\n});"]}