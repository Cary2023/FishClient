{"version":3,"sources":["assets\\frames\\model\\room.js"],"names":["ServerGameName","ServerGameDict","BET_TYPE_LIST","BET_TYPE","HUNDRE_GAME","HUNDREDS_ROOM_GAME","FISH_ROOM_GAME","ROOM_GAME","ROOM_TYPE","GOLD","CARD","CLUB","MATCH","HUNDREDS","FISH","ROOM_EXIT","BASE","CHANGE_TABLE","RECUR_ROUND","INVITE_ANOTHER_ROUND","ROOM_EXIT_STATE","STOP","MAINTENANCE","FORBID","Room","upGameType","resetData","registerEvent","room","prototype","g_instance","roominfo","curEnterGameID","curEnterRoomID","curEnterRoomServer","curEnterRoomType","curEnterBetType","curEnterGameRank","curEnterRoomNum","curEnterGameData","exitState","users","cutGameTime","openNetCut","gameId","betType","exitRoomState","serverGameid","getEnterRoom","gameid","gameName","netTt","checkHundredsRoom","key","getRoomType","console","error","getInitRoom","getExitRoom","getPrepare","getPlayerOp","getRoomOut","getVoteDisbandRoom","getEnterRoomCheck","getCreateRoom","getInviteAnotherRound","getRecordIds","getPlayerGmOp","glGame","emitter","on","EnterBackground","EnterForeground","onDisbandRoom","onGameFinished","onInvitedAnotherRound","query_handler_getGameIdByRoomNum","room_roomHandler_onInitRoomData","onKickOutOfRoom","hasOwnProperty","name","vaildateRoomCondition","connector_entryHandler_enterRoom","room_roomHandler_exitRoom","room_roomHandler_initRoomData","room_roomHandler_createRoom","room_roomHandler_enterRoomCheck","unRegisterEvent","off","room_send","send_name","send_data","gameNet","send_msg","reqGoldRoomVerify","bettype","msg","log","logicDestroy","enterGameRoom","setGoldRoomInfo","type","reqHundredsRoom","roomid","roomserver","reqHundredsRoomOther","sendEnterRoom","roomType","logicCreate","cc","sys","isNative","enterFishGameRoom","scene","getSceneNameByID","update_data","storage","getItem","downloadGame","setEnterGameInfo","data","roomtype","serviceid","reqMyRoomState","route","roomUserInfo","rid","director","getScene","setNextSceneTag","scenetag","PLAZA","enterNextScene","logon","get","readyroom","reqEnterArea","set","reqMyGameState","_gameID","_roomType","_roomID","Promise","resolve","reject","panel","hideFieldSelectionJuHua","showDialog","tips","ROOM","STILLINGAME","format","content","closeFieldSelectionJuHua","then","gunRate","localStorage","Number","serverId","roomId","_route","enterRoom","exitGameRoom","strTip","SERVICESTOP","GAMECLOSE","showMsgBox","ACCOUNTEXCEPTION","showService","manifestUrl","call","assetsManager","assets","process","destroy","hotUpdateURL","servercfg","getHotupdateVersionUrl","url","gamelistcfg","getGameVersion","verdata","version","setItem","gameStatus","exitRoom","user","emit","COMMON","reLogon","reqExitArea","roomNum","changeTable","blChangeTable","showRoomJuHua","exitType","inviteAnotherRound","gamid","closeRoomJuHua","setServerGameId","showChangeTablePanel","enterRoomVerification","CreateRoom","EnterRoomCheck","preRoomId","ASKFORJOIN","nickname","showErrorTip","PLAYING","require","getInstance","e","warn","enterRoomFailure","notice","JoinRoom","getGameIdByRoomNum","suspicious","game","is_game","reqChangeRoom","gameID","next","Date","now","toString","substring","ground","cutgametime","disconnect","reqUsers","uids","count","length","i","value","getGameNameById","getServerGameName","getGameDictById","getGameBetType","getUpGameType","getUpGameTypeRoom","checkGameState","getUpScene","getNowScene","getGameShowMsgBox","gamelist","push","RQZNN","WQZNN","HONGHEI","FISH2","FISH3","indexOf","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\n//与服务端对应路由\r\nconst ServerGameName = {\r\n    15: \"zjh\", 18: \"qznn\", 22: \"brnn\", 27: \"sg\", 28: \"hh\", 29: \"sgj\", 30: \"lhd\", 31: \"lb777\", 32: \"bjl\",\r\n    33: \"pj\", 34: \"xydzp\", 35: \"dzpk\", 36: \"ddz\", 37: \"jszjh\", 39: \"ebg\", 38: \"esyd\", 40: \"fish\", 41: \"qhbjl\",\r\n    42: \"sss\", 43: \"hcpy\", 44: \"slwh\", 46: \"qznn2\", 47: \"tb\", 48: \"hbsl\",\r\n    45: \"qznnc\", 49: \"fish2\", 50: \"fish3\"\r\n}\r\n// 游戏名称，用于程序打字\r\nconst ServerGameDict = {\r\n    15: \"炸金花\", 18: \"抢庄牛牛\", 22: \"百人牛牛\", 27: \"三公\", 28: \"红黑大战\", 29: \"水果机\",\r\n    30: \"龙虎斗\", 31: \"拉霸\", 32: \"百家乐\", 33: \"抢庄牌九\", 34: \"轮盘\", 35: \"德州扑克\",\r\n    36: \"斗地主\", 37: \"极速炸金花\", 38: \"二十一点\", 39: \"二八杠\", 40: \"捕鱼\", 41: \"红包接龙\",\r\n    42: \"十三水\", 43: \"豪车漂移\", 44: \"森林舞会\", 46: \"看牌抢庄\", 47: \"骰宝\", 48: \"红包扫雷\",\r\n    45: \"看牌抢庄\", 49: \"财神捕鱼\", 50: \"财神捕鱼\"\r\n}\r\nconst BET_TYPE_LIST = {\r\n    15: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    18: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    22: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    27: { 1: \"普通场\", 2: \"贵宾场\", 3: \"富豪场\", 4: \"至尊场\", 5: \"英雄场\", 99: \"体验场\" },\r\n    28: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    29: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    30: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    32: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    33: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    34: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    35: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    36: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    37: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    38: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    39: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    40: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    41: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    42: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    43: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    44: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    46: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    48: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\" },\r\n    49: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n    50: { 1: \"普通房\", 2: \"贵宾房\", 3: \"富豪房\", 4: \"至尊房\", 5: \"英雄房\", 99: \"体验房\" },\r\n}\r\n// 房间档次\r\nconst BET_TYPE = {\r\n    1: '初级房',\r\n    2: '中级房',\r\n    3: '高级房',\r\n    4: '贵宾房',\r\n    5: '富豪房',\r\n    99: '体验房'\r\n}\r\n// 百人场游戏\r\nconst HUNDRE_GAME = {\r\n    22: \"brnn\", 28: \"hh\", 29: \"sgj\", 30: \"lhd\", 32: \"bjl\", 43: \"hcpy\", 34: \"xydzp\", 41: \"qhbjl\", 44: \"slwh\", 48: \"hbsl\"\r\n}\r\n//百人场走房间场模式\r\nconst HUNDREDS_ROOM_GAME = {\r\n    44: \"slwh\", 41: \"qhbjl\", 43: \"hcpy\", 48: \"hbsl\"\r\n}\r\n\r\n//捕鱼房间场模式\r\nconst FISH_ROOM_GAME = {\r\n    40: \"fish\", 49: \"nfish\", 50: \"lfish\"\r\n}\r\n// 房间场游戏\r\nconst ROOM_GAME = {\r\n    45: \"qznnc\"\r\n}\r\n// 房间类型\r\nconst ROOM_TYPE = {\r\n    GOLD: 1,            //金币场类型\r\n    CARD: 2,            //房间场（钻石版房卡）\r\n    CLUB: 3,            //俱乐部\r\n    MATCH: 4,           //比赛房间\r\n    HUNDREDS: 5,        //百人场类型\r\n    FISH: 99,           //捕鱼场类型\r\n}\r\n// 游戏结算后游戏状态\r\nconst ROOM_EXIT = {\r\n    BASE: 0,                    //正常离开房间\r\n    CHANGE_TABLE: 1,            //换桌\r\n    RECUR_ROUND: 2,             //再来一场创建\r\n    INVITE_ANOTHER_ROUND: 3,    //再来一场发起创建\r\n}\r\n// 游戏退出状态特殊状态\r\nconst ROOM_EXIT_STATE = {\r\n    STOP: 0,            //关闭\r\n    BASE: 1,            //正常\r\n    MAINTENANCE: 2,     //维护\r\n    FORBID: 4,          //禁止\r\n}\r\n\r\nlet Room = function () {\r\n    this.upGameType = 0;\r\n    this.resetData();\r\n    this.registerEvent();\r\n},\r\n    room = Room.prototype,\r\n    g_instance = null;\r\n\r\nroom.resetData = function () {\r\n    this.roominfo = null;\r\n    this.curEnterGameID = 0;\r\n    this.curEnterRoomID = 0;\r\n    this.curEnterRoomServer = \"\";\r\n    this.curEnterRoomType = 0;\r\n    this.curEnterBetType = 0;\r\n    this.curEnterGameRank = null;\r\n    this.curEnterRoomNum = 0;\r\n    this.curEnterGameData = null;\r\n    this.exitState = ROOM_EXIT.BASE;\r\n    this.users = {};\r\n    this.cutGameTime = 0;\r\n    this.openNetCut = true;      //作用服务器，分服入口\r\n    this.gameId = null;\r\n    this.betType = null;\r\n    this.exitRoomState = 1;         //切换出房间后，判定是否有一些异常状态，做记录 0:关闭，1：正常，2：维护\r\n    this.serverGameid = 0;          //是否已在房间中（必须enterRoom后记录，当断线后该值将付空）\r\n};\r\n\r\n/**\r\n * 进入房间的网络参数\r\n */\r\nroom.getEnterRoom = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut && this.checkHundredsRoom(gameid)) netTt = `${gameName}Room.${gameName}RoomHandler.enterRoom2`;\r\n    else if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.enterRoom`;\r\n    else netTt = \"connector.entryHandler.enterRoom\";\r\n    return netTt;\r\n}\r\n//检查是否为走房间场模式的百人场\r\nroom.checkHundredsRoom = function (gameId) {\r\n    for (let key in HUNDREDS_ROOM_GAME) {\r\n        if (key == gameId) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//传入游戏id和房间等级获取当前的房间等级\r\nroom.getRoomType = function (gameId, betType = -1) {\r\n    // console.log(ServerGameDict[gameId], betType, BET_TYPE_LIST[gameId])\r\n    if (!BET_TYPE_LIST[gameId]) {\r\n        console.error(`gameid:${gameId}, betType:${betType},gameName:${ServerGameDict[gameId]}`)\r\n        return \"\";\r\n    }\r\n    return betType == -1 ? BET_TYPE_LIST[gameId] : BET_TYPE_LIST[gameId][betType];\r\n}\r\n/**\r\n * 进入房间的参数配置\r\n */\r\nroom.getInitRoom = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.initRoomData`;\r\n    else netTt = \"connector.entryHandler.initRoomData\";\r\n    return netTt;\r\n}\r\n/**\r\n * 退出房间的网络参数\r\n */\r\nroom.getExitRoom = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.exitRoom`;\r\n    else netTt = \"room.roomHandler.exitRoom\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发包的网络参数\r\n */\r\nroom.getPrepare = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.prepare`;\r\n    else netTt = \"room.roomHandler.prepare\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发包的网络参数\r\n */\r\nroom.getPlayerOp = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.playerOp`;\r\n    else netTt = \"room.roomHandler.playerOp\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 房主踢人出房间(只有init阶段可以)\r\n */\r\nroom.getRoomOut = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.getOut`;\r\n    else netTt = \"room.roomHandler.getOut\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发送退出房间投票\r\n */\r\nroom.getVoteDisbandRoom = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.voteDisbandRoom`;\r\n    else netTt = \"room.roomHandler.voteDisbandRoom\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发送进入房间检测\r\n */\r\nroom.getEnterRoomCheck = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.enterRoomCheck`;\r\n    else netTt = \"connector.entryHandler.enterRoomCheck\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 创建房间场\r\n */\r\nroom.getCreateRoom = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.createRoom`;\r\n    else netTt = \"connector.entryHandler.createRoom\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发送获取牌局记录\r\n */\r\nroom.getInviteAnotherRound = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.inviteAnotherRound`;\r\n    else netTt = \"room.roomHandler.inviteAnotherRound\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发送获取牌局记录\r\n */\r\nroom.getRecordIds = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.getRecordIds`;\r\n    else netTt = \"room.roomHandler.getRecordIds\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 发送GM的网络参数\r\n */\r\nroom.getPlayerGmOp = function (gameId) {\r\n    let gameid = gameId ? gameId : this.curEnterGameID;\r\n    let gameName = ServerGameName[gameid];\r\n    if (!gameid || !gameName) return;\r\n    let netTt = \"\"\r\n    if (this.openNetCut) netTt = `${gameName}Room.${gameName}RoomHandler.playerGmOp`;\r\n    else netTt = \"room.roomHandler.playerGmOp\";\r\n    return netTt;\r\n}\r\n\r\n/**\r\n * 网络数据监听\r\n */\r\nroom.registerEvent = function () {\r\n    glGame.emitter.on(\"EnterBackground\", this.EnterBackground, this);\r\n    glGame.emitter.on(\"EnterForeground\", this.EnterForeground, this);\r\n    glGame.emitter.on(\"onDisbandRoom\", this.onDisbandRoom, this);\r\n    glGame.emitter.on(\"onGameFinished\", this.onGameFinished, this);\r\n    glGame.emitter.on(\"onInvitedAnotherRound\", this.onInvitedAnotherRound, this);\r\n    glGame.emitter.on(\"query.handler.getGameIdByRoomNum\", this.query_handler_getGameIdByRoomNum, this);\r\n    glGame.emitter.on(\"onInitRoom\", this.room_roomHandler_onInitRoomData, this);\r\n    glGame.emitter.on(\"onKickOutOfRoom\", this.onKickOutOfRoom, this);                   //玩家被踢回大厅\r\n\r\n    for (let key in ServerGameName) {\r\n        if (!ServerGameName.hasOwnProperty(key)) continue;\r\n        let name = ServerGameName[key];\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.vaildateRoomCondition`, this.vaildateRoomCondition, this);\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.enterRoom`, this.connector_entryHandler_enterRoom, this);\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.exitRoom`, this.room_roomHandler_exitRoom, this);\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.initRoomData`, this.room_roomHandler_initRoomData, this);\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.createRoom`, this.room_roomHandler_createRoom, this);\r\n        glGame.emitter.on(`${name}Room.${name}RoomHandler.enterRoomCheck`, this.room_roomHandler_enterRoomCheck, this);\r\n        if (this.checkHundredsRoom(key)) glGame.emitter.on(`${name}Room.${name}RoomHandler.enterRoom2`, this.connector_entryHandler_enterRoom, this);\r\n    }\r\n};\r\n/**\r\n * 网络数据监听销毁\r\n */\r\nroom.unRegisterEvent = function () {\r\n    glGame.emitter.off(\"EnterBackground\", this);\r\n    glGame.emitter.off(\"EnterForeground\", this);\r\n    glGame.emitter.off(\"onDisbandRoom\", this);\r\n    glGame.emitter.off(\"onGameFinished\", this);\r\n    glGame.emitter.off(\"onInvitedAnotherRound\", this);\r\n    glGame.emitter.off(\"query.handler.getGameIdByRoomNum\", this);\r\n    glGame.emitter.off(\"onInitRoom\", this);\r\n\r\n    for (let key in ServerGameName) {\r\n        if (!ServerGameName.hasOwnProperty(key)) continue;\r\n        let name = ServerGameName[key];\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.vaildateRoomCondition`, this);\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.enterRoom`, this);\r\n        if (this.checkHundredsRoom(key)) glGame.emitter.off(`${name}Room.${name}RoomHandler.enterRoom2`, this);\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.exitRoom`, this);\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.initRoomData`, this);\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.createRoom`, this);\r\n        glGame.emitter.off(`${name}Room.${name}RoomHandler.enterRoomCheck`, this);\r\n    }\r\n};\r\n\r\n//抛弃不在房间内的发包\r\nroom.room_send = function (send_name, send_data) {\r\n    if (this.serverGameid != 0) glGame.gameNet.send_msg(send_name, send_data);\r\n}\r\n\r\n/**\r\n * 加入金币场\r\n * @param {number} gameid   游戏id\r\n * @param {number} bettype  游戏场次\r\n */\r\nroom.reqGoldRoomVerify = function (gameid, bettype) {\r\n    this.gameId = gameid;\r\n    this.betType = bettype;\r\n    let name = ServerGameName[gameid];\r\n    glGame.gameNet.send_msg(`${name}Room.${name}RoomHandler.vaildateRoomCondition`, {\r\n        \"gameId\": gameid,\r\n        \"betType\": bettype,\r\n    });\r\n};\r\n\r\nroom.vaildateRoomCondition = function (msg) {\r\n    console.log(\"加入金币场房间 ...\", msg);\r\n    glGame.room.logicDestroy();\r\n    this.curEnterGameID = this.gameId;\r\n    this.curEnterRoomType = ROOM_TYPE.GOLD;\r\n    this.curEnterBetType = this.betType;\r\n    this.enterGameRoom();\r\n}\r\n/**\r\n * 新\r\n * 加入金币场\r\n * @param {number} gameid   游戏id\r\n * @param {number} bettype  游戏场次\r\n */\r\nroom.setGoldRoomInfo = function (gameId, type) {\r\n    glGame.room.logicDestroy();\r\n    this.curEnterGameID = gameId;\r\n    this.curEnterBetType = type;\r\n    this.curEnterRoomType = ROOM_TYPE.GOLD;\r\n    this.curEnterRoomServer = \"\";\r\n    this.enterGameRoom();\r\n};\r\n\r\n/**\r\n * 加入百人场\r\n * @param {number} gameid 游戏id\r\n */\r\nroom.reqHundredsRoom = function (gameid, roomid, roomserver, bettype) {\r\n    glGame.room.logicDestroy();\r\n    this.curEnterGameID = gameid;\r\n    this.curEnterRoomID = roomid;\r\n    this.curEnterRoomServer = roomserver;\r\n    this.curEnterRoomType = ROOM_TYPE.HUNDREDS;\r\n    this.curEnterBetType = bettype;\r\n    this.enterGameRoom();\r\n};\r\n/**\r\n * 百人场房间模式\r\n * @param {number} gameid 游戏id\r\n */\r\nroom.reqHundredsRoomOther = function (gameid, bettype) {\r\n    glGame.room.logicDestroy();\r\n    this.curEnterGameID = gameid;\r\n    this.curEnterRoomType = ROOM_TYPE.HUNDREDS;\r\n    this.curEnterBetType = bettype;\r\n    this.enterGameRoom();\r\n};\r\n/**\r\n * 加入捕鱼场\r\n * @param {number} roomType 房间类型\r\n */\r\nroom.sendEnterRoom = function (roomType, gameId) {\r\n    this.curEnterBetType = roomType;\r\n    this.logicDestroy();\r\n    this.curEnterGameID = gameId || this.curEnterGameID;\r\n    this.curEnterRoomType = ROOM_TYPE.FISH;\r\n    this.logicCreate();\r\n\r\n    if (!cc.sys.isNative) {\r\n        this.enterFishGameRoom();\r\n    } else {\r\n        let gameId = this.curEnterGameID;\r\n        let gameName = glGame.scene.getSceneNameByID(gameId)\r\n        let update_data = glGame.storage.getItem('update_data');\r\n        if (update_data && update_data[gameName]) {\r\n            this.enterFishGameRoom();\r\n        } else {\r\n            this.downloadGame(gameId, null, () => { this.enterFishGameRoom(); });\r\n        }\r\n    }\r\n};\r\n/**\r\n * 设置进入房间参数\r\n * @param data\r\n */\r\nroom.setEnterGameInfo = function (data) {\r\n    glGame.room.logicDestroy();\r\n    this.curEnterGameID = data.gameid;\r\n    this.curEnterRoomID = data.roomid;\r\n    this.curEnterRoomType = data.roomtype;\r\n    this.curEnterBetType = data.bettype;\r\n    this.curEnterRoomServer = data.serviceid;\r\n};\r\n/**\r\n * 获取我的房间状态\r\n */\r\nroom.reqMyRoomState = function () {\r\n    glGame.gameNet.send_msg(\"http.reqMyRoomState\", null, (route, data) => {\r\n        this.roomUserInfo = data.roomUserInfo;\r\n        // 在房间内\r\n        if (this.roomUserInfo && this.roomUserInfo.rid > 0) {\r\n            glGame.room.logicDestroy();\r\n            this.curEnterGameID = this.roomUserInfo.gameid;\r\n            this.curEnterRoomType = this.roomUserInfo.roomtype;\r\n            this.curEnterBetType = this.roomUserInfo.bettype;\r\n            this.curEnterRoomID = this.roomUserInfo.rid;\r\n            this.curEnterRoomServer = this.roomUserInfo.serviceid;\r\n            if (FISH_ROOM_GAME[this.curEnterGameID] != null) this.sendEnterRoom(this.curEnterBetType);\r\n            else this.enterGameRoom();\r\n        } else {\r\n            if (cc.director.getScene().name != 'plaza' && cc.director.getScene().name != 'login' && cc.director.getScene().name != '') {\r\n                glGame.room.logicDestroy();\r\n                glGame.scene.setNextSceneTag(glGame.scenetag.PLAZA);\r\n                glGame.scene.enterNextScene();\r\n            } else if (cc.director.getScene().name == 'plaza' && !glGame.logon.get(\"isUpdatePlaza\")) {\r\n                if (glGame.readyroom.get(\"gameid\") != 0) {\r\n                    glGame.readyroom.reqEnterArea(glGame.readyroom.get(\"gameid\"));\r\n                }\r\n            } else {\r\n                glGame.scene.setNextSceneTag(glGame.scenetag.PLAZA);\r\n                glGame.scene.enterNextScene();\r\n                glGame.logon.set(\"isUpdatePlaza\", false)\r\n            }\r\n        }\r\n\r\n    });\r\n};\r\n//进入房间前先确认一下是否还有其他游戏正在进行\r\nroom.reqMyGameState = function (_gameID, _roomType, _roomID) {\r\n    return new Promise(function (resolve, reject) {\r\n        glGame.gameNet.send_msg(\"http.reqMyRoomState\", null, (route, data) => {\r\n            glGame.panel.hideFieldSelectionJuHua();\r\n            if (data.roomUserInfo && data.roomUserInfo.rid > 0) {\r\n                if (glGame.room.checkHundredsRoom(_gameID) && _gameID == data.roomUserInfo.gameid && _roomType == data.roomUserInfo.bettype) {\r\n                    return resolve();\r\n                } else if (_gameID == data.roomUserInfo.gameid && _roomType == data.roomUserInfo.bettype && (!_roomID || _roomID == data.roomUserInfo.rid)) {\r\n                    return resolve();\r\n                }\r\n                if (HUNDRE_GAME[data.roomUserInfo.gameid]) {\r\n                    glGame.panel.showDialog('提示', glGame.tips.ROOM.STILLINGAME.format(`${ServerGameDict[data.roomUserInfo.gameid]}（${glGame.room.getRoomType(data.roomUserInfo.gameid, data.roomUserInfo.bettype)}-${data.roomUserInfo.rid}）`), () => {\r\n                        glGame.room.reqHundredsRoom(data.roomUserInfo.gameid, data.roomUserInfo.rid, data.roomUserInfo.serviceid, data.roomUserInfo.bettype);\r\n                    }, false, false, '回到游戏', false, true);\r\n                } else {\r\n                    let content = \"\";\r\n                    if (data.roomUserInfo.bettype)\r\n                        content = glGame.tips.ROOM.STILLINGAME.format(`${ServerGameDict[data.roomUserInfo.gameid]}（${glGame.room.getRoomType(data.roomUserInfo.gameid, data.roomUserInfo.bettype)}）`);\r\n                    else\r\n                        content = glGame.tips.ROOM.STILLINGAME.format(`${ServerGameDict[data.roomUserInfo.gameid]}`);\r\n\r\n                    glGame.panel.showDialog('提示', content, () => {\r\n                        glGame.room.setGoldRoomInfo(data.roomUserInfo.gameid, data.roomUserInfo.bettype);\r\n                    }, false, false, '回到游戏', false, true);\r\n                }\r\n                glGame.panel.closeFieldSelectionJuHua();\r\n                return reject();\r\n            }\r\n            resolve();\r\n        });\r\n    })\r\n};\r\n/**\r\n * 进入房间\r\n */\r\nroom.enterFishGameRoom = function () {\r\n    glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n    glGame.scene.enterNextScene().then(() => {\r\n        let gunRate = cc.sys.localStorage.getItem(`${this.curEnterBetType}gunRate`) ? Number(cc.sys.localStorage.getItem(`${this.curEnterBetType}gunRate`)) : 1;\r\n        let msg = {\r\n            bettype: this.curEnterBetType,\r\n            serverId: this.curEnterRoomServer,\r\n            roomId: this.curEnterRoomID,\r\n            gunRate: gunRate\r\n        };\r\n        let _route = this.getEnterRoom();\r\n        if (_route) {\r\n            glGame.gameNet.send_msg(_route, msg);\r\n        }\r\n    });\r\n}\r\n/**\r\n * 进入房间\r\n */\r\nroom.enterGameRoom = function () {\r\n    if (!cc.sys.isNative) {\r\n        this.enterRoom();\r\n    } else {\r\n        let gameId = this.curEnterGameID;\r\n        let gameName = glGame.scene.getSceneNameByID(gameId)\r\n        let update_data = glGame.storage.getItem('update_data');\r\n        if (update_data && update_data[gameName]) {\r\n            this.enterRoom();\r\n        } else {\r\n            this.downloadGame(gameId, null, () => { this.enterRoom(); });\r\n        }\r\n    }\r\n}\r\n/**\r\n * 退出房间\r\n */\r\n\r\nroom.exitGameRoom = function () {\r\n    glGame.scene.setNextSceneTag(glGame.scenetag.PLAZA);\r\n    glGame.scene.enterNextScene().then(() => {\r\n        this.logicDestroy();\r\n        if (this.exitRoomState != ROOM_EXIT_STATE.BASE && this.exitRoomState != ROOM_EXIT_STATE.FORBID) {\r\n            let strTip = this.exitRoomState == ROOM_EXIT_STATE.MAINTENANCE ? glGame.tips.ROOM.SERVICESTOP : glGame.tips.ROOM.GAMECLOSE;\r\n            glGame.panel.showMsgBox('提示', strTip);\r\n            this.exitRoomState = ROOM_EXIT_STATE.BASE;\r\n        } else if (this.exitRoomState == ROOM_EXIT_STATE.FORBID) {\r\n            glGame.panel.showDialog(\"\", glGame.tips.ROOM.ACCOUNTEXCEPTION, () => { glGame.panel.showService() }, () => { }, \"我知道了\", \"联系客服\")\r\n            this.exitRoomState = ROOM_EXIT_STATE.BASE;\r\n        }\r\n        this.resetData();\r\n    });\r\n}\r\n//临时清理下载\r\nroom.downloadGame = function (gameid, manifestUrl, call) {\r\n    let assetsManager = new glGame.assets(glGame.scene.getSceneNameByID(gameid), manifestUrl, (process) => {\r\n    }, () => {    // 成功回调\r\n        call(gameid);\r\n        assetsManager.destroy();\r\n        assetsManager = null;\r\n        let gameName = glGame.scene.getSceneNameByID(gameid)\r\n        let hotUpdateURL = glGame.servercfg.getHotupdateVersionUrl();\r\n        let url = `${hotUpdateURL}${gameName}/${gameName}version.manifest`\r\n        glGame.gamelistcfg.getGameVersion(url).then(verdata => {\r\n            let data = glGame.storage.getItem('update_data');\r\n            if (data) {\r\n                data[gameName] = verdata.version;\r\n            } else {\r\n                data = {};\r\n                data[gameName] = verdata.version;\r\n            }\r\n            glGame.storage.setItem('update_data', data);\r\n        })\r\n    }, () => {    // 失败回调\r\n        assetsManager.destroy();\r\n        assetsManager = null;\r\n    });\r\n};\r\n/**\r\n * 游戏结束的游戏状态\r\n * matchid\r\n * gameStatus 1 正常 2维护 3关闭 4 踢出游戏\r\n */\r\nroom.onGameFinished = function (msg) {\r\n    if (msg.gameStatus != 1) {\r\n        this.exitRoomState = msg.gameStatus;\r\n        this.exitRoom();\r\n    }\r\n    //异常情况\r\n    else if (glGame.user.get(\"gameException\")) {\r\n        this.exitRoomState = ROOM_EXIT_STATE.FORBID;\r\n        glGame.emitter.emit('nodeRemove')\r\n        this.exitRoom();\r\n    }\r\n    //踢下线\r\n    else if (glGame.user.get(\"KickOutGame\")) {\r\n        glGame.panel.showMsgBox(\"\", glGame.tips.COMMON.ACCOUNTEXCEPTION, () => { glGame.logon.reLogon() });\r\n    }\r\n    //禁止游戏\r\n    else if (glGame.user.get(\"limitGame\")) {\r\n        this.exitRoomState = ROOM_EXIT_STATE.FORBID;\r\n        glGame.emitter.emit('nodeRemove')\r\n        this.exitRoom();\r\n    }\r\n};\r\n/**\r\n * 进入房间\r\n */\r\nroom.enterRoom = function () {\r\n    this.logicDestroy();\r\n    this.logicCreate();\r\n    let msg = {\r\n        bettype: this.curEnterBetType,\r\n        serverId: this.curEnterRoomServer,\r\n        roomId: this.curEnterRoomID,\r\n    };\r\n    //判断是否为走房间类型的百人场\r\n    if (this.checkHundredsRoom(this.curEnterRoomID)) {\r\n        msg = { bettype: this.curEnterBetType };\r\n    } else {\r\n        msg = {\r\n            bettype: this.curEnterBetType,\r\n            serverId: this.curEnterRoomServer,\r\n            roomId: this.curEnterRoomID,\r\n        }\r\n    }\r\n    if (this.curEnterRoomType == ROOM_TYPE.HUNDREDS) {          //百人场类型\r\n        let _route = this.getEnterRoom();\r\n        if (_route) glGame.gameNet.send_msg(_route, msg);\r\n    } else if (this.curEnterRoomType == ROOM_TYPE.CARD) {       //房间场（钻石版房卡）\r\n        glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n        glGame.scene.enterNextScene().then(() => {\r\n            let _route = this.getEnterRoom();\r\n            if (_route) glGame.gameNet.send_msg(_route, msg);\r\n        });\r\n    } else {\r\n        glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n        glGame.scene.enterNextScene().then(() => {\r\n            let _route = this.getEnterRoom();\r\n            if (_route) glGame.gameNet.send_msg(_route, msg);\r\n        });\r\n    }\r\n};\r\n/**\r\n * 进入房间\r\n * @param {object} data\r\n */\r\nroom.connector_entryHandler_enterRoom = function (data) {\r\n    if (glGame.readyroom.get(\"gameid\")) glGame.readyroom.reqExitArea();\r\n    //加入游戏id\r\n    this.serverGameid = this.curEnterGameID;\r\n    this.upGameType = this.curEnterRoomType;    //标记为上次进入的游戏,不做清理\r\n    if (this.curEnterRoomType == ROOM_TYPE.HUNDREDS) {\r\n        glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n        glGame.scene.enterNextScene().then(() => {\r\n            let _route = this.getInitRoom();\r\n            if (_route) glGame.gameNet.send_msg(_route, null);\r\n        });\r\n    } else {\r\n        // 关闭选场菊花\r\n        glGame.panel.closeFieldSelectionJuHua();\r\n    }\r\n};\r\n\r\n/**\r\n * 房间配置\r\n * @param {object} data\r\n */\r\nroom.room_roomHandler_initRoomData = function (data) {\r\n    // this.curEnterRoomID = data.roomId ? data.roomId : this.curEnterRoomID;\r\n    console.log('room_roomHandler_initRoomData');\r\n}\r\n\r\n/**\r\n * 房间配置\r\n * @param {object} data\r\n */\r\nroom.room_roomHandler_onInitRoomData = function (data) {\r\n    // 配合服务端初始化房间号\r\n    this.curEnterRoomID = data.roomId ? data.roomId : this.curEnterRoomID;\r\n}\r\n\r\n\r\nroom.onKickOutOfRoom = function () {\r\n    glGame.emitter.emit('nodeRemove')\r\n    this.exitRoomState = ROOM_EXIT_STATE.FORBID;        //设置退出房间状态\r\n    this.exitRoom();\r\n    // glGame.panel.showMsgBox('提示', '        网络连接异常，请重新进入房间！',\r\n    //     () => {\r\n    //         glGame.scene.setNextSceneTag(glGame.scenetag.PLAZA);\r\n    //         glGame.scene.enterNextScene();\r\n    //     });\r\n}\r\n\r\n/**\r\n * 创建房间\r\n */\r\nroom.room_roomHandler_createRoom = function (roomNum) {\r\n    this.curEnterGameID = this.gameId;\r\n    this.curEnterRoomType = ROOM_TYPE.CARD;\r\n    this.curEnterGameData = null;\r\n    glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n    glGame.scene.enterNextScene().then(() => {\r\n        let _route = this.getEnterRoom();\r\n        if (_route) glGame.gameNet.send_msg(_route, { roomNum: roomNum });\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 换桌\r\n */\r\nroom.changeTable = function () {\r\n    this.blChangeTable = true;\r\n    this.exitState = ROOM_EXIT.CHANGE_TABLE;\r\n    glGame.panel.showRoomJuHua();\r\n    let _route = this.getExitRoom();\r\n    if (_route) {\r\n        glGame.gameNet.send_msg(_route, { exitType: 1 });\r\n    }\r\n};\r\n/**\r\n * 房间场再来一局\r\n */\r\nroom.inviteAnotherRound = function (gamid, msg) {\r\n    this.exitState = ROOM_EXIT.RECUR_ROUND;\r\n    this.curEnterGameID = gamid;\r\n    this.curEnterGameData = msg;\r\n    glGame.panel.showRoomJuHua();\r\n    let _route = this.getExitRoom();\r\n    if (_route) {\r\n        glGame.gameNet.send_msg(_route, { exitType: 1 });\r\n    }\r\n};\r\n/**\r\n * 退出房间\r\n * @param {number} exitType\r\n */\r\nroom.exitRoom = function (exitType = 0) {\r\n    this.exitState = ROOM_EXIT.BASE;\r\n    let _route = this.getExitRoom();\r\n    if (_route) {\r\n        glGame.panel.showRoomJuHua();\r\n        glGame.gameNet.send_msg(_route, { exitType: exitType });\r\n    }\r\n};\r\n/**\r\n * 退出房间结果\r\n */\r\nroom.room_roomHandler_exitRoom = function () {\r\n    glGame.panel.closeRoomJuHua();\r\n    this.setServerGameId();\r\n\r\n    if (this.exitState === ROOM_EXIT.CHANGE_TABLE) {\r\n        let gameId = this.curEnterGameID,\r\n            betType = this.curEnterBetType;\r\n        this.logicDestroy();\r\n        this.resetData();\r\n        glGame.panel.showChangeTablePanel();\r\n\r\n        if (glGame.enterRoomVerification) {\r\n            glGame.room.reqGoldRoomVerify(gameId, betType);\r\n        } else {\r\n            glGame.room.setGoldRoomInfo(gameId, betType);\r\n        }\r\n    } else if (this.exitState === ROOM_EXIT.RECUR_ROUND) {\r\n        if (this.curEnterGameData != null) {\r\n\r\n            this.CreateRoom(this.curEnterGameID, this.curEnterGameData);\r\n        }\r\n    } else if (this.exitState === ROOM_EXIT.INVITE_ANOTHER_ROUND) {\r\n\r\n        this.EnterRoomCheck(this.curEnterGameID);\r\n    } else {\r\n        this.exitGameRoom();\r\n    }\r\n};\r\n/**\r\n * 金币场房间解散\r\n */\r\nroom.onDisbandRoom = function () {\r\n    glGame.panel.showMsgBox(\"\", \"该房间已经解散\", () => {\r\n        glGame.panel.closeRoomJuHua();\r\n        if (!ROOM_GAME[this.curEnterGameID]) this.exitGameRoom();\r\n        else glGame.emitter.emit(`${ServerGameName[this.curEnterGameID]}_onDisbandRoom_opEvent`);\r\n    });\r\n};\r\n\r\n/**\r\n * 邀请再来一局监听\r\n */\r\nroom.onInvitedAnotherRound = function (msg) {\r\n    if ((this.curEnterRoomID == msg.preRoomId || this.curEnterRoomID == 0) && this.curEnterRoomType != ROOM_TYPE.FISH) {\r\n        glGame.panel.showDialog(\"\", glGame.tips.ROOM.ASKFORJOIN.format(msg.nickname), () => {\r\n            if (this.curEnterRoomID == msg.preRoomId) {\r\n                this.exitState = ROOM_EXIT.INVITE_ANOTHER_ROUND;\r\n                this.curEnterGameID = msg.gameId;\r\n                this.curEnterRoomNum = msg.roomNum;\r\n                glGame.panel.showRoomJuHua();\r\n                let _route = this.getExitRoom();\r\n                if (_route) glGame.gameNet.send_msg(_route, { exitType: 1 });\r\n            } else if (this.curEnterRoomID == 0) {\r\n                this.curEnterGameID = msg.gameId;\r\n                this.curEnterRoomNum = msg.roomNum;\r\n                this.EnterRoomCheck(this.curEnterGameID);\r\n            } else {\r\n                glGame.panel.showErrorTip(glGame.tips.ROOM.PLAYING);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * 游戏数据层初始化\r\n */\r\nroom.logicCreate = function () {\r\n    let gameName = glGame.scene.getSceneNameByID(this.curEnterGameID);\r\n    if (!gameName) return;\r\n    try {\r\n        require(`${gameName}logic`).getInstance();\r\n    } catch (e) {\r\n        console.warn(e);\r\n    }\r\n};\r\n/**\r\n * 游戏数据层销毁\r\n */\r\nroom.logicDestroy = function () {\r\n    let gameName = glGame.scene.getSceneNameByID(this.curEnterGameID);\r\n    if (!gameName) return;\r\n    console.log(\"-------------这是子游戏的数据层销毁--------------\")\r\n    try {\r\n        require(`${gameName}logic`).destroy();\r\n    } catch (e) {\r\n        console.warn(e);\r\n    }\r\n};\r\n\r\n\r\nroom.enterRoomFailure = function () {\r\n    this.logicDestroy();\r\n    glGame.notice.resetData();\r\n};\r\n\r\n\r\n/**\r\n * 创建房间\r\n */\r\nroom.CreateRoom = function (gameId, msg) {\r\n    let _route = this.getCreateRoom(gameId);\r\n    this.gameId = gameId;\r\n    if (_route) glGame.gameNet.send_msg(_route, msg);\r\n}\r\n\r\n/**\r\n * 进入房间\r\n */\r\nroom.JoinRoom = function () {\r\n    glGame.scene.setNextSceneTag(this.curEnterGameID);\r\n    glGame.scene.enterNextScene().then(() => {\r\n        let _route = this.getEnterRoom();\r\n        if (_route) glGame.gameNet.send_msg(_route, { roomNum: this.curEnterRoomNum });\r\n    });\r\n}\r\n\r\n/**\r\n * 获取游戏类型进入房间\r\n */\r\nroom.getGameIdByRoomNum = function (msg) {\r\n    this.curEnterRoomNum = msg.roomNum;\r\n    glGame.gameNet.send_msg(`query.handler.getGameIdByRoomNum`, msg);\r\n}\r\n\r\n/**\r\n * 监听房间游戏id\r\n */\r\nroom.query_handler_getGameIdByRoomNum = function (msg) {\r\n    if (typeof msg !== \"number\") return console.error(`query.handler.getGameIdByRoomNum: ${msg}`);\r\n    this.curEnterGameID = msg;\r\n    this.curEnterRoomType = ROOM_TYPE.CARD;\r\n\r\n    glGame.emitter.emit(\"getGameIdByRoomNum\", { gameId: msg });\r\n}\r\n\r\n/**\r\n * 进入房间内检测\r\n */\r\nroom.EnterRoomCheck = function (gameId) {\r\n    this.reqMyGameState(gameId).then(() => {\r\n        if ((glGame.user.suspicious == 1 && glGame.user.game == 2) || glGame.user.is_game == 2) {\r\n            glGame.panel.showDialog(\"\", glGame.tips.ROOM.ACCOUNTEXCEPTION, () => { glGame.panel.showService() }, () => { }, \"我知道了\", \"联系客服\")\r\n            return;\r\n        }\r\n        // if (this.gameConfig.EntranceRestrictions > glGame.user.get(\"coin\")) {\r\n        //     console.log(\"这是当前的房间限制\", this.gameConfig)\r\n        //     let string = ` <color=#99C7FF>您的金币不足，该房间需要</c> <color=#ff0000> ${this.getFloat(this.gameConfig.EntranceRestrictions)}  </c><color=#99C7FF>金币才可下注，是否马上前往充值？</c>`\r\n        //     glGame.panel.showDialog(\"\", string, () => { glGame.panel.showShop(100) }, () => { }, \"取消\", \"充值\");\r\n        //     return\r\n        // }\r\n\r\n        let _route = this.getEnterRoomCheck(gameId);\r\n        if (_route) glGame.gameNet.send_msg(_route, { roomNum: this.curEnterRoomNum });\r\n    }).catch(() => { });\r\n}\r\n\r\n\r\n/**\r\n * 进入房间内检测\r\n */\r\nroom.room_roomHandler_enterRoomCheck = function (msg) {\r\n    this.logicDestroy();\r\n    this.JoinRoom();\r\n}\r\n\r\n/**\r\n * http 换房接口\r\n * @param gameID 游戏ID\r\n * @param betType 场次类型\r\n * @param next\r\n */\r\nroom.reqChangeRoom = function (gameID, betType, next) {\r\n    glGame.gameNet.send_msg(\"http.reqChangeRoom\", { gameid: gameID, bettype: betType }, (route, msg) => {\r\n        next();\r\n    });\r\n};\r\n/**\r\n * 前后台切换断线一下\r\n */\r\nroom.EnterForeground = function () {\r\n    let cutGameTime = Date.now().toString().substring(5);\r\n    if (cutGameTime - this.cutGameTime >= glGame.ground.cutgametime) {\r\n        glGame.gameNet.disconnect();\r\n    }\r\n};\r\nroom.EnterBackground = function () {\r\n    this.cutGameTime = Date.now().toString().substring(5);\r\n};\r\n/**\r\n * 获取用户信息（废弃接口）\r\n * @param {Array} uids\r\n */\r\nroom.reqUsers = function (uids) {\r\n    glGame.gameNet.send_msg(\"http.reqUsers\", { \"uids\": uids }, (route, msg) => {\r\n        let data = msg.users;\r\n        let count = data.length;\r\n        for (let i = 0; i < count; i++) {\r\n            let user = data[i];\r\n            this.users[user[\"id\"]] = user;\r\n        }\r\n        glGame.emitter.emit(\"updateUsers\");\r\n    });\r\n};\r\n/**\r\n * 设置房间指定属性\r\n * @param {string} key      房间属性字段\r\n * @param {object} value    房间属性字段值\r\n */\r\nroom.set = function (key, value) {\r\n    this[key] = value;\r\n};\r\n/**\r\n * 获取房间指定属性\r\n * @param {string} key\r\n * @returns {object}\r\n */\r\nroom.get = function (key) {\r\n    return this[key];\r\n};\r\nroom.getGameNameById = function (gameid) {\r\n    let name = ServerGameName[gameid];\r\n    return name;\r\n};\r\nroom.getServerGameName = function () {\r\n    return ServerGameName;\r\n}\r\nroom.getGameDictById = function (gameid) {\r\n    let name = ServerGameDict[gameid];\r\n    return name;\r\n};\r\n\r\nroom.getGameBetType = function (bettype) {\r\n    return BET_TYPE[bettype]\r\n}\r\n\r\nroom.setServerGameId = function () {\r\n    this.serverGameid = 0;\r\n};\r\n\r\nroom.getUpGameType = function () {\r\n    return this.upGameType;\r\n}\r\n\r\nroom.getUpGameTypeRoom = function () {\r\n    return this.upGameType === ROOM_TYPE.CARD;\r\n}\r\n//检查游戏是否属于断线重连\r\nroom.checkGameState = function(){\r\n    return glGame.scene.getUpScene() == glGame.scene.getNowScene();\r\n}\r\n\r\n\r\n//针对有特殊属性游戏的弹窗做处理(换肤完后可以处理关闭处理)\r\nroom.getGameShowMsgBox = function () {\r\n\r\n    let gamelist = [];\r\n    gamelist.push(glGame.scenetag.RQZNN);           //抢庄牛牛      （房间场）\r\n    gamelist.push(glGame.scenetag.WQZNN);           //看牌抢庄牛牛  （金币场）\r\n    gamelist.push(glGame.scenetag.HONGHEI);         //红黑  （房间场）\r\n    gamelist.push(glGame.scenetag.FISH2);           //捕鱼\r\n    gamelist.push(glGame.scenetag.FISH3);           //捕鱼\r\n\r\n    return gamelist.indexOf(glGame.scene.getNowScene()) > -1;           //校验是否有该游戏\r\n}\r\n\r\nmodule.exports = function () {\r\n    if (!g_instance) {\r\n        g_instance = new Room();\r\n    }\r\n    return g_instance;\r\n};\r\n"]}