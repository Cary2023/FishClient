{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\hcpyentry.js"],"names":["glGame","baseclass","extend","properties","hcpyRecord","cc","Prefab","hcpyRule","goldCount","Label","hcpySelect","Node","girl","BGM","type","AudioClip","onLoad","gameid","node","zIndex","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","roomType","nodeInfo","playEnterAnimation","active","unregisterEvent","onGameInfolist","onRoomInfo","onDeleteRoom","off","getComponent","Widget","updateAlignment","x","opacity","moveBy","v2","fadeIn","runAction","spawn","enabled","onClick","name","click_help","click_record","click_addgold","click_userinfo","user","isTourist","panel","showRegisteredGift","suspicious","game","is_game","showDialog","showService","showFieldSelectionJuHua","console","log","gameID","parent","room","reqMyGameState","then","readyroom","enterHundredsRoomOther","error","scenetag","HCPY","msg","gameInfoTest","get","key","getChildByName","lab_basescore","lab_chiplimit","string","getFloat","Chips","EntranceRestrictions","value","Number","div","toString","showUserInfo","showRemoteImage","Playerhead","coin","GoldTemp","setGameId","updateBgInfo","color","Color","showPanelByName","showShop","reqExitArea","remove","showPanel","set"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        hcpyRecord: cc.Prefab,\r\n        hcpyRule: cc.Prefab,\r\n        goldCount: cc.Label,\r\n        hcpySelect:cc.Node,\r\n        girl: cc.Node,\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n        this.roomType = 1;\r\n        this.nodeInfo = {};\r\n        this.updateuserInfo();\r\n        this.playEnterAnimation();\r\n    },\r\n\r\n    RootNodeShow(){\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n        this.nodeInfo = {};\r\n    },\r\n\r\n    RootNodeHide(){\r\n        this.node.active = false;\r\n        this.unregisterEvent();\r\n    },\r\n\r\n    //事件监听\r\n    registerEvent() {\r\n        glGame.emitter.on(\"onGameInfolist_area\", this.onGameInfolist, this);\r\n        glGame.emitter.on(\"onRoomInfo_area\", this.onRoomInfo, this);\r\n        glGame.emitter.on(\"onDeleteRoom_area\", this.onDeleteRoom, this);\r\n    },\r\n\r\n    //事件销毁\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"onGameInfolist_area\", this);\r\n        glGame.emitter.off(\"onRoomInfo_area\", this);\r\n        glGame.emitter.off(\"onDeleteRoom_area\", this);\r\n    },\r\n\r\n    // 播放入场动画\r\n    playEnterAnimation() {\r\n        this.girl.getComponent(cc.Widget).updateAlignment();\r\n\r\n        this.girl.x -= 200;\r\n        this.girl.opacity = 0;\r\n        let moveBy = cc.moveBy(0.2, cc.v2(200, 0))\r\n        let fadeIn = cc.fadeIn(0.2)\r\n        this.girl.runAction(cc.spawn(moveBy, fadeIn));\r\n        this.girl.getComponent(cc.Widget).enabled = false;\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            case 'btn_enter':\r\n                if (glGame.user.isTourist()) {\r\n                    glGame.panel.showRegisteredGift(true)\r\n                    return;\r\n                }\r\n                if((glGame.user.suspicious == 1 &&glGame.user.game == 2 ) || glGame.user.is_game == 2 ){\r\n                    glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => {}, \"我知道了\", \"联系客服\");\r\n                    return;\r\n                }\r\n                glGame.panel.showFieldSelectionJuHua();\r\n                console.log(\"这是当前传送\",this.gameID,node.parent.name)\r\n                glGame.room.reqMyGameState(this.gameID,node.parent.name).then(() => {\r\n                    glGame.readyroom.enterHundredsRoomOther(this.gameID,node.parent.name);\r\n                })\r\n                break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n\r\n    //发包\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.HCPY;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.HCPY);\r\n    },\r\n\r\n    onGameInfolist(msg) {\r\n        this.gameInfoTest = glGame.readyroom.get(\"gameInfo\");\r\n        console.log(\"这是当前房间配置\",this.gameInfoTest)\r\n        for(let key in this.gameInfoTest){\r\n            if(this.hcpySelect.getChildByName(`${key}`)){\r\n                let lab_basescore = this.hcpySelect.getChildByName(`${key}`).getChildByName('basescore').getComponent(cc.Label);\r\n                let lab_chiplimit = this.hcpySelect.getChildByName(`${key}`).getChildByName('chiplimit').getComponent(cc.Label);\r\n                lab_basescore.string = \"底注:   \"+this.getFloat(this.gameInfoTest[key].Chips[0]);\r\n                lab_chiplimit.string = \"准入:   \"+this.getFloat(this.gameInfoTest[key].EntranceRestrictions);\r\n            }\r\n        }\r\n    },\r\n\r\n    onRoomInfo(msg) {\r\n      \r\n    },\r\n\r\n    onDeleteRoom(msg) {\r\n       \r\n    },\r\n    //桌面数据的显示\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n        this.goldCount.node.color = new cc.Color(229, 248, 255);\r\n    },\r\n  \r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n\r\n    click_help() {\r\n        let panel = glGame.panel.showPanel(this.hcpyRule);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    click_record() {\r\n        let panel = glGame.panel.showPanel(this.hcpyRecord);\r\n        panel.zIndex = 30;\r\n    },\r\n\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW,this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE,this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\",this);\r\n        this.unregisterEvent();\r\n    },\r\n});\r\n"]}