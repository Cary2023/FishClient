{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\smallComp\\touristtip.js"],"names":["glGame","baseclass","extend","properties","audio","type","cc","AudioClip","node_confirm","Node","sp_apear","sp","Skeleton","onLoad","node","zIndex","setAnimation","setCompleteListener","trackEntry","loopCount","register_gold","user","get","undefined","bind_phone_gold","register_gold_type","coinType","getChildByName","active","getComponent","Label","string","cutFloat","runAction","repeatForever","sequence","scaleTo","delayTime","start","Widget","updateAlignment","isPlay","closeCurEffect","playSoundEffect","onClick","name","click_cancel","click_confirm","console","error","panel","showRegistration","remove","showFirstEnterPanel","num","Number","div","toString","OnDestroy","stopAllActions"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        audio: {\r\n            type: cc.AudioClip,\r\n            default: null\r\n        },\r\n        node_confirm: cc.Node,\r\n        sp_apear:sp.Skeleton\r\n    },\r\n    onLoad() {\r\n        this.node.zIndex = 1000;\r\n        this.sp_apear.setAnimation(0,\"animation1\",false);\r\n        this.sp_apear.setCompleteListener((trackEntry, loopCount) => {this.sp_apear.setAnimation(0,\"animation2\",true);})\r\n        let register_gold = glGame.user.get('register_gold') == undefined ? 0 : glGame.user.get('register_gold');  //注册 赠送 金币数.\r\n        let bind_phone_gold = glGame.user.get('bind_phone_gold') == undefined ? 0 : glGame.user.get('bind_phone_gold');  //绑定 手机 赠送金币数.\r\n        let register_gold_type = glGame.user.get('register_gold_type') == undefined ? 2 : glGame.user.get('register_gold_type'); // 1元  2金币\r\n\r\n        let coinType = register_gold_type == 2 ? \"img_jb\":\"img_yuan\";\r\n        if(bind_phone_gold > 0){\r\n            //  1.当后台有配置绑定手机礼金时，无论是否有配置注册礼金，文字显示：\r\n            //      注册并且绑定手机后\r\n            //         总共可获赠XXXX金币\r\n            //         其中XXXX=注册礼金+绑定手机礼金\r\n            this.node.getChildByName(\"oneView\").active = true;\r\n            this.node.getChildByName(\"oneView\").getChildByName(\"layout\").getChildByName(coinType).active = true;\r\n            this.node.getChildByName(\"oneView\").getChildByName(\"layout\").getChildByName(\"label\").getComponent(cc.Label).string = this.cutFloat(register_gold + bind_phone_gold);\r\n        }else if(register_gold > 0 && bind_phone_gold == 0){\r\n            //   2.当后台只有配置注册礼金，没有配置绑定手机礼金时，文字显示：\r\n            //      注册成为正式账号后\r\n            //         立即赠送您XXXX金币\r\n            //         其中XXXX=注册礼金\r\n            this.node.getChildByName(\"twoView\").active = true;\r\n            this.node.getChildByName(\"twoView\").getChildByName(\"layout\").getChildByName(coinType).active = true;\r\n            this.node.getChildByName(\"twoView\").getChildByName(\"layout\").getChildByName(\"label\").getComponent(cc.Label).string = this.cutFloat(register_gold);\r\n\r\n        }else if( register_gold == 0 && bind_phone_gold == 0){\r\n            //         3.当后台没有配置注册礼金和绑定礼金，文字显示：\r\n            //      注册成为正式账号后\r\n            //         可获得大量优惠奖励\r\n            this.node.getChildByName(\"threeView\").active = true;\r\n        }\r\n\r\n        this.node_confirm.runAction(cc.repeatForever(cc.sequence(\r\n            cc.scaleTo(0.2, 0.95),\r\n            cc.delayTime(0.2),\r\n            cc.scaleTo(0.2, 1),\r\n            cc.scaleTo(0.2, 1.05),\r\n            cc.scaleTo(0.2, 1),\r\n        )))\r\n    },\r\n\r\n    start() {\r\n        if (this.node.getComponent(cc.Widget)) this.node.getComponent(cc.Widget).updateAlignment();\r\n        if (this.isPlay) {\r\n            glGame.audio.closeCurEffect();\r\n            glGame.audio.playSoundEffect(this.audio, true)\r\n        }\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"close\": this.click_cancel(); break;\r\n            case \"confirm\": this.click_confirm(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_confirm() {\r\n        glGame.panel.showRegistration(true);\r\n        this.remove();\r\n    },\r\n    click_cancel() {\r\n        glGame.panel.showFirstEnterPanel();\r\n        if (this.isPlay) glGame.audio.closeCurEffect();\r\n        this.remove();\r\n    },\r\n    cutFloat(num) {\r\n        return (Number(num).div(100)).toString();\r\n    },\r\n    OnDestroy() {\r\n        this.node_confirm.stopAllActions();\r\n    },\r\n});\r\n"]}