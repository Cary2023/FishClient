{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\announcement\\detailwindow.js"],"names":["glGame","baseclass","extend","properties","detailView1","cc","Node","contentItem","iconArr","SpriteFrame","imageItem","barItem","lineItem","wordItem","formView","onLoad","onClick","name","node","remove","console","log","updateDetailView1","data","i","length","title","type","img","instantiate","panel","showRemoteImage","parent","active","initform","content","getChildByName","getComponent","Label","string","Sprite","spriteFrame","icon","height","j","RichText","replace","total","lengthBest","children","childrenCount","width","distance","distanceArr","push","Count","Posy","x","y","color","zIndex"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        detailView1:cc.Node,\r\n        contentItem:cc.Node,\r\n        iconArr: [cc.SpriteFrame],\r\n        imageItem:cc.Node,\r\n        //以下为表格生成用到\r\n        barItem: cc.Node,\r\n        lineItem: cc.Node,\r\n        wordItem: cc.Node,\r\n        formView: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            default: console.log(\" btn name: \", name); break;\r\n        }\r\n    },\r\n     //更新详细信息\r\n     updateDetailView1(data) {\r\n        for (let i = 0; i < data.length; i++) {\r\n            if (data[i].title == \"活动细则\" || data[i].title == \"活动规则与条款\") continue;\r\n            if (data[i].type == 4 && data[i].img && data[i].img != \"\") {\r\n                let imageItem = cc.instantiate(this.imageItem);\r\n                glGame.panel.showRemoteImage(imageItem, data[i].img);\r\n                imageItem.parent = this.detailView1;\r\n                imageItem.active = true;\r\n                continue;\r\n            }else if(data[i].img == \"\"){\r\n                continue\r\n            }\r\n            if (data[i].title === \"活动表格\") {\r\n                this.initform(data[i].content)\r\n                continue;\r\n            }\r\n            let contentItem = cc.instantiate(this.contentItem);\r\n            contentItem.parent = this.detailView1;\r\n            contentItem.active = true;\r\n            contentItem.getChildByName(\"Tip\").getComponent(cc.Label).string = data[i].title + \"：\";\r\n            contentItem.getChildByName(\"img_icon\").getComponent(cc.Sprite).spriteFrame = this.iconArr[data[i].icon];\r\n            if (data[i].title == \"活动介绍\") {\r\n                contentItem.getChildByName(\"content2\").active = true;\r\n                contentItem.getChildByName(\"content2\").getComponent(cc.Label).string = data[i].content;\r\n            } else {\r\n                contentItem.getChildByName(\"content1\").active = true;\r\n                contentItem.getChildByName(\"content1\").getComponent(cc.Label).string = data[i].content;\r\n            }\r\n        }\r\n    },\r\n    //生成表格\r\n    initform(data) {\r\n        let formView = cc.instantiate(this.formView);\r\n        formView.parent = this.detailView1;\r\n        formView.active = true;\r\n        formView.height = 100 + (data.length - 1) * 50\r\n        for (let i = 0; i < data.length; i++) {\r\n            for (let j = 0; j < data[i].length; j++) {\r\n                let wordItem = cc.instantiate(this.wordItem);\r\n                wordItem.parent = formView;\r\n                wordItem.getComponent(cc.RichText).string = data[i][j].replace(\"<br>\", \",\");\r\n                wordItem.active = true;\r\n            }\r\n        }\r\n        let total = 0;\r\n        let lengthBest = data[0].length;\r\n        for (let i = lengthBest; i >= 1; i--) {\r\n            total += formView.children[formView.childrenCount - i].width\r\n        }\r\n        let distance = (formView.width - total)/(data[0].length + 1);\r\n        total = 0;\r\n        let distanceArr = [];\r\n        for (let i = lengthBest; i >= 1; i--) {\r\n            total += formView.children[formView.childrenCount - i].width + distance\r\n            distanceArr.push(total);\r\n        }\r\n        let Count = 1;\r\n        let Posy = -50\r\n        for (let i = 0; i < data.length; i++) {\r\n            for (let j = 0; j < data[i].length; j++) {\r\n                formView.children[Count].x = j == 0 ? distance : distance + distanceArr[j - 1];\r\n                formView.children[Count].y = Posy\r\n                if (j == 1) {\r\n                    formView.children[Count].color = cc.color(246, 142, 30)\r\n                    formView.children[Count].getComponent(cc.RichText).string = formView.children[Count].getComponent(cc.RichText).string.replace(\"<br>\", \",\");\r\n                }\r\n\r\n                if (j != 0) {\r\n                    let lineItem = cc.instantiate(this.lineItem);\r\n                    lineItem.parent = formView.getChildByName(\"bg\");\r\n                    lineItem.y = -(formView.height / 2);\r\n                    lineItem.x = formView.children[Count].x - distance / 2;\r\n                    lineItem.height = formView.height - 20\r\n                    lineItem.active = true;\r\n                    lineItem.zIndex = 100 + j;\r\n                }\r\n                if (i % 2 == 0) {\r\n                    let barItem = cc.instantiate(this.barItem);\r\n                    barItem.parent = formView.getChildByName(\"bg\");\r\n                    barItem.active = true;\r\n                    barItem.y = Posy;\r\n                    //barItem.width = formView.width - 15;\r\n                }\r\n                Count++\r\n            }\r\n            Posy -= 50;\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}