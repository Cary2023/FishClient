{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\backWater\\mybackWater_complex.js"],"names":["WATER_TIMING","WATER_REALTIME","GAME_VARIETY_TAB","tabs_official","tabs_qipai","tabs_jieji","tabs_buyu","tabs_shixun","tabs_tiyu","tabs_caipiao","tabs_dianjing","glGame","baseclass","extend","properties","typeNodeList","cc","Node","today_bet","Label","today_back","curback","time","timestrip","dmtips","fstips","cfgContent","cfgItem","btn_applyback","Button","btn_rtimeback","end_backtip","titleContent","wfsWenhao","klqWenhao","onLoad","registerEvent","type","gameRecord","initTopToggle","ReqRebateRecord","clickNode","node","getChildByName","on","EventType","TOUCH_START","active","clickMask","switchPlatform","onEnable","initContent","getComponent","Toggle","isChecked","gameTypeList","gamelistcfg","get","tabName","id","isGameOpen","removeAllChildren","gameRebateDetail","gameOrPlatMap","index","Object","keys","key","data","item","instantiate","parent","height","string","name","cutFloat","betting","Number","proportion","mul","toFixed","number","panel","settingTableLabelColor","showEffectNode","initOtherUI","betCoin","allRebateCoin","canReceive","rebateCoin","setEndbacktip","rebateType","interactable","rebateExpirationTime","emitter","updateReqRebateRecord","updateReqRebateApply","unRegisterEvent","off","OnDestroy","user","msg","coin","strContent","tips","BACKWATER","GIVENOTICE","format","APPLYSUCCESS","showMsgBox","onClick","isTourist","indexOf","showRegisteredGift","applyback_cb","dmwenhao_cb","fswenhao_cb","selectClick","accountId","userID","typeList","count","length","i","value","div","toString","minReceiveAmount","showErrorTip","MINLIMIT","ReqRebateApply","stopAllActions","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 返水信息面板\r\n * 有效投注*比例 = 返水金额\r\n * 今日有效投注 = 总的子游戏有效投注之和\r\n * 今日预计返水 = 总的子游戏返水金额之和\r\n */\r\nconst WATER_TIMING = 1;     //定时返水\r\nconst WATER_REALTIME = 2;   //实时返水\r\n\r\n\r\n// key 为控件名称， value 为与服务端约定好的数组名称\r\nconst GAME_VARIETY_TAB = {\r\n    tabs_official: 0,           //官方平台\r\n    tabs_qipai: 1,              //棋牌\r\n    tabs_jieji: 3,              //街机\r\n    tabs_buyu: 2,               //捕鱼\r\n    tabs_shixun: 4,             //视讯\r\n    tabs_tiyu: 6,               //体育\r\n    tabs_caipiao: 5,            //彩票\r\n    tabs_dianjing: 7,           //电竞\r\n}\r\n\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        typeNodeList: cc.Node,\r\n        today_bet: cc.Label,        //未返水有效投注\r\n        today_back: cc.Label,       //今日预计返水\r\n        curback: cc.Label,          //返水数额\r\n        time: cc.Label,             //返水结算时间\r\n\r\n        timestrip: cc.Node,         //非实时返水数据\r\n        dmtips: cc.Node,            //打码提示\r\n        fstips: cc.Node,            //返水提示\r\n\r\n        cfgContent: cc.Node,\r\n        cfgItem: cc.Node,\r\n        btn_applyback: cc.Button,\r\n        btn_rtimeback: cc.Node,\r\n        end_backtip: [cc.Node],\r\n        titleContent: cc.Node,\r\n        wfsWenhao: cc.Node,         //未返水问号\r\n        klqWenhao: cc.Node,         //可领取问号\r\n    },\r\n\r\n    onLoad() {\r\n        this.registerEvent()\r\n        this.type = 0;\r\n        this.gameRecord = null;\r\n        this.initTopToggle();\r\n        this.ReqRebateRecord();\r\n\r\n        let clickNode = this.node.getChildByName(\"clickmask\");\r\n        clickNode.on(cc.Node.EventType.TOUCH_START, ()=> {\r\n            this.dmtips.active = false;\r\n            this.fstips.active = false;\r\n            this.clickMask.active = false;\r\n        }, this);\r\n        clickNode.active = false;\r\n        this.clickMask = clickNode;\r\n        this.switchPlatform(0);\r\n    },\r\n\r\n    onEnable() {\r\n        this.switchPlatform(0);\r\n        if(this.gameRecord) {\r\n            this.initContent();\r\n            \r\n            this.typeNodeList.getChildByName(\"tabs_official\").getComponent(cc.Toggle).isChecked = true;\r\n        }\r\n    },\r\n\r\n    initTopToggle() {\r\n        // 获取配表里面的数据牌区分是否开启分类\r\n        let gameTypeList = glGame.gamelistcfg.get(\"gameDisplayTypeList\");\r\n        if(!gameTypeList) {\r\n            return;\r\n        }\r\n\r\n        for(let tabName in GAME_VARIETY_TAB) {\r\n            let id = GAME_VARIETY_TAB[tabName];\r\n            this.typeNodeList.getChildByName(tabName).active = this.isGameOpen(gameTypeList, id);\r\n        }\r\n\r\n        this.typeNodeList.getChildByName(\"tabs_official\").active = true;\r\n    },\r\n\r\n    //棋牌返水\r\n    initContent() {\r\n        this.cfgContent.removeAllChildren();\r\n\r\n        let gameRebateDetail = this.gameRecord.gameRebateDetail;\r\n        let gameOrPlatMap = this.gameRecord.gameOrPlatMap;\r\n\r\n        if(!gameRebateDetail[this.type]) {\r\n            this.node.getChildByName(\"img_wodefanshui\").active = true;\r\n            return;\r\n        }\r\n        \r\n        let index = 0;\r\n        if (Object.keys(gameRebateDetail[this.type]) == 0) {\r\n            this.node.getChildByName(\"img_wodefanshui\").active = true;\r\n            return;\r\n        }\r\n\r\n        gameRebateDetail = gameRebateDetail[this.type];\r\n\r\n        for (let key in gameRebateDetail) {\r\n            let data = gameRebateDetail[key];\r\n            let item = cc.instantiate(this.cfgItem);\r\n            item.parent = this.cfgContent;\r\n            this.cfgContent.height += item.height;\r\n            item.active = false;\r\n            \r\n            item.getChildByName(\"game\").getComponent(cc.Label).string = data.name;\r\n            item.getChildByName(\"bet\").getComponent(cc.Label).string = `${this.cutFloat(data.betting)}`;            //有效投注\r\n            item.getChildByName(\"porpor\").getComponent(cc.Label).string = `${Number(data.proportion).mul(100).toFixed(2)}%`;\r\n            item.getChildByName(\"coin\").getComponent(cc.Label).string = `${this.cutFloat(data.number)}`;            //返水金额\r\n            glGame.panel.settingTableLabelColor(item.getChildByName(\"coin\"));\r\n            item.getChildByName(\"bg\").active = index % 2 == 0\r\n            index++;\r\n        }\r\n        this.node.getChildByName(\"img_wodefanshui\").active = index == 0;\r\n        glGame.panel.showEffectNode(this,this.cfgContent,0.02,true);\r\n    },\r\n\r\n    //渲染上下部的其他UI\r\n    initOtherUI() {\r\n        this.today_bet.string = `${this.cutFloat(this.gameRecord.betCoin)}`;\r\n        let allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);\r\n        this.setEndbacktip();\r\n\r\n        if (this.gameRecord.rebateType == WATER_REALTIME) {\r\n            // 实时返水\r\n            this.btn_applyback.node.active = false;\r\n            this.btn_rtimeback.active = true;\r\n            this.timestrip.active = false;\r\n\r\n            this.today_back.string = `${this.cutFloat(allRebateCoin)}`;\r\n            // this.btn_rtimeback.getComponent(cc.Button).interactable = allRebateCoin != 0;\r\n            \r\n        } else {\r\n            // 定时返水\r\n            this.btn_rtimeback.active = false;\r\n            this.timestrip.active = true;\r\n\r\n            this.today_back.string = `${this.cutFloat(this.gameRecord.rebateCoin)}`;\r\n            this.curback.string = `${this.cutFloat(this.gameRecord.canReceive)}`;\r\n            this.time.string = `${this.gameRecord.time}`;\r\n\r\n            this.btn_applyback.node.active = true;\r\n            this.btn_applyback.interactable = this.gameRecord.canReceive != 0;;\r\n        }\r\n\r\n        this.klqWenhao.active = this.gameRecord.rebateType == WATER_TIMING  && this.gameRecord.rebateExpirationTime != 0;\r\n        this.wfsWenhao.active = this.gameRecord.rebateType == WATER_REALTIME && this.gameRecord.rebateExpirationTime != 0;\r\n    },\r\n\r\n    setEndbacktip() {\r\n        if (this.gameRecord.rebateType == WATER_REALTIME) {\r\n            this.end_backtip[0].active = false;\r\n            this.end_backtip[1].active = true;\r\n        } else {\r\n            this.end_backtip[0].active = true;\r\n            this.end_backtip[1].active = false;\r\n        }\r\n    },\r\n\r\n    registerEvent() {\r\n        glGame.emitter.on(\"updateReqRebateRecord\", this.updateReqRebateRecord, this);\r\n        glGame.emitter.on(\"updateReqRebateApply\", this.updateReqRebateApply, this);\r\n    },\r\n\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"updateReqRebateRecord\", this);\r\n        glGame.emitter.off(\"updateReqRebateApply\", this);\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n\r\n    updateReqRebateRecord() {\r\n        this.gameRecord = glGame.user.get(\"userPumpRecord\");\r\n        if (!this.gameRecord) {\r\n            return glGame.user.ReqRebateRecord();\r\n        }\r\n\r\n        this.initOtherUI();\r\n        this.initContent();\r\n    },\r\n\r\n    //领取返水成功\r\n    updateReqRebateApply(msg) {\r\n        let coin = msg.coin || 0;        //暂时\r\n        let strContent = \"\";\r\n        if (msg.type == 1) {\r\n            strContent = glGame.tips.BACKWATER.GIVENOTICE.format(`${this.cutFloat(coin)}`);\r\n        } else if (msg.type == 3) {\r\n            strContent = glGame.tips.BACKWATER.APPLYSUCCESS.format(`${this.cutFloat(coin)}`);\r\n        }\r\n\r\n        glGame.panel.showMsgBox(\"\", strContent);\r\n        glGame.user.ReqRebateRecord();\r\n    },\r\n\r\n    onClick(name, node) {\r\n        if (glGame.user.isTourist()) {\r\n            if (name != 'close' && name.indexOf(\"tabs_\") == -1) {\r\n                glGame.panel.showRegisteredGift(true);\r\n                return;\r\n            }\r\n        }\r\n\r\n        switch (name) {\r\n            case \"btn_applyback\": this.applyback_cb(); break;\r\n            case \"btn_rtimeback\": this.applyback_cb(); break;\r\n            case \"btn_dmwenhao\": this.dmwenhao_cb(); break;\r\n            case \"btn_fswenhao\": this.fswenhao_cb(); break;\r\n            default:\r\n                if (name.indexOf(\"tabs_\") > -1) this.selectClick(name);\r\n                break;\r\n        }\r\n    },\r\n\r\n    selectClick(name) {\r\n        this.switchPlatform(GAME_VARIETY_TAB[name]);\r\n        this.initContent();\r\n    },\r\n\r\n    // 切换平台\r\n    switchPlatform(type) {\r\n        this.type = type;\r\n        this.titleContent.getChildByName(\"img_yx\").active = this.type == 2 || this.type == 0;\r\n        this.titleContent.getChildByName(\"img_yxpt\").active = this.type != 2 && this.type != 0;\r\n    },\r\n\r\n    ReqRebateRecord() {\r\n        glGame.user.ReqRebateRecord({\r\n            accountId: glGame.user.userID,\r\n            type: 1,\r\n        });\r\n    },\r\n\r\n    // 游戏是否开启\r\n    isGameOpen(typeList, id) {\r\n        let count = typeList.length;\r\n        for(let i = 0; i < count; i++) {\r\n            if(typeList[i].id == id) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    //浮点型运算取俩位\r\n    cutFloat(value) {\r\n        return Number(value).div(100).toFixed(2).toString();\r\n    },\r\n\r\n    applyback_cb() {\r\n        let allRebateCoin = Number(this.gameRecord.canReceive);\r\n        if(this.gameRecord.rebateType == WATER_REALTIME) {\r\n            allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);\r\n        }\r\n\r\n        if (allRebateCoin < this.gameRecord.minReceiveAmount * 100) {\r\n            glGame.panel.showErrorTip(glGame.tips.BACKWATER.MINLIMIT.format(`${this.gameRecord.minReceiveAmount}`));\r\n            return;\r\n        }\r\n        glGame.user.ReqRebateApply();\r\n    },\r\n\r\n    dmwenhao_cb() {\r\n        this.clickMask.active = true;\r\n        this.dmtips.stopAllActions();\r\n        this.dmtips.active = true;\r\n        this.dmtips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(()=> {\r\n            this.dmtips.active = false;\r\n            this.clickMask.active = false;\r\n        })));\r\n\r\n        this.dmtips.getChildByName(\"label\").getComponent(cc.Label).string = `每天0点清除${this.gameRecord.rebateExpirationTime}天前未返水的打码量`;\r\n    },\r\n\r\n    fswenhao_cb() {\r\n        this.clickMask.active = true;\r\n        this.fstips.stopAllActions();\r\n        this.fstips.active = true;\r\n        this.fstips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(()=> {\r\n            this.fstips.active = false;\r\n            this.clickMask.active = false;\r\n        })));\r\n\r\n        this.fstips.getChildByName(\"label\").getComponent(cc.Label).string = `每天0点清除${this.gameRecord.rebateExpirationTime}天前未领取的返水金额`;\r\n    }\r\n});\r\n"]}