
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/frames/util/encryptInit.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '88760PVKNNIfo+CnqBaQCXF', 'encryptInit');
// frames/util/encryptInit.js

"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var JSEncrypt = require("jsencrypt");

var Base64 = Base64 || require('base64').Base64;

var Cryptor = require('cryptor');

var ProxyData = function ProxyData() {
  this.init();
},
    proxy = ProxyData.prototype,
    _special = "",
    _img_list = {},
    g_instance = null;

proxy.init = function () {
  var enkey = [];
  enkey.push("LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlHZU1BMEdDU3FHU0liM0RRRUJBUVVBQTRHTUFEQ0JpQUtCZ0hKQzBObGR0bGE1THZjWGpr");
  enkey.push("aW9vRFRWRklFRwpmTGtDL2d6d3UxNjNFWmtFd3NRMHkrcFFCT3FaL0xUNEdGVnZQb2xtbVhuSTMzd1FzQXNnTUpsZjEwMndjN1FaCmV0ckJJ");
  enkey.push("NHNpWFZVZnVvdEhjR0Q2NitUUExxNWpRQ0h0eDZQN3RTK2FjM0NlQTVvdzFoOWNsQmJ3REF3MWhaT0YKdmk2a2dmRDMvMzl0TEFhSEFnTUJB");
  enkey.push("QUU9Ci0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLQ");
  var dekey = [];
  dekey.push("LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlDWFFJQkFBS0JnUURPeS9lVE9teXlMWXJKWWRROTVHcS9ySmZ6cExGTjcvU1RVSER2a01oZC9");
  dekey.push("VQ3o0eUhrCkVsRVF3Z1paemtkTkdFbW9FcG9QOFQzVEhqV1JKRzZxWFJKc21ab2xyU3RITkVxRE5FVGo0M3dQWHFvek5MTXgKL2JwZ2NrTTRZbGdzWEpSdj");
  dekey.push("hDSGJFSFF1SjdBejNOb1BpM1dCbEt4UXJRZ0pjSG51M2tPcWJ3TXovd0lEQVFBQgpBb0dCQUs0MUkxM3k1T2lBOXg3SS9Bd2JwVlhOSnNESVo5a1pJTGNOR");
  dekey.push("ithbzJESmRpeWsvV1NpUnlack5hSjQwCjZObm9jUHhXbDFTQXpLMVNFSnd4emN4VTFaUUZXOHFTQVVlRWlOWldSdzJScjd4bDgwV3hqcXBYclZjek1oRzkK");
  dekey.push("b1NwaWNUaXRKUmNXcDVSanUzdjROVlRHWjIxMWdPcXAxRjFHMGVJbmN3ZnhwVmN4QWtFQTYwek81TjVoUk51UApxRUI4aW1QUXVUdnB1d3FLODM4VUZ1QjV");
  dekey.push("XMENadjB5VlBLdGdnb3lyT1RGS2ticU4xdzNjelJyVTVvZkticXE1Ckc5bW4rUDdUU1FKQkFPRDlQSWR5OUtUOFpZOGkwOGlpY0VnRVQ4NHdNeFpod0x0bX");
  dekey.push("VzZ2I4ZjBNaGpnY3hyMTgKUVNqM3pCMWRUL09rYmdTT1YvRkNCd0dOdTJyUkxMdVRCUWNDUUdBdWZGL1hld0V2a3JCZTg4bUo5WmJTSTc5KwpGc0JqMEsxd");
  dekey.push("FFvNEhnUkZPVjY1K0N5d3lIZ2Q1MjVab0lIU295UG5hSHU3QTBRR2RyWjd4d0pTcWJXa0NRSEYxCklzWUhZWG1sMGkwNVdlVnVqUUswTWU1L2ZmUEdmZVBE");
  dekey.push("TFdQbU84VHBRUEloQ05QYlNoeTN3Vlg1alcwSE9YZlEKdEdaMGJvWUpERDhVbHVOTWc1Y0NRUURPMFdVekJhTitmNkxTbEdIcTB1Z3k4YWhaQjI5Q1Qwai8");
  dekey.push("2Tk9OaW1oMgprNW5UeElKVWQvR2R6OFBRU21BOGs5aGhUNjRBeGNCTWpXRGt0N2JENGtxbwotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQ==");
  this.encrypt = new JSEncrypt.JSEncrypt();
  this.decrypt = new JSEncrypt.JSEncrypt();
  this.encrypt.setPublicKey(Base64.decode(enkey[0] + enkey[1] + enkey[2] + enkey[3]));
  this.decrypt.setPrivateKey(Base64.decode(dekey[0] + dekey[1] + dekey[2] + dekey[3] + dekey[4] + dekey[5] + dekey[6] + dekey[7] + dekey[8] + dekey[9]));
  this.cryptor = null;
};
/**
 * 返回http列表给与服务端
 */


proxy.getHttpList = function () {
  var http_list = "";

  if (this._http_list.length) {
    var http = [];

    for (var i = 0; i < this._http_list.length; i++) {
      var head = this._http_list[i].head;

      var _cryptor = new Cryptor(this.jsdecrypt(head.key));

      http = http.concat(_cryptor.decode(Base64.decode(this._http_list[i].body)));
    }

    var key = String(Cryptor.hash("" + parseInt(Math.random() * 100), 'md5')).slice(0, 6);
    var enkey = this.jsencrypt(key);
    console.log(http);
    var cryptor = new Cryptor(key);
    var path = Base64.encode(cryptor.encode(JSON.stringify(http)));
    http_list = JSON.stringify({
      head: {
        route: "http.getDomain",
        key: enkey
      },
      body: path
    });
  }

  return http_list;
};

proxy.getEncodeUrl = function (body) {
  if (!body || body == "") return console.error("body异常");
  var curkey = String(Cryptor.hash("" + parseInt(Math.random() * 100), 'md5')).slice(0, 6);
  var enkey = this.jsencrypt(curkey);
  var cryptor = new Cryptor(curkey);
  body = Base64.encode(cryptor.encode(JSON.stringify(body)));
  return {
    "data": body,
    "dataKey": enkey
  };
};

proxy.getDecodeUrl = function (body, key) {
  if (!body || !key || body == "" || key == "") return console.error("body 或 key 异常");
  console.log("reqUrl decode", _typeof(this.jsdecrypt(key)), this.jsdecrypt(key));
  var cryptor = new Cryptor(this.jsdecrypt(key));
  body = cryptor.decode(Base64.decode(body));
  return body;
};

proxy.getEncodeData = function (body) {
  if (!body || body == "") return console.error("body异常");
  var transmitKey = String(Cryptor.hash("" + parseInt(Math.random() * 100), 'md5')).slice(2, 8);
  var enkey = String(Cryptor.hash(transmitKey, "md5")).slice(-6);
  var cryptor = new Cryptor(enkey);
  body = Base64.encode(cryptor.encode(JSON.stringify(body)));
  return {
    "data": body,
    "dataKey": transmitKey
  };
};

proxy.getDecodeData = function (body, key) {
  if (!body || !key || body == "" || key == "") return console.error("body 或 key 异常");
  var encodeKey = String(Cryptor.hash(key, "md5")).slice(-6);
  var cryptor = new Cryptor(encodeKey);
  body = cryptor.decode(Base64.decode(body));
  return body;
};
/**
 * rsa 加密
 * @param {any} data
 */


proxy.jsencrypt = function (data) {
  return this.encrypt.encrypt(data);
};
/**
 * rsa 解密
 * @param {Sting} data
 */


proxy.jsdecrypt = function (data) {
  return this.decrypt.decrypt(data);
};

module.exports = function () {
  if (!g_instance) g_instance = new ProxyData();
  return g_instance;
};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZnJhbWVzXFx1dGlsXFxlbmNyeXB0SW5pdC5qcyJdLCJuYW1lcyI6WyJKU0VuY3J5cHQiLCJyZXF1aXJlIiwiQmFzZTY0IiwiQ3J5cHRvciIsIlByb3h5RGF0YSIsImluaXQiLCJwcm94eSIsInByb3RvdHlwZSIsIl9zcGVjaWFsIiwiX2ltZ19saXN0IiwiZ19pbnN0YW5jZSIsImVua2V5IiwicHVzaCIsImRla2V5IiwiZW5jcnlwdCIsImRlY3J5cHQiLCJzZXRQdWJsaWNLZXkiLCJkZWNvZGUiLCJzZXRQcml2YXRlS2V5IiwiY3J5cHRvciIsImdldEh0dHBMaXN0IiwiaHR0cF9saXN0IiwiX2h0dHBfbGlzdCIsImxlbmd0aCIsImh0dHAiLCJpIiwiaGVhZCIsImpzZGVjcnlwdCIsImtleSIsImNvbmNhdCIsImJvZHkiLCJTdHJpbmciLCJoYXNoIiwicGFyc2VJbnQiLCJNYXRoIiwicmFuZG9tIiwic2xpY2UiLCJqc2VuY3J5cHQiLCJjb25zb2xlIiwibG9nIiwicGF0aCIsImVuY29kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyb3V0ZSIsImdldEVuY29kZVVybCIsImVycm9yIiwiY3Vya2V5IiwiZ2V0RGVjb2RlVXJsIiwiZ2V0RW5jb2RlRGF0YSIsInRyYW5zbWl0S2V5IiwiZ2V0RGVjb2RlRGF0YSIsImVuY29kZUtleSIsImRhdGEiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsV0FBRCxDQUF2Qjs7QUFDQSxJQUFJQyxNQUFNLEdBQUdBLE1BQU0sSUFBSUQsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBekM7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHRixPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFFQSxJQUFJRyxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFZO0FBQ3hCLE9BQUtDLElBQUw7QUFDSCxDQUZEO0FBQUEsSUFHSUMsS0FB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bEIsQ0FBRCxDQUFOLENBQWlDUSxLQUFqQyxDQUF1QyxDQUFDLENBQXhDLENBQWhCO0FBQ0EsTUFBSWpCLE9BQU8sR0FBRyxJQUFJaEIsT0FBSixDQUFZaUQsU0FBWixDQUFkO0FBQ0F0QixFQUFBQSxJQUFJLEdBQUdYLE9BQU8sQ0FBQ0YsTUFBUixDQUFlZixNQUFNLENBQUNlLE1BQVAsQ0FBY2EsSUFBZCxDQUFmLENBQVA7QUFDQSxTQUFPQSxJQUFQO0FBQ0gsQ0FORDtBQVNBOzs7Ozs7QUFJQXhCLEtBQUssQ0FBQytCLFNBQU4sR0FBa0IsVUFBVWdCLElBQVYsRUFBZ0I7QUFDOUIsU0FBTyxLQUFLdkMsT0FBTCxDQUFhQSxPQUFiLENBQXFCdUMsSUFBckIsQ0FBUDtBQUNILENBRkQ7QUFJQTs7Ozs7O0FBSUEvQyxLQUFLLENBQUNxQixTQUFOLEdBQWtCLFVBQVUwQixJQUFWLEVBQWdCO0FBQzlCLFNBQU8sS0FBS3RDLE9BQUwsQ0FBYUEsT0FBYixDQUFxQnNDLElBQXJCLENBQVA7QUFDSCxDQUZEOztBQUlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsWUFBWTtBQUN6QixNQUFJLENBQUM3QyxVQUFMLEVBQWlCQSxVQUFVLEdBQUcsSUFBSU4sU0FBSixFQUFiO0FBQ2pCLFNBQU9NLFVBQVA7QUFDSCxDQUhEIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSlNFbmNyeXB0ID0gcmVxdWlyZShcImpzZW5jcnlwdFwiKTtcclxudmFyIEJhc2U2NCA9IEJhc2U2NCB8fCByZXF1aXJlKCdiYXNlNjQnKS5CYXNlNjQ7XHJcbnZhciBDcnlwdG9yID0gcmVxdWlyZSgnY3J5cHRvcicpO1xyXG5cclxubGV0IFByb3h5RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG59LFxyXG4gICAgcHJveHkgPSBQcm94eURhdGEucHJvdG90eXBlLFxyXG4gICAgX3NwZWNpYWwgPSBcIlwiLFxyXG4gICAgX2ltZ19saXN0ID0ge30sXHJcbiAgICBnX2luc3RhbmNlID0gbnVsbDtcclxuXHJcblxyXG5wcm94eS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGVua2V5ID0gW107XHJcbiAgICBlbmtleS5wdXNoKFwiTFMwdExTMUNSVWRKVGlCUVZVSk1TVU1nUzBWWkxTMHRMUzBLVFVsSFpVMUJNRWREVTNGSFUwbGlNMFJSUlVKQlVWVkJRVFJIVFVGRVEwSnBRVXRDWjBoS1F6Qk9iR1IwYkdFMVRIWmpXR3ByXCIpO1xyXG4gICAgZW5rZXkucHVzaChcImFXOXZSRlJXUmtsRlJ3cG1UR3RETDJkNmQzVXhOak5GV210RmQzTlJNSGtyY0ZGQ1QzRmFMMHhVTkVkR1ZuWlFiMnh0YlZodVNUTXpkMUZ6UVhOblRVcHNaakV3TW5kak4xRmFDbVYwY2tKSlwiKTtcclxuICAgIGVua2V5LnB1c2goXCJOSE5wV0ZaVlpuVnZkRWhqUjBRMk5pdFVVRXh4TldwUlEwaDBlRFpRTjNSVEsyRmpNME5sUVRWdmR6Rm9PV05zUW1KM1JFRjNNV2hhVDBZS2RtazJhMmRtUkRNdk16bDBURUZoU0VGblRVSkJcIik7XHJcbiAgICBlbmtleS5wdXNoKFwiUVVVOUNpMHRMUzB0UlU1RUlGQlZRa3hKUXlCTFJWa3RMUzB0TFFcIilcclxuICAgIGxldCBkZWtleSA9IFtdO1xyXG4gICAgZGVrZXkucHVzaChcIkxTMHRMUzFDUlVkSlRpQlNVMEVnVUZKSlZrRlVSU0JMUlZrdExTMHRMUXBOU1VsRFdGRkpRa0ZCUzBKblVVUlBlUzlsVkU5dGVYbE1XWEpLV1dSUk9UVkhjUzl5U21aNmNFeEdUamN2VTFSVlNFUjJhMDFvWkM5XCIpO1xyXG4gICAgZGVrZXkucHVzaChcIlZRM28wZVVockNrVnNSVkYzWjFwYWVtdGtUa2RGYlc5RmNHOVFPRlF6VkVocVYxSktSelp4V0ZKS2MyMWFiMnh5VTNSSVRrVnhSRTVGVkdvME0zZFFXSEZ2ZWs1TVRYZ0tMMkp3WjJOclRUUlpiR2R6V0VwU2RqXCIpO1xyXG4gICAgZGVrZXkucHVzaChcImhEU0dKRlNGRjFTamRCZWpOT2IxQnBNMWRDYkV0NFVYSlJaMHBqU0c1MU0ydFBjV0ozVFhvdmQwbEVRVkZCUWdwQmIwZENRVXMwTVVreE0zazFUMmxCT1hnM1NTOUJkMkp3VmxoT1NuTkVTVm81YTFwSlRHTk9SXCIpO1xyXG4gICAgZGVrZXkucHVzaChcIml0aGJ6SkVTbVJwZVdzdlYxTnBVbmxhY2s1aFNqUXdDalpPYm05alVIaFhiREZUUVhwTE1WTkZTbmQ0ZW1ONFZURmFVVVpYT0hGVFFWVmxSV2xPV2xkU2R6SlNjamQ0YkRnd1YzaHFjWEJZY2xaamVrMW9SemtLXCIpO1xyXG4gICAgZGVrZXkucHVzaChcImIxTndhV05VYVhSS1VtTlhjRFZTYW5VemRqUk9WbFJIV2pJeE1XZFBjWEF4UmpGSE1HVkpibU4zWm5od1ZtTjRRV3RGUVRZd2VrODFUalZvVWs1MVVBcHhSVUk0YVcxUVVYVlVkbkIxZDNGTE9ETTRWVVoxUWpWXCIpO1xyXG4gICAgZGVrZXkucHVzaChcIlhNRU5hZGpCNVZsQkxkR2RuYjNseVQxUkdTMnRpY1U0eGR6TmplbEp5VlRWdlprdGljWEUxQ2tjNWJXNHJVRGRVVTFGS1FrRlBSRGxRU1dSNU9VdFVPRnBaT0drd09HbHBZMFZuUlZRNE5IZE5lRnBvZDB4MGJYXCIpO1xyXG4gICAgZGVrZXkucHVzaChcIlZ6WjJJNFpqQk5hR3BuWTNoeU1UZ0tVVk5xTTNwQ01XUlVMMDlyWW1kVFQxWXZSa05DZDBkT2RUSnlVa3hNZFZSQ1VXTkRVVWRCZFdaR0wxaGxkMFYyYTNKQ1pUZzRiVW81V21KVFNUYzVLd3BHYzBKcU1Fc3hkXCIpO1xyXG4gICAgZGVrZXkucHVzaChcIkZGdk5FaG5Va1pQVmpZMUswTjVkM2xJWjJRMU1qVmFiMGxJVTI5NVVHNWhTSFUzUVRCUlIyUnlXamQ0ZDBwVGNXSlhhME5SU0VZeENrbHpXVWhaV0cxc01Ha3dOVmRsVm5WcVVVc3dUV1UxTDJabVVFZG1aVkJFXCIpO1xyXG4gICAgZGVrZXkucHVzaChcIlRGZFFiVTg0VkhCUlVFbG9RMDVRWWxOb2VUTjNWbGcxYWxjd1NFOVlabEVLZEVkYU1HSnZXVXBFUkRoVmJIVk9UV2MxWTBOUlVVUlBNRmRWZWtKaFRpdG1Oa3hUYkVkSWNUQjFaM2s0WVdoYVFqSTVRMVF3YWk4XCIpO1xyXG4gICAgZGVrZXkucHVzaChcIjJUazlPYVcxb01ncHJOVzVVZUVsS1ZXUXZSMlI2T0ZCUlUyMUJPR3M1YUdoVU5qUkJlR05DVFdwWFJHdDBOMkpFTkd0eGJ3b3RMUzB0TFVWT1JDQlNVMEVnVUZKSlZrRlVSU0JMUlZrdExTMHRMUT09XCIpO1xyXG4gICAgdGhpcy5lbmNyeXB0ID0gbmV3IEpTRW5jcnlwdC5KU0VuY3J5cHQoKTtcclxuICAgIHRoaXMuZGVjcnlwdCA9IG5ldyBKU0VuY3J5cHQuSlNFbmNyeXB0KCk7XHJcbiAgICB0aGlzLmVuY3J5cHQuc2V0UHVibGljS2V5KEJhc2U2NC5kZWNvZGUoZW5rZXlbMF0gKyBlbmtleVsxXSArIGVua2V5WzJdICsgZW5rZXlbM10pKTtcclxuICAgIHRoaXMuZGVjcnlwdC5zZXRQcml2YXRlS2V5KEJhc2U2NC5kZWNvZGUoZGVrZXlbMF0gKyBkZWtleVsxXSArIGRla2V5WzJdICsgZGVrZXlbM10gKyBkZWtleVs0XSArIGRla2V5WzVdICsgZGVrZXlbNl0gKyBkZWtleVs3XSArIGRla2V5WzhdICsgZGVrZXlbOV0pKTtcclxuICAgIHRoaXMuY3J5cHRvciA9IG51bGw7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6L+U5ZueaHR0cOWIl+ihqOe7meS4juacjeWKoeerr1xyXG4gKi9cclxucHJveHkuZ2V0SHR0cExpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgaHR0cF9saXN0ID0gXCJcIjtcclxuICAgIGlmICh0aGlzLl9odHRwX2xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IGh0dHAgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2h0dHBfbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaGVhZCA9IHRoaXMuX2h0dHBfbGlzdFtpXS5oZWFkO1xyXG4gICAgICAgICAgICBsZXQgY3J5cHRvciA9IG5ldyBDcnlwdG9yKHRoaXMuanNkZWNyeXB0KGhlYWQua2V5KSk7XHJcbiAgICAgICAgICAgIGh0dHAgPSBodHRwLmNvbmNhdChjcnlwdG9yLmRlY29kZShCYXNlNjQuZGVjb2RlKHRoaXMuX2h0dHBfbGlzdFtpXS5ib2R5KSkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBrZXkgPSBTdHJpbmcoQ3J5cHRvci5oYXNoKFwiXCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTAwKSwgJ21kNScpKS5zbGljZSgwLCA2KVxyXG4gICAgICAgIGxldCBlbmtleSA9IHRoaXMuanNlbmNyeXB0KGtleSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaHR0cCk7XHJcbiAgICAgICAgbGV0IGNyeXB0b3IgPSBuZXcgQ3J5cHRvcihrZXkpXHJcbiAgICAgICAgbGV0IHBhdGggPSBCYXNlNjQuZW5jb2RlKGNyeXB0b3IuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGh0dHApKSlcclxuICAgICAgICBodHRwX2xpc3QgPSBKU09OLnN0cmluZ2lmeSh7IGhlYWQ6IHsgcm91dGU6IFwiaHR0cC5nZXREb21haW5cIiwga2V5OiBlbmtleSB9LCBib2R5OiBwYXRoIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGh0dHBfbGlzdDtcclxufVxyXG5cclxucHJveHkuZ2V0RW5jb2RlVXJsID0gZnVuY3Rpb24gKGJvZHkpIHtcclxuICAgIGlmICghYm9keSB8fCBib2R5ID09IFwiXCIpIHJldHVybiBjb25zb2xlLmVycm9yKFwiYm9keeW8guW4uFwiKTtcclxuICAgIGxldCBjdXJrZXkgPSBTdHJpbmcoQ3J5cHRvci5oYXNoKFwiXCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTAwKSwgJ21kNScpKS5zbGljZSgwLCA2KTtcclxuICAgIGxldCBlbmtleSA9IHRoaXMuanNlbmNyeXB0KGN1cmtleSk7XHJcbiAgICBsZXQgY3J5cHRvciA9IG5ldyBDcnlwdG9yKGN1cmtleSk7XHJcbiAgICBib2R5ID0gQmFzZTY0LmVuY29kZShjcnlwdG9yLmVuY29kZShKU09OLnN0cmluZ2lmeShib2R5KSkpO1xyXG4gICAgcmV0dXJuIHtcImRhdGFcIjpib2R5LFwiZGF0YUtleVwiOmVua2V5fTtcclxufVxyXG5cclxucHJveHkuZ2V0RGVjb2RlVXJsID0gZnVuY3Rpb24gKGJvZHksIGtleSkge1xyXG4gICAgaWYgKCFib2R5IHx8ICFrZXkgfHwgYm9keSA9PSBcIlwiIHx8IGtleSA9PSBcIlwiKSByZXR1cm4gY29uc29sZS5lcnJvcihcImJvZHkg5oiWIGtleSDlvILluLhcIik7XHJcbiAgICBjb25zb2xlLmxvZyhcInJlcVVybCBkZWNvZGVcIiwgdHlwZW9mIHRoaXMuanNkZWNyeXB0KGtleSksIHRoaXMuanNkZWNyeXB0KGtleSkpXHJcbiAgICBsZXQgY3J5cHRvciA9IG5ldyBDcnlwdG9yKHRoaXMuanNkZWNyeXB0KGtleSkpO1xyXG4gICAgYm9keSA9IGNyeXB0b3IuZGVjb2RlKEJhc2U2NC5kZWNvZGUoYm9keSkpXHJcbiAgICByZXR1cm4gYm9keTtcclxufVxyXG5cclxucHJveHkuZ2V0RW5jb2RlRGF0YSA9IGZ1bmN0aW9uIChib2R5KSB7XHJcbiAgICBpZiAoIWJvZHkgfHwgYm9keSA9PSBcIlwiKSByZXR1cm4gY29uc29sZS5lcnJvcihcImJvZHnlvILluLhcIik7XHJcbiAgICBsZXQgdHJhbnNtaXRLZXkgPSBTdHJpbmcoQ3J5cHRvci5oYXNoKFwiXCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTAwKSwgJ21kNScpKS5zbGljZSgyLDgpO1xyXG4gICAgbGV0IGVua2V5ID0gU3RyaW5nKENyeXB0b3IuaGFzaCh0cmFuc21pdEtleSwgXCJtZDVcIikpLnNsaWNlKC02KTtcclxuICAgIGxldCBjcnlwdG9yID0gbmV3IENyeXB0b3IoZW5rZXkpO1xyXG4gICAgYm9keSA9IEJhc2U2NC5lbmNvZGUoY3J5cHRvci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoYm9keSkpKTtcclxuICAgIHJldHVybiB7XCJkYXRhXCI6Ym9keSxcImRhdGFLZXlcIjp0cmFuc21pdEtleX07XHJcbn1cclxuXHJcbnByb3h5LmdldERlY29kZURhdGEgPSBmdW5jdGlvbiAoYm9keSwga2V5KSB7XHJcbiAgICBpZiAoIWJvZHkgfHwgIWtleSB8fCBib2R5ID09IFwiXCIgfHwga2V5ID09IFwiXCIpIHJldHVybiBjb25zb2xlLmVycm9yKFwiYm9keSDmiJYga2V5IOW8guW4uFwiKTtcclxuICAgIGxldCBlbmNvZGVLZXkgPSBTdHJpbmcoQ3J5cHRvci5oYXNoKGtleSwgXCJtZDVcIikpLnNsaWNlKC02KTtcclxuICAgIGxldCBjcnlwdG9yID0gbmV3IENyeXB0b3IoZW5jb2RlS2V5KTtcclxuICAgIGJvZHkgPSBjcnlwdG9yLmRlY29kZShCYXNlNjQuZGVjb2RlKGJvZHkpKTtcclxuICAgIHJldHVybiBib2R5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIHJzYSDliqDlr4ZcclxuICogQHBhcmFtIHthbnl9IGRhdGFcclxuICovXHJcbnByb3h5LmpzZW5jcnlwdCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbmNyeXB0LmVuY3J5cHQoZGF0YSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiByc2Eg6Kej5a+GXHJcbiAqIEBwYXJhbSB7U3Rpbmd9IGRhdGFcclxuICovXHJcbnByb3h5LmpzZGVjcnlwdCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kZWNyeXB0LmRlY3J5cHQoZGF0YSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCFnX2luc3RhbmNlKSBnX2luc3RhbmNlID0gbmV3IFByb3h5RGF0YSgpO1xyXG4gICAgcmV0dXJuIGdfaW5zdGFuY2U7XHJcbn07Il19