
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/public/script/shop/shopFastPanel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '069f2IIsuZJ85kXaa2rWCsy', 'shopFastPanel');
// modules/public/script/shop/shopFastPanel.js

"use strict";

var payType = {
  1: "bankcardpay",
  2: "alipay",
  3: "wechatpay"
};
glGame.baseclass.extend({
  properties: {
    btn_pay: cc.Button
  },
  onLoad: function onLoad() {
    glGame.emitter.on("payCreateOrdererror", this.payCreateOrder, this);
  },
  payCreateOrder: function payCreateOrder() {
    this.btn_pay.interactable = true;
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "btn_close":
        this.btn_closeCb();
        break;

      case "btn_save":
        this.btn_saveCb();
        break;

      case "btn_open":
        this.btn_openCb();
        break;

      case "btn_paynormal":
        this.btn_paynormalCb();
        break;

      case "banker":
      case "copy_banker":
        glGame.platform.copyToClip(this.ShopData.currentRotationAccount.bankName);
        break;

      case "bankerNumber":
      case "copy_number":
        glGame.platform.copyToClip(this.ShopData.currentRotationAccount.accountName);
        break;

      case "name":
      case "copy_name":
        glGame.platform.copyToClip(this.ShopData.currentRotationAccount.name);
        break;

      case "bankarea":
      case "copy_bankarea":
        glGame.platform.copyToClip(this.ShopData.currentRotationAccount.bankBranches);
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },
  initUI: function initUI(data, rechargecoin, giveProportion, type) {
    console.log("这是当前的数据", data);
    this.ShopData = data;
    this.giveProportion = giveProportion;
    this.rechargecoin = rechargecoin;
    this.depositType = type;
    this.CurTypeNode = this.node.getChildByName(payType[data.currentRotationAccount.type]);
    this.curType = data.currentRotationAccount.type;
    this.CurTypeNode.active = true;

    if (data.currentRotationAccount.type == 2 || data.currentRotationAccount.type == 3) {
      this.qrcode = data.currentRotationAccount.qrCode;
      var qrCode111 = glGame.user.get('url').resource_url + data.currentRotationAccount.qrCode;
      glGame.panel.showRemoteImage(this.CurTypeNode.getChildByName("QRcode"), qrCode111);
      this.CurTypeNode.getChildByName("name").getChildByName("acceptname").getComponent(cc.Label).string = data.currentRotationAccount.name;
    }

    if (data.currentRotationAccount.type == 1) {
      var bankerNode = this.CurTypeNode.getChildByName("acceptName");
      bankerNode.getChildByName('banker').getComponent(cc.Label).string = data.currentRotationAccount.bankName;
      bankerNode.getChildByName('bankerNumber').getComponent(cc.Label).string = data.currentRotationAccount.accountName;

      if (data.currentRotationAccount.name.length > 10) {
        bankerNode.getChildByName('name').getComponent(cc.Label).overflow = cc.Label.Overflow.SHRINK;
        bankerNode.getChildByName('name').width = 250;
      }

      console.log("这是当前的overflow", bankerNode.getChildByName('name').getComponent(cc.Label));
      bankerNode.getChildByName('name').getComponent(cc.Label).string = data.currentRotationAccount.name;
    }

    this.CurTypeNode.getChildByName("bg").getChildByName("tip").getChildByName("New Label").getComponent(cc.Label).string = "*\u6E29\u99A8\u63D0\u793A\uFF1A\u5355\u7B14\u91D1\u989D\u5145\u503C".concat(this.getFloat(data.currentRotationAccount.config.rechargeMin), "\u5143\u8D77");
    this.CurTypeNode.getChildByName("pay").getChildByName("rechargecoin").getSelfFunc().setString("".concat(rechargecoin, "\u5143"));
  },
  onTextChanged: function onTextChanged(text, editbox, customEventData) {
    var reg = /[\u4E00-\u9FA5\uF900-\uFA2D]/;
    var isChinese = reg.test(editbox.string);
    console.log('是否为中文字符', isChinese);

    if (isChinese) {
      editbox.string = '';
      editbox.node.getChildByName('TEXT_LABEL').getComponent(cc.Label).string = '';
      glGame.panel.showErrorTip(glGame.tips.SHOP.INVALIDCONTENT);
      return;
    }
  },
  // 手机输入框改变
  onCardEditChanged: function onCardEditChanged(text, editbox, customEventData) {
    if (text.length > 5) {
      text = text.substring(0, 5);
    }

    var cardTail = parseInt(text);

    if (isNaN(cardTail)) {
      cardTail = 0;
    }

    cardTail = Math.abs(cardTail);
    editbox.string = cardTail;
    editbox.node.getChildByName('TEXT_LABEL').getComponent(cc.Label).string = cardTail;
  },
  btn_paynormalCb: function btn_paynormalCb() {
    var _this = this;

    if (this.isSend) return glGame.panel.showErrorTip(glGame.tips.SHOP.TOOBUSY);
    var orderName = this.CurTypeNode.getChildByName("pay").getChildByName("rechargename").getChildByName("EditBox").getComponent(cc.EditBox).string;
    var orderNum = this.CurTypeNode.getChildByName("pay").getChildByName("rechargeNumber").getChildByName("EditBox").getComponent(cc.EditBox).string;

    if (orderName == '') {
      glGame.panel.showErrorTip(glGame.tips.SHOP.USERNAMENULL);
      return;
    }

    if (orderNum == "") {
      glGame.panel.showErrorTip(this.curType == 1 ? glGame.tips.SHOP.CARDTAILNULL : glGame.tips.SHOP.ORDERTAILNULL);
      return;
    }

    if (orderNum.length != 5) {
      glGame.panel.showErrorTip(this.curType == 1 ? glGame.tips.SHOP.INVALIDCARDTAIL : glGame.tips.SHOP.INVALIDORDERTAIL);
      return;
    }

    if (orderName != '' && (this.type == 1 || this.type == 2)) {
      var _reg = /^[\u4E00-\u9FA5\uf900-\ufa2d·s]{2,20}$/;

      if (!_reg.test(orderName)) {
        glGame.panel.showErrorTip(glGame.tips.SHOP.INVALIDUSERNAME);
        return;
      }
    }

    var reg = /^\w{2,15}$/;
    var isCoinNum_matcher = reg.test(orderNum);

    if (!isCoinNum_matcher) {
      glGame.panel.showErrorTip(this.curType == 1 ? glGame.tips.SHOP.INVALIDCARDTAIL : glGame.tips.SHOP.INVALIDORDERTAIL);
      return;
    }

    var msg = {};
    msg.type = this.depositType;
    msg.orderMoney = Number(this.rechargecoin) * 100;
    msg.giveProportion = this.giveProportion;
    msg.companyAccountId = this.ShopData.currentRotationAccount.accountId;
    msg.companyAccountName = this.ShopData.currentRotationAccount.name;
    msg.companyAccountNo = this.ShopData.currentRotationAccount.accountName;

    if (this.ShopData.currentRotationAccount.bankName) {
      msg.companyAccountBankName = this.ShopData.currentRotationAccount.bankName;
    }

    msg.companyDepositName = this.CurTypeNode.getChildByName("pay").getChildByName("rechargename").getChildByName("EditBox").getComponent(cc.EditBox).string.trim();
    msg.externalOrderSn = this.CurTypeNode.getChildByName("pay").getChildByName("rechargeNumber").getChildByName("EditBox").getComponent(cc.EditBox).string;
    msg.pageId = this.ShopData.id;
    console.log("这是当前的提交信息", msg);
    this.isSend = true;
    this.node.runAction(cc.sequence(cc.delayTime(5), cc.callFunc(function () {
      _this.isSend = false;
    })));
    glGame.gameNet.send_msg('http.ReqPayCreateOrder', msg, function (route, data) {
      if (data.state) {
        glGame.emitter.emit("showSuccessAnim", true);
      } else {
        glGame.emitter.emit("showSuccessAnim", false);
      }

      _this.node.destroy();

      console.log("这是创建订单的回包", data);
    });
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  btn_closeCb: function btn_closeCb() {
    this.remove();
  },
  btn_saveCb: function btn_saveCb() {
    if (cc.sys.isNative) {
      glGame.platform.saveToLocal(glGame.user.get("url").resource_url + this.qrcode);
    }
  },
  btn_openCb: function btn_openCb() {
    var type = 1;

    if (this.ShopData.currentRotationAccount.type == 2) {
      type = 5;
    } else if (this.ShopData.currentRotationAccount.type == 3) {
      type = 2;
    }

    var jump = glGame.user.get('url').service_url_jump;
    var url = jump + '?' + "jump_type=".concat(type);
    cc.sys.openURL(url);
  },
  OnDestroy: function OnDestroy() {
    glGame.emitter.off("payCreateOrdererror", this);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccHVibGljXFxzY3JpcHRcXHNob3BcXHNob3BGYXN0UGFuZWwuanMiXSwibmFtZXMiOlsicGF5VHlwZSIsImdsR2FtZSIsImJhc2VjbGFzcyIsImV4dGVuZCIsInByb3BlcnRpZXMiLCJidG5fcGF5IiwiY2MiLCJCdXR0b24iLCJvbkxvYWQiLCJlbWl0dGVyIiwib24iLCJwYXlDcmVhdGVPcmRlciIsImludGVyYWN0YWJsZSIsIm9uQ2xpY2siLCJuYW1lIiwibm9kZSIsImJ0bl9jbG9zZUNiIiwiYnRuX3NhdmVDYiIsImJ0bl9vcGVuQ2IiLCJidG5fcGF5bm9ybWFsQ2IiLCJwbGF0Zm9ybSIsImNvcHlUb0NsaXAiLCJTaG9wRGF0YSIsImN1cnJlbnRSb3RhdGlvbkFjY291bnQiLCJiYW5rTmFtZSIsImFjY291bnROYW1lIiwiYmFua0JyYW5jaGVzIiwiY29uc29sZSIsImVycm9yIiwiaW5pdFVJIiwiZGF0YSIsInJlY2hhcmdlY29pbiIsImdpdmVQcm9wb3J0aW9uIiwidHlwZSIsImxvZyIsImRlcG9zaXRUeXBlIiwiQ3VyVHlwZU5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsImN1clR5cGUiLCJhY3RpdmUiLCJxcmNvZGUiLCJxckNvZGUiLCJxckNvZGUxMTEiLCJ1c2VyIiwiZ2V0IiwicmVzb3VyY2VfdXJsIiwicGFuZWwiLCJzaG93UmVtb3RlSW1hZ2UiLCJnZXRDb21wb25lbnQiLCJMYWJlbCIsInN0cmluZyIsImJhbmtlck5vZGUiLCJsZW5ndGgiLCJvdmVyZmxvdyIsIk92ZXJmbG93IiwiU0hSSU5LIiwid2lkdGgiLCJnZXRGbG9hdCIsImNvbmZpZyIsInJlY2hhcmdlTWluIiwiZ2V0U2VsZkZ1bmMiLCJzZXRTdHJpbmciLCJvblRleHRDaGFuZ2VkIiwidGV4dCIsImVkaXRib3giLCJjdXN0b21FdmVudERhdGEiLCJyZWciLCJpc0NoaW5lc2UiLCJ0ZXN0Iiwic2hvd0Vycm9yVGlwIiwidGlwcyIsIlNIT1AiLCJJTlZBTElEQ09OVEVOVCIsIm9uQ2FyZEVkaXRDaGFuZ2VkIiwic3Vic3RyaW5nIiwiY2FyZFRhaWwiLCJwYXJzZUludCIsImlzTmFOIiwiTWF0aCIsImFicyIsImlzU2VuZCIsIlRPT0JVU1kiLCJvcmRlck5hbWUiLCJFZGl0Qm94Iiwib3JkZXJOdW0iLCJVU0VSTkFNRU5VTEwiLCJDQVJEVEFJTE5VTEwiLCJPUkRFUlRBSUxOVUxMIiwiSU5WQUxJRENBUkRUQUlMIiwiSU5WQUxJRE9SREVSVEFJTCIsIklOVkFMSURVU0VSTkFNRSIsImlzQ29pbk51bV9tYXRjaGVyIiwibXNnIiwib3JkZXJNb25leSIsIk51bWJlciIsImNvbXBhbnlBY2NvdW50SWQiLCJhY2NvdW50SWQiLCJjb21wYW55QWNjb3VudE5hbWUiLCJjb21wYW55QWNjb3VudE5vIiwiY29tcGFueUFjY291bnRCYW5rTmFtZSIsImNvbXBhbnlEZXBvc2l0TmFtZSIsInRyaW0iLCJleHRlcm5hbE9yZGVyU24iLCJwYWdlSWQiLCJpZCIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwiZGVsYXlUaW1lIiwiY2FsbEZ1bmMiLCJnYW1lTmV0Iiwic2VuZF9tc2ciLCJyb3V0ZSIsInN0YXRlIiwiZW1pdCIsImRlc3Ryb3kiLCJ2YWx1ZSIsImRpdiIsInRvU3RyaW5nIiwicmVtb3ZlIiwic3lzIiwiaXNOYXRpdmUiLCJzYXZlVG9Mb2NhbCIsImp1bXAiLCJzZXJ2aWNlX3VybF9qdW1wIiwidXJsIiwib3BlblVSTCIsIk9uRGVzdHJveSIsIm9mZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxPQUFPLEdBQUc7QUFDWixLQUFHLGFBRFM7QUFFWixLQUFHLFFBRlM7QUFHWixLQUFHO0FBSFMsQ0FBaEI7QUFLQUMsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxNQUFqQixDQUF3QjtBQUNwQkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLE9BQU8sRUFBRUMsRUFBRSxDQUFDQztBQURKLEdBRFE7QUFJcEJDLEVBQUFBLE1BSm9CLG9CQUlY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QSxNQUFBQSxJQUFJLEdBQUcsQ0FBUDtBQUNILEtBRkQsTUFFTyxJQUFJLEtBQUtYLFFBQUwsQ0FBY0Msc0JBQWQsQ0FBcUNVLElBQXJDLElBQTZDLENBQWpELEVBQW9EO0FBQ3ZEQSxNQUFBQSxJQUFJLEdBQUcsQ0FBUDtBQUNIOztBQUVELFFBQUl5RixJQUFJLEdBQUd6SCxNQUFNLENBQUMwQyxJQUFQLENBQVlDLEdBQVosQ0FBZ0IsS0FBaEIsRUFBdUIrRSxnQkFBbEM7QUFDQSxRQUFJQyxHQUFHLEdBQUdGLElBQUksR0FBRyxHQUFQLHVCQUEwQnpGLElBQTFCLENBQVY7QUFDQTNCLElBQUFBLEVBQUUsQ0FBQ2lILEdBQUgsQ0FBT00sT0FBUCxDQUFlRCxHQUFmO0FBQ0gsR0ExS21CO0FBMktwQkUsRUFBQUEsU0EzS29CLHVCQTJLUjtBQUNSN0gsSUFBQUEsTUFBTSxDQUFDUSxPQUFQLENBQWVzSCxHQUFmLENBQW1CLHFCQUFuQixFQUEwQyxJQUExQztBQUNIO0FBN0ttQixDQUF4QiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGF5VHlwZSA9IHtcclxuICAgIDE6IFwiYmFua2NhcmRwYXlcIixcclxuICAgIDI6IFwiYWxpcGF5XCIsXHJcbiAgICAzOiBcIndlY2hhdHBheVwiLFxyXG59XHJcbmdsR2FtZS5iYXNlY2xhc3MuZXh0ZW5kKHtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBidG5fcGF5OiBjYy5CdXR0b24sXHJcbiAgICB9LFxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwicGF5Q3JlYXRlT3JkZXJlcnJvclwiLCB0aGlzLnBheUNyZWF0ZU9yZGVyLCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICBwYXlDcmVhdGVPcmRlcigpIHtcclxuICAgICAgICB0aGlzLmJ0bl9wYXkuaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICBvbkNsaWNrKG5hbWUsIG5vZGUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImJ0bl9jbG9zZVwiOiB0aGlzLmJ0bl9jbG9zZUNiKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX3NhdmVcIjogdGhpcy5idG5fc2F2ZUNiKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX29wZW5cIjogdGhpcy5idG5fb3BlbkNiKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX3BheW5vcm1hbFwiOiB0aGlzLmJ0bl9wYXlub3JtYWxDYigpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJhbmtlclwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiY29weV9iYW5rZXJcIjogZ2xHYW1lLnBsYXRmb3JtLmNvcHlUb0NsaXAodGhpcy5TaG9wRGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LmJhbmtOYW1lKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJiYW5rZXJOdW1iZXJcIjpcclxuICAgICAgICAgICAgY2FzZSBcImNvcHlfbnVtYmVyXCI6IGdsR2FtZS5wbGF0Zm9ybS5jb3B5VG9DbGlwKHRoaXMuU2hvcERhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5hY2NvdW50TmFtZSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiY29weV9uYW1lXCI6IGdsR2FtZS5wbGF0Zm9ybS5jb3B5VG9DbGlwKHRoaXMuU2hvcERhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5uYW1lKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJiYW5rYXJlYVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiY29weV9iYW5rYXJlYVwiOlxyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBsYXRmb3JtLmNvcHlUb0NsaXAodGhpcy5TaG9wRGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LmJhbmtCcmFuY2hlcyk7IGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmVycm9yKFwibm8gZmluZCBidXR0b24gbmFtZSAtPiAlc1wiLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5pdFVJKGRhdGEsIHJlY2hhcmdlY29pbiwgZ2l2ZVByb3BvcnRpb24sIHR5cGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIui/meaYr+W9k+WJjeeahOaVsOaNrlwiLCBkYXRhKVxyXG4gICAgICAgIHRoaXMuU2hvcERhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZ2l2ZVByb3BvcnRpb24gPSBnaXZlUHJvcG9ydGlvbjtcclxuICAgICAgICB0aGlzLnJlY2hhcmdlY29pbiA9IHJlY2hhcmdlY29pblxyXG4gICAgICAgIHRoaXMuZGVwb3NpdFR5cGUgPSB0eXBlXHJcbiAgICAgICAgdGhpcy5DdXJUeXBlTm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShwYXlUeXBlW2RhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC50eXBlXSk7XHJcbiAgICAgICAgdGhpcy5jdXJUeXBlID0gZGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LnR5cGVcclxuICAgICAgICB0aGlzLkN1clR5cGVOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC50eXBlID09IDIgfHwgZGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LnR5cGUgPT0gMykge1xyXG4gICAgICAgICAgICB0aGlzLnFyY29kZSA9IGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5xckNvZGVcclxuICAgICAgICAgICAgbGV0IHFyQ29kZTExMSA9IGdsR2FtZS51c2VyLmdldCgndXJsJykucmVzb3VyY2VfdXJsICsgZGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LnFyQ29kZVxyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1JlbW90ZUltYWdlKHRoaXMuQ3VyVHlwZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJRUmNvZGVcIiksIHFyQ29kZTExMSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQ3VyVHlwZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJuYW1lXCIpLmdldENoaWxkQnlOYW1lKFwiYWNjZXB0bmFtZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5uYW1lXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhLmN1cnJlbnRSb3RhdGlvbkFjY291bnQudHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGxldCBiYW5rZXJOb2RlID0gdGhpcy5DdXJUeXBlTm9kZS5nZXRDaGlsZEJ5TmFtZShcImFjY2VwdE5hbWVcIik7XHJcbiAgICAgICAgICAgIGJhbmtlck5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ2JhbmtlcicpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LmJhbmtOYW1lO1xyXG4gICAgICAgICAgICBiYW5rZXJOb2RlLmdldENoaWxkQnlOYW1lKCdiYW5rZXJOdW1iZXInKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5hY2NvdW50TmFtZTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5uYW1lLmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBiYW5rZXJOb2RlLmdldENoaWxkQnlOYW1lKCduYW1lJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5vdmVyZmxvdyA9IGNjLkxhYmVsLk92ZXJmbG93LlNIUklOSztcclxuICAgICAgICAgICAgICAgIGJhbmtlck5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ25hbWUnKS53aWR0aCA9IDI1MFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6L+Z5piv5b2T5YmN55qEb3ZlcmZsb3dcIiwgYmFua2VyTm9kZS5nZXRDaGlsZEJ5TmFtZSgnbmFtZScpLmdldENvbXBvbmVudChjYy5MYWJlbCkpXHJcbiAgICAgICAgICAgIGJhbmtlck5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ25hbWUnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLkN1clR5cGVOb2RlLmdldENoaWxkQnlOYW1lKFwiYmdcIikuZ2V0Q2hpbGRCeU5hbWUoXCJ0aXBcIikuZ2V0Q2hpbGRCeU5hbWUoXCJOZXcgTGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBcclxuICAgICAgICBgKua4qemmqOaPkOekuu+8muWNleeslOmHkemineWFheWAvCR7dGhpcy5nZXRGbG9hdChkYXRhLmN1cnJlbnRSb3RhdGlvbkFjY291bnQuY29uZmlnLnJlY2hhcmdlTWluKX3lhYPotbdgO1xyXG4gICAgICAgIHRoaXMuQ3VyVHlwZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJwYXlcIikuZ2V0Q2hpbGRCeU5hbWUoXCJyZWNoYXJnZWNvaW5cIikuZ2V0U2VsZkZ1bmMoKS5zZXRTdHJpbmcoYCR7cmVjaGFyZ2Vjb2lufeWFg2ApXHJcbiAgICB9LFxyXG4gICAgb25UZXh0Q2hhbmdlZCh0ZXh0LCBlZGl0Ym94LCBjdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBsZXQgcmVnID0gL1tcXHU0RTAwLVxcdTlGQTVcXHVGOTAwLVxcdUZBMkRdLztcclxuICAgICAgICBsZXQgaXNDaGluZXNlID0gcmVnLnRlc3QoZWRpdGJveC5zdHJpbmcpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygn5piv5ZCm5Li65Lit5paH5a2X56ymJywgaXNDaGluZXNlKTtcclxuICAgICAgICBpZiAoaXNDaGluZXNlKSB7XHJcbiAgICAgICAgICAgIGVkaXRib3guc3RyaW5nID0gJydcclxuICAgICAgICAgICAgZWRpdGJveC5ub2RlLmdldENoaWxkQnlOYW1lKCdURVhUX0xBQkVMJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSAnJ1xyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0Vycm9yVGlwKGdsR2FtZS50aXBzLlNIT1AuSU5WQUxJRENPTlRFTlQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDmiYvmnLrovpPlhaXmoYbmlLnlj5hcclxuICAgIG9uQ2FyZEVkaXRDaGFuZ2VkKHRleHQsIGVkaXRib3gsIGN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmKHRleHQubGVuZ3RoID4gNSkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjYXJkVGFpbCA9IHBhcnNlSW50KHRleHQpO1xyXG4gICAgICAgIGlmKGlzTmFOKGNhcmRUYWlsKSkge1xyXG4gICAgICAgICAgICBjYXJkVGFpbCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhcmRUYWlsID0gTWF0aC5hYnMoY2FyZFRhaWwpO1xyXG4gICAgICAgIGVkaXRib3guc3RyaW5nID0gY2FyZFRhaWw7XHJcbiAgICAgICAgZWRpdGJveC5ub2RlLmdldENoaWxkQnlOYW1lKCdURVhUX0xBQkVMJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBjYXJkVGFpbDtcclxuICAgIH0sXHJcblxyXG4gICAgYnRuX3BheW5vcm1hbENiKCkge1xyXG4gICAgICAgIGlmKHRoaXMuaXNTZW5kKXJldHVybiBnbEdhbWUucGFuZWwuc2hvd0Vycm9yVGlwKGdsR2FtZS50aXBzLlNIT1AuVE9PQlVTWSk7XHJcbiAgICAgICAgbGV0IG9yZGVyTmFtZSA9IHRoaXMuQ3VyVHlwZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJwYXlcIikuZ2V0Q2hpbGRCeU5hbWUoXCJyZWNoYXJnZW5hbWVcIikuZ2V0Q2hpbGRCeU5hbWUoXCJFZGl0Qm94XCIpLmdldENvbXBvbmVudChjYy5FZGl0Qm94KS5zdHJpbmdcclxuICAgICAgICBsZXQgb3JkZXJOdW0gPSB0aGlzLkN1clR5cGVOb2RlLmdldENoaWxkQnlOYW1lKFwicGF5XCIpLmdldENoaWxkQnlOYW1lKFwicmVjaGFyZ2VOdW1iZXJcIikuZ2V0Q2hpbGRCeU5hbWUoXCJFZGl0Qm94XCIpLmdldENvbXBvbmVudChjYy5FZGl0Qm94KS5zdHJpbmdcclxuICAgICAgICBpZiAob3JkZXJOYW1lID09ICcnKSB7XHJcbiAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuU0hPUC5VU0VSTkFNRU5VTEwpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9yZGVyTnVtID09IFwiXCIpIHtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFcnJvclRpcCh0aGlzLmN1clR5cGUgPT0gMSA/IGdsR2FtZS50aXBzLlNIT1AuQ0FSRFRBSUxOVUxMIDogZ2xHYW1lLnRpcHMuU0hPUC5PUkRFUlRBSUxOVUxMKTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcmRlck51bS5sZW5ndGggIT0gNSkge1xyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0Vycm9yVGlwKHRoaXMuY3VyVHlwZSA9PSAxID8gZ2xHYW1lLnRpcHMuU0hPUC5JTlZBTElEQ0FSRFRBSUwgOiBnbEdhbWUudGlwcy5TSE9QLklOVkFMSURPUkRFUlRBSUwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcmRlck5hbWUgIT0gJycgJiYgKHRoaXMudHlwZSA9PSAxIHx8IHRoaXMudHlwZSA9PSAyKSkge1xyXG4gICAgICAgICAgICBsZXQgcmVnID0gL15bXFx1NEUwMC1cXHU5RkE1XFx1ZjkwMC1cXHVmYTJkwrdzXXsyLDIwfSQvXHJcbiAgICAgICAgICAgIGlmICghcmVnLnRlc3Qob3JkZXJOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFcnJvclRpcChnbEdhbWUudGlwcy5TSE9QLklOVkFMSURVU0VSTkFNRSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVnID0gL15cXHd7MiwxNX0kL1xyXG4gICAgICAgIGxldCBpc0NvaW5OdW1fbWF0Y2hlciA9IHJlZy50ZXN0KG9yZGVyTnVtKTtcclxuICAgICAgICBpZiAoIWlzQ29pbk51bV9tYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RXJyb3JUaXAodGhpcy5jdXJUeXBlID09IDEgPyBnbEdhbWUudGlwcy5TSE9QLklOVkFMSURDQVJEVEFJTCA6IGdsR2FtZS50aXBzLlNIT1AuSU5WQUxJRE9SREVSVEFJTCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1zZyA9IHt9O1xyXG4gICAgICAgIG1zZy50eXBlID0gdGhpcy5kZXBvc2l0VHlwZTtcclxuICAgICAgICBtc2cub3JkZXJNb25leSA9IE51bWJlcih0aGlzLnJlY2hhcmdlY29pbikgKiAxMDA7XHJcbiAgICAgICAgbXNnLmdpdmVQcm9wb3J0aW9uID0gdGhpcy5naXZlUHJvcG9ydGlvbjtcclxuICAgICAgICBtc2cuY29tcGFueUFjY291bnRJZCA9IHRoaXMuU2hvcERhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5hY2NvdW50SWQ7XHJcbiAgICAgICAgbXNnLmNvbXBhbnlBY2NvdW50TmFtZSA9IHRoaXMuU2hvcERhdGEuY3VycmVudFJvdGF0aW9uQWNjb3VudC5uYW1lO1xyXG4gICAgICAgIG1zZy5jb21wYW55QWNjb3VudE5vID0gdGhpcy5TaG9wRGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LmFjY291bnROYW1lO1xyXG4gICAgICAgIGlmICh0aGlzLlNob3BEYXRhLmN1cnJlbnRSb3RhdGlvbkFjY291bnQuYmFua05hbWUpIHtcclxuICAgICAgICAgICAgbXNnLmNvbXBhbnlBY2NvdW50QmFua05hbWUgPSB0aGlzLlNob3BEYXRhLmN1cnJlbnRSb3RhdGlvbkFjY291bnQuYmFua05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1zZy5jb21wYW55RGVwb3NpdE5hbWUgPSB0aGlzLkN1clR5cGVOb2RlLmdldENoaWxkQnlOYW1lKFwicGF5XCIpLmdldENoaWxkQnlOYW1lKFwicmVjaGFyZ2VuYW1lXCIpLmdldENoaWxkQnlOYW1lKFwiRWRpdEJveFwiKS5nZXRDb21wb25lbnQoY2MuRWRpdEJveCkuc3RyaW5nLnRyaW0oKTtcclxuICAgICAgICBtc2cuZXh0ZXJuYWxPcmRlclNuID0gdGhpcy5DdXJUeXBlTm9kZS5nZXRDaGlsZEJ5TmFtZShcInBheVwiKS5nZXRDaGlsZEJ5TmFtZShcInJlY2hhcmdlTnVtYmVyXCIpLmdldENoaWxkQnlOYW1lKFwiRWRpdEJveFwiKS5nZXRDb21wb25lbnQoY2MuRWRpdEJveCkuc3RyaW5nO1xyXG4gICAgICAgIG1zZy5wYWdlSWQgPSB0aGlzLlNob3BEYXRhLmlkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi6L+Z5piv5b2T5YmN55qE5o+Q5Lqk5L+h5oGvXCIsbXNnKVxyXG4gICAgICAgIHRoaXMuaXNTZW5kID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoXHJcbiAgICAgICAgICAgIGNjLmRlbGF5VGltZSg1KSxcclxuICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTZW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKSlcclxuICAgICAgICBnbEdhbWUuZ2FtZU5ldC5zZW5kX21zZygnaHR0cC5SZXFQYXlDcmVhdGVPcmRlcicsIG1zZywgKHJvdXRlLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUuZW1pdHRlci5lbWl0KFwic2hvd1N1Y2Nlc3NBbmltXCIsIHRydWUpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUuZW1pdHRlci5lbWl0KFwic2hvd1N1Y2Nlc3NBbmltXCIsIGZhbHNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6L+Z5piv5Yib5bu66K6i5Y2V55qE5Zue5YyFXCIsIGRhdGEpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSxcclxuICAgIGdldEZsb2F0KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIChOdW1iZXIodmFsdWUpLmRpdigxMDApKS50b1N0cmluZygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBidG5fY2xvc2VDYigpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgfSxcclxuICAgIGJ0bl9zYXZlQ2IoKSB7XHJcbiAgICAgICAgaWYgKGNjLnN5cy5pc05hdGl2ZSkge1xyXG4gICAgICAgICAgICBnbEdhbWUucGxhdGZvcm0uc2F2ZVRvTG9jYWwoZ2xHYW1lLnVzZXIuZ2V0KFwidXJsXCIpLnJlc291cmNlX3VybCArIHRoaXMucXJjb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYnRuX29wZW5DYigpIHtcclxuICAgICAgICBsZXQgdHlwZSA9IDFcclxuICAgICAgICBpZiAodGhpcy5TaG9wRGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LnR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICB0eXBlID0gNVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5TaG9wRGF0YS5jdXJyZW50Um90YXRpb25BY2NvdW50LnR5cGUgPT0gMykge1xyXG4gICAgICAgICAgICB0eXBlID0gMlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGp1bXAgPSBnbEdhbWUudXNlci5nZXQoJ3VybCcpLnNlcnZpY2VfdXJsX2p1bXBcclxuICAgICAgICBsZXQgdXJsID0ganVtcCArICc/JyArIGBqdW1wX3R5cGU9JHt0eXBlfWBcclxuICAgICAgICBjYy5zeXMub3BlblVSTCh1cmwpXHJcbiAgICB9LFxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcInBheUNyZWF0ZU9yZGVyZXJyb3JcIiwgdGhpcyk7XHJcbiAgICB9XHJcbn0pOyJdfQ==