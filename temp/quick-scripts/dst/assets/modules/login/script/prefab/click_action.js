
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/login/script/prefab/click_action.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '33150bTLOlNtJHyA7WMWqk4', 'click_action');
// modules/login/script/prefab/click_action.js

"use strict";

glGame.baseclass.extend({
  properties: {
    click_node: cc.Node,
    chick_act: cc.Node,
    chick_meihua: cc.Node,
    base_sprite: cc.SpriteFrame
  },
  onLoad: function onLoad() {
    this.registerEvent();
    cc.game.addPersistRootNode(this.node);
    this.creatSmear = true;
    this.itemScale = glGame.systemclass.convertInterface();
  },
  start: function start() {},
  registerEvent: function registerEvent() {
    glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_BEGIN, this.clickCallBack, this);
    glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_MOVE, this.moveCallBack, this);
    glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_STATE, this.stateCallBack, this);
  },
  unRegisterEvent: function unRegisterEvent() {
    glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_BEGIN, this);
    glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_MOVE, this);
    glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_STATE, this);
  },
  clickCallBack: function clickCallBack(pos) {
    this.action(pos);
  },
  moveCallBack: function moveCallBack(pos) {
    var _this = this;

    if (!this.creatSmear) return;
    this.node.runAction(cc.sequence(cc.delayTime(0.1), cc.callFunc(function () {
      _this.creatSmear = true;
    })));
    this.action(pos);
    this.creatSmear = false;
  },
  //设置点击特效的资源图片
  stateCallBack: function stateCallBack(picObj) {
    this.chick_meihua.getComponent(cc.Sprite).spriteFrame = picObj ? picObj : this.base_sprite;
    this.chick_act.getComponent(cc.ParticleSystem).spriteFrame = picObj ? picObj : this.base_sprite; //刷新图片，避免出现方块
  },
  action: function action(Pos) {
    var clickItem = cc.instantiate(this.chick_act);
    clickItem.parent = this.node;
    clickItem.active = true;
    clickItem.position = Pos;
    clickItem.scale = glGame.systemclass.convertInterface();
    clickItem.runAction(cc.sequence(cc.delayTime(0.6), cc.removeSelf()));
    var meihua = cc.instantiate(this.chick_meihua);
    meihua.parent = clickItem;
    meihua.active = true;
    meihua.x = 0;
    meihua.y = 0;
    meihua.scale = 1;
    var delay = cc.delayTime(0.1);
    var fadeOut = cc.fadeOut(0.3);
    var scaleTo = cc.scaleTo(0.4, 2.25);
    meihua.runAction(cc.spawn(cc.sequence(delay, fadeOut), scaleTo));
  },
  update: function update(dt) {},
  onDestroy: function onDestroy() {
    this.unRegisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xcbG9naW5cXHNjcmlwdFxccHJlZmFiXFxjbGlja19hY3Rpb24uanMiXSwibmFtZXMiOlsiZ2xHYW1lIiwiYmFzZWNsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsImNsaWNrX25vZGUiLCJjYyIsIk5vZGUiLCJjaGlja19hY3QiLCJjaGlja19tZWlodWEiLCJiYXNlX3Nwcml0ZSIsIlNwcml0ZUZyYW1lIiwib25Mb2FkIiwicmVnaXN0ZXJFdmVudCIsImdhbWUiLCJhZGRQZXJzaXN0Um9vdE5vZGUiLCJub2RlIiwiY3JlYXRTbWVhciIsIml0ZW1TY2FsZSIsInN5c3RlbWNsYXNzIiwiY29udmVydEludGVyZmFjZSIsInN0YXJ0IiwiZW1pdHRlciIsIm9uIiwiTUVTU0FHRSIsIlNZU1RFTSIsIlRPVUNIX0JFR0lOIiwiY2xpY2tDYWxsQmFjayIsIlRPVUNIX01PVkUiLCJtb3ZlQ2FsbEJhY2siLCJUT1VDSF9TVEFURSIsInN0YXRlQ2FsbEJhY2siLCJ1blJlZ2lzdGVyRXZlbnQiLCJvZmYiLCJwb3MiLCJhY3Rpb24iLCJydW5BY3Rpb24iLCJzZXF1ZW5jZSIsImRlbGF5VGltZSIsImNhbGxGdW5jIiwicGljT2JqIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJQYXJ0aWNsZVN5c3RlbSIsIlBvcyIsImNsaWNrSXRlbSIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiYWN0aXZlIiwicG9zaXRpb24iLCJzY2FsZSIsInJlbW92ZVNlbGYiLCJtZWlodWEiLCJ4IiwieSIsImRlbGF5IiwiZmFkZU91dCIsInNjYWxlVG8iLCJzcGF3biIsInVwZGF0ZSIsImR0Iiwib25EZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLENBQXdCO0FBQ3BCQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsVUFBVSxFQUFFQyxFQUFFLENBQUND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LEVBQW1CQyxPQUFuQixDQUFULEVBQXNDQyxPQUF0QyxDQUFqQjtBQUNILEdBbkVtQjtBQXFFcEJFLEVBQUFBLE1BckVvQixrQkFxRWJDLEVBckVhLEVBcUVULENBQ1YsQ0F0RW1CO0FBd0VwQkMsRUFBQUEsU0F4RW9CLHVCQXdFUjtBQUNSLFNBQUs5QixlQUFMO0FBQ0g7QUExRW1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZ2xHYW1lLmJhc2VjbGFzcy5leHRlbmQoe1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNsaWNrX25vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgY2hpY2tfYWN0OiBjYy5Ob2RlLFxyXG4gICAgICAgIGNoaWNrX21laWh1YTogY2MuTm9kZSxcclxuXHJcbiAgICAgICAgYmFzZV9zcHJpdGU6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgfSxcclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICBjYy5nYW1lLmFkZFBlcnNpc3RSb290Tm9kZSh0aGlzLm5vZGUpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRTbWVhciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pdGVtU2NhbGUgPSBnbEdhbWUuc3lzdGVtY2xhc3MuY29udmVydEludGVyZmFjZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oTUVTU0FHRS5TWVNURU0uVE9VQ0hfQkVHSU4sIHRoaXMuY2xpY2tDYWxsQmFjaywgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oTUVTU0FHRS5TWVNURU0uVE9VQ0hfTU9WRSwgdGhpcy5tb3ZlQ2FsbEJhY2ssIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKE1FU1NBR0UuU1lTVEVNLlRPVUNIX1NUQVRFLCB0aGlzLnN0YXRlQ2FsbEJhY2ssIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIHVuUmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoTUVTU0FHRS5TWVNURU0uVE9VQ0hfQkVHSU4sIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihNRVNTQUdFLlNZU1RFTS5UT1VDSF9NT1ZFLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoTUVTU0FHRS5TWVNURU0uVE9VQ0hfU1RBVEUsIHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0NhbGxCYWNrKHBvcykge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uKHBvcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIG1vdmVDYWxsQmFjayhwb3MpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY3JlYXRTbWVhcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgwLjEpLCBjYy5jYWxsRnVuYygoKSA9PiB7IHRoaXMuY3JlYXRTbWVhciA9IHRydWU7IH0pKSkpO1xyXG4gICAgICAgIHRoaXMuYWN0aW9uKHBvcyk7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRTbWVhciA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9rueCueWHu+eJueaViOeahOi1hOa6kOWbvueJh1xyXG4gICAgc3RhdGVDYWxsQmFjayhwaWNPYmopIHtcclxuICAgICAgICB0aGlzLmNoaWNrX21laWh1YS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHBpY09iaiA/IHBpY09iaiA6IHRoaXMuYmFzZV9zcHJpdGU7XHJcbiAgICAgICAgdGhpcy5jaGlja19hY3QuZ2V0Q29tcG9uZW50KGNjLlBhcnRpY2xlU3lzdGVtKS5zcHJpdGVGcmFtZSA9IHBpY09iaiA/IHBpY09iaiA6IHRoaXMuYmFzZV9zcHJpdGU7XHJcbiAgICAgICAgLy/liLfmlrDlm77niYfvvIzpgb/lhY3lh7rnjrDmlrnlnZdcclxuICAgIH0sXHJcblxyXG4gICAgYWN0aW9uKFBvcykge1xyXG4gICAgICAgIGxldCBjbGlja0l0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmNoaWNrX2FjdCk7XHJcbiAgICAgICAgY2xpY2tJdGVtLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICBjbGlja0l0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBjbGlja0l0ZW0ucG9zaXRpb24gPSBQb3M7XHJcbiAgICAgICAgY2xpY2tJdGVtLnNjYWxlID0gZ2xHYW1lLnN5c3RlbWNsYXNzLmNvbnZlcnRJbnRlcmZhY2UoKTtcclxuICAgICAgICBjbGlja0l0ZW0ucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgwLjYpLCBjYy5yZW1vdmVTZWxmKCkpKTtcclxuXHJcbiAgICAgICAgbGV0IG1laWh1YSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuY2hpY2tfbWVpaHVhKTtcclxuICAgICAgICBtZWlodWEucGFyZW50ID0gY2xpY2tJdGVtO1xyXG4gICAgICAgIG1laWh1YS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIG1laWh1YS54ID0gMDtcclxuICAgICAgICBtZWlodWEueSA9IDA7XHJcbiAgICAgICAgbWVpaHVhLnNjYWxlID0gMTtcclxuICAgICAgICBsZXQgZGVsYXkgPSBjYy5kZWxheVRpbWUoMC4xKTtcclxuICAgICAgICBsZXQgZmFkZU91dCA9IGNjLmZhZGVPdXQoMC4zKTtcclxuICAgICAgICBsZXQgc2NhbGVUbyA9IGNjLnNjYWxlVG8oMC40LCAyLjI1KTtcclxuICAgICAgICBtZWlodWEucnVuQWN0aW9uKGNjLnNwYXduKGNjLnNlcXVlbmNlKGRlbGF5LCBmYWRlT3V0KSwgc2NhbGVUbykpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5SZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG59KTtcclxuIl19