
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/games/nfish/script/prefab/nfish_setting.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '22dc14edDRHU6APCCIQx7DB', 'nfish_setting');
// modules/games/nfish/script/prefab/nfish_setting.js

"use strict";

/***
 *  捕鱼：设置 - 音效
 * **/
var CONST = require("nfishConst");

glGame.baseclass.extend({
  properties: {
    BGM: cc.Toggle,
    SE: cc.Toggle,
    MSS: cc.Slider,
    ESS: cc.Slider,
    MSB: cc.Node,
    ESB: cc.Node,
    musicProgressBar: cc.Node,
    soundProgressBar: cc.Node,
    musicToggle: cc.Node,
    soundToggle: cc.Node
  },
  onLoad: function onLoad() {
    this.showPanelInfo();
    this.registerEvent();
  },
  registerEvent: function registerEvent() {
    this.musicToggle.on("toggle", this.click_music, this);
    this.soundToggle.on("toggle", this.click_effect, this);
    this.MSB.on("touchcancel", this.MSBTouchCancelNext, this);
    this.MSB.on("touchend", this.MSBTouchCancelNext, this);
    this.ESB.on("touchcancel", this.ESBTouchCancelNext, this);
    this.ESB.on("touchend", this.ESBTouchCancelNext, this);
  },
  unRegisterEvent: function unRegisterEvent() {
    this.MSB.off("touchcancel", this.MSBTouchCancelNext, this);
    this.MSB.off("touchend", this.MSBTouchCancelNext, this);
    this.ESB.off("touchcancel", this.ESBTouchCancelNext, this);
    this.ESB.off("touchend", this.ESBTouchCancelNext, this);
  },
  click_music: function click_music(event) {
    if (!this.musicToggle.getComponent(cc.Toggle).isChecked) {
      glGame.audio.openBGM();
    } else {
      glGame.audio.closeBGM();
    }

    var BGMSE = glGame.audio.get("BGMSE");
    this.musicToggle.getChildByName("Background").active = BGMSE["BGMPlayState"];
    this.soundToggle.getChildByName("Background").active = BGMSE["SoundEffectPlayState"];
  },
  click_effect: function click_effect(event) {
    if (!this.soundToggle.getComponent(cc.Toggle).isChecked) {
      glGame.audio.openSE();
    } else {
      glGame.audio.closeSE();
    }

    var BGMSE = glGame.audio.get("BGMSE");
    this.musicToggle.getChildByName("Background").active = BGMSE["BGMPlayState"];
    this.soundToggle.getChildByName("Background").active = BGMSE["SoundEffectPlayState"];
  },
  showPanelInfo: function showPanelInfo() {
    // 根据本地缓存的声音数据来更新按钮状态
    var BGMSE = glGame.audio.get("BGMSE");
    this.musicToggle.getComponent(cc.Toggle).isChecked = !BGMSE["BGMPlayState"];
    this.soundToggle.getComponent(cc.Toggle).isChecked = !BGMSE["SoundEffectPlayState"];
    this.musicToggle.getChildByName("Background").active = BGMSE["BGMPlayState"];
    this.soundToggle.getChildByName("Background").active = BGMSE["SoundEffectPlayState"];
    this.MSS.progress = BGMSE["BGMVolume"];
    this.ESS.progress = BGMSE["SoundEffectVolume"];
    this.musicProgressBar.getComponent(cc.ProgressBar).progress = BGMSE["BGMVolume"];
    this.soundProgressBar.getComponent(cc.ProgressBar).progress = BGMSE["SoundEffectVolume"];
  },
  MSBTouchCancelNext: function MSBTouchCancelNext() {
    glGame.audio.saveVolume();
  },
  ESBTouchCancelNext: function ESBTouchCancelNext() {
    glGame.audio.saveVolume();
  },
  onSliderProcess: function onSliderProcess(node, process) {
    var name = node.name;

    switch (name) {
      case "music":
        glGame.audio.setBGMVolume(process);
        this.musicProgressBar.getComponent(cc.ProgressBar).progress = process;
        break;

      case "sound":
        glGame.audio.setSoundEffectVolume(process);
        this.soundProgressBar.getComponent(cc.ProgressBar).progress = process;
        break;
    }
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "close":
        this.click_close();
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },
  click_close: function click_close() {
    this.remove();
  },
  //水波赋值
  update: function update(dt) {},
  OnDestroy: function OnDestroy() {
    this.unRegisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xcZ2FtZXNcXG5maXNoXFxzY3JpcHRcXHByZWZhYlxcbmZpc2hfc2V0dGluZy5qcyJdLCJuYW1lcyI6WyJDT05TVCIsInJlcXVpcmUiLCJnbEdhbWUiLCJiYXNlY2xhc3MiLCJleHRlbmQiLCJwcm9wZXJ0aWVzIiwiQkdNIiwiY2MiLCJUb2dnbGUiLCJTRSIsIk1TUyIsIlNsaWRlciIsIkVTUyIsIk1TQiIsIk5vZGUiLCJFU0IiLCJtdXNpY1Byb2dyZXNzQmFyIiwic291bmRQcm9ncmVzc0JhciIsIm11c2ljVG9nZ2xlIiwic291bmRUb2dnbGUiLCJvbkxvYWQiLCJzaG93UGFuZWxJbmZvIiwicmVnaXN0ZXJFdmVudCIsIm9uIiwiY2xpY2tfbXVzaWMiLCJjbGlja19lZmZlY3QiLCJNU0JUb3VjaENhbmNlbE5leHQiLCJFU0JUb3VjaENhbmNlbE5leHQiLCJ1blJlZ2lzdGVyRXZlbnQiLCJvZmYiLCJldmVudCIsImdldENvbXBvbmVudCIsImlzQ2hlY2tlZCIsImF1ZGlvIiwib3BlbkJHTSIsImNsb3NlQkdNIiwiQkdNU0UiLCJnZXQiLCJnZXRDaGlsZEJ5TmFtZSIsImFjdGl2ZSIsIm9wZW5TRSIsImNsb3NlU0UiLCJwcm9ncmVzcyIsIlByb2dyZXNzQmFyIiwic2F2ZVZvbHVtZSIsIm9uU2xpZGVyUHJvY2VzcyIsIm5vZGUiLCJwcm9jZXNzIiwibmFtZSIsInNldEJHTVZvbHVtZSIsInNldFNvdW5kRWZmZWN0Vm9sdW1lIiwib25DbGljayIsImNsaWNrX2Nsb3NlIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlIiwidXBkYXRlIiwiZHQiLCJPbkRlc3Ryb3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztBQUdBLElBQUlBLEtBQUssR0FBR0MsT0FBTyxDQUFDLFlBQUQsQ0FBbkI7O0FBQ0FDLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsTUFBakIsQ0FBd0I7QUFDcEJDLEVBQUFBLFVBQVUsRUFBRTtBQUNS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QjtBQXNGcEJJLEVBQUFBLE9BdEZvQixtQkFzRlhILElBdEZXLEVBc0ZMRixJQXRGSyxFQXNGQztBQUNqQixZQUFRRSxJQUFSO0FBQ0ksV0FBSyxPQUFMO0FBQWMsYUFBS0ksV0FBTDtBQUFvQjs7QUFDbEM7QUFBU0MsUUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWMsMkJBQWQsRUFBMkNOLElBQTNDO0FBRmI7QUFJSCxHQTNGbUI7QUE0RnBCSSxFQUFBQSxXQTVGb0IseUJBNEZMO0FBQ1gsU0FBS0csTUFBTDtBQUNILEdBOUZtQjtBQStGcEI7QUFDQUMsRUFBQUEsTUFoR29CLGtCQWdHYkMsRUFoR2EsRUFnR1QsQ0FDVixDQWpHbUI7QUFrR3BCQyxFQUFBQSxTQWxHb0IsdUJBa0dSO0FBQ1IsU0FBSzlCLGVBQUw7QUFDSDtBQXBHbUIsQ0FBeEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qKipcclxuICogIOaNlemxvO+8muiuvue9riAtIOmfs+aViFxyXG4gKiAqKi9cclxubGV0IENPTlNUID0gcmVxdWlyZShcIm5maXNoQ29uc3RcIik7XHJcbmdsR2FtZS5iYXNlY2xhc3MuZXh0ZW5kKHtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBCR006IGNjLlRvZ2dsZSxcclxuICAgICAgICBTRTogY2MuVG9nZ2xlLFxyXG4gICAgICAgIE1TUzogY2MuU2xpZGVyLFxyXG4gICAgICAgIEVTUzogY2MuU2xpZGVyLFxyXG4gICAgICAgIE1TQjogY2MuTm9kZSxcclxuICAgICAgICBFU0I6IGNjLk5vZGUsXHJcbiAgICAgICAgbXVzaWNQcm9ncmVzc0JhcjogY2MuTm9kZSxcclxuICAgICAgICBzb3VuZFByb2dyZXNzQmFyOiBjYy5Ob2RlLFxyXG4gICAgICAgIG11c2ljVG9nZ2xlOiBjYy5Ob2RlLFxyXG4gICAgICAgIHNvdW5kVG9nZ2xlOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIG9uTG9hZCAoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93UGFuZWxJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG4gICAgcmVnaXN0ZXJFdmVudCAoKSB7XHJcbiAgICAgICAgdGhpcy5tdXNpY1RvZ2dsZS5vbihcInRvZ2dsZVwiLCB0aGlzLmNsaWNrX211c2ljLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnNvdW5kVG9nZ2xlLm9uKFwidG9nZ2xlXCIsIHRoaXMuY2xpY2tfZWZmZWN0LCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5NU0Iub24oXCJ0b3VjaGNhbmNlbFwiLCB0aGlzLk1TQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5NU0Iub24oXCJ0b3VjaGVuZFwiLCB0aGlzLk1TQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5FU0Iub24oXCJ0b3VjaGNhbmNlbFwiLCB0aGlzLkVTQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5FU0Iub24oXCJ0b3VjaGVuZFwiLCB0aGlzLkVTQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgdW5SZWdpc3RlckV2ZW50ICgpIHtcclxuICAgICAgICB0aGlzLk1TQi5vZmYoXCJ0b3VjaGNhbmNlbFwiLCB0aGlzLk1TQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5NU0Iub2ZmKFwidG91Y2hlbmRcIiwgdGhpcy5NU0JUb3VjaENhbmNlbE5leHQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuRVNCLm9mZihcInRvdWNoY2FuY2VsXCIsIHRoaXMuRVNCVG91Y2hDYW5jZWxOZXh0LCB0aGlzKTtcclxuICAgICAgICB0aGlzLkVTQi5vZmYoXCJ0b3VjaGVuZFwiLCB0aGlzLkVTQlRvdWNoQ2FuY2VsTmV4dCwgdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNsaWNrX211c2ljIChldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tdXNpY1RvZ2dsZS5nZXRDb21wb25lbnQoY2MuVG9nZ2xlKS5pc0NoZWNrZWQpe1xyXG4gICAgICAgICAgICBnbEdhbWUuYXVkaW8ub3BlbkJHTSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBnbEdhbWUuYXVkaW8uY2xvc2VCR00oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IEJHTVNFID0gZ2xHYW1lLmF1ZGlvLmdldChcIkJHTVNFXCIpO1xyXG4gICAgICAgIHRoaXMubXVzaWNUb2dnbGUuZ2V0Q2hpbGRCeU5hbWUoXCJCYWNrZ3JvdW5kXCIpLmFjdGl2ZSA9IEJHTVNFW1wiQkdNUGxheVN0YXRlXCJdO1xyXG4gICAgICAgIHRoaXMuc291bmRUb2dnbGUuZ2V0Q2hpbGRCeU5hbWUoXCJCYWNrZ3JvdW5kXCIpLmFjdGl2ZSA9IEJHTVNFW1wiU291bmRFZmZlY3RQbGF5U3RhdGVcIl07XHJcbiAgICB9LFxyXG4gICAgY2xpY2tfZWZmZWN0IChldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zb3VuZFRvZ2dsZS5nZXRDb21wb25lbnQoY2MuVG9nZ2xlKS5pc0NoZWNrZWQpe1xyXG4gICAgICAgICAgICBnbEdhbWUuYXVkaW8ub3BlblNFKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGdsR2FtZS5hdWRpby5jbG9zZVNFKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBCR01TRSA9IGdsR2FtZS5hdWRpby5nZXQoXCJCR01TRVwiKTtcclxuICAgICAgICB0aGlzLm11c2ljVG9nZ2xlLmdldENoaWxkQnlOYW1lKFwiQmFja2dyb3VuZFwiKS5hY3RpdmUgPSBCR01TRVtcIkJHTVBsYXlTdGF0ZVwiXTtcclxuICAgICAgICB0aGlzLnNvdW5kVG9nZ2xlLmdldENoaWxkQnlOYW1lKFwiQmFja2dyb3VuZFwiKS5hY3RpdmUgPSBCR01TRVtcIlNvdW5kRWZmZWN0UGxheVN0YXRlXCJdO1xyXG4gICAgfSxcclxuICAgIHNob3dQYW5lbEluZm8gKCkge1xyXG4gICAgICAgIC8vIOagueaNruacrOWcsOe8k+WtmOeahOWjsOmfs+aVsOaNruadpeabtOaWsOaMiemSrueKtuaAgVxyXG4gICAgICAgIGxldCBCR01TRSA9IGdsR2FtZS5hdWRpby5nZXQoXCJCR01TRVwiKTtcclxuICAgICAgICB0aGlzLm11c2ljVG9nZ2xlLmdldENvbXBvbmVudChjYy5Ub2dnbGUpLmlzQ2hlY2tlZCA9ICFCR01TRVtcIkJHTVBsYXlTdGF0ZVwiXTtcclxuICAgICAgICB0aGlzLnNvdW5kVG9nZ2xlLmdldENvbXBvbmVudChjYy5Ub2dnbGUpLmlzQ2hlY2tlZCA9ICFCR01TRVtcIlNvdW5kRWZmZWN0UGxheVN0YXRlXCJdO1xyXG4gICAgICAgIHRoaXMubXVzaWNUb2dnbGUuZ2V0Q2hpbGRCeU5hbWUoXCJCYWNrZ3JvdW5kXCIpLmFjdGl2ZSA9IEJHTVNFW1wiQkdNUGxheVN0YXRlXCJdO1xyXG4gICAgICAgIHRoaXMuc291bmRUb2dnbGUuZ2V0Q2hpbGRCeU5hbWUoXCJCYWNrZ3JvdW5kXCIpLmFjdGl2ZSA9IEJHTVNFW1wiU291bmRFZmZlY3RQbGF5U3RhdGVcIl07XHJcbiAgICAgICAgdGhpcy5NU1MucHJvZ3Jlc3MgPSBCR01TRVtcIkJHTVZvbHVtZVwiXTtcclxuICAgICAgICB0aGlzLkVTUy5wcm9ncmVzcyA9IEJHTVNFW1wiU291bmRFZmZlY3RWb2x1bWVcIl07XHJcbiAgICAgICAgdGhpcy5tdXNpY1Byb2dyZXNzQmFyLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3MgPSBCR01TRVtcIkJHTVZvbHVtZVwiXTtcclxuICAgICAgICB0aGlzLnNvdW5kUHJvZ3Jlc3NCYXIuZ2V0Q29tcG9uZW50KGNjLlByb2dyZXNzQmFyKS5wcm9ncmVzcyA9IEJHTVNFW1wiU291bmRFZmZlY3RWb2x1bWVcIl07XHJcbiAgICB9LFxyXG4gICAgTVNCVG91Y2hDYW5jZWxOZXh0ICgpIHtcclxuICAgICAgICBnbEdhbWUuYXVkaW8uc2F2ZVZvbHVtZSgpO1xyXG4gICAgfSxcclxuICAgIEVTQlRvdWNoQ2FuY2VsTmV4dCAoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmF1ZGlvLnNhdmVWb2x1bWUoKTtcclxuICAgIH0sXHJcbiAgICBvblNsaWRlclByb2Nlc3MgKG5vZGUsIHByb2Nlc3MpIHtcclxuICAgICAgICBsZXQgbmFtZSA9IG5vZGUubmFtZTtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIm11c2ljXCI6XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUuYXVkaW8uc2V0QkdNVm9sdW1lKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdXNpY1Byb2dyZXNzQmFyLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3MgPSBwcm9jZXNzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzb3VuZFwiOlxyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLmF1ZGlvLnNldFNvdW5kRWZmZWN0Vm9sdW1lKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VuZFByb2dyZXNzQmFyLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3MgPSBwcm9jZXNzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uQ2xpY2sgKG5hbWUsIG5vZGUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNsb3NlXCI6IHRoaXMuY2xpY2tfY2xvc2UoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoXCJubyBmaW5kIGJ1dHRvbiBuYW1lIC0+ICVzXCIsIG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjbGlja19jbG9zZSAoKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgIH0sXHJcbiAgICAvL+awtOazoui1i+WAvFxyXG4gICAgdXBkYXRlKGR0KSB7XHJcbiAgICB9LFxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5SZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG59KTsiXX0=