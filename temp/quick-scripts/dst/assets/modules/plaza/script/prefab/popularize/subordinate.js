
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/popularize/subordinate.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '58617Da2iZJrI2JKWoU+/Xx', 'subordinate');
// modules/plaza/script/prefab/popularize/subordinate.js

"use strict";

glGame.baseclass.extend({
  properties: {
    norecord: cc.Node,
    //noneLab
    infoItem: cc.Node,
    content: cc.Node,
    Lab_CurPage: cc.Label,
    Lab_totalPage: cc.Label,
    //up
    sub_number: cc.Label,
    sub_effective_number: cc.Label,
    team_number: cc.Label,
    team_effective_number: cc.Label
  },
  onLoad: function onLoad() {
    this.page = 1;
    this.Lab_CurPage.string = this.page;
    this.recordReqData = {
      id: "",
      nickname: "",
      date: ""
    };
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "close":
        this.remove();
        break;

      case "btn_pageup":
        this.pageup_CB();
        break;

      case "btn_pagedown":
        this.pagedown_CB();
        break;
    }
  },
  ReqPlayerExtensionCountlessMember: function ReqPlayerExtensionCountlessMember() {
    var _this = this;

    var page = this.page,
        id = this.recordReqData.id,
        nickname = this.recordReqData.nickname,
        date = this.recordReqData.date;
    this.Lab_CurPage.string = this.page;
    glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessMember', {
      page: page,
      id: id,
      nickname: nickname,
      date: date,
      page_size: 8
    }, function (route, msg) {
      _this.recordData = msg;
      _this.Lab_totalPage.string = _this.recordData.page_total == 0 ? 1 : _this.recordData.page_total;

      _this.setTable(_this.recordData.list);
    });
  },
  initUI: function initUI(data) {
    this.recordData = data;
    this.sub_number.string = this.recordData.sub_number;
    this.sub_effective_number.string = "(".concat(this.recordData.sub_effective_number, ")");
    this.team_number.string = this.recordData.team_sub_number;
    this.team_effective_number.string = "(".concat(this.recordData.effective_number, ")"); //this.history_commission.string = this.getFloat(this.recordData.history_commission);

    this.Lab_totalPage.string = this.recordData.page_total == 0 ? 1 : this.recordData.page_total;
    this.setTable(this.recordData.list);
  },
  setTable: function setTable(data) {
    this.content.destroyAllChildren();
    this.content.removeAllChildren();
    var count = data.length;

    if (count == 0) {
      this.norecord.active = true;
      return;
    }

    this.hiadShowNode(count > 0);

    for (var i = 0; i < count; i++) {
      var infoItem = cc.instantiate(this.infoItem);
      infoItem.parent = this.content;
      infoItem.active = false;
      infoItem.getChildByName("bg").active = i % 2 == 1;
      infoItem.getChildByName("memberID").getComponent(cc.Label).string = data[i].logicid;
      infoItem.getChildByName("name").getComponent(cc.Label).string = data[i].nickname;
      infoItem.getChildByName("isTrue").getChildByName(data[i].ag_effective == 1 ? "img_gou" : "img_cha").active = true;
      infoItem.getChildByName("trueMember").getComponent(cc.Label).string = data[i].effective_number; //团队有效成员

      var histroytotalcommission = data[i].history_contribute_sub_commission + data[i].history_contribute_bet_commission;
      var m_histroytotalcommission = infoItem.getChildByName("histroytotalcommission");
      m_histroytotalcommission.getComponent(cc.Label).string = this.getFloat(histroytotalcommission); //总佣金

      glGame.panel.settingTableLabelColor(m_histroytotalcommission);
      infoItem.getChildByName("loginTime").getComponent(cc.Label).string = data[i].offline_time; //离线时间
    }

    glGame.panel.showEffectNode(this, this.content, 0.02, true);
  },
  hiadShowNode: function hiadShowNode(isBool) {
    this.node.getChildByName("btn_pageup").active = isBool;
    this.node.getChildByName("pagelayout").active = isBool;
    this.node.getChildByName("btn_pagedown").active = isBool; // this.node.getChildByName("explain").active = isBool;
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  pageup_CB: function pageup_CB() {
    this.page--;

    if (this.page < 1) {
      this.page = 1;
      return;
    }

    this.ReqPlayerExtensionCountlessMember();
  },
  pagedown_CB: function pagedown_CB() {
    this.page++;

    if (this.page > Number(this.Lab_totalPage.string)) {
      this.page = Number(this.Lab_totalPage.string);
      return;
    }

    this.ReqPlayerExtensionCountlessMember();
  },
  timestampToTime: function timestampToTime(timestamp) {
    var date = new Date(timestamp * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000

    var Y = date.getFullYear() + '-';
    var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';
    var D = date.getDate() < 10 ? '0' + date.getDate() + ' ' : date.getDate() + ' ';
    var h = date.getHours() + ':';
    var m = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
    return Y + M + D + h + m;
  },
  OnDestroy: function OnDestroy() {}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxwb3B1bGFyaXplXFxzdWJvcmRpbmF0ZS5qcyJdLCJuYW1lcyI6WyJnbEdhbWUiLCJiYXNlY2xhc3MiLCJleHRlbmQiLCJwcm9wZXJ0aWVzIiwibm9yZWNvcmQiLCJjYyIsIk5vZGUiLCJpbmZvSXRlbSIsImNvbnRlbnQiLCJMYWJfQ3VyUGFnZSIsIkxhYmVsIiwiTGFiX3RvdGFsUGFnZSIsInN1Yl9udW1iZXIiLCJzdWJfZWZmZWN0aXZlX251bWJlciIsInRlYW1fbnVtYmVyIiwidGVhbV9lZmZlY3RpdmVfbnVtYmVyIiwib25Mb2FkIiwicGFnZSIsInN0cmluZyIsInJlY29yZFJlcURhdGEiLCJpZCIsIm5pY2tuYW1lIiwiZGF0ZSIsIm9uQ2xpY2siLCJuYW1lIiwibm9kZSIsInJlbW92ZSIsInBhZ2V1cF9DQiIsInBhZ2Vkb3duX0NCIiwiUmVxUGxheWVyRXh0ZW5zaW9uQ291bnRsZXNzTWVtYmVyIiwiZ2FtZU5ldCIsInNlbmRfbXNnIiwicGFnZV9zaXplIiwicm91dGUiLCJtc2ciLCJyZWNvcmREYXRhIiwicGFnZV90b3RhbCIsInNldFRhYmxlIiwibGlzdCIsImluaXRVSSIsImRhdGEiLCJ0ZWFtX3N1Yl9udW1iZXIiLCJlZmZlY3RpdmVfbnVtYmVyIiwiZGVzdHJveUFsbENoaWxkcmVuIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJjb3VudCIsImxlbmd0aCIsImFjdGl2ZSIsImhpYWRTaG93Tm9kZSIsImkiLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsImdldENoaWxkQnlOYW1lIiwiZ2V0Q29tcG9uZW50IiwibG9naWNpZCIsImFnX2VmZmVjdGl2ZSIsImhpc3Ryb3l0b3RhbGNvbW1pc3Npb24iLCJoaXN0b3J5X2NvbnRyaWJ1dGVfc3ViX2NvbW1pc3Npb24iLCJoaXN0b3J5X2NvbnRyaWJ1dGVfYmV0X2NvbW1pc3Npb24iLCJtX2hpc3Ryb3l0b3RhbGNvbW1pc3Npb24iLCJnZXRGbG9hdCIsInBhbmVsIiwic2V0dGluZ1RhYmxlTGFiZWxDb2xvciIsIm9mZmxpbmVfdGltZSIsInNob3dFZmZlY3ROb2RlIiwiaXNCb29sIiwidmFsdWUiLCJOdW1iZXIiLCJkaXYiLCJ0b1N0cmluZyIsInRpbWVzdGFtcFRvVGltZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJZIiwiZ2V0RnVsbFllYXIiLCJNIiwiZ2V0TW9udGgiLCJEIiwiZ2V0RGF0ZSIsImgiLCJnZXRIb3VycyIsIm0iLCJnZXRNaW51dGVzIiwiT25EZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLENBQXdCO0FBQ3BCQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsUUFBUSxFQUFFQyxFQUFFLENBQUNDLElBREw7QUFDVTtBQUNsQkMsSUFBQUEsUUFBUSxFQUFFRixFQUFFLENBQUNDLElBRkw7QUFHUkUsSUFBQUEsT0FBTyxFQUFFSCxFQUFFLENBQUNDLElBSEo7QUFJUkcsSUFBQUEsV0FBVyxFQUFFSixFQUFFLENBQUNLLEtBSlI7QUFLUkMsSUFBQUEsYUFBYSxFQUFFTixFQUFFLENBQUNLLEtBTFY7QUFNUjtBQUNBRSxJQUFBQSxVQUFVLEVBQUNQLEVBQUUsQ0FBQ0ssS0FQTjtBQVFSRyxJQUFBQSxvQkFBb0IsRUFBQ1IsRUFBRSxDQUFDSyxLQVJoQjtBQVNSSSxJQUFBQSxXQUFXLEVBQUNULEVBQUUsQ0FBQ0ssS0FUUDtBQVVSSyxJQUFBQSxxQkFBcUIsRUFBQ1YsRUFBRSxDQUFDSztBQVZqQixHQURRO0FBY3BCTSxFQUFBQSxNQWRvQixvQkFjWDtBQUNMLFNBQUtDLElBQUwsR0FBWSxDQUFaO0FBQ0EsU0FBS1IsV0FBTCxDQUFpQlMsTUFBakIsR0FBMEIsS0FBS0QsSUFBL0I7QUFDQSxTQUFLRSxhQUFMLEdBQXFCO0FBQUNDLE1BQUFBLEVBQUUsRUFBRSxFQUFMO0FBQVNDLE1BQUFBLFFBQVEsRUFBRyxFQUFwQjtBQUF1QkMsTUFBQUEsSUFB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QyxDQUFDLEdBQUd6RCxJQUFJLENBQUMwRCxRQUFMLEtBQWtCLEdBQTFCO0FBQ0EsUUFBSUMsQ0FBQyxHQUFHM0QsSUFBSSxDQUFDNEQsVUFBTCxLQUFrQixFQUFsQixHQUFxQixNQUFJNUQsSUFBSSxDQUFDNEQsVUFBTCxFQUF6QixHQUEyQzVELElBQUksQ0FBQzRELFVBQUwsRUFBbkQ7QUFDQSxXQUFPVCxDQUFDLEdBQUNFLENBQUYsR0FBSUUsQ0FBSixHQUFNRSxDQUFOLEdBQVFFLENBQWY7QUFFSCxHQW5IbUI7QUFvSHBCRSxFQUFBQSxTQXBIb0IsdUJBb0hSLENBQ1g7QUFySG1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJnbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9yZWNvcmQ6IGNjLk5vZGUsLy9ub25lTGFiXHJcbiAgICAgICAgaW5mb0l0ZW06IGNjLk5vZGUsXHJcbiAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuICAgICAgICBMYWJfQ3VyUGFnZTogY2MuTGFiZWwsXHJcbiAgICAgICAgTGFiX3RvdGFsUGFnZTogY2MuTGFiZWwsXHJcbiAgICAgICAgLy91cFxyXG4gICAgICAgIHN1Yl9udW1iZXI6Y2MuTGFiZWwsXHJcbiAgICAgICAgc3ViX2VmZmVjdGl2ZV9udW1iZXI6Y2MuTGFiZWwsXHJcbiAgICAgICAgdGVhbV9udW1iZXI6Y2MuTGFiZWwsXHJcbiAgICAgICAgdGVhbV9lZmZlY3RpdmVfbnVtYmVyOmNjLkxhYmVsLFxyXG5cclxuICAgIH0sXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gMTtcclxuICAgICAgICB0aGlzLkxhYl9DdXJQYWdlLnN0cmluZyA9IHRoaXMucGFnZTtcclxuICAgICAgICB0aGlzLnJlY29yZFJlcURhdGEgPSB7aWQgOlwiXCIsIG5pY2tuYW1lIDogXCJcIixkYXRlOlwiXCJ9O1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjbG9zZVwiOiB0aGlzLnJlbW92ZSgpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJ0bl9wYWdldXBcIjogdGhpcy5wYWdldXBfQ0IoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fcGFnZWRvd25cIjogdGhpcy5wYWdlZG93bl9DQigpOyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgUmVxUGxheWVyRXh0ZW5zaW9uQ291bnRsZXNzTWVtYmVyKCkge1xyXG4gICAgICAgIGxldCBwYWdlID0gdGhpcy5wYWdlLFxyXG4gICAgICAgIGlkID0gdGhpcy5yZWNvcmRSZXFEYXRhLmlkLFxyXG4gICAgICAgIG5pY2tuYW1lID0gdGhpcy5yZWNvcmRSZXFEYXRhLm5pY2tuYW1lLFxyXG4gICAgICAgIGRhdGUgPSB0aGlzLnJlY29yZFJlcURhdGEuZGF0ZTtcclxuICAgICAgICB0aGlzLkxhYl9DdXJQYWdlLnN0cmluZyA9IHRoaXMucGFnZTtcclxuICAgICAgICBnbEdhbWUuZ2FtZU5ldC5zZW5kX21zZygnaHR0cC5SZXFQbGF5ZXJFeHRlbnNpb25Db3VudGxlc3NNZW1iZXInLCB7IHBhZ2U6IHBhZ2UsIGlkOiBpZCwgbmlja25hbWU6IG5pY2tuYW1lLCBkYXRlOiBkYXRlLCBwYWdlX3NpemU6IDggfSwgKHJvdXRlLCBtc2cpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWNvcmREYXRhID0gbXNnO1xyXG4gICAgICAgICAgICB0aGlzLkxhYl90b3RhbFBhZ2Uuc3RyaW5nID0gdGhpcy5yZWNvcmREYXRhLnBhZ2VfdG90YWwgPT0gMD8xOnRoaXMucmVjb3JkRGF0YS5wYWdlX3RvdGFsO1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRoaXMucmVjb3JkRGF0YS5saXN0KTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIGluaXRVSShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5yZWNvcmREYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnN1Yl9udW1iZXIuc3RyaW5nID0gdGhpcy5yZWNvcmREYXRhLnN1Yl9udW1iZXI7XHJcbiAgICAgICAgdGhpcy5zdWJfZWZmZWN0aXZlX251bWJlci5zdHJpbmcgPSBgKCR7dGhpcy5yZWNvcmREYXRhLnN1Yl9lZmZlY3RpdmVfbnVtYmVyfSlgO1xyXG5cclxuICAgICAgICB0aGlzLnRlYW1fbnVtYmVyLnN0cmluZyA9IHRoaXMucmVjb3JkRGF0YS50ZWFtX3N1Yl9udW1iZXI7XHJcbiAgICAgICAgdGhpcy50ZWFtX2VmZmVjdGl2ZV9udW1iZXIuc3RyaW5nID0gYCgke3RoaXMucmVjb3JkRGF0YS5lZmZlY3RpdmVfbnVtYmVyfSlgO1xyXG5cclxuICAgICAgICAvL3RoaXMuaGlzdG9yeV9jb21taXNzaW9uLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQodGhpcy5yZWNvcmREYXRhLmhpc3RvcnlfY29tbWlzc2lvbik7XHJcblxyXG4gICAgICAgIHRoaXMuTGFiX3RvdGFsUGFnZS5zdHJpbmcgPSB0aGlzLnJlY29yZERhdGEucGFnZV90b3RhbCA9PSAwPzE6dGhpcy5yZWNvcmREYXRhLnBhZ2VfdG90YWw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZXRUYWJsZSh0aGlzLnJlY29yZERhdGEubGlzdCk7XHJcbiAgICB9LFxyXG4gICAgc2V0VGFibGUoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuY29udGVudC5kZXN0cm95QWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICBsZXQgY291bnQgPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICBpZiAoY291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vcmVjb3JkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaWFkU2hvd05vZGUoY291bnQgPiAwKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5mb0l0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmluZm9JdGVtKTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0ucGFyZW50ID0gdGhpcy5jb250ZW50O1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJiZ1wiKS5hY3RpdmUgPSBpICUgMiA9PSAxO1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcIm1lbWJlcklEXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZGF0YVtpXS5sb2dpY2lkO1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcIm5hbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBkYXRhW2ldLm5pY2tuYW1lO1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcImlzVHJ1ZVwiKS5nZXRDaGlsZEJ5TmFtZShkYXRhW2ldLmFnX2VmZmVjdGl2ZSA9PSAxID8gXCJpbWdfZ291XCIgOiBcImltZ19jaGFcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJ0cnVlTWVtYmVyXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZGF0YVtpXS5lZmZlY3RpdmVfbnVtYmVyOyAgICAgICAgIC8v5Zui6Zif5pyJ5pWI5oiQ5ZGYXHJcbiAgICAgICAgICAgIGxldCBoaXN0cm95dG90YWxjb21taXNzaW9uID0gZGF0YVtpXS5oaXN0b3J5X2NvbnRyaWJ1dGVfc3ViX2NvbW1pc3Npb24gKyBkYXRhW2ldLmhpc3RvcnlfY29udHJpYnV0ZV9iZXRfY29tbWlzc2lvblxyXG4gICAgICAgICAgICBsZXQgbV9oaXN0cm95dG90YWxjb21taXNzaW9uID0gaW5mb0l0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJoaXN0cm95dG90YWxjb21taXNzaW9uXCIpXHJcbiAgICAgICAgICAgIG1faGlzdHJveXRvdGFsY29tbWlzc2lvbi5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQoaGlzdHJveXRvdGFsY29tbWlzc2lvbik7ICAgIC8v5oC75L2j6YeRXHJcbiAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zZXR0aW5nVGFibGVMYWJlbENvbG9yKG1faGlzdHJveXRvdGFsY29tbWlzc2lvbik7XHJcbiAgICAgICAgICAgIGluZm9JdGVtLmdldENoaWxkQnlOYW1lKFwibG9naW5UaW1lXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZGF0YVtpXS5vZmZsaW5lX3RpbWU7ICAgICAgICAgICAgLy/nprvnur/ml7bpl7RcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFZmZlY3ROb2RlKHRoaXMsdGhpcy5jb250ZW50LDAuMDIsdHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgaGlhZFNob3dOb2RlKGlzQm9vbCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImJ0bl9wYWdldXBcIikuYWN0aXZlID0gaXNCb29sO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcInBhZ2VsYXlvdXRcIikuYWN0aXZlID0gaXNCb29sO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImJ0bl9wYWdlZG93blwiKS5hY3RpdmUgPSBpc0Jvb2w7XHJcbiAgICAgICAgLy8gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwiZXhwbGFpblwiKS5hY3RpdmUgPSBpc0Jvb2w7XHJcbiAgICB9LFxyXG4gICAgZ2V0RmxvYXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKE51bWJlcih2YWx1ZSkuZGl2KDEwMCkpLnRvU3RyaW5nKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHBhZ2V1cF9DQigpIHtcclxuICAgICAgICB0aGlzLnBhZ2UtLTtcclxuICAgICAgICBpZih0aGlzLnBhZ2U8MSl7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZSA9IDFcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuUmVxUGxheWVyRXh0ZW5zaW9uQ291bnRsZXNzTWVtYmVyKClcclxuICAgIH0sXHJcbiAgICBwYWdlZG93bl9DQigpIHtcclxuICAgICAgICB0aGlzLnBhZ2UrKztcclxuICAgICAgICBpZih0aGlzLnBhZ2U+TnVtYmVyKHRoaXMuTGFiX3RvdGFsUGFnZS5zdHJpbmcpKXtcclxuICAgICAgICAgICAgdGhpcy5wYWdlID0gTnVtYmVyKHRoaXMuTGFiX3RvdGFsUGFnZS5zdHJpbmcpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5SZXFQbGF5ZXJFeHRlbnNpb25Db3VudGxlc3NNZW1iZXIoKVxyXG4gICAgfSxcclxuICAgIHRpbWVzdGFtcFRvVGltZSh0aW1lc3RhbXApIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApOy8v5pe26Ze05oiz5Li6MTDkvY3pnIAqMTAwMO+8jOaXtumXtOaIs+S4ujEz5L2N55qE6K+d5LiN6ZyA5LmYMTAwMFxyXG4gICAgICAgIHZhciBZID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nO1xyXG4gICAgICAgIHZhciBNID0gKGRhdGUuZ2V0TW9udGgoKSsxIDwgMTAgPyAnMCcrKGRhdGUuZ2V0TW9udGgoKSsxKSA6IGRhdGUuZ2V0TW9udGgoKSsxKSArICctJztcclxuICAgICAgICB2YXIgRCA9IGRhdGUuZ2V0RGF0ZSgpPDEwPycwJytkYXRlLmdldERhdGUoKSsnICc6ZGF0ZS5nZXREYXRlKCkrJyAnXHJcbiAgICAgICAgdmFyIGggPSBkYXRlLmdldEhvdXJzKCkgKyAnOic7XHJcbiAgICAgICAgdmFyIG0gPSBkYXRlLmdldE1pbnV0ZXMoKTwxMD8nMCcrZGF0ZS5nZXRNaW51dGVzKCk6ZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgcmV0dXJuIFkrTStEK2grbTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICBPbkRlc3Ryb3koKSB7XHJcbiAgICB9LFxyXG59KTtcclxuIl19