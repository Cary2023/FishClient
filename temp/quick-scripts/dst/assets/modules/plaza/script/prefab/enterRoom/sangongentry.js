
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/enterRoom/sangongentry.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '0cf4fLefY1F65sbn3RZ9LRn', 'sangongentry');
// modules/plaza/script/prefab/enterRoom/sangongentry.js

"use strict";

glGame.baseclass.extend({
  properties: {
    sgRecord: cc.Prefab,
    sgRule: cc.Prefab,
    goldCount: cc.Label,
    level: {
      type: cc.Node,
      "default": []
    },
    kmdContent: cc.Node,
    kmd: {
      type: cc.Node,
      "default": []
    },
    BGM: {
      type: cc.AudioClip,
      "default": null
    }
  },
  onLoad: function onLoad() {
    this.gameid = 0;
    this.node.zIndex = 20;
    this.topRight = this.kmdContent.getChildByName("topright").position;
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);
    glGame.emitter.on("nodeRemove", this.click_back, this);
    glGame.emitter.on("updateUserData", this.updateuserInfo, this);
    this.registerEvent();
    this.reqEnterArea();
    this.updateuserInfo();
    this.playEnterAnimation();
  },
  RootNodeShow: function RootNodeShow() {
    this.node.active = true;
    this.registerEvent();
    this.reqEnterArea();
  },
  RootNodeHide: function RootNodeHide() {
    this.node.active = false;
    this.unregisterEvent();
  },
  registerEvent: function registerEvent() {
    glGame.emitter.on("onGameConfig", this.onGameConfig, this);
  },
  unregisterEvent: function unregisterEvent() {
    glGame.emitter.off("onGameConfig", this);
  },
  onGameConfig: function onGameConfig(msg) {
    this.gameConfig = msg;
    this.initUI();
  },
  reqEnterArea: function reqEnterArea() {
    this.gameID = glGame.scenetag.SANGONG;
    glGame.readyroom.reqEnterArea(glGame.scenetag.SANGONG);
  },
  initUI: function initUI() {
    this.node.active = true;
    var configure = this.gameConfig;
    var count = this.level.length;

    for (var i = 1; i < count; i++) {
      var layout = this.level[i].getChildByName("layout");
      var dizhu = layout.getChildByName("dizhu");
      var zhunru = layout.getChildByName("zhunrun");
      dizhu.getChildByName("dizhu_num").getComponent(cc.Label).string = this.getFloat(configure[i].BaseChips);
      zhunru.getChildByName("zhunru_num").getComponent(cc.Label).string = this.getFloat(configure[i].EntranceRestrictions);
    }
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "primary":
        this.enterGame(99);
        break;

      case "intermediate":
        this.enterGame(1);
        break;

      case "senior":
        this.enterGame(2);
        break;

      case "tuhao":
        this.enterGame(3);
        break;

      case "btn_back":
        this.click_back();
        break;

      case "btn_help":
        this.click_help();
        break;

      case "btn_record":
        this.click_record();
        break;

      case "mycoinInfo":
        this.click_addgold();
        break;

      case "btn_chongzhi":
        this.click_addgold();
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },
  onScrollview: function onScrollview() {
    this.node.getChildByName("gesture").active = false;
  },
  // 播放进入动画
  playEnterAnimation: function playEnterAnimation() {
    var _this = this;

    // 手势动画
    if (!cc.sys.localStorage.getItem("zjh_gesture")) {
      this.node.getChildByName("gesture").active = true;
      this.node.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {
        _this.node.getChildByName("gesture").active = false;
      })));
      cc.sys.localStorage.setItem("zjh_gesture", true);
    }

    var nCount = this.level.length;
    var rightPos = this.level[nCount - 2].position;

    for (var i = 0; i < nCount; i++) {
      var lvNode = this.level[i];
      var originPos = lvNode.position;
      lvNode.opacity = 0;
      lvNode.setPosition(cc.v2(originPos.x + 400, originPos.y));
      var delay = cc.delayTime(i * 0.05);
      var moveTo1 = cc.moveTo(0.3, cc.v2(originPos, originPos.y));
      var fadeIn = cc.fadeIn(0.1);
      moveTo1.easing(cc.easeBackOut());
      lvNode.runAction(cc.sequence(delay, cc.spawn(moveTo1, fadeIn)));
    }

    this.kmdCaches = []; // 孔明灯缓存

    this.kmdUsed = []; // 孔明灯列表

    this.kmdDelay = 2; // 孔明灯生成间隔

    this.kmdDelta = 0; // 孔明灯累计时间

    this.kmdYure();
  },
  update: function update(dt) {
    this.kmdDelta += dt;

    if (this.kmdDelta > this.kmdDelay) {
      this.kmdDelta = 0;
      this.createKmd(); // console.log("cached length: " + this.kmdCaches.length);
      // console.log("used length: " + this.kmdUsed.length);
    } // 移动位置


    var kmdNode;

    for (var i = 0, count = this.kmdUsed.length; i < count; i++) {
      kmdNode = this.kmdUsed[i];
      kmdNode.x += kmdNode.speed.x * dt;
      kmdNode.y += kmdNode.speed.y * dt;
    }

    for (var _i = 0, _count = this.kmdUsed.length; _i < _count; _i++) {
      kmdNode = this.kmdUsed[_i];

      if (kmdNode.x > this.topRight.x || kmdNode.y > this.topRight.y) {
        this.kmdUsed.splice(_i, 1);
        this.kmdCaches.push(kmdNode);
        kmdNode.active = false;
        return;
      }
    }
  },
  // 孔明灯预热
  kmdYure: function kmdYure() {
    for (var i = 0; i < 300; i++) {
      this.update(1);
    }
  },
  // 创建新的孔明灯
  createKmd: function createKmd() {
    var randValue = Math.random() * 0.9 + 0.1;

    if (Math.random() < 0.7) {
      randValue = Math.random() * 0.3 + 0.1;
    }

    var cloneNode;

    if (this.kmdCaches.length > 0) {
      cloneNode = this.kmdCaches.pop();
    }

    if (!cloneNode) {
      cloneNode = cc.instantiate(Math.random() < 0.5 ? this.kmd[0] : this.kmd[1]);
    }

    cloneNode.active = true;
    cloneNode.parent = this.kmdContent;

    if (randValue > 0.5) {
      cloneNode.speed = cc.v2(Math.random() * 2, randValue * 20 + 10);
    } else {
      cloneNode.speed = cc.v2(0, randValue * 20 + 10);
    }

    cloneNode.angle = (Math.random() - 0.5) * 10;
    cloneNode.scale = randValue;
    cloneNode.opacity = randValue * 255;
    cloneNode.x = this.getRandomX();
    cloneNode.y = randValue < 0.5 ? 0 : -640;
    this.kmdUsed.push(cloneNode);
  },
  // 获取随机x坐标
  getRandomX: function getRandomX() {
    var nCount = this.kmdUsed.length;
    var distance = nCount > 9 ? 50 : 150;

    if (nCount == 0) {
      return (Math.random() - 0.5) * 1800;
    }

    var randx = 0;

    for (var i = 0; i < 20; i++) {
      randx = (Math.random() - 0.5) * 1800;

      for (var j = 0; j < nCount; j++) {
        if (Math.abs(randx - this.kmdUsed[j].x) > distance) {
          return randx;
        }
      }
    }

    return randx;
  },

  /**
   * 进入金币场房间
   * @param level 99：体验场 场次类型 1:普通车 2:贵宾场 3:富豪场 
   */
  enterGame: function enterGame(level) {
    var _this2 = this;

    glGame.room.reqMyGameState(this.gameID, level).then(function () {
      var gameID = _this2.gameID;

      if (_this2.gameConfig[level] == null) {
        glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');
        return;
      }

      if (glGame.user.isTourist()) {
        if (level != 99) {
          glGame.panel.showRegisteredGift(true);
          return;
        }
      }

      if (glGame.user.suspicious == 1 && glGame.user.game == 2 || glGame.user.is_game == 2) {
        glGame.panel.showDialog("", "您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！", function () {
          glGame.panel.showService();
        }, function () {}, "我知道了", "联系客服");
        return;
      }

      if (_this2.gameConfig[level].EntranceRestrictions > glGame.user.get("coin")) {
        var string = "<color=#99C7FF>\u60A8\u7684\u91D1\u5E01\u4E0D\u8DB3\uFF0C\u8BE5\u623F\u95F4\u9700\u8981</c> <color=#ff0000> ".concat(_this2.getFloat(_this2.gameConfig[level].EntranceRestrictions), "  </c><color=#99C7FF>\u91D1\u5E01\u624D\u53EF\u4E0B\u6CE8\uFF0C\u662F\u5426\u9A6C\u4E0A\u524D\u5F80\u5145\u503C\uFF1F</c>");
        glGame.panel.showDialog("", string, function () {
          glGame.panel.showShop(100);
        }, function () {}, "取消", "充值");
        return;
      }

      glGame.panel.showJuHua();

      _this2.node.runAction(cc.sequence(cc.delayTime(15), cc.callFunc(function () {
        glGame.panel.closeJuHua();
      })));

      glGame.room.setGoldRoomInfo(gameID, level);
    });
  },

  /**
   * 检查玩家金币是否足够
   * @returns {boolean}
   */
  checkGold: function checkGold(coin, minCion) {
    if (parseInt(coin) < parseInt(minCion)) {
      glGame.panel.showDialog(glGame.i18n.t("USER.GOLDLACK.TITLE"), glGame.i18n.t("USER.GOLDLACK.CONTENT"), function () {
        glGame.panel.showPanelByName("shop");
      }, null);
      return false;
    }

    return true;
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  updateuserInfo: function updateuserInfo() {
    var coin = glGame.user.get("coin");
    this.goldCount.string = glGame.user.GoldTemp(coin);
  },
  setGameId: function setGameId(gameid) {
    this.gameid = gameid;
  },
  updateBgInfo: function updateBgInfo() {},
  click_addgold: function click_addgold() {
    glGame.panel.showShop(30);
  },
  click_back: function click_back() {
    glGame.readyroom.reqExitArea();
    this.remove();
  },
  click_help: function click_help() {
    var panel = glGame.panel.showPanel(this.sgRule);
    panel.zIndex = 30;
  },
  click_record: function click_record() {
    var panel = glGame.panel.showPanel(this.sgRecord);
    panel.zIndex = 30;
  },
  set: function set(key, value) {
    this[key] = value;
  },
  get: function get(key) {
    return this[key];
  },
  OnDestroy: function OnDestroy() {
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);
    glGame.emitter.off("nodeRemove", this);
    glGame.emitter.off("updateUserData", this);
    this.unregisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxlbnRlclJvb21cXHNhbmdvbmdlbnRyeS5qcyJdLCJuYW1lcyI6WyJnbEdhbWUiLCJiYXNlY2xhc3MiLCJleHRlbmQiLCJwcm9wZXJ0aWVzIiwic2dSZWNvcmQiLCJjYyIsIlByZWZhYiIsInNnUnVsZSIsImdvbGRDb3VudCIsIkxhYmVsIiwibGV2ZWwiLCJ0eXBlIiwiTm9kZSIsImttZENvbnRlbnQiLCJrbWQiLCJCR00iLCJBdWRpb0NsaXAiLCJvbkxvYWQiLCJnYW1laWQiLCJub2RlIiwiekluZGV4IiwidG9wUmlnaHQiLCJnZXRDaGlsZEJ5TmFtZSIsInBvc2l0aW9uIiwiZW1pdHRlciIsIm9uIiwiTUVTU0FHRSIsIlVJIiwiUk9PTV9FTlRFUl9TSE9XIiwiUm9vdE5vZGVTaG93IiwiUk9PTV9FTlRFUl9ISURFIiwiUm9vdE5vZGVIaWRlIiwiY2xpY2tfYmFjayIsInVwZGF0ZXVzZXJJbmZvIiwicmVnaXN0ZXJFdmVudCIsInJlcUVudGVyQXJlYSIsInBsYXlFbnRlckFuaW1hdGlvbiIsImFjdGl2ZSIsInVucmVnaXN0ZXJFdmVudCIsIm9uR2FtZUNvbmZpZyIsIm9mZiIsIm1zZyIsImdhbWVDb25maWciLCJpbml0VUkiLCJnYW1lSUQiLCJzY2VuZXRhZyIsIlNBTkdPTkciLCJyZWFkeXJvb20iLCJjb25maWd1cmUiLCJjb3VudCIsImxlbmd0aCIsImkiLCJsYXlvdXQiLCJkaXpodSIsInpodW5ydSIsImdldENvbXBvbmVudCIsInN0cmluZyIsImdldEZsb2F0IiwiQmFzZUNoaXBzIiwiRW50cmFuY2VSZXN0cmljdGlvbnMiLCJvbkNsaWNrIiwibmFtZSIsImVudGVyR2FtZSIsImNsaWNrX2hlbHAiLCJjbGlja19yZWNvcmQiLCJjbGlja19hZGRnb2xkIiwiY29uc29sZSIsImVycm9yIiwib25TY3JvbGx2aWV3Iiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwiZGVsYXlUaW1lIiwiY2FsbEZ1bmMiLCJzZXRJdGVtIiwibkNvdW50IiwicmlnaHRQb3MiLCJsdk5vZGUiLCJvcmlnaW5Qb3MiLCJvcGFjaXR5Iiwic2V0UG9zaXRpb24iLCJ2MiIsIngiLCJ5IiwiZGVsYXkiLCJtb3ZlVG8xIiwibW92ZVRvIiwiZmFkZUluIiwiZWFzaW5nIiwiZWFzZUJhY2tPdXQiLCJzcGF3biIsImttZENhY2hlcyIsImttZFVzZWQiLCJrbWREZWxheSIsImttZERlbHRhIiwia21kWXVyZSIsInVwZGF0ZSIsImR0IiwiY3JlYXRlS21kIiwia21kTm9kZSIsInNwZWVkIiwic3BsaWNlIiwicHVzaCIsInJhbmRWYWx1ZSIsIk1hdGgiLCJyYW5kb20iLCJjbG9uZU5vZGUiLCJwb3AiLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsImFuZ2xlIiwic2NhbGUiLCJnZXRSYW5kb21YIiwiZGlzdGFuY2UiLCJyYW5keCIsImoiLCJhYnMiLCJyb29tIiwicmVxTXlHYW1lU3RhdGUiLCJ0aGVuIiwicGFuZWwiLCJzaG93TXNnQm94IiwidXNlciIsImlzVG91cmlzdCIsInNob3dSZWdpc3RlcmVkR2lmdCIsInN1c3BpY2lvdXMiLCJnYW1lIiwiaXNfZ2FtZSIsInNob3dEaWFsb2ciLCJzaG93U2VydmljZSIsImdldCIsInNob3dTaG9wIiwic2hvd0p1SHVhIiwiY2xvc2VKdUh1YSIsInNldEdvbGRSb29tSW5mbyIsImNoZWNrR29sZCIsImNvaW4iLCJtaW5DaW9uIiwicGFyc2VJbnQiLCJpMThuIiwidCIsInNob3dQYW5lbEJ5TmFtZSIsInZhbHVlIiwiTnVtYmVyIiwiZGl2IiwidG9TdHJpbmciLCJHb2xkVGVtcCIsInNldEdhbWVJZCIsInVwZGF0ZUJnSW5mbyIsInJlcUV4aXRBcmVhIiwicmVtb3ZlIiwic2hvd1BhbmVsIiwic2V0Iiwia2V5IiwiT25EZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLFNBQVAsQ0FB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LEdBMVRvQixlQTBUaEJDLEdBMVRnQixFQTBUWFgsS0ExVFcsRUEwVEo7QUFDWixTQUFLVyxHQUFMLElBQVlYLEtBQVo7QUFDSCxHQTVUbUI7QUE4VHBCWixFQUFBQSxHQTlUb0IsZUE4VGhCdUIsR0E5VGdCLEVBOFRYO0FBQ0wsV0FBTyxLQUFLQSxHQUFMLENBQVA7QUFDSCxHQWhVbUI7QUFrVXBCQyxFQUFBQSxTQWxVb0IsdUJBa1VSO0FBQ1I1SixJQUFBQSxNQUFNLENBQUN3QixPQUFQLENBQWVnQixHQUFmLENBQW1CZCxPQUFPLENBQUNDLEVBQVIsQ0FBV0MsZUFBOUIsRUFBOEMsSUFBOUM7QUFDQTVCLElBQUFBLE1BQU0sQ0FBQ3dCLE9BQVAsQ0FBZWdCLEdBQWYsQ0FBbUJkLE9BQU8sQ0FBQ0MsRUFBUixDQUFXRyxlQUE5QixFQUE4QyxJQUE5QztBQUNBOUIsSUFBQUEsTUFBTSxDQUFDd0IsT0FBUCxDQUFlZ0IsR0FBZixDQUFtQixZQUFuQixFQUFpQyxJQUFqQztBQUNBeEMsSUFBQUEsTUFBTSxDQUFDd0IsT0FBUCxDQUFlZ0IsR0FBZixDQUFtQixnQkFBbkIsRUFBb0MsSUFBcEM7QUFDQSxTQUFLRixlQUFMO0FBQ0g7QUF4VW1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJnbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHNnUmVjb3JkOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgc2dSdWxlOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgZ29sZENvdW50OiBjYy5MYWJlbCxcclxuICAgICAgICBsZXZlbDoge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAga21kQ29udGVudDogY2MuTm9kZSxcclxuICAgICAgICBrbWQ6IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIEJHTToge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZWlkID0gMDtcclxuICAgICAgICB0aGlzLm5vZGUuekluZGV4ID0gMjA7XHJcbiAgICAgICAgdGhpcy50b3BSaWdodCA9IHRoaXMua21kQ29udGVudC5nZXRDaGlsZEJ5TmFtZShcInRvcHJpZ2h0XCIpLnBvc2l0aW9uO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKE1FU1NBR0UuVUkuUk9PTV9FTlRFUl9TSE9XLCB0aGlzLlJvb3ROb2RlU2hvdywgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oTUVTU0FHRS5VSS5ST09NX0VOVEVSX0hJREUsIHRoaXMuUm9vdE5vZGVIaWRlLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcIm5vZGVSZW1vdmVcIiwgdGhpcy5jbGlja19iYWNrLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcInVwZGF0ZVVzZXJEYXRhXCIsIHRoaXMudXBkYXRldXNlckluZm8sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIHRoaXMucmVxRW50ZXJBcmVhKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGV1c2VySW5mbygpO1xyXG4gICAgICAgIHRoaXMucGxheUVudGVyQW5pbWF0aW9uKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIFJvb3ROb2RlU2hvdygpe1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIHRoaXMucmVxRW50ZXJBcmVhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIFJvb3ROb2RlSGlkZSgpe1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwib25HYW1lQ29uZmlnXCIsIHRoaXMub25HYW1lQ29uZmlnLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgdW5yZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcIm9uR2FtZUNvbmZpZ1wiLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25HYW1lQ29uZmlnKG1zZykge1xyXG4gICAgICAgIHRoaXMuZ2FtZUNvbmZpZyA9IG1zZztcclxuICAgICAgICB0aGlzLmluaXRVSSgpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgcmVxRW50ZXJBcmVhKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLlNBTkdPTkc7XHJcbiAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFbnRlckFyZWEoZ2xHYW1lLnNjZW5ldGFnLlNBTkdPTkcpO1xyXG4gICAgfSxcclxuICAgXHJcbiAgICBpbml0VUkoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgbGV0IGNvbmZpZ3VyZSA9IHRoaXMuZ2FtZUNvbmZpZztcclxuICAgICAgICBsZXQgY291bnQgPSB0aGlzLmxldmVsLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxheW91dCA9IHRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJsYXlvdXRcIik7XHJcbiAgICAgICAgICAgIGxldCBkaXpodSA9IGxheW91dC5nZXRDaGlsZEJ5TmFtZShcImRpemh1XCIpO1xyXG4gICAgICAgICAgICBsZXQgemh1bnJ1ID0gbGF5b3V0LmdldENoaWxkQnlOYW1lKFwiemh1bnJ1blwiKTtcclxuXHJcbiAgICAgICAgICAgIGRpemh1LmdldENoaWxkQnlOYW1lKFwiZGl6aHVfbnVtXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGhpcy5nZXRGbG9hdChjb25maWd1cmVbaV0uQmFzZUNoaXBzKTtcclxuICAgICAgICAgICAgemh1bnJ1LmdldENoaWxkQnlOYW1lKFwiemh1bnJ1X251bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQoY29uZmlndXJlW2ldLkVudHJhbmNlUmVzdHJpY3Rpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ2xpY2sobmFtZSwgbm9kZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwicHJpbWFyeVwiOiB0aGlzLmVudGVyR2FtZSg5OSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiaW50ZXJtZWRpYXRlXCI6IHRoaXMuZW50ZXJHYW1lKDEpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNlbmlvclwiOiB0aGlzLmVudGVyR2FtZSgyKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0dWhhb1wiOiB0aGlzLmVudGVyR2FtZSgzKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fYmFja1wiOiB0aGlzLmNsaWNrX2JhY2soKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5faGVscFwiOiB0aGlzLmNsaWNrX2hlbHAoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fcmVjb3JkXCI6IHRoaXMuY2xpY2tfcmVjb3JkKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibXljb2luSW5mb1wiOiB0aGlzLmNsaWNrX2FkZGdvbGQoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fY2hvbmd6aGlcIjogdGhpcy5jbGlja19hZGRnb2xkKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmVycm9yKFwibm8gZmluZCBidXR0b24gbmFtZSAtPiAlc1wiLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2Nyb2xsdmlldygpIHtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJnZXN0dXJlXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDmkq3mlL7ov5vlhaXliqjnlLtcclxuICAgIHBsYXlFbnRlckFuaW1hdGlvbigpIHtcclxuICAgICAgICAvLyDmiYvlir/liqjnlLtcclxuICAgICAgICBpZighY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiempoX2dlc3R1cmVcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwiZ2VzdHVyZVwiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgzKSwgY2MuY2FsbEZ1bmMoKCk9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJnZXN0dXJlXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KSkpO1xyXG5cclxuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiempoX2dlc3R1cmVcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbkNvdW50ID0gdGhpcy5sZXZlbC5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHJpZ2h0UG9zID0gdGhpcy5sZXZlbFtuQ291bnQgLSAyXS5wb3NpdGlvbjtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsdk5vZGUgPSB0aGlzLmxldmVsW2ldO1xyXG4gICAgICAgICAgICBsZXQgb3JpZ2luUG9zID0gbHZOb2RlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBsdk5vZGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIGx2Tm9kZS5zZXRQb3NpdGlvbihjYy52MihvcmlnaW5Qb3MueCArIDQwMCwgb3JpZ2luUG9zLnkpKTtcclxuICAgICAgICAgICAgbGV0IGRlbGF5ID0gY2MuZGVsYXlUaW1lKGkgKiAwLjA1KTtcclxuICAgICAgICAgICAgbGV0IG1vdmVUbzEgPSBjYy5tb3ZlVG8oMC4zLCBjYy52MihvcmlnaW5Qb3MsIG9yaWdpblBvcy55KSk7XHJcbiAgICAgICAgICAgIGxldCBmYWRlSW4gPSBjYy5mYWRlSW4oMC4xKTtcclxuICAgICAgICAgICAgbW92ZVRvMS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSk7XHJcbiAgICAgICAgICAgIGx2Tm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoZGVsYXksIGNjLnNwYXduKG1vdmVUbzEsIGZhZGVJbikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMua21kQ2FjaGVzID0gW107ICAgIC8vIOWtlOaYjueBr+e8k+WtmFxyXG4gICAgICAgIHRoaXMua21kVXNlZCA9IFtdOyAgICAgIC8vIOWtlOaYjueBr+WIl+ihqFxyXG4gICAgICAgIHRoaXMua21kRGVsYXkgPSAyOyAgICAgIC8vIOWtlOaYjueBr+eUn+aIkOmXtOmalFxyXG4gICAgICAgIHRoaXMua21kRGVsdGEgPSAwOyAgICAgIC8vIOWtlOaYjueBr+e0r+iuoeaXtumXtFxyXG4gICAgICAgIHRoaXMua21kWXVyZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICB0aGlzLmttZERlbHRhICs9IGR0O1xyXG4gICAgICAgIGlmKHRoaXMua21kRGVsdGEgPiB0aGlzLmttZERlbGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMua21kRGVsdGEgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUttZCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjYWNoZWQgbGVuZ3RoOiBcIiArIHRoaXMua21kQ2FjaGVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidXNlZCBsZW5ndGg6IFwiICsgdGhpcy5rbWRVc2VkLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDnp7vliqjkvY3nva5cclxuICAgICAgICBsZXQga21kTm9kZTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwLCBjb3VudCA9IHRoaXMua21kVXNlZC5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGttZE5vZGUgPSB0aGlzLmttZFVzZWRbaV07XHJcbiAgICAgICAgICAgIGttZE5vZGUueCArPSBrbWROb2RlLnNwZWVkLnggKiBkdDtcclxuICAgICAgICAgICAga21kTm9kZS55ICs9IGttZE5vZGUuc3BlZWQueSAqIGR0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCwgY291bnQgPSB0aGlzLmttZFVzZWQubGVuZ3RoOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBrbWROb2RlID0gdGhpcy5rbWRVc2VkW2ldO1xyXG4gICAgICAgICAgICBpZihrbWROb2RlLnggPiB0aGlzLnRvcFJpZ2h0LnggfHwga21kTm9kZS55ID4gdGhpcy50b3BSaWdodC55KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmttZFVzZWQuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rbWRDYWNoZXMucHVzaChrbWROb2RlKTtcclxuICAgICAgICAgICAgICAgIGttZE5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDlrZTmmI7nga/pooTng61cclxuICAgIGttZFl1cmUoKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDMwMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8g5Yib5bu65paw55qE5a2U5piO54GvXHJcbiAgICBjcmVhdGVLbWQoKSB7XHJcbiAgICAgICAgbGV0IHJhbmRWYWx1ZSA9IE1hdGgucmFuZG9tKCkgKiAwLjkgKyAwLjE7XHJcblxyXG4gICAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCAwLjcpIHtcclxuICAgICAgICAgICAgcmFuZFZhbHVlID0gTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjbG9uZU5vZGU7XHJcbiAgICAgICAgaWYodGhpcy5rbWRDYWNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgIGNsb25lTm9kZSA9IHRoaXMua21kQ2FjaGVzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIWNsb25lTm9kZSkge1xyXG4gICAgICAgICAgICBjbG9uZU5vZGUgPSBjYy5pbnN0YW50aWF0ZShNYXRoLnJhbmRvbSgpIDwgMC41ID8gdGhpcy5rbWRbMF0gOiB0aGlzLmttZFsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsb25lTm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgY2xvbmVOb2RlLnBhcmVudCA9IHRoaXMua21kQ29udGVudDtcclxuICAgICAgICBpZihyYW5kVmFsdWUgPiAwLjUpIHtcclxuICAgICAgICAgICAgY2xvbmVOb2RlLnNwZWVkID0gY2MudjIoTWF0aC5yYW5kb20oKSAqIDIsICByYW5kVmFsdWUgKiAyMCArIDEwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjbG9uZU5vZGUuc3BlZWQgPSBjYy52MigwLCAgcmFuZFZhbHVlICogMjAgKyAxMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbG9uZU5vZGUuYW5nbGUgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDsgXHJcbiAgICAgICAgY2xvbmVOb2RlLnNjYWxlID0gcmFuZFZhbHVlO1xyXG4gICAgICAgIGNsb25lTm9kZS5vcGFjaXR5ID0gcmFuZFZhbHVlICogMjU1O1xyXG4gICAgICAgIGNsb25lTm9kZS54ID0gdGhpcy5nZXRSYW5kb21YKCk7XHJcbiAgICAgICAgY2xvbmVOb2RlLnkgPSByYW5kVmFsdWUgPCAwLjUgPyAwIDogLTY0MDtcclxuICAgICAgICB0aGlzLmttZFVzZWQucHVzaChjbG9uZU5vZGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDojrflj5bpmo/mnLp45Z2Q5qCHXHJcbiAgICBnZXRSYW5kb21YKCkge1xyXG4gICAgICAgIGxldCBuQ291bnQgPSB0aGlzLmttZFVzZWQubGVuZ3RoO1xyXG4gICAgICAgIGxldCBkaXN0YW5jZSA9IG5Db3VudCA+IDkgPyA1MCA6IDE1MDtcclxuICAgICAgICBpZihuQ291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTgwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByYW5keCA9IDA7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJhbmR4ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTgwMDtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IG5Db3VudDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZihNYXRoLmFicyhyYW5keCAtIHRoaXMua21kVXNlZFtqXS54KSA+IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhbmR4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmFuZHg7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+b5YWl6YeR5biB5Zy65oi/6Ze0XHJcbiAgICAgKiBAcGFyYW0gbGV2ZWwgOTnvvJrkvZPpqozlnLog5Zy65qyh57G75Z6LIDE65pmu6YCa6L2mIDI66LS15a6+5Zy6IDM65a+M6LGq5Zy6IFxyXG4gICAgICovXHJcbiAgICBlbnRlckdhbWUobGV2ZWwpIHtcclxuICAgICAgICBnbEdhbWUucm9vbS5yZXFNeUdhbWVTdGF0ZSh0aGlzLmdhbWVJRCwgbGV2ZWwpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ2FtZUlEID0gdGhpcy5nYW1lSUQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWVDb25maWdbbGV2ZWxdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93TXNnQm94KCfmj5DnpLonLCAn6K+l5oi/6Ze05bCa5pyq5byA5pS+77yM6K+35bCd6K+V5YW25LuW5oi/6Ze044CCJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChnbEdhbWUudXNlci5pc1RvdXJpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsICE9IDk5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZWdpc3RlcmVkR2lmdCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKChnbEdhbWUudXNlci5zdXNwaWNpb3VzID09IDEgJiYgZ2xHYW1lLnVzZXIuZ2FtZSA9PSAyICkgfHwgZ2xHYW1lLnVzZXIuaXNfZ2FtZSA9PSAyICl7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0RpYWxvZyhcIlwiLCBcIuaCqOeahOi0puWPt+aVsOaNruW8guW4uO+8jOaaguaXtuemgeatoui/m+WFpea4uOaIj++8jOWmguacieeWkemXru+8jOivt+iBlOezu+Wuouacje+8gVwiLCAoKSA9PiB7IGdsR2FtZS5wYW5lbC5zaG93U2VydmljZSgpIH0sICgpID0+IHt9LCBcIuaIkeefpemBk+S6hlwiLCBcIuiBlOezu+WuouacjVwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lQ29uZmlnW2xldmVsXS5FbnRyYW5jZVJlc3RyaWN0aW9ucyA+IGdsR2FtZS51c2VyLmdldChcImNvaW5cIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHJpbmcgPSBgPGNvbG9yPSM5OUM3RkY+5oKo55qE6YeR5biB5LiN6Laz77yM6K+l5oi/6Ze06ZyA6KaBPC9jPiA8Y29sb3I9I2ZmMDAwMD4gJHt0aGlzLmdldEZsb2F0KHRoaXMuZ2FtZUNvbmZpZ1tsZXZlbF0uRW50cmFuY2VSZXN0cmljdGlvbnMpfSAgPC9jPjxjb2xvcj0jOTlDN0ZGPumHkeW4geaJjeWPr+S4i+azqO+8jOaYr+WQpumprOS4iuWJjeW+gOWFheWAvO+8nzwvYz5gXHJcbiAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0RpYWxvZyhcIlwiLCBzdHJpbmcsICgpID0+IHsgZ2xHYW1lLnBhbmVsLnNob3dTaG9wKDEwMCkgfSwgKCkgPT4geyB9LCBcIuWPlua2iFwiLCBcIuWFheWAvFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dKdUh1YSgpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKFxyXG4gICAgICAgICAgICAgICAgY2MuZGVsYXlUaW1lKDE1KSxcclxuICAgICAgICAgICAgICAgIGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuY2xvc2VKdUh1YSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGdsR2FtZS5yb29tLnNldEdvbGRSb29tSW5mbyhnYW1lSUQsIGxldmVsKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOajgOafpeeOqeWutumHkeW4geaYr+WQpui2s+Wkn1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGNoZWNrR29sZChjb2luLCBtaW5DaW9uKSB7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KGNvaW4pIDwgcGFyc2VJbnQobWluQ2lvbikpIHtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dEaWFsb2coZ2xHYW1lLmkxOG4udChcIlVTRVIuR09MRExBQ0suVElUTEVcIiksIGdsR2FtZS5pMThuLnQoXCJVU0VSLkdPTERMQUNLLkNPTlRFTlRcIiksICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93UGFuZWxCeU5hbWUoXCJzaG9wXCIpO1xyXG4gICAgICAgICAgICB9LCBudWxsKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RmxvYXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKE51bWJlcih2YWx1ZSkuZGl2KDEwMCkpLnRvU3RyaW5nKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZXVzZXJJbmZvKCkge1xyXG4gICAgICAgIGxldCBjb2luID0gZ2xHYW1lLnVzZXIuZ2V0KFwiY29pblwiKVxyXG4gICAgICAgIHRoaXMuZ29sZENvdW50LnN0cmluZyA9IGdsR2FtZS51c2VyLkdvbGRUZW1wKGNvaW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRHYW1lSWQoZ2FtZWlkKSB7XHJcbiAgICAgICAgdGhpcy5nYW1laWQgPSBnYW1laWQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZUJnSW5mbygpIHtcclxuICAgIH0sXHJcblxyXG4gICAgY2xpY2tfYWRkZ29sZCgpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1Nob3AoMzApO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja19iYWNrKCkge1xyXG4gICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRXhpdEFyZWEoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja19oZWxwKCkge1xyXG4gICAgICAgIGxldCBwYW5lbCA9IGdsR2FtZS5wYW5lbC5zaG93UGFuZWwodGhpcy5zZ1J1bGUpO1xyXG4gICAgICAgIHBhbmVsLnpJbmRleCA9IDMwO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja19yZWNvcmQoKSB7XHJcbiAgICAgICAgbGV0IHBhbmVsID0gZ2xHYW1lLnBhbmVsLnNob3dQYW5lbCh0aGlzLnNnUmVjb3JkKTtcclxuICAgICAgICBwYW5lbC56SW5kZXggPSAzMDtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0KGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzW2tleV07XHJcbiAgICB9LFxyXG5cclxuICAgIE9uRGVzdHJveSgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoTUVTU0FHRS5VSS5ST09NX0VOVEVSX1NIT1csdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKE1FU1NBR0UuVUkuUk9PTV9FTlRFUl9ISURFLHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcIm5vZGVSZW1vdmVcIiwgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKFwidXBkYXRlVXNlckRhdGFcIix0aGlzKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgfVxyXG59KTtcclxuIl19