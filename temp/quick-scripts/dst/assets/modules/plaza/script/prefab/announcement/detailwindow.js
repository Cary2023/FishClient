
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/announcement/detailwindow.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '199c0hUyeNPBovHFhhbrRQj', 'detailwindow');
// modules/plaza/script/prefab/announcement/detailwindow.js

"use strict";

glGame.baseclass.extend({
  properties: {
    detailView1: cc.Node,
    contentItem: cc.Node,
    iconArr: [cc.SpriteFrame],
    imageItem: cc.Node,
    //以下为表格生成用到
    barItem: cc.Node,
    lineItem: cc.Node,
    wordItem: cc.Node,
    formView: cc.Node
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {},
  onClick: function onClick(name, node) {
    switch (name) {
      case "btn_close":
        this.remove();
        break;

      default:
        console.log(" btn name: ", name);
        break;
    }
  },
  //更新详细信息
  updateDetailView1: function updateDetailView1(data) {
    for (var i = 0; i < data.length; i++) {
      if (data[i].title == "活动细则" || data[i].title == "活动规则与条款") continue;

      if (data[i].type == 4 && data[i].img && data[i].img != "") {
        var imageItem = cc.instantiate(this.imageItem);
        glGame.panel.showRemoteImage(imageItem, data[i].img);
        imageItem.parent = this.detailView1;
        imageItem.active = true;
        continue;
      } else if (data[i].img == "") {
        continue;
      }

      if (data[i].title === "活动表格") {
        this.initform(data[i].content);
        continue;
      }

      var contentItem = cc.instantiate(this.contentItem);
      contentItem.parent = this.detailView1;
      contentItem.active = true;
      contentItem.getChildByName("Tip").getComponent(cc.Label).string = data[i].title + "：";
      contentItem.getChildByName("img_icon").getComponent(cc.Sprite).spriteFrame = this.iconArr[data[i].icon];

      if (data[i].title == "活动介绍") {
        contentItem.getChildByName("content2").active = true;
        contentItem.getChildByName("content2").getComponent(cc.Label).string = data[i].content;
      } else {
        contentItem.getChildByName("content1").active = true;
        contentItem.getChildByName("content1").getComponent(cc.Label).string = data[i].content;
      }
    }
  },
  //生成表格
  initform: function initform(data) {
    var formView = cc.instantiate(this.formView);
    formView.parent = this.detailView1;
    formView.active = true;
    formView.height = 100 + (data.length - 1) * 50;

    for (var i = 0; i < data.length; i++) {
      for (var j = 0; j < data[i].length; j++) {
        var wordItem = cc.instantiate(this.wordItem);
        wordItem.parent = formView;
        wordItem.getComponent(cc.RichText).string = data[i][j].replace("<br>", ",");
        wordItem.active = true;
      }
    }

    var total = 0;
    var lengthBest = data[0].length;

    for (var _i = lengthBest; _i >= 1; _i--) {
      total += formView.children[formView.childrenCount - _i].width;
    }

    var distance = (formView.width - total) / (data[0].length + 1);
    total = 0;
    var distanceArr = [];

    for (var _i2 = lengthBest; _i2 >= 1; _i2--) {
      total += formView.children[formView.childrenCount - _i2].width + distance;
      distanceArr.push(total);
    }

    var Count = 1;
    var Posy = -50;

    for (var _i3 = 0; _i3 < data.length; _i3++) {
      for (var _j = 0; _j < data[_i3].length; _j++) {
        formView.children[Count].x = _j == 0 ? distance : distance + distanceArr[_j - 1];
        formView.children[Count].y = Posy;

        if (_j == 1) {
          formView.children[Count].color = cc.color(246, 142, 30);
          formView.children[Count].getComponent(cc.RichText).string = formView.children[Count].getComponent(cc.RichText).string.replace("<br>", ",");
        }

        if (_j != 0) {
          var lineItem = cc.instantiate(this.lineItem);
          lineItem.parent = formView.getChildByName("bg");
          lineItem.y = -(formView.height / 2);
          lineItem.x = formView.children[Count].x - distance / 2;
          lineItem.height = formView.height - 20;
          lineItem.active = true;
          lineItem.zIndex = 100 + _j;
        }

        if (_i3 % 2 == 0) {
          var barItem = cc.instantiate(this.barItem);
          barItem.parent = formView.getChildByName("bg");
          barItem.active = true;
          barItem.y = Posy; //barItem.width = formView.width - 15;
        }

        Count++;
      }

      Posy -= 50;
    }
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxhbm5vdW5jZW1lbnRcXGRldGFpbHdpbmRvdy5qcyJdLCJuYW1lcyI6WyJnbEdhbWUiLCJiYXNlY2xhc3MiLCJleHRlbmQiLCJwcm9wZXJ0aWVzIiwiZGV0YWlsVmlldzEiLCJjYyIsIk5vZGUiLCJjb250ZW50SXRlbSIsImljb25BcnIiLCJTcHJpdGVGcmFtZSIsImltYWdlSXRlbSIsImJhckl0ZW0iLCJsaW5lSXRlbSIsIndvcmRJdGVtIiwiZm9ybVZpZXciLCJvbkxvYWQiLCJvbkNsaWNrIiwibmFtZSIsIm5vZGUiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlRGV0YWlsVmlldzEiLCJkYXRhIiwiaSIsImxlbmd0aCIsInRpdGxlIiwidHlwZSIsImltZyIsImluc3RhbnRpYXRlIiwicGFuZWwiLCJzaG93UmVtb3RlSW1hZ2UiLCJwYXJlbnQiLCJhY3RpdmUiLCJpbml0Zm9ybSIsImNvbnRlbnQiLCJnZXRDaGlsZEJ5TmFtZSIsImdldENvbXBvbmVudCIsIkxhYmVsIiwic3RyaW5nIiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJpY29uIiwiaGVpZ2h0IiwiaiIsIlJpY2hUZXh0IiwicmVwbGFjZSIsInRvdGFsIiwibGVuZ3RoQmVzdCIsImNoaWxkcmVuIiwiY2hpbGRyZW5Db3VudCIsIndpZHRoIiwiZGlzdGFuY2UiLCJkaXN0YW5jZUFyciIsInB1c2giLCJDb3VudCIsIlBvc3kiLCJ4IiwieSIsImNvbG9yIiwiekluZGV4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLENBQXdCO0FBRXBCQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsV0FBVyxFQUFDQyxFQUFFLENBQUNDLElBRFA7QUFFUkMsSUFBQUEsV0FBVyxFQUFDRixFQUFFLENBQUNDLElBRlA7QUFHUkUsSUFBQUEsT0FBTyxFQUFF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SDs7QUFDREQsUUFBQUEsS0FBSztBQUNSOztBQUNEQyxNQUFBQSxJQUFJLElBQUksRUFBUjtBQUNIO0FBQ0osR0FqSG1CLENBa0hwQjs7QUFsSG9CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZ2xHYW1lLmJhc2VjbGFzcy5leHRlbmQoe1xyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBkZXRhaWxWaWV3MTpjYy5Ob2RlLFxyXG4gICAgICAgIGNvbnRlbnRJdGVtOmNjLk5vZGUsXHJcbiAgICAgICAgaWNvbkFycjogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBpbWFnZUl0ZW06Y2MuTm9kZSxcclxuICAgICAgICAvL+S7peS4i+S4uuihqOagvOeUn+aIkOeUqOWIsFxyXG4gICAgICAgIGJhckl0ZW06IGNjLk5vZGUsXHJcbiAgICAgICAgbGluZUl0ZW06IGNjLk5vZGUsXHJcbiAgICAgICAgd29yZEl0ZW06IGNjLk5vZGUsXHJcbiAgICAgICAgZm9ybVZpZXc6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxyXG5cclxuICAgIG9uTG9hZCgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fY2xvc2VcIjogdGhpcy5yZW1vdmUoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKFwiIGJ0biBuYW1lOiBcIiwgbmFtZSk7IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAgLy/mm7TmlrDor6bnu4bkv6Hmga9cclxuICAgICB1cGRhdGVEZXRhaWxWaWV3MShkYXRhKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhW2ldLnRpdGxlID09IFwi5rS75Yqo57uG5YiZXCIgfHwgZGF0YVtpXS50aXRsZSA9PSBcIua0u+WKqOinhOWImeS4juadoeasvlwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0udHlwZSA9PSA0ICYmIGRhdGFbaV0uaW1nICYmIGRhdGFbaV0uaW1nICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZUl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmltYWdlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1JlbW90ZUltYWdlKGltYWdlSXRlbSwgZGF0YVtpXS5pbWcpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VJdGVtLnBhcmVudCA9IHRoaXMuZGV0YWlsVmlldzE7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUl0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhW2ldLmltZyA9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0udGl0bGUgPT09IFwi5rS75Yqo6KGo5qC8XCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGZvcm0oZGF0YVtpXS5jb250ZW50KVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGNvbnRlbnRJdGVtID0gY2MuaW5zdGFudGlhdGUodGhpcy5jb250ZW50SXRlbSk7XHJcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtLnBhcmVudCA9IHRoaXMuZGV0YWlsVmlldzE7XHJcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtLmdldENoaWxkQnlOYW1lKFwiVGlwXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZGF0YVtpXS50aXRsZSArIFwi77yaXCI7XHJcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtLmdldENoaWxkQnlOYW1lKFwiaW1nX2ljb25cIikuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmljb25BcnJbZGF0YVtpXS5pY29uXTtcclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0udGl0bGUgPT0gXCLmtLvliqjku4vnu41cIikge1xyXG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJjb250ZW50MlwiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGVudEl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJjb250ZW50MlwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGFbaV0uY29udGVudDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtLmdldENoaWxkQnlOYW1lKFwiY29udGVudDFcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtLmdldENoaWxkQnlOYW1lKFwiY29udGVudDFcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBkYXRhW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/nlJ/miJDooajmoLxcclxuICAgIGluaXRmb3JtKGRhdGEpIHtcclxuICAgICAgICBsZXQgZm9ybVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmZvcm1WaWV3KTtcclxuICAgICAgICBmb3JtVmlldy5wYXJlbnQgPSB0aGlzLmRldGFpbFZpZXcxO1xyXG4gICAgICAgIGZvcm1WaWV3LmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgZm9ybVZpZXcuaGVpZ2h0ID0gMTAwICsgKGRhdGEubGVuZ3RoIC0gMSkgKiA1MFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JkSXRlbSA9IGNjLmluc3RhbnRpYXRlKHRoaXMud29yZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgd29yZEl0ZW0ucGFyZW50ID0gZm9ybVZpZXc7XHJcbiAgICAgICAgICAgICAgICB3b3JkSXRlbS5nZXRDb21wb25lbnQoY2MuUmljaFRleHQpLnN0cmluZyA9IGRhdGFbaV1bal0ucmVwbGFjZShcIjxicj5cIiwgXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgd29yZEl0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgICAgIGxldCBsZW5ndGhCZXN0ID0gZGF0YVswXS5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGxlbmd0aEJlc3Q7IGkgPj0gMTsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRvdGFsICs9IGZvcm1WaWV3LmNoaWxkcmVuW2Zvcm1WaWV3LmNoaWxkcmVuQ291bnQgLSBpXS53aWR0aFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGlzdGFuY2UgPSAoZm9ybVZpZXcud2lkdGggLSB0b3RhbCkvKGRhdGFbMF0ubGVuZ3RoICsgMSk7XHJcbiAgICAgICAgdG90YWwgPSAwO1xyXG4gICAgICAgIGxldCBkaXN0YW5jZUFyciA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBsZW5ndGhCZXN0OyBpID49IDE7IGktLSkge1xyXG4gICAgICAgICAgICB0b3RhbCArPSBmb3JtVmlldy5jaGlsZHJlbltmb3JtVmlldy5jaGlsZHJlbkNvdW50IC0gaV0ud2lkdGggKyBkaXN0YW5jZVxyXG4gICAgICAgICAgICBkaXN0YW5jZUFyci5wdXNoKHRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IENvdW50ID0gMTtcclxuICAgICAgICBsZXQgUG9zeSA9IC01MFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGZvcm1WaWV3LmNoaWxkcmVuW0NvdW50XS54ID0gaiA9PSAwID8gZGlzdGFuY2UgOiBkaXN0YW5jZSArIGRpc3RhbmNlQXJyW2ogLSAxXTtcclxuICAgICAgICAgICAgICAgIGZvcm1WaWV3LmNoaWxkcmVuW0NvdW50XS55ID0gUG9zeVxyXG4gICAgICAgICAgICAgICAgaWYgKGogPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1WaWV3LmNoaWxkcmVuW0NvdW50XS5jb2xvciA9IGNjLmNvbG9yKDI0NiwgMTQyLCAzMClcclxuICAgICAgICAgICAgICAgICAgICBmb3JtVmlldy5jaGlsZHJlbltDb3VudF0uZ2V0Q29tcG9uZW50KGNjLlJpY2hUZXh0KS5zdHJpbmcgPSBmb3JtVmlldy5jaGlsZHJlbltDb3VudF0uZ2V0Q29tcG9uZW50KGNjLlJpY2hUZXh0KS5zdHJpbmcucmVwbGFjZShcIjxicj5cIiwgXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqICE9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZUl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmxpbmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbS5wYXJlbnQgPSBmb3JtVmlldy5nZXRDaGlsZEJ5TmFtZShcImJnXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtLnkgPSAtKGZvcm1WaWV3LmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtLnggPSBmb3JtVmlldy5jaGlsZHJlbltDb3VudF0ueCAtIGRpc3RhbmNlIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbS5oZWlnaHQgPSBmb3JtVmlldy5oZWlnaHQgLSAyMFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZUl0ZW0uekluZGV4ID0gMTAwICsgajtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhckl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJhckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhckl0ZW0ucGFyZW50ID0gZm9ybVZpZXcuZ2V0Q2hpbGRCeU5hbWUoXCJiZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXJJdGVtLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFySXRlbS55ID0gUG9zeTtcclxuICAgICAgICAgICAgICAgICAgICAvL2Jhckl0ZW0ud2lkdGggPSBmb3JtVmlldy53aWR0aCAtIDE1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ291bnQrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFBvc3kgLT0gNTA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIHVwZGF0ZSAoZHQpIHt9LFxyXG59KTtcclxuIl19