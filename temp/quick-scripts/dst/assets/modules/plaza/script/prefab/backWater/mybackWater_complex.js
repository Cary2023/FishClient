
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/backWater/mybackWater_complex.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '54277kYWMdGL7qweQlqhrgd', 'mybackWater_complex');
// modules/plaza/script/prefab/backWater/mybackWater_complex.js

"use strict";

/**
 * 返水信息面板
 * 有效投注*比例 = 返水金额
 * 今日有效投注 = 总的子游戏有效投注之和
 * 今日预计返水 = 总的子游戏返水金额之和
 */
var WATER_TIMING = 1; //定时返水

var WATER_REALTIME = 2; //实时返水
// key 为控件名称， value 为与服务端约定好的数组名称

var GAME_VARIETY_TAB = {
  tabs_official: 0,
  //官方平台
  tabs_qipai: 1,
  //棋牌
  tabs_jieji: 3,
  //街机
  tabs_buyu: 2,
  //捕鱼
  tabs_shixun: 4,
  //视讯
  tabs_tiyu: 6,
  //体育
  tabs_caipiao: 5,
  //彩票
  tabs_dianjing: 7 //电竞

};
glGame.baseclass.extend({
  properties: {
    typeNodeList: cc.Node,
    today_bet: cc.Label,
    //未返水有效投注
    today_back: cc.Label,
    //今日预计返水
    curback: cc.Label,
    //返水数额
    time: cc.Label,
    //返水结算时间
    timestrip: cc.Node,
    //非实时返水数据
    dmtips: cc.Node,
    //打码提示
    fstips: cc.Node,
    //返水提示
    cfgContent: cc.Node,
    cfgItem: cc.Node,
    btn_applyback: cc.Button,
    btn_rtimeback: cc.Node,
    end_backtip: [cc.Node],
    titleContent: cc.Node,
    wfsWenhao: cc.Node,
    //未返水问号
    klqWenhao: cc.Node //可领取问号

  },
  onLoad: function onLoad() {
    var _this = this;

    this.registerEvent();
    this.type = 0;
    this.gameRecord = null;
    this.initTopToggle();
    this.ReqRebateRecord();
    var clickNode = this.node.getChildByName("clickmask");
    clickNode.on(cc.Node.EventType.TOUCH_START, function () {
      _this.dmtips.active = false;
      _this.fstips.active = false;
      _this.clickMask.active = false;
    }, this);
    clickNode.active = false;
    this.clickMask = clickNode;
    this.switchPlatform(0);
  },
  onEnable: function onEnable() {
    this.switchPlatform(0);

    if (this.gameRecord) {
      this.initContent();
      this.typeNodeList.getChildByName("tabs_official").getComponent(cc.Toggle).isChecked = true;
    }
  },
  initTopToggle: function initTopToggle() {
    // 获取配表里面的数据牌区分是否开启分类
    var gameTypeList = glGame.gamelistcfg.get("gameDisplayTypeList");

    if (!gameTypeList) {
      return;
    }

    for (var tabName in GAME_VARIETY_TAB) {
      var id = GAME_VARIETY_TAB[tabName];
      this.typeNodeList.getChildByName(tabName).active = this.isGameOpen(gameTypeList, id);
    }

    this.typeNodeList.getChildByName("tabs_official").active = true;
  },
  //棋牌返水
  initContent: function initContent() {
    this.cfgContent.removeAllChildren();
    var gameRebateDetail = this.gameRecord.gameRebateDetail;
    var gameOrPlatMap = this.gameRecord.gameOrPlatMap;

    if (!gameRebateDetail[this.type]) {
      this.node.getChildByName("img_wodefanshui").active = true;
      return;
    }

    var index = 0;

    if (Object.keys(gameRebateDetail[this.type]) == 0) {
      this.node.getChildByName("img_wodefanshui").active = true;
      return;
    }

    gameRebateDetail = gameRebateDetail[this.type];

    for (var key in gameRebateDetail) {
      var data = gameRebateDetail[key];
      var item = cc.instantiate(this.cfgItem);
      item.parent = this.cfgContent;
      this.cfgContent.height += item.height;
      item.active = false;
      item.getChildByName("game").getComponent(cc.Label).string = data.name;
      item.getChildByName("bet").getComponent(cc.Label).string = "".concat(this.cutFloat(data.betting)); //有效投注

      item.getChildByName("porpor").getComponent(cc.Label).string = "".concat(Number(data.proportion).mul(100).toFixed(2), "%");
      item.getChildByName("coin").getComponent(cc.Label).string = "".concat(this.cutFloat(data.number)); //返水金额

      glGame.panel.settingTableLabelColor(item.getChildByName("coin"));
      item.getChildByName("bg").active = index % 2 == 0;
      index++;
    }

    this.node.getChildByName("img_wodefanshui").active = index == 0;
    glGame.panel.showEffectNode(this, this.cfgContent, 0.02, true);
  },
  //渲染上下部的其他UI
  initOtherUI: function initOtherUI() {
    this.today_bet.string = "".concat(this.cutFloat(this.gameRecord.betCoin));
    var allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);
    this.setEndbacktip();

    if (this.gameRecord.rebateType == WATER_REALTIME) {
      // 实时返水
      this.btn_applyback.node.active = false;
      this.btn_rtimeback.active = true;
      this.timestrip.active = false;
      this.today_back.string = "".concat(this.cutFloat(allRebateCoin)); // this.btn_rtimeback.getComponent(cc.Button).interactable = allRebateCoin != 0;
    } else {
      // 定时返水
      this.btn_rtimeback.active = false;
      this.timestrip.active = true;
      this.today_back.string = "".concat(this.cutFloat(this.gameRecord.rebateCoin));
      this.curback.string = "".concat(this.cutFloat(this.gameRecord.canReceive));
      this.time.string = "".concat(this.gameRecord.time);
      this.btn_applyback.node.active = true;
      this.btn_applyback.interactable = this.gameRecord.canReceive != 0;
      ;
    }

    this.klqWenhao.active = this.gameRecord.rebateType == WATER_TIMING && this.gameRecord.rebateExpirationTime != 0;
    this.wfsWenhao.active = this.gameRecord.rebateType == WATER_REALTIME && this.gameRecord.rebateExpirationTime != 0;
  },
  setEndbacktip: function setEndbacktip() {
    if (this.gameRecord.rebateType == WATER_REALTIME) {
      this.end_backtip[0].active = false;
      this.end_backtip[1].active = true;
    } else {
      this.end_backtip[0].active = true;
      this.end_backtip[1].active = false;
    }
  },
  registerEvent: function registerEvent() {
    glGame.emitter.on("updateReqRebateRecord", this.updateReqRebateRecord, this);
    glGame.emitter.on("updateReqRebateApply", this.updateReqRebateApply, this);
  },
  unRegisterEvent: function unRegisterEvent() {
    glGame.emitter.off("updateReqRebateRecord", this);
    glGame.emitter.off("updateReqRebateApply", this);
  },
  OnDestroy: function OnDestroy() {
    this.unRegisterEvent();
  },
  updateReqRebateRecord: function updateReqRebateRecord() {
    this.gameRecord = glGame.user.get("userPumpRecord");

    if (!this.gameRecord) {
      return glGame.user.ReqRebateRecord();
    }

    this.initOtherUI();
    this.initContent();
  },
  //领取返水成功
  updateReqRebateApply: function updateReqRebateApply(msg) {
    var coin = msg.coin || 0; //暂时

    var strContent = "";

    if (msg.type == 1) {
      strContent = glGame.tips.BACKWATER.GIVENOTICE.format("".concat(this.cutFloat(coin)));
    } else if (msg.type == 3) {
      strContent = glGame.tips.BACKWATER.APPLYSUCCESS.format("".concat(this.cutFloat(coin)));
    }

    glGame.panel.showMsgBox("", strContent);
    glGame.user.ReqRebateRecord();
  },
  onClick: function onClick(name, node) {
    if (glGame.user.isTourist()) {
      if (name != 'close' && name.indexOf("tabs_") == -1) {
        glGame.panel.showRegisteredGift(true);
        return;
      }
    }

    switch (name) {
      case "btn_applyback":
        this.applyback_cb();
        break;

      case "btn_rtimeback":
        this.applyback_cb();
        break;

      case "btn_dmwenhao":
        this.dmwenhao_cb();
        break;

      case "btn_fswenhao":
        this.fswenhao_cb();
        break;

      default:
        if (name.indexOf("tabs_") > -1) this.selectClick(name);
        break;
    }
  },
  selectClick: function selectClick(name) {
    this.switchPlatform(GAME_VARIETY_TAB[name]);
    this.initContent();
  },
  // 切换平台
  switchPlatform: function switchPlatform(type) {
    this.type = type;
    this.titleContent.getChildByName("img_yx").active = this.type == 2 || this.type == 0;
    this.titleContent.getChildByName("img_yxpt").active = this.type != 2 && this.type != 0;
  },
  ReqRebateRecord: function ReqRebateRecord() {
    glGame.user.ReqRebateRecord({
      accountId: glGame.user.userID,
      type: 1
    });
  },
  // 游戏是否开启
  isGameOpen: function isGameOpen(typeList, id) {
    var count = typeList.length;

    for (var i = 0; i < count; i++) {
      if (typeList[i].id == id) {
        return true;
      }
    }

    return false;
  },
  //浮点型运算取俩位
  cutFloat: function cutFloat(value) {
    return Number(value).div(100).toFixed(2).toString();
  },
  applyback_cb: function applyback_cb() {
    var allRebateCoin = Number(this.gameRecord.canReceive);

    if (this.gameRecord.rebateType == WATER_REALTIME) {
      allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);
    }

    if (allRebateCoin < this.gameRecord.minReceiveAmount * 100) {
      glGame.panel.showErrorTip(glGame.tips.BACKWATER.MINLIMIT.format("".concat(this.gameRecord.minReceiveAmount)));
      return;
    }

    glGame.user.ReqRebateApply();
  },
  dmwenhao_cb: function dmwenhao_cb() {
    var _this2 = this;

    this.clickMask.active = true;
    this.dmtips.stopAllActions();
    this.dmtips.active = true;
    this.dmtips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {
      _this2.dmtips.active = false;
      _this2.clickMask.active = false;
    })));
    this.dmtips.getChildByName("label").getComponent(cc.Label).string = "\u6BCF\u59290\u70B9\u6E05\u9664".concat(this.gameRecord.rebateExpirationTime, "\u5929\u524D\u672A\u8FD4\u6C34\u7684\u6253\u7801\u91CF");
  },
  fswenhao_cb: function fswenhao_cb() {
    var _this3 = this;

    this.clickMask.active = true;
    this.fstips.stopAllActions();
    this.fstips.active = true;
    this.fstips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {
      _this3.fstips.active = false;
      _this3.clickMask.active = false;
    })));
    this.fstips.getChildByName("label").getComponent(cc.Label).string = "\u6BCF\u59290\u70B9\u6E05\u9664".concat(this.gameRecord.rebateExpirationTime, "\u5929\u524D\u672A\u9886\u53D6\u7684\u8FD4\u6C34\u91D1\u989D");
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxiYWNrV2F0ZXJcXG15YmFja1dhdGVyX2NvbXBsZXguanMiXSwibmFtZXMiOlsiV0FURVJfVElNSU5HIiwiV0FURVJfUkVBTFRJTUUiLCJHQU1FX1ZBUklFVFlfVEFCIiwidGFic19vZmZpY2lhbCIsInRhYnNfcWlwYWkiLCJ0YWJzX2ppZWppIiwidGFic19idXl1IiwidGFic19zaGl4dW4iLCJ0YWJzX3RpeXUiLCJ0YWJzX2NhaXBpYW8iLCJ0YWJzX2RpYW5qaW5nIiwiZ2xHYW1lIiwiYmFzZWNsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsInR5cGVOb2RlTGlzdCIsImNjIiwiTm9kZSIsInRvZGF5X2JldCIsIkxhYmVsIiwidG9kYXlfYmFjayIsImN1cmJhY2siLCJ0aW1lIiwidGltZXN0cmlwIiwiZG10aXBzIiwiZnN0aXBzIiwiY2ZnQ29udGVudCIsImNmZ0l0ZW0iLCJidG5fYXBwbHliYWNrIiwiQnV0dG9uIiwiYnRuX3J0aW1lYmFjayIsImVuZF9iYWNrdGlwIiwidGl0bGVDb250ZW50Iiwid2ZzV2VuaGFvIiwia2xxV2VuaGFvIiwib25Mb2FkIiwicmVnaXN0ZXJFdmVudCIsInR5cGUiLCJnYW1lUmVjb3JkIiwiaW5pdFRvcFRvZ2dsZSIsIlJlcVJlYmF0ZVJlY29yZCIsImNsaWNrTm9kZSIsIm5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsIm9uIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJhY3RpdmUiLCJjbGlja01hc2siLCJzd2l0Y2hQbGF0Zm9ybSIsIm9uRW5hYmxlIiwiaW5pdENvbnRlbnQiLCJnZXRDb21wb25lbnQiLCJUb2dnbGUiLCJpc0NoZWNrZWQiLCJnYW1lVHlwZUxpc3QiLCJnYW1lbGlzdGNmZyIsImdldCIsInRhYk5hbWUiLCJpZCIsImlzR2FtZU9wZW4iLCJyZW1vdmVBbGxDaGlsZHJlbiIsImdhbWVSZWJhdGVEZXRhaWwiLCJnYW1lT3JQbGF0TWFwIiwiaW5kZXgiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiZGF0YSIsIml0ZW0iLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsImhlaWdodCIsInN0cmluZyIsIm5hbWUiLCJjdXRGbG9hdCIsImJldHRpbmciLCJOdW1iZXIiLCJwcm9wb3J0aW9uIiwibXVsIiwidG9GaXhlZCIsIm51bWJlciIsInBhbmVsIiwic2V0dGluZ1RhYmxlTGFiZWxDb2xvciIsInNob3dFZmZlY3ROb2RlIiwiaW5pdE90aGVyVUkiLCJiZXRDb2luIiwiYWxsUmViYXRlQ29pbiIsImNhblJlY2VpdmUiLCJyZWJhdGVDb2luIiwic2V0RW5kYmFja3RpcCIsInJlYmF0ZVR5cGUiLCJpbnRlcmFjdGFibGUiLCJyZWJhdGVFeHBpcmF0aW9uVGltZSIsImVtaXR0ZXIiLCJ1cGRhdGVSZXFSZWJhdGVSZWNvcmQiLCJ1cGRhdGVSZXFSZWJhdGVBcHBseSIsInVuUmVnaXN0ZXJFdmVudCIsIm9mZiIsIk9uRGVzdHJveSIsInVzZXIiLCJtc2ciLCJjb2luIiwic3RyQ29udGVudCIsInRpcHMiLCJCQUNLV0FURVIiLCJHSVZFTk9USUNFIiwiZm9ybWF0IiwiQVBQTFlTVUNDRVNTIiwic2hvd01zZ0JveCIsIm9uQ2xpY2siLCJpc1RvdXJpc3QiLCJpbmRleE9mIiwic2hvd1JlZ2lzdGVyZWRHaWZ0IiwiYXBwbHliYWNrX2NiIiwiZG13ZW5oYW9fY2IiLCJmc3dlbmhhb19jYiIsInNlbGVjdENsaWNrIiwiYWNjb3VudElkIiwidXNlcklEIiwidHlwZUxpc3QiLCJjb3VudCIsImxlbmd0aCIsImkiLCJ2YWx1ZSIsImRpdiIsInRvU3RyaW5nIiwibWluUmVjZWl2ZUFtb3VudCIsInNob3dFcnJvclRpcCIsIk1JTkxJTUlUIiwiUmVxUmViYXRlQXBwbHkiLCJzdG9wQWxsQWN0aW9ucyIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwiZGVsYXlUaW1lIiwiY2FsbEZ1bmMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7OztBQU1BLElB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QVosR0FBcUIsSUFBckI7QUFDQSxTQUFLdEIsTUFBTCxDQUFZMkcsU0FBWixDQUFzQnBILEVBQUUsQ0FBQ3FILFFBQUgsQ0FBWXJILEVBQUUsQ0FBQ3NILFNBQUgsQ0FBYSxDQUFiLENBQVosRUFBNkJ0SCxFQUFFLENBQUN1SCxRQUFILENBQVksWUFBSztBQUNoRSxNQUFBLE1BQUksQ0FBQzlHLE1BQUwsQ0FBWXNCLE1BQVosR0FBcUIsS0FBckI7QUFDQSxNQUFBLE1BQUksQ0FBQ0MsU0FBTCxDQUFlRCxNQUFmLEdBQXdCLEtBQXhCO0FBQ0gsS0FIa0QsQ0FBN0IsQ0FBdEI7QUFLQSxTQUFLdEIsTUFBTCxDQUFZa0IsY0FBWixDQUEyQixPQUEzQixFQUFvQ1MsWUFBcEMsQ0FBaURwQyxFQUFFLENBQUNHLEtBQXBELEVBQTJEc0QsTUFBM0QsNENBQTZFLEtBQUtuQyxVQUFMLENBQWdCdUQsb0JBQTdGO0FBQ0g7QUFqUm1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6L+U5rC05L+h5oGv6Z2i5p2/XHJcbiAqIOacieaViOaKleazqCrmr5TkvosgPSDov5TmsLTph5Hpop1cclxuICog5LuK5pel5pyJ5pWI5oqV5rOoID0g5oC755qE5a2Q5ri45oiP5pyJ5pWI5oqV5rOo5LmL5ZKMXHJcbiAqIOS7iuaXpemihOiuoei/lOawtCA9IOaAu+eahOWtkOa4uOaIj+i/lOawtOmHkemineS5i+WSjFxyXG4gKi9cclxuY29uc3QgV0FURVJfVElNSU5HID0gMTsgICAgIC8v5a6a5pe26L+U5rC0XHJcbmNvbnN0IFdBVEVSX1JFQUxUSU1FID0gMjsgICAvL+WunuaXtui/lOawtFxyXG5cclxuXHJcbi8vIGtleSDkuLrmjqfku7blkI3np7DvvIwgdmFsdWUg5Li65LiO5pyN5Yqh56uv57qm5a6a5aW955qE5pWw57uE5ZCN56ewXHJcbmNvbnN0IEdBTUVfVkFSSUVUWV9UQUIgPSB7XHJcbiAgICB0YWJzX29mZmljaWFsOiAwLCAgICAgICAgICAgLy/lrpjmlrnlubPlj7BcclxuICAgIHRhYnNfcWlwYWk6IDEsICAgICAgICAgICAgICAvL+aji+eJjFxyXG4gICAgdGFic19qaWVqaTogMywgICAgICAgICAgICAgIC8v6KGX5py6XHJcbiAgICB0YWJzX2J1eXU6IDIsICAgICAgICAgICAgICAgLy/mjZXpsbxcclxuICAgIHRhYnNfc2hpeHVuOiA0LCAgICAgICAgICAgICAvL+inhuiur1xyXG4gICAgdGFic190aXl1OiA2LCAgICAgICAgICAgICAgIC8v5L2T6IKyXHJcbiAgICB0YWJzX2NhaXBpYW86IDUsICAgICAgICAgICAgLy/lvannpahcclxuICAgIHRhYnNfZGlhbmppbmc6IDcsICAgICAgICAgICAvL+eUteernlxyXG59XHJcblxyXG5nbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdHlwZU5vZGVMaXN0OiBjYy5Ob2RlLFxyXG4gICAgICAgIHRvZGF5X2JldDogY2MuTGFiZWwsICAgICAgICAvL+acqui/lOawtOacieaViOaKleazqFxyXG4gICAgICAgIHRvZGF5X2JhY2s6IGNjLkxhYmVsLCAgICAgICAvL+S7iuaXpemihOiuoei/lOawtFxyXG4gICAgICAgIGN1cmJhY2s6IGNjLkxhYmVsLCAgICAgICAgICAvL+i/lOawtOaVsOminVxyXG4gICAgICAgIHRpbWU6IGNjLkxhYmVsLCAgICAgICAgICAgICAvL+i/lOawtOe7k+eul+aXtumXtFxyXG5cclxuICAgICAgICB0aW1lc3RyaXA6IGNjLk5vZGUsICAgICAgICAgLy/pnZ7lrp7ml7bov5TmsLTmlbDmja5cclxuICAgICAgICBkbXRpcHM6IGNjLk5vZGUsICAgICAgICAgICAgLy/miZPnoIHmj5DnpLpcclxuICAgICAgICBmc3RpcHM6IGNjLk5vZGUsICAgICAgICAgICAgLy/ov5TmsLTmj5DnpLpcclxuXHJcbiAgICAgICAgY2ZnQ29udGVudDogY2MuTm9kZSxcclxuICAgICAgICBjZmdJdGVtOiBjYy5Ob2RlLFxyXG4gICAgICAgIGJ0bl9hcHBseWJhY2s6IGNjLkJ1dHRvbixcclxuICAgICAgICBidG5fcnRpbWViYWNrOiBjYy5Ob2RlLFxyXG4gICAgICAgIGVuZF9iYWNrdGlwOiBbY2MuTm9kZV0sXHJcbiAgICAgICAgdGl0bGVDb250ZW50OiBjYy5Ob2RlLFxyXG4gICAgICAgIHdmc1dlbmhhbzogY2MuTm9kZSwgICAgICAgICAvL+acqui/lOawtOmXruWPt1xyXG4gICAgICAgIGtscVdlbmhhbzogY2MuTm9kZSwgICAgICAgICAvL+WPr+mihuWPlumXruWPt1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KClcclxuICAgICAgICB0aGlzLnR5cGUgPSAwO1xyXG4gICAgICAgIHRoaXMuZ2FtZVJlY29yZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0VG9wVG9nZ2xlKCk7XHJcbiAgICAgICAgdGhpcy5SZXFSZWJhdGVSZWNvcmQoKTtcclxuXHJcbiAgICAgICAgbGV0IGNsaWNrTm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImNsaWNrbWFza1wiKTtcclxuICAgICAgICBjbGlja05vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsICgpPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRtdGlwcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5mc3RpcHMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tNYXNrLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIGNsaWNrTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsaWNrTWFzayA9IGNsaWNrTm9kZTtcclxuICAgICAgICB0aGlzLnN3aXRjaFBsYXRmb3JtKDApO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICB0aGlzLnN3aXRjaFBsYXRmb3JtKDApO1xyXG4gICAgICAgIGlmKHRoaXMuZ2FtZVJlY29yZCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRDb250ZW50KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnR5cGVOb2RlTGlzdC5nZXRDaGlsZEJ5TmFtZShcInRhYnNfb2ZmaWNpYWxcIikuZ2V0Q29tcG9uZW50KGNjLlRvZ2dsZSkuaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRUb3BUb2dnbGUoKSB7XHJcbiAgICAgICAgLy8g6I635Y+W6YWN6KGo6YeM6Z2i55qE5pWw5o2u54mM5Yy65YiG5piv5ZCm5byA5ZCv5YiG57G7XHJcbiAgICAgICAgbGV0IGdhbWVUeXBlTGlzdCA9IGdsR2FtZS5nYW1lbGlzdGNmZy5nZXQoXCJnYW1lRGlzcGxheVR5cGVMaXN0XCIpO1xyXG4gICAgICAgIGlmKCFnYW1lVHlwZUxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGxldCB0YWJOYW1lIGluIEdBTUVfVkFSSUVUWV9UQUIpIHtcclxuICAgICAgICAgICAgbGV0IGlkID0gR0FNRV9WQVJJRVRZX1RBQlt0YWJOYW1lXTtcclxuICAgICAgICAgICAgdGhpcy50eXBlTm9kZUxpc3QuZ2V0Q2hpbGRCeU5hbWUodGFiTmFtZSkuYWN0aXZlID0gdGhpcy5pc0dhbWVPcGVuKGdhbWVUeXBlTGlzdCwgaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50eXBlTm9kZUxpc3QuZ2V0Q2hpbGRCeU5hbWUoXCJ0YWJzX29mZmljaWFsXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5qOL54mM6L+U5rC0XHJcbiAgICBpbml0Q29udGVudCgpIHtcclxuICAgICAgICB0aGlzLmNmZ0NvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgbGV0IGdhbWVSZWJhdGVEZXRhaWwgPSB0aGlzLmdhbWVSZWNvcmQuZ2FtZVJlYmF0ZURldGFpbDtcclxuICAgICAgICBsZXQgZ2FtZU9yUGxhdE1hcCA9IHRoaXMuZ2FtZVJlY29yZC5nYW1lT3JQbGF0TWFwO1xyXG5cclxuICAgICAgICBpZighZ2FtZVJlYmF0ZURldGFpbFt0aGlzLnR5cGVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImltZ193b2RlZmFuc2h1aVwiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGdhbWVSZWJhdGVEZXRhaWxbdGhpcy50eXBlXSkgPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJpbWdfd29kZWZhbnNodWlcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2FtZVJlYmF0ZURldGFpbCA9IGdhbWVSZWJhdGVEZXRhaWxbdGhpcy50eXBlXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIGdhbWVSZWJhdGVEZXRhaWwpIHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBnYW1lUmViYXRlRGV0YWlsW2tleV07XHJcbiAgICAgICAgICAgIGxldCBpdGVtID0gY2MuaW5zdGFudGlhdGUodGhpcy5jZmdJdGVtKTtcclxuICAgICAgICAgICAgaXRlbS5wYXJlbnQgPSB0aGlzLmNmZ0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuY2ZnQ29udGVudC5oZWlnaHQgKz0gaXRlbS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGl0ZW0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKFwiZ2FtZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgaXRlbS5nZXRDaGlsZEJ5TmFtZShcImJldFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGAke3RoaXMuY3V0RmxvYXQoZGF0YS5iZXR0aW5nKX1gOyAgICAgICAgICAgIC8v5pyJ5pWI5oqV5rOoXHJcbiAgICAgICAgICAgIGl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJwb3Jwb3JcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBgJHtOdW1iZXIoZGF0YS5wcm9wb3J0aW9uKS5tdWwoMTAwKS50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKFwiY29pblwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGAke3RoaXMuY3V0RmxvYXQoZGF0YS5udW1iZXIpfWA7ICAgICAgICAgICAgLy/ov5TmsLTph5Hpop1cclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNldHRpbmdUYWJsZUxhYmVsQ29sb3IoaXRlbS5nZXRDaGlsZEJ5TmFtZShcImNvaW5cIikpO1xyXG4gICAgICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKFwiYmdcIikuYWN0aXZlID0gaW5kZXggJSAyID09IDBcclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwiaW1nX3dvZGVmYW5zaHVpXCIpLmFjdGl2ZSA9IGluZGV4ID09IDA7XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFZmZlY3ROb2RlKHRoaXMsdGhpcy5jZmdDb250ZW50LDAuMDIsdHJ1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5riy5p+T5LiK5LiL6YOo55qE5YW25LuWVUlcclxuICAgIGluaXRPdGhlclVJKCkge1xyXG4gICAgICAgIHRoaXMudG9kYXlfYmV0LnN0cmluZyA9IGAke3RoaXMuY3V0RmxvYXQodGhpcy5nYW1lUmVjb3JkLmJldENvaW4pfWA7XHJcbiAgICAgICAgbGV0IGFsbFJlYmF0ZUNvaW4gPSBOdW1iZXIodGhpcy5nYW1lUmVjb3JkLmNhblJlY2VpdmUpICsgTnVtYmVyKHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVDb2luKTtcclxuICAgICAgICB0aGlzLnNldEVuZGJhY2t0aXAoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVUeXBlID09IFdBVEVSX1JFQUxUSU1FKSB7XHJcbiAgICAgICAgICAgIC8vIOWunuaXtui/lOawtFxyXG4gICAgICAgICAgICB0aGlzLmJ0bl9hcHBseWJhY2subm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5idG5fcnRpbWViYWNrLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXN0cmlwLmFjdGl2ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50b2RheV9iYWNrLnN0cmluZyA9IGAke3RoaXMuY3V0RmxvYXQoYWxsUmViYXRlQ29pbil9YDtcclxuICAgICAgICAgICAgLy8gdGhpcy5idG5fcnRpbWViYWNrLmdldENvbXBvbmVudChjYy5CdXR0b24pLmludGVyYWN0YWJsZSA9IGFsbFJlYmF0ZUNvaW4gIT0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5a6a5pe26L+U5rC0XHJcbiAgICAgICAgICAgIHRoaXMuYnRuX3J0aW1lYmFjay5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy50aW1lc3RyaXAuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9kYXlfYmFjay5zdHJpbmcgPSBgJHt0aGlzLmN1dEZsb2F0KHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVDb2luKX1gO1xyXG4gICAgICAgICAgICB0aGlzLmN1cmJhY2suc3RyaW5nID0gYCR7dGhpcy5jdXRGbG9hdCh0aGlzLmdhbWVSZWNvcmQuY2FuUmVjZWl2ZSl9YDtcclxuICAgICAgICAgICAgdGhpcy50aW1lLnN0cmluZyA9IGAke3RoaXMuZ2FtZVJlY29yZC50aW1lfWA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ0bl9hcHBseWJhY2subm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmJ0bl9hcHBseWJhY2suaW50ZXJhY3RhYmxlID0gdGhpcy5nYW1lUmVjb3JkLmNhblJlY2VpdmUgIT0gMDs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmtscVdlbmhhby5hY3RpdmUgPSB0aGlzLmdhbWVSZWNvcmQucmViYXRlVHlwZSA9PSBXQVRFUl9USU1JTkcgICYmIHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVFeHBpcmF0aW9uVGltZSAhPSAwO1xyXG4gICAgICAgIHRoaXMud2ZzV2VuaGFvLmFjdGl2ZSA9IHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVUeXBlID09IFdBVEVSX1JFQUxUSU1FICYmIHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVFeHBpcmF0aW9uVGltZSAhPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRFbmRiYWNrdGlwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWVSZWNvcmQucmViYXRlVHlwZSA9PSBXQVRFUl9SRUFMVElNRSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZF9iYWNrdGlwWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmVuZF9iYWNrdGlwWzFdLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRfYmFja3RpcFswXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmVuZF9iYWNrdGlwWzFdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcInVwZGF0ZVJlcVJlYmF0ZVJlY29yZFwiLCB0aGlzLnVwZGF0ZVJlcVJlYmF0ZVJlY29yZCwgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oXCJ1cGRhdGVSZXFSZWJhdGVBcHBseVwiLCB0aGlzLnVwZGF0ZVJlcVJlYmF0ZUFwcGx5LCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgdW5SZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcInVwZGF0ZVJlcVJlYmF0ZVJlY29yZFwiLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoXCJ1cGRhdGVSZXFSZWJhdGVBcHBseVwiLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5SZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVJlcVJlYmF0ZVJlY29yZCgpIHtcclxuICAgICAgICB0aGlzLmdhbWVSZWNvcmQgPSBnbEdhbWUudXNlci5nZXQoXCJ1c2VyUHVtcFJlY29yZFwiKTtcclxuICAgICAgICBpZiAoIXRoaXMuZ2FtZVJlY29yZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xHYW1lLnVzZXIuUmVxUmViYXRlUmVjb3JkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluaXRPdGhlclVJKCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q29udGVudCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+mihuWPlui/lOawtOaIkOWKn1xyXG4gICAgdXBkYXRlUmVxUmViYXRlQXBwbHkobXNnKSB7XHJcbiAgICAgICAgbGV0IGNvaW4gPSBtc2cuY29pbiB8fCAwOyAgICAgICAgLy/mmoLml7ZcclxuICAgICAgICBsZXQgc3RyQ29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKG1zZy50eXBlID09IDEpIHtcclxuICAgICAgICAgICAgc3RyQ29udGVudCA9IGdsR2FtZS50aXBzLkJBQ0tXQVRFUi5HSVZFTk9USUNFLmZvcm1hdChgJHt0aGlzLmN1dEZsb2F0KGNvaW4pfWApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobXNnLnR5cGUgPT0gMykge1xyXG4gICAgICAgICAgICBzdHJDb250ZW50ID0gZ2xHYW1lLnRpcHMuQkFDS1dBVEVSLkFQUExZU1VDQ0VTUy5mb3JtYXQoYCR7dGhpcy5jdXRGbG9hdChjb2luKX1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsR2FtZS5wYW5lbC5zaG93TXNnQm94KFwiXCIsIHN0ckNvbnRlbnQpO1xyXG4gICAgICAgIGdsR2FtZS51c2VyLlJlcVJlYmF0ZVJlY29yZCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkNsaWNrKG5hbWUsIG5vZGUpIHtcclxuICAgICAgICBpZiAoZ2xHYW1lLnVzZXIuaXNUb3VyaXN0KCkpIHtcclxuICAgICAgICAgICAgaWYgKG5hbWUgIT0gJ2Nsb3NlJyAmJiBuYW1lLmluZGV4T2YoXCJ0YWJzX1wiKSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZWdpc3RlcmVkR2lmdCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fYXBwbHliYWNrXCI6IHRoaXMuYXBwbHliYWNrX2NiKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX3J0aW1lYmFja1wiOiB0aGlzLmFwcGx5YmFja19jYigpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJ0bl9kbXdlbmhhb1wiOiB0aGlzLmRtd2VuaGFvX2NiKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX2Zzd2VuaGFvXCI6IHRoaXMuZnN3ZW5oYW9fY2IoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKFwidGFic19cIikgPiAtMSkgdGhpcy5zZWxlY3RDbGljayhuYW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2VsZWN0Q2xpY2sobmFtZSkge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoUGxhdGZvcm0oR0FNRV9WQVJJRVRZX1RBQltuYW1lXSk7XHJcbiAgICAgICAgdGhpcy5pbml0Q29udGVudCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDliIfmjaLlubPlj7BcclxuICAgIHN3aXRjaFBsYXRmb3JtKHR5cGUpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMudGl0bGVDb250ZW50LmdldENoaWxkQnlOYW1lKFwiaW1nX3l4XCIpLmFjdGl2ZSA9IHRoaXMudHlwZSA9PSAyIHx8IHRoaXMudHlwZSA9PSAwO1xyXG4gICAgICAgIHRoaXMudGl0bGVDb250ZW50LmdldENoaWxkQnlOYW1lKFwiaW1nX3l4cHRcIikuYWN0aXZlID0gdGhpcy50eXBlICE9IDIgJiYgdGhpcy50eXBlICE9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIFJlcVJlYmF0ZVJlY29yZCgpIHtcclxuICAgICAgICBnbEdhbWUudXNlci5SZXFSZWJhdGVSZWNvcmQoe1xyXG4gICAgICAgICAgICBhY2NvdW50SWQ6IGdsR2FtZS51c2VyLnVzZXJJRCxcclxuICAgICAgICAgICAgdHlwZTogMSxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g5ri45oiP5piv5ZCm5byA5ZCvXHJcbiAgICBpc0dhbWVPcGVuKHR5cGVMaXN0LCBpZCkge1xyXG4gICAgICAgIGxldCBjb3VudCA9IHR5cGVMaXN0Lmxlbmd0aDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0eXBlTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mta7ngrnlnovov5Dnrpflj5bkv6nkvY1cclxuICAgIGN1dEZsb2F0KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkuZGl2KDEwMCkudG9GaXhlZCgyKS50b1N0cmluZygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhcHBseWJhY2tfY2IoKSB7XHJcbiAgICAgICAgbGV0IGFsbFJlYmF0ZUNvaW4gPSBOdW1iZXIodGhpcy5nYW1lUmVjb3JkLmNhblJlY2VpdmUpO1xyXG4gICAgICAgIGlmKHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVUeXBlID09IFdBVEVSX1JFQUxUSU1FKSB7XHJcbiAgICAgICAgICAgIGFsbFJlYmF0ZUNvaW4gPSBOdW1iZXIodGhpcy5nYW1lUmVjb3JkLmNhblJlY2VpdmUpICsgTnVtYmVyKHRoaXMuZ2FtZVJlY29yZC5yZWJhdGVDb2luKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbGxSZWJhdGVDb2luIDwgdGhpcy5nYW1lUmVjb3JkLm1pblJlY2VpdmVBbW91bnQgKiAxMDApIHtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFcnJvclRpcChnbEdhbWUudGlwcy5CQUNLV0FURVIuTUlOTElNSVQuZm9ybWF0KGAke3RoaXMuZ2FtZVJlY29yZC5taW5SZWNlaXZlQW1vdW50fWApKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnbEdhbWUudXNlci5SZXFSZWJhdGVBcHBseSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBkbXdlbmhhb19jYigpIHtcclxuICAgICAgICB0aGlzLmNsaWNrTWFzay5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZG10aXBzLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5kbXRpcHMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRtdGlwcy5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDMpLCBjYy5jYWxsRnVuYygoKT0+IHtcclxuICAgICAgICAgICAgdGhpcy5kbXRpcHMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tNYXNrLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZG10aXBzLmdldENoaWxkQnlOYW1lKFwibGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBg5q+P5aSpMOeCuea4hemZpCR7dGhpcy5nYW1lUmVjb3JkLnJlYmF0ZUV4cGlyYXRpb25UaW1lfeWkqeWJjeacqui/lOawtOeahOaJk+eggemHj2A7XHJcbiAgICB9LFxyXG5cclxuICAgIGZzd2VuaGFvX2NiKCkge1xyXG4gICAgICAgIHRoaXMuY2xpY2tNYXNrLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mc3RpcHMuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmZzdGlwcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZnN0aXBzLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMyksIGNjLmNhbGxGdW5jKCgpPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZzdGlwcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5jbGlja01hc2suYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfSkpKTtcclxuXHJcbiAgICAgICAgdGhpcy5mc3RpcHMuZ2V0Q2hpbGRCeU5hbWUoXCJsYWJlbFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGDmr4/lpKkw54K55riF6ZmkJHt0aGlzLmdhbWVSZWNvcmQucmViYXRlRXhwaXJhdGlvblRpbWV95aSp5YmN5pyq6aKG5Y+W55qE6L+U5rC06YeR6aKdYDtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==