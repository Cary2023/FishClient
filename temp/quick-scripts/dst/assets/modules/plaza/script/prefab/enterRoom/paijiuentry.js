
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/enterRoom/paijiuentry.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'cd167DnItJPnpZEHND1Piit', 'paijiuentry');
// modules/plaza/script/prefab/enterRoom/paijiuentry.js

"use strict";

glGame.baseclass.extend({
  properties: {
    goldCount: cc.Label,
    level: {
      type: cc.Node,
      "default": []
    },
    pre_record: cc.Prefab,
    pre_help: cc.Prefab,
    BGM: {
      //背景声音
      type: cc.AudioClip,
      "default": null
    },
    dizhulaoutList: [cc.Node],
    zhunrulayoutList: [cc.Node]
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.gameid = 0;
    this.node.zIndex = 20;
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);
    glGame.emitter.on("nodeRemove", this.click_back, this);
    glGame.emitter.on("updateUserData", this.updateuserInfo, this);
    this.updateuserInfo();
    this.registerEvent();
    this.reqEnterArea();
  },
  RootNodeShow: function RootNodeShow() {
    this.node.active = true;
    this.registerEvent();
    this.reqEnterArea();
  },
  RootNodeHide: function RootNodeHide() {
    this.node.active = false;
    this.resetView();
    this.unregisterEvent();
  },
  //事件监听
  registerEvent: function registerEvent() {
    glGame.emitter.on("goldOnlineNum", this.goldOnlineNum, this);
    glGame.emitter.on("onGameConfig", this.onGameConfig, this);
  },
  //事件销毁
  unregisterEvent: function unregisterEvent() {
    glGame.emitter.off("goldOnlineNum", this);
    glGame.emitter.off("onGameConfig", this);
  },
  onGameConfig: function onGameConfig(msg) {
    this.gameConfig = msg;
    this.initUI();
  },
  goldOnlineNum: function goldOnlineNum() {},
  reqEnterArea: function reqEnterArea() {
    this.gameID = glGame.scenetag.PAIJIU;
    glGame.readyroom.reqEnterArea(glGame.scenetag.PAIJIU);
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "btn_back":
        this.click_back();
        break;

      case "btn_help":
        this.click_help();
        break;

      case "btn_record":
        this.click_record();
        break;

      case "mycoinInfo":
        this.click_addgold();
        break;

      case "headbg":
        this.click_userinfo();
        break;

      case "btn_chongzhi":
        this.click_addgold();
        break;

      case "primary":
        this.enterGame(99);
        break;

      case "intermediate":
        this.enterGame(1);
        break;

      case "senior":
        this.enterGame(2);
        break;

      case "tuhao":
        this.enterGame(3);
        break;

      case "supremacy":
        this.enterGame(4);
        break;

      case "volvo":
        this.enterGame(5);
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },

  /**
  * 进入金币场房间
  * @param level 场次类型 1:初级场 2:中级场 3:高级场 4:土豪场 5:至尊场
  */
  enterGame: function enterGame(level) {
    var _this = this;

    glGame.room.reqMyGameState(this.gameID, level).then(function () {
      var gameID = _this.gameID;

      if (_this.gameConfig[level] == null) {
        glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');
        return;
      }

      if (glGame.user.isTourist()) {
        if (level != 99) {
          glGame.panel.showRegisteredGift(true);
          return;
        }
      }

      if (glGame.user.suspicious == 1 && glGame.user.game == 2 || glGame.user.is_game == 2) {
        glGame.panel.showDialog("", "您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！", function () {
          glGame.panel.showService();
        }, function () {}, "我知道了", "联系客服");
        return;
      }

      if (_this.gameConfig[level].EntranceRestrictions > glGame.user.get("coin")) {
        console.log("这是当前的房间限制", _this.gameConfig);
        var string = "<color=#99C7FF>\u60A8\u7684\u91D1\u5E01\u4E0D\u8DB3\uFF0C\u8BE5\u623F\u95F4\u9700\u8981</c> <color=#ff0000> ".concat(_this.getFloat(_this.gameConfig[level].EntranceRestrictions), "  </c><color=#99C7FF>\u91D1\u5E01\u624D\u53EF\u4E0B\u6CE8\uFF0C\u662F\u5426\u9A6C\u4E0A\u524D\u5F80\u5145\u503C\uFF1F</c>");
        glGame.panel.showDialog("", string, function () {
          glGame.panel.showShop(100);
        }, function () {}, "取消", "充值");
        return;
      }

      glGame.panel.showJuHua();

      _this.node.runAction(cc.sequence(cc.delayTime(15), cc.callFunc(function () {
        glGame.panel.closeJuHua();
      }))); // TODO
      // reqGoldRoomVerify为旧的进入房间方法，需要先请求验证，再进入房间
      // setGoldRoomInfo 新的进入房间方法，无需验证，设置游戏类型以及房间信息后，直接进入房间
      // if (glGame.enterRoomVerification) {
      //     glGame.room.reqGoldRoomVerify(gameID, level);
      // } else {
      //     glGame.room.setGoldRoomInfo(gameID, level);
      // }


      glGame.room.setGoldRoomInfo(gameID, level);
    });
  },

  /**
  * 检查玩家金币是否足够
  * @returns {boolean}
  */
  checkGold: function checkGold(coin, minCion) {
    console.log("金币检测", coin, minCion);

    if (parseInt(coin) < parseInt(minCion)) {
      glGame.panel.showDialog(glGame.i18n.t("USER.GOLDLACK.TITLE"), glGame.i18n.t("USER.GOLDLACK.CONTENT"), function () {
        glGame.panel.showPanelByName("shop");
      }, null);
      return false;
    }

    return true;
  },
  initUI: function initUI() {
    var _this2 = this;

    this.resetView();
    this.node.active = true;
    var configure = this.gameConfig;
    var count = this.level.length;

    for (var i = 1; i < count; i++) {
      this.dizhulaoutList[i - 1].getChildByName("dizhu_num").getComponent(cc.Label).string = this.cutFloat(configure[i].BaseChips);
      this.zhunrulayoutList[i - 1].getChildByName("zhunru_num").getComponent(cc.Label).string = this.cutFloat(configure[i].EntranceRestrictions);
    }

    var animation = [];

    var _loop = function _loop(_i) {
      animation.push(cc.delayTime(0.05 * _i), cc.callFunc(function () {
        _this2.level[_i].active = true;

        _this2.level[_i].runAction(cc.sequence(cc.callFunc(function () {
          _this2.level[_i].getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function (trackEntry, loopCount) {
            var name = trackEntry.animation ? trackEntry.animation.name : "";

            if (name == "idle1") {
              _this2.level[_i].getChildByName("spine").getComponent(sp.Skeleton).timeScale = 1;

              _this2.level[_i].getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0, "idle2", true);
            }
          });

          _this2.level[_i].getChildByName("spine").getComponent(sp.Skeleton).timeScale = 1.3;

          _this2.level[_i].getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0, "idle1", false);
        }), cc.delayTime(0.4), cc.callFunc(function () {// if(this.level[i].getChildByName("zhunrulayout"))this.level[i].getChildByName("zhunrulayout").active = true;
          // if(this.level[i].getChildByName("dizhulaout"))this.level[i].getChildByName("dizhulaout").active = true;
        })));
      }));
    };

    for (var _i = 0; _i < 4; _i++) {
      _loop(_i);
    }

    this.node.runAction(cc.sequence(animation));
  },
  resetView: function resetView() {
    for (var i = 0; i < 4; i++) {
      this.level[i].active = false;
    }
  },
  cutFloat: function cutFloat(value) {
    return Number(value).div(100).toString();
  },
  showUserInfo: function showUserInfo() {
    glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get("headURL"));
  },
  updateuserInfo: function updateuserInfo() {
    var coin = glGame.user.get("coin");
    this.goldCount.string = glGame.user.cutFloat(coin); // this.goldCount.string = glGame.user.GoldTemp(coin);
  },
  setGameId: function setGameId(gameid) {
    this.gameid = gameid;
  },
  updateBgInfo: function updateBgInfo() {},
  click_userinfo: function click_userinfo() {
    glGame.panel.showPanelByName("userinfo");
  },
  click_addgold: function click_addgold() {
    glGame.panel.showShop(30);
  },
  click_back: function click_back() {
    glGame.readyroom.reqExitArea();
    this.remove();
  },
  click_help: function click_help() {
    glGame.panel.showPanel(this.pre_help).zIndex = 30;
  },
  click_record: function click_record() {
    glGame.panel.showPanel(this.pre_record).zIndex = 30;
  },
  set: function set(key, value) {
    this[key] = value;
  },
  get: function get(key) {
    return this[key];
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  OnDestroy: function OnDestroy() {
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);
    glGame.emitter.off("nodeRemove", this);
    glGame.emitter.off("updateUserData", this);
    this.unregisterEvent();
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxlbnRlclJvb21cXHBhaWppdWVudHJ5LmpzIl0sIm5hbWVzIjpbImdsR2FtZSIsImJhc2VjbGFzcyIsImV4dGVuZCIsInByb3BlcnRpZXMiLCJnb2xkQ291bnQiLCJjYyIsIkxhYmVsIiwibGV2ZWwiLCJ0eXBlIiwiTm9kZSIsInByZV9yZWNvcmQiLCJQcmVmYWIiLCJwcmVfaGVscCIsIkJHTSIsIkF1ZGlvQ2xpcCIsImRpemh1bGFvdXRMaXN0Iiwiemh1bnJ1bGF5b3V0TGlzdCIsIm9uTG9hZCIsImdhbWVpZCIsIm5vZGUiLCJ6SW5kZXgiLCJlbWl0dGVyIiwib24iLCJNRVNTQUdFIiwiVUkiLCJST09NX0VOVEVSX1NIT1ciLCJSb290Tm9kZVNob3ciLCJST09NX0VOVEVSX0hJREUiLCJSb290Tm9kZUhpZGUiLCJjbGlja19iYWNrIiwidXBkYXRldXNlckluZm8iLCJyZWdpc3RlckV2ZW50IiwicmVxRW50ZXJBcmVhIiwiYWN0aXZlIiwicmVzZXRWaWV3IiwidW5yZWdpc3RlckV2ZW50IiwiZ29sZE9ubGluZU51bSIsIm9uR2FtZUNvbmZpZyIsIm9mZiIsIm1zZyIsImdhbWVDb25maWciLCJpbml0VUkiLCJnYW1lSUQiLCJzY2VuZXRhZyIsIlBBSUpJVSIsInJlYWR5cm9vbSIsIm9uQ2xpY2siLCJuYW1lIiwiY2xpY2tfaGVscCIsImNsaWNrX3JlY29yZCIsImNsaWNrX2FkZGdvbGQiLCJjbGlja191c2VyaW5mbyIsImVudGVyR2FtZSIsImNvbnNvbGUiLCJlcnJvciIsInJvb20iLCJyZXFNeUdhbWVTdGF0ZSIsInRoZW4iLCJwYW5lbCIsInNob3dNc2dCb3giLCJ1c2VyIiwiaXNUb3VyaXN0Iiwic2hvd1JlZ2lzdGVyZWRHaWZ0Iiwic3VzcGljaW91cyIsImdhbWUiLCJpc19nYW1lIiwic2hvd0RpYWxvZyIsInNob3dTZXJ2aWNlIiwiRW50cmFuY2VSZXN0cmljdGlvbnMiLCJnZXQiLCJsb2ciLCJzdHJpbmciLCJnZXRGbG9hdCIsInNob3dTaG9wIiwic2hvd0p1SHVhIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyIsImNsb3NlSnVIdWEiLCJzZXRHb2xkUm9vbUluZm8iLCJjaGVja0dvbGQiLCJjb2luIiwibWluQ2lvbiIsInBhcnNlSW50IiwiaTE4biIsInQiLCJzaG93UGFuZWxCeU5hbWUiLCJjb25maWd1cmUiLCJjb3VudCIsImxlbmd0aCIsImkiLCJnZXRDaGlsZEJ5TmFtZSIsImdldENvbXBvbmVudCIsImN1dEZsb2F0IiwiQmFzZUNoaXBzIiwiYW5pbWF0aW9uIiwicHVzaCIsInNwIiwiU2tlbGV0b24iLCJzZXRDb21wbGV0ZUxpc3RlbmVyIiwidHJhY2tFbnRyeSIsImxvb3BDb3VudCIsInRpbWVTY2FsZSIsInNldEFuaW1hdGlvbiIsInZhbHVlIiwiTnVtYmVyIiwiZGl2IiwidG9TdHJpbmciLCJzaG93VXNlckluZm8iLCJzaG93UmVtb3RlSW1hZ2UiLCJQbGF5ZXJoZWFkIiwic2V0R2FtZUlkIiwidXBkYXRlQmdJbmZvIiwicmVxRXhpdEFyZWEiLCJyZW1vdmUiLCJzaG93UGFuZWwiLCJzZXQiLCJrZXkiLCJPbkRlc3Ryb3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsTUFBakIsQ0FBd0I7QUFFcEJDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxTQUFTLEVBQUVDLEVBQUUsQ0FBQ0MsS0FETjtBQUVSQyxJQUFBQSxLQUFLLEVBQUU7QUFDSEMsTUFBQUEsSUFBSSxFQUFFSCxFQUFFLENBQUNJLElBRE47QUFFSCxpQkFBUztBQUZOLEtBRkM7QUFNUkMsSUFBQUEsVUFBVSxFQUFFTCxFQUFFLENBQUNNLE1BTlA7QUFPUkMsSUFBQUEsUUFBUSxFQUFFUCxFQUFFLENBQUNNLE1BUEw7QUFRUkUsSUFBQUEsR0FBRyxFQUFFO0FBQStCO0FBQ2hDTCxNQUFBQSxJQUFJLEVB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LEdBL05tQjtBQWdPcEI5QyxFQUFBQSxRQWhPb0Isb0JBZ09YaUMsS0FoT1csRUFnT0o7QUFDWixXQUFRQyxNQUFNLENBQUNELEtBQUQsQ0FBTixDQUFjRSxHQUFkLENBQWtCLEdBQWxCLENBQUQsQ0FBeUJDLFFBQXpCLEVBQVA7QUFDSCxHQWxPbUI7QUFtT3BCVyxFQUFBQSxTQW5Pb0IsdUJBbU9SO0FBQ1J2SCxJQUFBQSxNQUFNLENBQUNxQixPQUFQLENBQWVpQixHQUFmLENBQW1CZixPQUFPLENBQUNDLEVBQVIsQ0FBV0MsZUFBOUIsRUFBK0MsSUFBL0M7QUFDQXpCLElBQUFBLE1BQU0sQ0FBQ3FCLE9BQVAsQ0FBZWlCLEdBQWYsQ0FBbUJmLE9BQU8sQ0FBQ0MsRUFBUixDQUFXRyxlQUE5QixFQUErQyxJQUEvQztBQUNBM0IsSUFBQUEsTUFBTSxDQUFDcUIsT0FBUCxDQUFlaUIsR0FBZixDQUFtQixZQUFuQixFQUFpQyxJQUFqQztBQUNBdEMsSUFBQUEsTUFBTSxDQUFDcUIsT0FBUCxDQUFlaUIsR0FBZixDQUFtQixnQkFBbkIsRUFBcUMsSUFBckM7QUFDQSxTQUFLSCxlQUFMO0FBQ0gsR0F6T21CLENBME9wQjs7QUExT29CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJnbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGdvbGRDb3VudDogY2MuTGFiZWwsXHJcbiAgICAgICAgbGV2ZWw6IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZV9yZWNvcmQ6IGNjLlByZWZhYixcclxuICAgICAgICBwcmVfaGVscDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJHTTogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IOM5pmv5aOw6Z+zXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuQXVkaW9DbGlwLFxyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXpodWxhb3V0TGlzdDpbY2MuTm9kZV0sXHJcbiAgICAgICAgemh1bnJ1bGF5b3V0TGlzdDpbY2MuTm9kZV0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxyXG5cclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICB0aGlzLmdhbWVpZCA9IDA7XHJcbiAgICAgICAgdGhpcy5ub2RlLnpJbmRleCA9IDIwO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKE1FU1NBR0UuVUkuUk9PTV9FTlRFUl9TSE9XLCB0aGlzLlJvb3ROb2RlU2hvdywgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oTUVTU0FHRS5VSS5ST09NX0VOVEVSX0hJREUsIHRoaXMuUm9vdE5vZGVIaWRlLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcIm5vZGVSZW1vdmVcIiwgdGhpcy5jbGlja19iYWNrLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcInVwZGF0ZVVzZXJEYXRhXCIsIHRoaXMudXBkYXRldXNlckluZm8sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRldXNlckluZm8oKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICB0aGlzLnJlcUVudGVyQXJlYSgpO1xyXG4gICAgfSxcclxuICAgIFJvb3ROb2RlU2hvdygpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICB0aGlzLnJlcUVudGVyQXJlYSgpO1xyXG4gICAgfSxcclxuICAgIFJvb3ROb2RlSGlkZSgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNldFZpZXcoKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgfSxcclxuICAgIC8v5LqL5Lu255uR5ZCsXHJcbiAgICByZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwiZ29sZE9ubGluZU51bVwiLCB0aGlzLmdvbGRPbmxpbmVOdW0sIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwib25HYW1lQ29uZmlnXCIsIHRoaXMub25HYW1lQ29uZmlnLCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICAvL+S6i+S7tumUgOavgVxyXG4gICAgdW5yZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcImdvbGRPbmxpbmVOdW1cIiwgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKFwib25HYW1lQ29uZmlnXCIsIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIG9uR2FtZUNvbmZpZyhtc2cpIHtcclxuICAgICAgICB0aGlzLmdhbWVDb25maWcgPSBtc2c7XHJcbiAgICAgICAgdGhpcy5pbml0VUkoKTtcclxuICAgIH0sXHJcbiAgICBnb2xkT25saW5lTnVtKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICByZXFFbnRlckFyZWEoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuUEFJSklVO1xyXG4gICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5QQUlKSVUpO1xyXG4gICAgfSxcclxuICAgIG9uQ2xpY2sobmFtZSwgbm9kZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX2JhY2tcIjogdGhpcy5jbGlja19iYWNrKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX2hlbHBcIjogdGhpcy5jbGlja19oZWxwKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX3JlY29yZFwiOiB0aGlzLmNsaWNrX3JlY29yZCgpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm15Y29pbkluZm9cIjogdGhpcy5jbGlja19hZGRnb2xkKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiaGVhZGJnXCI6IHRoaXMuY2xpY2tfdXNlcmluZm8oKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fY2hvbmd6aGlcIjogdGhpcy5jbGlja19hZGRnb2xkKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicHJpbWFyeVwiOiB0aGlzLmVudGVyR2FtZSg5OSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiaW50ZXJtZWRpYXRlXCI6IHRoaXMuZW50ZXJHYW1lKDEpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNlbmlvclwiOiB0aGlzLmVudGVyR2FtZSgyKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0dWhhb1wiOiB0aGlzLmVudGVyR2FtZSgzKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzdXByZW1hY3lcIjogdGhpcy5lbnRlckdhbWUoNCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidm9sdm9cIjogdGhpcy5lbnRlckdhbWUoNSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmVycm9yKFwibm8gZmluZCBidXR0b24gbmFtZSAtPiAlc1wiLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAqIOi/m+WFpemHkeW4geWcuuaIv+mXtFxyXG4gICAgKiBAcGFyYW0gbGV2ZWwg5Zy65qyh57G75Z6LIDE65Yid57qn5Zy6IDI65Lit57qn5Zy6IDM66auY57qn5Zy6IDQ65Zyf6LGq5Zy6IDU66Iez5bCK5Zy6XHJcbiAgICAqL1xyXG4gICAgZW50ZXJHYW1lKGxldmVsKSB7XHJcbiAgICAgICAgZ2xHYW1lLnJvb20ucmVxTXlHYW1lU3RhdGUodGhpcy5nYW1lSUQsIGxldmVsKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGdhbWVJRCA9IHRoaXMuZ2FtZUlEO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lQ29uZmlnW2xldmVsXSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd01zZ0JveCgn5o+Q56S6JywgJ+ivpeaIv+mXtOWwmuacquW8gOaUvu+8jOivt+WwneivleWFtuS7luaIv+mXtOOAgicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnbEdhbWUudXNlci5pc1RvdXJpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsICE9IDk5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZWdpc3RlcmVkR2lmdCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKGdsR2FtZS51c2VyLnN1c3BpY2lvdXMgPT0gMSAmJiBnbEdhbWUudXNlci5nYW1lID09IDIpIHx8IGdsR2FtZS51c2VyLmlzX2dhbWUgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dEaWFsb2coXCJcIiwgXCLmgqjnmoTotKblj7fmlbDmja7lvILluLjvvIzmmoLml7bnpoHmraLov5vlhaXmuLjmiI/vvIzlpoLmnInnlpHpl67vvIzor7fogZTns7vlrqLmnI3vvIFcIiwgKCkgPT4geyBnbEdhbWUucGFuZWwuc2hvd1NlcnZpY2UoKSB9LCAoKSA9PiB7IH0sIFwi5oiR55+l6YGT5LqGXCIsIFwi6IGU57O75a6i5pyNXCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUNvbmZpZ1tsZXZlbF0uRW50cmFuY2VSZXN0cmljdGlvbnMgPiBnbEdhbWUudXNlci5nZXQoXCJjb2luXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui/meaYr+W9k+WJjeeahOaIv+mXtOmZkOWItlwiLCB0aGlzLmdhbWVDb25maWcpXHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nID0gYDxjb2xvcj0jOTlDN0ZGPuaCqOeahOmHkeW4geS4jei2s++8jOivpeaIv+mXtOmcgOimgTwvYz4gPGNvbG9yPSNmZjAwMDA+ICR7dGhpcy5nZXRGbG9hdCh0aGlzLmdhbWVDb25maWdbbGV2ZWxdLkVudHJhbmNlUmVzdHJpY3Rpb25zKX0gIDwvYz48Y29sb3I9Izk5QzdGRj7ph5HluIHmiY3lj6/kuIvms6jvvIzmmK/lkKbpqazkuIrliY3lvoDlhYXlgLzvvJ88L2M+YFxyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dEaWFsb2coXCJcIiwgc3RyaW5nLCAoKSA9PiB7IGdsR2FtZS5wYW5lbC5zaG93U2hvcCgxMDApIH0sICgpID0+IHsgfSwgXCLlj5bmtohcIiwgXCLlhYXlgLxcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0p1SHVhKCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoXHJcbiAgICAgICAgICAgICAgICBjYy5kZWxheVRpbWUoMTUpLFxyXG4gICAgICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5jbG9zZUp1SHVhKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgICAgIC8vIHJlcUdvbGRSb29tVmVyaWZ55Li65pen55qE6L+b5YWl5oi/6Ze05pa55rOV77yM6ZyA6KaB5YWI6K+35rGC6aqM6K+B77yM5YaN6L+b5YWl5oi/6Ze0XHJcbiAgICAgICAgICAgIC8vIHNldEdvbGRSb29tSW5mbyDmlrDnmoTov5vlhaXmiL/pl7Tmlrnms5XvvIzml6DpnIDpqozor4HvvIzorr7nva7muLjmiI/nsbvlnovku6Xlj4rmiL/pl7Tkv6Hmga/lkI7vvIznm7TmjqXov5vlhaXmiL/pl7RcclxuICAgICAgICAgICAgLy8gaWYgKGdsR2FtZS5lbnRlclJvb21WZXJpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgLy8gICAgIGdsR2FtZS5yb29tLnJlcUdvbGRSb29tVmVyaWZ5KGdhbWVJRCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgZ2xHYW1lLnJvb20uc2V0R29sZFJvb21JbmZvKGdhbWVJRCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGdsR2FtZS5yb29tLnNldEdvbGRSb29tSW5mbyhnYW1lSUQsIGxldmVsKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgKiDmo4Dmn6Xnjqnlrrbph5HluIHmmK/lkKbotrPlpJ9cclxuICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAqL1xyXG4gICAgY2hlY2tHb2xkKGNvaW4sIG1pbkNpb24pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIumHkeW4geajgOa1i1wiLCBjb2luLCBtaW5DaW9uKTtcclxuICAgICAgICBpZiAocGFyc2VJbnQoY29pbikgPCBwYXJzZUludChtaW5DaW9uKSkge1xyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0RpYWxvZyhnbEdhbWUuaTE4bi50KFwiVVNFUi5HT0xETEFDSy5USVRMRVwiKSwgZ2xHYW1lLmkxOG4udChcIlVTRVIuR09MRExBQ0suQ09OVEVOVFwiKSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dQYW5lbEJ5TmFtZShcInNob3BcIik7XHJcbiAgICAgICAgICAgIH0sIG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGluaXRVSSgpIHtcclxuICAgICAgICB0aGlzLnJlc2V0VmlldygpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBjb25maWd1cmUgPSB0aGlzLmdhbWVDb25maWc7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5sZXZlbC5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGl6aHVsYW91dExpc3RbaS0xXS5nZXRDaGlsZEJ5TmFtZShcImRpemh1X251bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuY3V0RmxvYXQoY29uZmlndXJlW2ldLkJhc2VDaGlwcyk7XHJcbiAgICAgICAgICAgIHRoaXMuemh1bnJ1bGF5b3V0TGlzdFtpLTFdLmdldENoaWxkQnlOYW1lKFwiemh1bnJ1X251bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuY3V0RmxvYXQoY29uZmlndXJlW2ldLkVudHJhbmNlUmVzdHJpY3Rpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIGxldCBhbmltYXRpb24gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBhbmltYXRpb24ucHVzaChcclxuICAgICAgICAgICAgICAgIGNjLmRlbGF5VGltZSgwLjA1ICogaSksXHJcbiAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGV2ZWxbaV0ucnVuQWN0aW9uKGNjLnNlcXVlbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwic3BpbmVcIikuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRDb21wbGV0ZUxpc3RlbmVyKCh0cmFja0VudHJ5LCBsb29wQ291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHRyYWNrRW50cnkuYW5pbWF0aW9uID8gdHJhY2tFbnRyeS5hbmltYXRpb24ubmFtZSA6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJpZGxlMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJzcGluZVwiKS5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnRpbWVTY2FsZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJzcGluZVwiKS5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcImlkbGUyXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwic3BpbmVcIikuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS50aW1lU2NhbGUgPSAxLjM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwic3BpbmVcIikuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRBbmltYXRpb24oMCwgXCJpZGxlMVwiLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRlbGF5VGltZSgwLjQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwiemh1bnJ1bGF5b3V0XCIpKXRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJ6aHVucnVsYXlvdXRcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmKHRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJkaXpodWxhb3V0XCIpKXRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoXCJkaXpodWxhb3V0XCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhbmltYXRpb24pKVxyXG4gICAgfSxcclxuICAgIHJlc2V0Vmlldygpe1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWxbaV0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGN1dEZsb2F0KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIChOdW1iZXIodmFsdWUpLmRpdigxMDApKS50b1N0cmluZygpO1xyXG4gICAgfSxcclxuICAgIHNob3dVc2VySW5mbygpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1JlbW90ZUltYWdlKHRoaXMuUGxheWVyaGVhZCwgZ2xHYW1lLnVzZXIuZ2V0KFwiaGVhZFVSTFwiKSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRldXNlckluZm8oKSB7XHJcbiAgICAgICAgbGV0IGNvaW4gPSBnbEdhbWUudXNlci5nZXQoXCJjb2luXCIpXHJcbiAgICAgICAgdGhpcy5nb2xkQ291bnQuc3RyaW5nID0gZ2xHYW1lLnVzZXIuY3V0RmxvYXQoY29pbik7XHJcbiAgICAgICAgLy8gdGhpcy5nb2xkQ291bnQuc3RyaW5nID0gZ2xHYW1lLnVzZXIuR29sZFRlbXAoY29pbik7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEdhbWVJZChnYW1laWQpIHtcclxuICAgICAgICB0aGlzLmdhbWVpZCA9IGdhbWVpZDtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlQmdJbmZvKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBjbGlja191c2VyaW5mbygpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1BhbmVsQnlOYW1lKFwidXNlcmluZm9cIik7XHJcbiAgICB9LFxyXG4gICAgY2xpY2tfYWRkZ29sZCgpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1Nob3AoMzApO1xyXG4gICAgfSxcclxuICAgIGNsaWNrX2JhY2soKSB7XHJcbiAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFeGl0QXJlYSgpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICB9LFxyXG4gICAgY2xpY2tfaGVscCgpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1BhbmVsKHRoaXMucHJlX2hlbHApLnpJbmRleCA9IDMwO1xyXG4gICAgfSxcclxuICAgIGNsaWNrX3JlY29yZCgpIHtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1BhbmVsKHRoaXMucHJlX3JlY29yZCkuekluZGV4ID0gMzA7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0KGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzW2tleV07XHJcbiAgICB9LFxyXG4gICAgZ2V0RmxvYXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKE51bWJlcih2YWx1ZSkuZGl2KDEwMCkpLnRvU3RyaW5nKCk7XHJcbiAgICB9LFxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihNRVNTQUdFLlVJLlJPT01fRU5URVJfU0hPVywgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKE1FU1NBR0UuVUkuUk9PTV9FTlRFUl9ISURFLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoXCJub2RlUmVtb3ZlXCIsIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcInVwZGF0ZVVzZXJEYXRhXCIsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcbn0pO1xyXG4iXX0=