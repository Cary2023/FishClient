
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/rank/rank.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'dc8baovijlLrrhl3qQC08tk', 'rank');
// modules/plaza/script/prefab/rank/rank.js

"use strict";

glGame.baseclass.extend({
  properties: {
    content: cc.Node,
    withdrawalPanel: cc.Node,
    withdrawalMyinfo: cc.Node,
    withdrawalItem: cc.Node,
    extensionPanel: cc.Node,
    extensionMyinfo: cc.Node,
    extensionItem: cc.Node
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.extensionpage = 1;
    this.withdrawalpage = 1;
    this.registerEvent();
    glGame.panel.showEffectPariticle(this.node);
  },
  // 注册界面监听事件
  registerEvent: function registerEvent() {
    glGame.emitter.on("".concat(this.node.name).concat(MESSAGE.UI.ACTION_END), this.ReqCashRanking, this);
  },
  // 销毁界面监听事件
  unRegisterEvent: function unRegisterEvent() {
    glGame.emitter.off("".concat(this.node.name).concat(MESSAGE.UI.ACTION_END), this);
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "withdrawal":
      case "extension":
        this.switchPanel(name);
        break;

      case "btn_close":
        this.remove();
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },
  //请求推广增加(滚动监听)
  reqExtensionAdd: function reqExtensionAdd(scrollview, eventType) {
    if (eventType == cc.ScrollView.EventType.SCROLL_TO_BOTTOM) {
      if (this.extensionupdateNow) return;
      this.extensionupdateNow = true;
      this.extensionpage++;
      if (this.extensionpage > 5) return;
      this.ReqCommissionRanking();
      this.scheduleOnce(function () {
        this.extensionupdateNow = false;
      }, 1);
    }
  },
  //推广佣金榜
  ReqCommissionRanking: function ReqCommissionRanking() {
    var _this = this;

    var page = this.extensionpage;
    glGame.gameNet.send_msg('http.ReqCommissionRanking', {
      pageSize: 10,
      page: page
    }, function (route, msg) {
      _this.updateExtension(msg.data);
    });
  },
  //刷新推广排行
  updateExtension: function updateExtension(data) {
    var ranking = data.ranking;

    for (var i = 0; i < ranking.length; i++) {
      var extensionItem = cc.instantiate(this.extensionItem);
      extensionItem.parent = this.extensionPanel;
      extensionItem.active = false;
      extensionItem.getChildByName("layout").getChildByName("vip_bg").getChildByName("vipLevel").getComponent(cc.Label).string = ranking[i].vipLevel;
      extensionItem.getChildByName("cashAmount").getComponent(cc.Label).string = this.getFloat(ranking[i].commission);
      extensionItem.getChildByName("layout").getChildByName("name").getComponent(cc.Label).string = ranking[i].nickname;
      extensionItem.getChildByName("logicid").getComponent(cc.Label).string = "ID:".concat(ranking[i].logicId);
      extensionItem.getChildByName("teamNumber").getComponent(cc.Label).string = ranking[i].teamNumber;
      glGame.panel.showRemoteImage(extensionItem.getChildByName("mask").getChildByName("head"), ranking[i].headUrl);

      if (extensionItem.getChildByName("rank_".concat(ranking[i].rank))) {
        extensionItem.getChildByName("rank_".concat(ranking[i].rank)).active = true;
      } else {
        extensionItem.getChildByName("rankLevel").active = true;
        extensionItem.getChildByName("rankLevel").getComponent(cc.Label).string = ranking[i].rank;
      }
    }

    glGame.panel.showEffectNode(this, this.extensionPanel, 0.02, true); //我的信息

    var myRanking = data.myRanking;
    this.extensionMyinfo.getChildByName("img_wsb").active = myRanking.rank == 0;
    this.extensionMyinfo.getChildByName("rankLevel").active = myRanking.rank != 0;
    this.extensionMyinfo.getChildByName("rankLevel").getComponent(cc.Label).string = myRanking.rank;
    this.extensionMyinfo.getChildByName("teamNumber").getComponent(cc.Label).string = myRanking.teamNumber;
    this.extensionMyinfo.getChildByName("layout").getChildByName("name").getComponent(cc.Label).string = myRanking.nickname;
    this.extensionMyinfo.getChildByName("logicid").getComponent(cc.Label).string = "ID:".concat(myRanking.logicId);
    this.extensionMyinfo.getChildByName("cashAmount").getComponent(cc.Label).string = this.getFloat(myRanking.commission);
    this.extensionMyinfo.getChildByName("layout").getChildByName("vip_bg").getChildByName("vipLevel").getComponent(cc.Label).string = myRanking.vipLevel;
    glGame.panel.showRemoteImage(this.extensionMyinfo.getChildByName("mask").getChildByName("head"), myRanking.headUrl);
  },
  //请求提现增加(滚动监听)
  reqWithdrawalAdd: function reqWithdrawalAdd(scrollview, eventType) {
    if (eventType == cc.ScrollView.EventType.SCROLL_TO_BOTTOM) {
      if (this.withdrawalupdateNow) return;
      this.withdrawalupdateNow = true;
      this.withdrawalpage++;
      if (this.withdrawalpage > 5) return;
      this.ReqCashRanking();
      this.scheduleOnce(function () {
        this.withdrawalupdateNow = false;
      }, 1);
    }
  },
  //提现金额排行
  ReqCashRanking: function ReqCashRanking() {
    var _this2 = this;

    var page = this.withdrawalpage;
    glGame.gameNet.send_msg('http.ReqCashRanking', {
      pageSize: 10,
      page: page
    }, function (route, msg) {
      _this2.updateWithdrawal(msg.data);
    });
  },
  //刷新提现排行
  updateWithdrawal: function updateWithdrawal(data) {
    var ranking = data.ranking;

    for (var i = 0; i < ranking.length; i++) {
      var withdrawalItem = cc.instantiate(this.withdrawalItem);
      withdrawalItem.parent = this.withdrawalPanel;
      withdrawalItem.active = false;
      withdrawalItem.getChildByName("layout").getChildByName("vip_bg").getChildByName("vipLevel").getComponent(cc.Label).string = ranking[i].vipLevel;
      withdrawalItem.getChildByName("cashAmount").getComponent(cc.Label).string = this.getFloat(ranking[i].cashAmount);
      withdrawalItem.getChildByName("layout").getChildByName("name").getComponent(cc.Label).string = ranking[i].nickname;
      withdrawalItem.getChildByName("logicid").getComponent(cc.Label).string = "ID:".concat(ranking[i].logicId);
      glGame.panel.showRemoteImage(withdrawalItem.getChildByName("mask").getChildByName("head"), ranking[i].headUrl);

      if (withdrawalItem.getChildByName("rank_".concat(ranking[i].rank))) {
        withdrawalItem.getChildByName("rank_".concat(ranking[i].rank)).active = true;
      } else {
        withdrawalItem.getChildByName("rankLevel").active = true;
        withdrawalItem.getChildByName("rankLevel").getComponent(cc.Label).string = ranking[i].rank;
      }
    }

    glGame.panel.showEffectNode(this, this.withdrawalPanel, 0.02, true); //我的信息

    var myRanking = data.myRanking;
    this.withdrawalMyinfo.getChildByName("img_wsb").active = myRanking.rank == 0;
    this.withdrawalMyinfo.getChildByName("rankLevel").active = myRanking.rank != 0;
    this.withdrawalMyinfo.getChildByName("rankLevel").getComponent(cc.Label).string = myRanking.rank;
    this.withdrawalMyinfo.getChildByName("layout").getChildByName("name").getComponent(cc.Label).string = myRanking.nickname;
    this.withdrawalMyinfo.getChildByName("logicid").getComponent(cc.Label).string = "ID:".concat(myRanking.logicId);
    this.withdrawalMyinfo.getChildByName("cashAmount").getComponent(cc.Label).string = this.getFloat(myRanking.cashAmount);
    this.withdrawalMyinfo.getChildByName("layout").getChildByName("vip_bg").getChildByName("vipLevel").getComponent(cc.Label).string = myRanking.vipLevel;
    glGame.panel.showRemoteImage(this.withdrawalMyinfo.getChildByName("mask").getChildByName("head"), myRanking.headUrl);
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  switchPanel: function switchPanel(name) {
    this.withdrawalpage = 1;
    this.extensionpage = 1;

    for (var i = 0; i < this.content.childrenCount; i++) {
      this.content.children[i].getChildByName("view").getChildByName("content").removeAllChildren();

      if (this.content.children[i].name == name) {
        this.content.children[i].active = true;
        if (this.extensionPanel.childrenCount == 0 && this.content.children[i].name == name) this.ReqCommissionRanking();
        if (this.withdrawalPanel.childrenCount == 0 && this.content.children[i].name == name) this.ReqCashRanking();
      } else {
        this.content.children[i].active = false;
      }
    }
  },
  OnDestroy: function OnDestroy() {
    this.unRegisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxyYW5rXFxyYW5rLmpzIl0sIm5hbWVzIjpbImdsR2FtZSIsImJhc2VjbGFzcyIsImV4dGVuZCIsInByb3BlcnRpZXMiLCJjb250ZW50IiwiY2MiLCJOb2RlIiwid2l0aGRyYXdhbFBhbmVsIiwid2l0aGRyYXdhbE15aW5mbyIsIndpdGhkcmF3YWxJdGVtIiwiZXh0ZW5zaW9uUGFuZWwiLCJleHRlbnNpb25NeWluZm8iLCJleHRlbnNpb25JdGVtIiwib25Mb2FkIiwiZXh0ZW5zaW9ucGFnZSIsIndpdGhkcmF3YWxwYWdlIiwicmVnaXN0ZXJFdmVudCIsInBhbmVsIiwic2hvd0VmZmVjdFBhcml0aWNsZSIsIm5vZGUiLCJlbWl0dGVyIiwib24iLCJuYW1lIiwiTUVTU0FHRSIsIlVJIiwiQUNUSU9OX0VORCIsIlJlcUNhc2hSYW5raW5nIiwidW5SZWdpc3RlckV2ZW50Iiwib2ZmIiwib25DbGljayIsInN3aXRjaFBhbmVsIiwicmVtb3ZlIiwiY29uc29sZSIsImVycm9yIiwicmVxRXh0ZW5zaW9uQWRkIiwic2Nyb2xsdmlldyIsImV2ZW50VHlwZSIsIlNjcm9sbFZpZXciLCJFdmVudFR5cGUiLCJTQ1JPTExfVE9fQk9UVE9NIiwiZXh0ZW5zaW9udXBkYXRlTm93IiwiUmVxQ29tbWlzc2lvblJhbmtpbmciLCJzY2hlZHVsZU9uY2UiLCJwYWdlIiwiZ2FtZU5ldCIsInNlbmRfbXNnIiwicGFnZVNpemUiLCJyb3V0ZSIsIm1zZyIsInVwZGF0ZUV4dGVuc2lvbiIsImRhdGEiLCJyYW5raW5nIiwiaSIsImxlbmd0aCIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiYWN0aXZlIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJMYWJlbCIsInN0cmluZyIsInZpcExldmVsIiwiZ2V0RmxvYXQiLCJjb21taXNzaW9uIiwibmlja25hbWUiLCJsb2dpY0lkIiwidGVhbU51bWJlciIsInNob3dSZW1vdGVJbWFnZSIsImhlYWRVcmwiLCJyYW5rIiwic2hvd0VmZmVjdE5vZGUiLCJteVJhbmtpbmciLCJyZXFXaXRoZHJhd2FsQWRkIiwid2l0aGRyYXdhbHVwZGF0ZU5vdyIsInVwZGF0ZVdpdGhkcmF3YWwiLCJjYXNoQW1vdW50IiwidmFsdWUiLCJOdW1iZXIiLCJkaXYiLCJ0b1N0cmluZyIsImNoaWxkcmVuQ291bnQiLCJjaGlsZHJlbiIsInJlbW92ZUFsbENoaWxkcmVuIiwiT25EZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLENBQXdCO0FBRXBCQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsT0FBTyxFQUFFQyxFQUFFLENBQUNDLElBREo7QUFHUkMsSUFBQUEsZUFBZSxFQUFFRixFQUFFLENBQUNDLElBSFo7QUFJUkUsSUFBQUEsZ0JBQWdCLEVBQUVILEVBQUUsQ0FBQ0MsSUFKYjtBQUtSRyxJQUFBQSxjQUFjLEVBQUVKLEVBQUUsQ0FBQ0MsSUFMWDtBQU9SSSxJQUFBQSxjQUFjLEVBQUVMLEVBQUUsQ0FBQ0MsSUFQWDtBQVFSSyxJQUFBQSxlQUFlLEVBQUVOLEVBQUUsQ0FBQ0MsSUFSWjtBQVNSTSxJQUFBQSxhQUFhLEVBQUVQLEVBQUUsQ0FBQ0M7QUFUVixHQUZRO0FBY3BCO0FBRUFPLEVBQUFBLE1BaEJvQixvQkFnQlg7QUFDTCxTQUFLQyxhQUFMLEdBQXFCLENBQXJCO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQixDQUF0QjtBQUNBLFNBQUtDLGFBQUw7QUFDQWhCLElBQUFBLE1BQU0sQ0FBQ2lCLEtBQVAsQ0FBYUMsbUJBQWIsQ0FBaUMsS0FBS0MsSUFBdEM7QUFDSCxHQXJCbUI7QUF1QnBCO0FBQ0FILEVBQUFBLGFBeEJvQiwyQkF3Qko7QUFDWmhCLElBQUFBLE1BQU0sQ0FBQ29CLE9BQVAsQ0FBZUMsRUFBZixXQUFxQixLQUFLRixJQUFMLENBQVVHLElBQS9CLFNBQXNDQyxPQUFPLENBQUNDLEVBQVIs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LElBQXFDLENBQXJDLElBQTBDLEtBQUs1RSxPQUFMLENBQWE2RSxRQUFiLENBQXNCN0IsQ0FBdEIsRUFBeUI5QixJQUF6QixJQUFpQ0EsSUFBL0UsRUFBcUYsS0FBS21CLG9CQUFMO0FBQ3JGLFlBQUksS0FBS2xDLGVBQUwsQ0FBcUJ5RSxhQUFyQixJQUFzQyxDQUF0QyxJQUEyQyxLQUFLNUUsT0FBTCxDQUFhNkUsUUFBYixDQUFzQjdCLENBQXRCLEVBQXlCOUIsSUFBekIsSUFBaUNBLElBQWhGLEVBQXNGLEtBQUtJLGNBQUw7QUFDekYsT0FKRCxNQUlPO0FBQ0gsYUFBS3RCLE9BQUwsQ0FBYTZFLFFBQWIsQ0FBc0I3QixDQUF0QixFQUF5QkksTUFBekIsR0FBa0MsS0FBbEM7QUFDSDtBQUNKO0FBQ0osR0F0S21CO0FBdUtwQjJCLEVBQUFBLFNBdktvQix1QkF1S1Q7QUFDUCxTQUFLeEQsZUFBTDtBQUNIO0FBekttQixDQUF4QiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmdsR2FtZS5iYXNlY2xhc3MuZXh0ZW5kKHtcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuXHJcbiAgICAgICAgd2l0aGRyYXdhbFBhbmVsOiBjYy5Ob2RlLFxyXG4gICAgICAgIHdpdGhkcmF3YWxNeWluZm86IGNjLk5vZGUsXHJcbiAgICAgICAgd2l0aGRyYXdhbEl0ZW06IGNjLk5vZGUsXHJcblxyXG4gICAgICAgIGV4dGVuc2lvblBhbmVsOiBjYy5Ob2RlLFxyXG4gICAgICAgIGV4dGVuc2lvbk15aW5mbzogY2MuTm9kZSxcclxuICAgICAgICBleHRlbnNpb25JdGVtOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb25wYWdlID0gMTtcclxuICAgICAgICB0aGlzLndpdGhkcmF3YWxwYWdlID0gMTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0VmZmVjdFBhcml0aWNsZSh0aGlzLm5vZGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDms6jlhoznlYzpnaLnm5HlkKzkuovku7ZcclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oYCR7dGhpcy5ub2RlLm5hbWV9JHtNRVNTQUdFLlVJLkFDVElPTl9FTkR9YCwgdGhpcy5SZXFDYXNoUmFua2luZywgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgLy8g6ZSA5q+B55WM6Z2i55uR5ZCs5LqL5Lu2XHJcbiAgICB1blJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKGAke3RoaXMubm9kZS5uYW1lfSR7TUVTU0FHRS5VSS5BQ1RJT05fRU5EfWAsIHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkNsaWNrKG5hbWUsIG5vZGUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIndpdGhkcmF3YWxcIjpcclxuICAgICAgICAgICAgY2FzZSBcImV4dGVuc2lvblwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hQYW5lbChuYW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX2Nsb3NlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoXCJubyBmaW5kIGJ1dHRvbiBuYW1lIC0+ICVzXCIsIG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+ivt+axguaOqOW5v+WinuWKoCjmu5rliqjnm5HlkKwpXHJcbiAgICByZXFFeHRlbnNpb25BZGQoc2Nyb2xsdmlldywgZXZlbnRUeXBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PSBjYy5TY3JvbGxWaWV3LkV2ZW50VHlwZS5TQ1JPTExfVE9fQk9UVE9NKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnVwZGF0ZU5vdykgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnVwZGF0ZU5vdyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucGFnZSsrXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnBhZ2UgPiA1KSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuUmVxQ29tbWlzc2lvblJhbmtpbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRlbnNpb251cGRhdGVOb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5o6o5bm/5L2j6YeR5qacXHJcbiAgICBSZXFDb21taXNzaW9uUmFua2luZygpIHtcclxuICAgICAgICBsZXQgcGFnZSA9IHRoaXMuZXh0ZW5zaW9ucGFnZTtcclxuICAgICAgICBnbEdhbWUuZ2FtZU5ldC5zZW5kX21zZygnaHR0cC5SZXFDb21taXNzaW9uUmFua2luZycsIHsgcGFnZVNpemU6IDEwLCBwYWdlOiBwYWdlIH0sIChyb3V0ZSwgbXNnKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0ZW5zaW9uKG1zZy5kYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIC8v5Yi35paw5o6o5bm/5o6S6KGMXHJcbiAgICB1cGRhdGVFeHRlbnNpb24oZGF0YSkge1xyXG4gICAgICAgIGxldCByYW5raW5nID0gZGF0YS5yYW5raW5nXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5raW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbnNpb25JdGVtID0gY2MuaW5zdGFudGlhdGUodGhpcy5leHRlbnNpb25JdGVtKTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uSXRlbS5wYXJlbnQgPSB0aGlzLmV4dGVuc2lvblBhbmVsO1xyXG4gICAgICAgICAgICBleHRlbnNpb25JdGVtLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBleHRlbnNpb25JdGVtLmdldENoaWxkQnlOYW1lKFwibGF5b3V0XCIpLmdldENoaWxkQnlOYW1lKFwidmlwX2JnXCIpLmdldENoaWxkQnlOYW1lKFwidmlwTGV2ZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByYW5raW5nW2ldLnZpcExldmVsO1xyXG4gICAgICAgICAgICBleHRlbnNpb25JdGVtLmdldENoaWxkQnlOYW1lKFwiY2FzaEFtb3VudFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQocmFua2luZ1tpXS5jb21taXNzaW9uKTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uSXRlbS5nZXRDaGlsZEJ5TmFtZShcImxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcIm5hbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByYW5raW5nW2ldLm5pY2tuYW1lO1xyXG4gICAgICAgICAgICBleHRlbnNpb25JdGVtLmdldENoaWxkQnlOYW1lKFwibG9naWNpZFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGBJRDoke3JhbmtpbmdbaV0ubG9naWNJZH1gO1xyXG4gICAgICAgICAgICBleHRlbnNpb25JdGVtLmdldENoaWxkQnlOYW1lKFwidGVhbU51bWJlclwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHJhbmtpbmdbaV0udGVhbU51bWJlcjtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZW1vdGVJbWFnZShleHRlbnNpb25JdGVtLmdldENoaWxkQnlOYW1lKFwibWFza1wiKS5nZXRDaGlsZEJ5TmFtZShcImhlYWRcIiksIHJhbmtpbmdbaV0uaGVhZFVybClcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbkl0ZW0uZ2V0Q2hpbGRCeU5hbWUoYHJhbmtfJHtyYW5raW5nW2ldLnJhbmt9YCkpIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkl0ZW0uZ2V0Q2hpbGRCeU5hbWUoYHJhbmtfJHtyYW5raW5nW2ldLnJhbmt9YCkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJyYW5rTGV2ZWxcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJyYW5rTGV2ZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByYW5raW5nW2ldLnJhbmtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dFZmZlY3ROb2RlKHRoaXMsdGhpcy5leHRlbnNpb25QYW5lbCwwLjAyLHRydWUpO1xyXG4gICAgICAgIC8v5oiR55qE5L+h5oGvXHJcbiAgICAgICAgbGV0IG15UmFua2luZyA9IGRhdGEubXlSYW5raW5nO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uTXlpbmZvLmdldENoaWxkQnlOYW1lKFwiaW1nX3dzYlwiKS5hY3RpdmUgPSBteVJhbmtpbmcucmFuayA9PSAwO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uTXlpbmZvLmdldENoaWxkQnlOYW1lKFwicmFua0xldmVsXCIpLmFjdGl2ZSA9IG15UmFua2luZy5yYW5rICE9IDA7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb25NeWluZm8uZ2V0Q2hpbGRCeU5hbWUoXCJyYW5rTGV2ZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBteVJhbmtpbmcucmFuaztcclxuICAgICAgICB0aGlzLmV4dGVuc2lvbk15aW5mby5nZXRDaGlsZEJ5TmFtZShcInRlYW1OdW1iZXJcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBteVJhbmtpbmcudGVhbU51bWJlcjtcclxuICAgICAgICB0aGlzLmV4dGVuc2lvbk15aW5mby5nZXRDaGlsZEJ5TmFtZShcImxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcIm5hbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBteVJhbmtpbmcubmlja25hbWU7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb25NeWluZm8uZ2V0Q2hpbGRCeU5hbWUoXCJsb2dpY2lkXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gYElEOiR7bXlSYW5raW5nLmxvZ2ljSWR9YDtcclxuICAgICAgICB0aGlzLmV4dGVuc2lvbk15aW5mby5nZXRDaGlsZEJ5TmFtZShcImNhc2hBbW91bnRcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aGlzLmdldEZsb2F0KG15UmFua2luZy5jb21taXNzaW9uKTtcclxuICAgICAgICB0aGlzLmV4dGVuc2lvbk15aW5mby5nZXRDaGlsZEJ5TmFtZShcImxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcInZpcF9iZ1wiKS5nZXRDaGlsZEJ5TmFtZShcInZpcExldmVsXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gbXlSYW5raW5nLnZpcExldmVsO1xyXG4gICAgICAgIGdsR2FtZS5wYW5lbC5zaG93UmVtb3RlSW1hZ2UodGhpcy5leHRlbnNpb25NeWluZm8uZ2V0Q2hpbGRCeU5hbWUoXCJtYXNrXCIpLmdldENoaWxkQnlOYW1lKFwiaGVhZFwiKSwgbXlSYW5raW5nLmhlYWRVcmwpO1xyXG4gICAgfSxcclxuICAgIC8v6K+35rGC5o+Q546w5aKe5YqgKOa7muWKqOebkeWQrClcclxuICAgIHJlcVdpdGhkcmF3YWxBZGQoc2Nyb2xsdmlldywgZXZlbnRUeXBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PSBjYy5TY3JvbGxWaWV3LkV2ZW50VHlwZS5TQ1JPTExfVE9fQk9UVE9NKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpdGhkcmF3YWx1cGRhdGVOb3cpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy53aXRoZHJhd2FsdXBkYXRlTm93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy53aXRoZHJhd2FscGFnZSsrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy53aXRoZHJhd2FscGFnZSA+IDUpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5SZXFDYXNoUmFua2luZygpO1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpdGhkcmF3YWx1cGRhdGVOb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5o+Q546w6YeR6aKd5o6S6KGMXHJcbiAgICBSZXFDYXNoUmFua2luZygpIHtcclxuICAgICAgICBsZXQgcGFnZSA9IHRoaXMud2l0aGRyYXdhbHBhZ2U7XHJcbiAgICAgICAgZ2xHYW1lLmdhbWVOZXQuc2VuZF9tc2coJ2h0dHAuUmVxQ2FzaFJhbmtpbmcnLCB7IHBhZ2VTaXplOiAxMCwgcGFnZTogcGFnZSB9LCAocm91dGUsIG1zZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdpdGhkcmF3YWwobXNnLmRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgLy/liLfmlrDmj5DnjrDmjpLooYxcclxuICAgIHVwZGF0ZVdpdGhkcmF3YWwoZGF0YSkge1xyXG4gICAgICAgIGxldCByYW5raW5nID0gZGF0YS5yYW5raW5nXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5raW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB3aXRoZHJhd2FsSXRlbSA9IGNjLmluc3RhbnRpYXRlKHRoaXMud2l0aGRyYXdhbEl0ZW0pO1xyXG4gICAgICAgICAgICB3aXRoZHJhd2FsSXRlbS5wYXJlbnQgPSB0aGlzLndpdGhkcmF3YWxQYW5lbDtcclxuICAgICAgICAgICAgd2l0aGRyYXdhbEl0ZW0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKFwibGF5b3V0XCIpLmdldENoaWxkQnlOYW1lKFwidmlwX2JnXCIpLmdldENoaWxkQnlOYW1lKFwidmlwTGV2ZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByYW5raW5nW2ldLnZpcExldmVsO1xyXG4gICAgICAgICAgICB3aXRoZHJhd2FsSXRlbS5nZXRDaGlsZEJ5TmFtZShcImNhc2hBbW91bnRcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aGlzLmdldEZsb2F0KHJhbmtpbmdbaV0uY2FzaEFtb3VudCk7XHJcbiAgICAgICAgICAgIHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKFwibGF5b3V0XCIpLmdldENoaWxkQnlOYW1lKFwibmFtZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHJhbmtpbmdbaV0ubmlja25hbWU7XHJcbiAgICAgICAgICAgIHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKFwibG9naWNpZFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGBJRDoke3JhbmtpbmdbaV0ubG9naWNJZH1gO1xyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1JlbW90ZUltYWdlKHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKFwibWFza1wiKS5nZXRDaGlsZEJ5TmFtZShcImhlYWRcIiksIHJhbmtpbmdbaV0uaGVhZFVybClcclxuICAgICAgICAgICAgaWYgKHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKGByYW5rXyR7cmFua2luZ1tpXS5yYW5rfWApKSB7XHJcbiAgICAgICAgICAgICAgICB3aXRoZHJhd2FsSXRlbS5nZXRDaGlsZEJ5TmFtZShgcmFua18ke3JhbmtpbmdbaV0ucmFua31gKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2l0aGRyYXdhbEl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJyYW5rTGV2ZWxcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHdpdGhkcmF3YWxJdGVtLmdldENoaWxkQnlOYW1lKFwicmFua0xldmVsXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gcmFua2luZ1tpXS5yYW5rXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RWZmZWN0Tm9kZSh0aGlzLHRoaXMud2l0aGRyYXdhbFBhbmVsLDAuMDIsdHJ1ZSk7XHJcbiAgICAgICAgLy/miJHnmoTkv6Hmga9cclxuICAgICAgICBsZXQgbXlSYW5raW5nID0gZGF0YS5teVJhbmtpbmc7XHJcbiAgICAgICAgdGhpcy53aXRoZHJhd2FsTXlpbmZvLmdldENoaWxkQnlOYW1lKFwiaW1nX3dzYlwiKS5hY3RpdmUgPSBteVJhbmtpbmcucmFuayA9PSAwO1xyXG4gICAgICAgIHRoaXMud2l0aGRyYXdhbE15aW5mby5nZXRDaGlsZEJ5TmFtZShcInJhbmtMZXZlbFwiKS5hY3RpdmUgPSBteVJhbmtpbmcucmFuayAhPSAwO1xyXG4gICAgICAgIHRoaXMud2l0aGRyYXdhbE15aW5mby5nZXRDaGlsZEJ5TmFtZShcInJhbmtMZXZlbFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IG15UmFua2luZy5yYW5rO1xyXG4gICAgICAgIHRoaXMud2l0aGRyYXdhbE15aW5mby5nZXRDaGlsZEJ5TmFtZShcImxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcIm5hbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBteVJhbmtpbmcubmlja25hbWU7XHJcbiAgICAgICAgdGhpcy53aXRoZHJhd2FsTXlpbmZvLmdldENoaWxkQnlOYW1lKFwibG9naWNpZFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGBJRDoke215UmFua2luZy5sb2dpY0lkfWA7XHJcbiAgICAgICAgdGhpcy53aXRoZHJhd2FsTXlpbmZvLmdldENoaWxkQnlOYW1lKFwiY2FzaEFtb3VudFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQobXlSYW5raW5nLmNhc2hBbW91bnQpO1xyXG4gICAgICAgIHRoaXMud2l0aGRyYXdhbE15aW5mby5nZXRDaGlsZEJ5TmFtZShcImxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcInZpcF9iZ1wiKS5nZXRDaGlsZEJ5TmFtZShcInZpcExldmVsXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gbXlSYW5raW5nLnZpcExldmVsO1xyXG4gICAgICAgIGdsR2FtZS5wYW5lbC5zaG93UmVtb3RlSW1hZ2UodGhpcy53aXRoZHJhd2FsTXlpbmZvLmdldENoaWxkQnlOYW1lKFwibWFza1wiKS5nZXRDaGlsZEJ5TmFtZShcImhlYWRcIiksIG15UmFua2luZy5oZWFkVXJsKTtcclxuICAgIH0sXHJcbiAgICBnZXRGbG9hdCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAoTnVtYmVyKHZhbHVlKS5kaXYoMTAwKSkudG9TdHJpbmcoKTtcclxuICAgIH0sXHJcbiAgICBzd2l0Y2hQYW5lbChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy53aXRoZHJhd2FscGFnZSA9IDE7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb25wYWdlID0gMTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGVudC5jaGlsZHJlbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50LmNoaWxkcmVuW2ldLmdldENoaWxkQnlOYW1lKFwidmlld1wiKS5nZXRDaGlsZEJ5TmFtZShcImNvbnRlbnRcIikucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudC5jaGlsZHJlbltpXS5uYW1lID09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5jaGlsZHJlbltpXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9uUGFuZWwuY2hpbGRyZW5Db3VudCA9PSAwICYmIHRoaXMuY29udGVudC5jaGlsZHJlbltpXS5uYW1lID09IG5hbWUpIHRoaXMuUmVxQ29tbWlzc2lvblJhbmtpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLndpdGhkcmF3YWxQYW5lbC5jaGlsZHJlbkNvdW50ID09IDAgJiYgdGhpcy5jb250ZW50LmNoaWxkcmVuW2ldLm5hbWUgPT0gbmFtZSkgdGhpcy5SZXFDYXNoUmFua2luZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmNoaWxkcmVuW2ldLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIE9uRGVzdHJveSgpe1xyXG4gICAgICAgIHRoaXMudW5SZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG59KTtcclxuIl19