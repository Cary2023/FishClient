
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/setting/settingModifypsd.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '1a17buFQwtPg5omtYyb242I', 'settingModifypsd');
// modules/plaza/script/prefab/setting/settingModifypsd.js

"use strict";

/**
 * 设置
 */
var EditBoxCustom = require("EditBoxCustom");

glGame.baseclass.extend({
  properties: {
    modifypsd: cc.Node,
    contactkefu: cc.Node,
    psw: cc.EditBox,
    // 旧密码
    newpsw: cc.EditBox,
    // 新密码
    confirmpsw: cc.EditBox,
    // 确认新密码
    cuspsw: EditBoxCustom,
    cusnewpsd: EditBoxCustom,
    cusconfirm: EditBoxCustom
  },
  onLoad: function onLoad() {
    this.registerEvent();
    this.initUI();
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "confirm":
        this.click_confirm();
        break;

      case "kefu":
        glGame.panel.showService(false);
        break;
    }
  },
  initUI: function initUI() {
    if (glGame.user.get("loginSwitch").self_edit_login_pwd == 1) {
      this.modifypsd.active = true;
      this.contactkefu.active = false;
    } else {
      this.contactkefu.active = true;
      this.modifypsd.active = false;
    }
  },
  // 确认更改密码
  click_confirm: function click_confirm() {
    var psw = this.checkPassword(this.psw.string, this.newpsw.string, this.confirmpsw.string);

    if (psw) {
      glGame.user.reqEditPwd({
        old_pwd: md5(this.psw.string),
        pwd: md5(this.newpsw.string),
        type: 1
      });
    }
  },
  // 密码检查
  checkPassword: function checkPassword(psw, newpsw, confirmpsw) {
    if (!psw) return this.showErrorTip(glGame.tips.EDITBOX.PSWNULL);
    if (psw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);
    if (!/\w$/.test(psw)) return this.showErrorTip(glGame.tips.EDITBOX.PSWWRONGFUL);
    if (!newpsw) return this.showErrorTip(glGame.tips.EDITBOX.NEWPSWNULL);
    if (newpsw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);
    if (!/\w$/.test(newpsw)) return this.showErrorTip(glGame.tips.EDITBOX.NEWPSWWRONGFUL);
    if (!confirmpsw) return this.showErrorTip(glGame.tips.EDITBOX.CONFIRMPSWNULL);
    if (confirmpsw.length < 6) return glGame.panel.showErrorTip(glGame.tips.REGISTRATION.PSWLENGTH);
    if (!/\w$/.test(confirmpsw)) return this.showErrorTip(glGame.tips.EDITBOX.CONFIRMPSWWRONGFUL);
    if (psw === newpsw) return this.showErrorTip(glGame.tips.EDITBOX.OLDNEWPSWEQUALS);
    if (newpsw !== confirmpsw) return this.showErrorTip(glGame.tips.EDITBOX.PSWCOFAIL);
    return psw;
  },
  showErrorTip: function showErrorTip(msg) {
    glGame.panel.showTip(msg);
    return null;
  },
  clearUIData: function clearUIData() {
    this.cuspsw.setString("");
    this.cusnewpsd.setString("");
    this.cusconfirm.setString("");
  },
  // 注册界面监听事件
  registerEvent: function registerEvent() {
    glGame.emitter.on("editpswsuccess", this.editpswsuccess, this);
  },
  // 销毁界面监听事件
  unRegisterEvent: function unRegisterEvent() {
    glGame.emitter.off("editpswsuccess", this);
  },
  editpswsuccess: function editpswsuccess() {
    this.clearUIData();
  },
  OnDestroy: function OnDestroy() {
    this.unRegisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxzZXR0aW5nXFxzZXR0aW5nTW9kaWZ5cHNkLmpzIl0sIm5hbWVzIjpbIkVkaXRCb3hDdXN0b20iLCJyZXF1aXJlIiwiZ2xHYW1lIiwiYmFzZWNsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsIm1vZGlmeXBzZCIsImNjIiwiTm9kZSIsImNvbnRhY3RrZWZ1IiwicHN3IiwiRWRpdEJveCIsIm5ld3BzdyIsImNvbmZpcm1wc3ciLCJjdXNwc3ciLCJjdXNuZXdwc2QiLCJjdXNjb25maXJtIiwib25Mb2FkIiwicmVnaXN0ZXJFdmVudCIsImluaXRVSSIsIm9uQ2xpY2siLCJuYW1lIiwibm9kZSIsImNsaWNrX2NvbmZpcm0iLCJwYW5lbCIsInNob3dTZXJ2aWNlIiwidXNlciIsImdldCIsInNlbGZfZWRpdF9sb2dpbl9wd2QiLCJhY3RpdmUiLCJjaGVja1Bhc3N3b3JkIiwic3RyaW5nIiwicmVxRWRpdFB3ZCIsIm9sZF9wd2QiLCJtZDUiLCJwd2QiLCJ0eXBlIiwic2hvd0Vycm9yVGlwIiwidGlwcyIsIkVESVRCT1giLCJQU1dOVUxMIiwibGVuZ3RoIiwiUkVHSVNUUkFUSU9OIiwiUFNXTEVOR1RIIiwidGVzdCIsIlBTV1dST05HRlVMIiwiTkVXUFNXTlVMTCIsIk5FV1BTV1dST05HRlVMIiwiQ09ORklSTVBTV05VTEwiLCJDT05GSVJNUFNXV1JPTkdGVUwiLCJPTERORVdQU1dFUVVBTFMiLCJQU1dDT0ZBSUwiLCJtc2ciLCJzaG93VGlwIiwiY2xlYXJVSURhdGEiLCJzZXRTdHJpbmciLCJlbWl0dGVyIiwib24iLCJlZGl0cHN3c3VjY2VzcyIsInVuUmVnaXN0ZXJFdmVudCIsIm9mZiIsIk9uRGVzdHJveSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0FBSUEsSUFBSUEsYUFBYSxHQUFHQyxPQUFPLENBQUMsZUFBRCxDQUEzQjs7QUFFQUMsTUFBTSxDQUFDQyxTQUFQ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QzNCLFdBQU96QyxHQUFQO0FBQ0gsR0E5RG1CO0FBZ0VwQjJCLEVBQUFBLFlBaEVvQix3QkFnRVBlLEdBaEVPLEVBZ0VGO0FBQ2RsRCxJQUFBQSxNQUFNLENBQUNzQixLQUFQLENBQWE2QixPQUFiLENBQXFCRCxHQUFyQjtBQUNBLFdBQU8sSUFBUDtBQUNILEdBbkVtQjtBQXFFcEJFLEVBQUFBLFdBckVvQix5QkFxRU47QUFDVixTQUFLeEMsTUFBTCxDQUFZeUMsU0FBWixDQUFzQixFQUF0QjtBQUNBLFNBQUt4QyxTQUFMLENBQWV3QyxTQUFmLENBQXlCLEVBQXpCO0FBQ0EsU0FBS3ZDLFVBQUwsQ0FBZ0J1QyxTQUFoQixDQUEwQixFQUExQjtBQUNILEdBekVtQjtBQTJFcEI7QUFDQXJDLEVBQUFBLGFBNUVvQiwyQkE0RUo7QUFDWmhCLElBQUFBLE1BQU0sQ0FBQ3NELE9BQVAsQ0FBZUMsRUFBZixDQUFrQixnQkFBbEIsRUFBb0MsS0FBS0MsY0FBekMsRUFBeUQsSUFBekQ7QUFDSCxHQTlFbUI7QUFnRnBCO0FBQ0FDLEVBQUFBLGVBakZvQiw2QkFpRkY7QUFDZHpELElBQUFBLE1BQU0sQ0FBQ3NELE9BQVAsQ0FBZUksR0FBZixDQUFtQixnQkFBbkIsRUFBcUMsSUFBckM7QUFDSCxHQW5GbUI7QUFxRnBCRixFQUFBQSxjQXJGb0IsNEJBcUZIO0FBQ2IsU0FBS0osV0FBTDtBQUNILEdBdkZtQjtBQXlGcEJPLEVBQUFBLFNBekZvQix1QkF5RlI7QUFDUixTQUFLRixlQUFMO0FBQ0g7QUEzRm1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6K6+572uXHJcbiAqL1xyXG5cclxubGV0IEVkaXRCb3hDdXN0b20gPSByZXF1aXJlKFwiRWRpdEJveEN1c3RvbVwiKTtcclxuXHJcbmdsR2FtZS5iYXNlY2xhc3MuZXh0ZW5kKHtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBtb2RpZnlwc2Q6IGNjLk5vZGUsXHJcbiAgICAgICAgY29udGFjdGtlZnU6IGNjLk5vZGUsXHJcblxyXG4gICAgICAgIHBzdzogY2MuRWRpdEJveCwgICAgICAgIC8vIOaXp+WvhueggVxyXG4gICAgICAgIG5ld3BzdzogY2MuRWRpdEJveCwgICAgIC8vIOaWsOWvhueggVxyXG4gICAgICAgIGNvbmZpcm1wc3c6IGNjLkVkaXRCb3gsICAvLyDnoa7orqTmlrDlr4bnoIFcclxuXHJcbiAgICAgICAgY3VzcHN3OiBFZGl0Qm94Q3VzdG9tLFxyXG4gICAgICAgIGN1c25ld3BzZDogRWRpdEJveEN1c3RvbSxcclxuICAgICAgICBjdXNjb25maXJtOiBFZGl0Qm94Q3VzdG9tLFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgdGhpcy5pbml0VUkoKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb25maXJtXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrX2NvbmZpcm0oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwia2VmdVwiOlxyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dTZXJ2aWNlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFVJKCkge1xyXG4gICAgICAgIGlmIChnbEdhbWUudXNlci5nZXQoXCJsb2dpblN3aXRjaFwiKS5zZWxmX2VkaXRfbG9naW5fcHdkID09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RpZnlwc2QuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jb250YWN0a2VmdS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhY3RrZWZ1LmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubW9kaWZ5cHNkLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8g56Gu6K6k5pu05pS55a+G56CBXHJcbiAgICBjbGlja19jb25maXJtKCkge1xyXG4gICAgICAgIGxldCBwc3cgPSB0aGlzLmNoZWNrUGFzc3dvcmQodGhpcy5wc3cuc3RyaW5nLCB0aGlzLm5ld3Bzdy5zdHJpbmcsIHRoaXMuY29uZmlybXBzdy5zdHJpbmcpO1xyXG4gICAgICAgIGlmIChwc3cpIHtcclxuICAgICAgICAgICAgZ2xHYW1lLnVzZXIucmVxRWRpdFB3ZCh7IG9sZF9wd2Q6IG1kNSh0aGlzLnBzdy5zdHJpbmcpLCBwd2Q6IG1kNSh0aGlzLm5ld3Bzdy5zdHJpbmcpLCB0eXBlOiAxIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8g5a+G56CB5qOA5p+lXHJcbiAgICBjaGVja1Bhc3N3b3JkKHBzdywgbmV3cHN3LCBjb25maXJtcHN3KSB7XHJcbiAgICAgICAgaWYgKCFwc3cpIHJldHVybiB0aGlzLnNob3dFcnJvclRpcChnbEdhbWUudGlwcy5FRElUQk9YLlBTV05VTEwpO1xyXG4gICAgICAgIGlmIChwc3cubGVuZ3RoIDwgNikgcmV0dXJuIGdsR2FtZS5wYW5lbC5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuUkVHSVNUUkFUSU9OLlBTV0xFTkdUSCk7XHJcbiAgICAgICAgaWYgKCEvXFx3JC8udGVzdChwc3cpKSByZXR1cm4gdGhpcy5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuRURJVEJPWC5QU1dXUk9OR0ZVTCk7XHJcbiAgICAgICAgaWYgKCFuZXdwc3cpIHJldHVybiB0aGlzLnNob3dFcnJvclRpcChnbEdhbWUudGlwcy5FRElUQk9YLk5FV1BTV05VTEwpO1xyXG4gICAgICAgIGlmIChuZXdwc3cubGVuZ3RoIDwgNikgcmV0dXJuIGdsR2FtZS5wYW5lbC5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuUkVHSVNUUkFUSU9OLlBTV0xFTkdUSCk7XHJcbiAgICAgICAgaWYgKCEvXFx3JC8udGVzdChuZXdwc3cpKSByZXR1cm4gdGhpcy5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuRURJVEJPWC5ORVdQU1dXUk9OR0ZVTCk7XHJcbiAgICAgICAgaWYgKCFjb25maXJtcHN3KSByZXR1cm4gdGhpcy5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuRURJVEJPWC5DT05GSVJNUFNXTlVMTCk7XHJcbiAgICAgICAgaWYgKGNvbmZpcm1wc3cubGVuZ3RoIDwgNikgcmV0dXJuIGdsR2FtZS5wYW5lbC5zaG93RXJyb3JUaXAoZ2xHYW1lLnRpcHMuUkVHSVNUUkFUSU9OLlBTV0xFTkdUSCk7XHJcbiAgICAgICAgaWYgKCEvXFx3JC8udGVzdChjb25maXJtcHN3KSkgcmV0dXJuIHRoaXMuc2hvd0Vycm9yVGlwKGdsR2FtZS50aXBzLkVESVRCT1guQ09ORklSTVBTV1dST05HRlVMKTtcclxuICAgICAgICBpZiAocHN3ID09PSBuZXdwc3cpIHJldHVybiB0aGlzLnNob3dFcnJvclRpcChnbEdhbWUudGlwcy5FRElUQk9YLk9MRE5FV1BTV0VRVUFMUyk7XHJcbiAgICAgICAgaWYgKG5ld3BzdyAhPT0gY29uZmlybXBzdykgcmV0dXJuIHRoaXMuc2hvd0Vycm9yVGlwKGdsR2FtZS50aXBzLkVESVRCT1guUFNXQ09GQUlMKTtcclxuICAgICAgICByZXR1cm4gcHN3O1xyXG4gICAgfSxcclxuXHJcbiAgICBzaG93RXJyb3JUaXAobXNnKSB7XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dUaXAobXNnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJVSURhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5jdXNwc3cuc2V0U3RyaW5nKFwiXCIpO1xyXG4gICAgICAgIHRoaXMuY3VzbmV3cHNkLnNldFN0cmluZyhcIlwiKTtcclxuICAgICAgICB0aGlzLmN1c2NvbmZpcm0uc2V0U3RyaW5nKFwiXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDms6jlhoznlYzpnaLnm5HlkKzkuovku7ZcclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oXCJlZGl0cHN3c3VjY2Vzc1wiLCB0aGlzLmVkaXRwc3dzdWNjZXNzLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g6ZSA5q+B55WM6Z2i55uR5ZCs5LqL5Lu2XHJcbiAgICB1blJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKFwiZWRpdHBzd3N1Y2Nlc3NcIiwgdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVkaXRwc3dzdWNjZXNzKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJVSURhdGEoKTtcclxuICAgIH0sXHJcblxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5SZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG59KTtcclxuIl19