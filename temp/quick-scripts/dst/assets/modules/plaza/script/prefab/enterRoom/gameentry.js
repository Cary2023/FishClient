
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/enterRoom/gameentry.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6224envDaJKDayEmMYCEHex', 'gameentry');
// modules/plaza/script/prefab/enterRoom/gameentry.js

"use strict";

/**
 * 金币房间入口通用脚本
 */
glGame.baseclass.extend({
  properties: {
    level: {
      type: cc.Node,
      "default": []
    }
  },
  onLoad: function onLoad() {
    this.node.active = false;
    this.reqEnterArea();
    this.registerEvent();
  },
  start: function start() {},
  //事件监听
  registerEvent: function registerEvent() {
    glGame.emitter.on("goldOnlineNum", this.goldOnlineNum, this);
    glGame.emitter.on("onGameConfig", this.onGameConfig, this);
  },
  //事件销毁
  unregisterEvent: function unregisterEvent() {
    glGame.emitter.off("goldOnlineNum", this);
    glGame.emitter.off("onGameConfig", this);
  },
  onGameConfig: function onGameConfig(msg) {
    this.gameConfig = msg;
    this.initUI();
  },
  cutFloat: function cutFloat(value) {
    return Number(value).div(100).toString();
  },
  reqEnterArea: function reqEnterArea() {
    switch (this.node.name) {
      case 'ddzselect':
        this.gameID = glGame.scenetag.DDZ;
        glGame.readyroom.reqEnterArea(glGame.scenetag.DDZ);
        break;

      case 'dzpkselect':
        this.gameID = glGame.scenetag.DZPK;
        glGame.readyroom.reqEnterArea(glGame.scenetag.DZPK);
        break;

      case 'paijiuselect':
        this.gameID = glGame.scenetag.PAIJIU;
        glGame.readyroom.reqEnterArea(glGame.scenetag.PAIJIU);
        break;

      case 'qznnselect':
        this.gameID = glGame.scenetag.QZNN;
        glGame.readyroom.reqEnterArea(glGame.scenetag.QZNN);
        break;

      case 'sangongselect':
        this.gameID = glGame.scenetag.SANGONG;
        glGame.readyroom.reqEnterArea(glGame.scenetag.SANGONG);
        break;

      case 'zhajinhuaselect':
        this.gameID = glGame.scenetag.ZHAJINHUA;
        glGame.readyroom.reqEnterArea(glGame.scenetag.ZHAJINHUA);
        break;

      case 'ebgselect':
        this.gameID = glGame.scenetag.EBG;
        glGame.readyroom.reqEnterArea(glGame.scenetag.EBG);
        break;

      case 'esydselect':
        this.gameID = glGame.scenetag.ESYD;
        glGame.readyroom.reqEnterArea(glGame.scenetag.ESYD);
        break;

      case 'fishselect':
        this.gameID = glGame.scenetag.FISH2;
        glGame.readyroom.reqEnterArea(glGame.scenetag.FISH2);
        break;

      case 'jszjhselect':
        this.gameID = glGame.scenetag.JSZJH;
        glGame.readyroom.reqEnterArea(glGame.scenetag.JSZJH);
        break;

      case 'sssselect':
        this.gameID = glGame.scenetag.SSS;
        glGame.readyroom.reqEnterArea(glGame.scenetag.SSS);
        break;
    }
  },
  goldOnlineNum: function goldOnlineNum(msg) {
    console.log("这是在线人数的消息", msg);
    var count = this.level.length;

    for (var i = 0; i < count; i++) {
      if (msg[i + 1]) {
        this.level[i].getChildByName("people_num").getComponent(cc.Label).string = msg[i + 1];
      }
    }
  },
  initUI: function initUI() {
    this.node.active = true;
    var configure = this.gameConfig;

    if (this.gameID == glGame.scenetag.FISH2) {
      this.level[0].getChildByName("dizhulaout").getChildByName('lab_top').getComponent(cc.Label).string = "".concat(this["gameConfig"]['99'].BaseConsume >= 1000000 ? this.cutFloat(this["gameConfig"]['99'].BaseConsume / 10000) + '万' : this.cutFloat(this["gameConfig"]['99'].BaseConsume));
      var downString1 = this["gameConfig"]['99'].EntranceRestrictions >= 1000000 ? "".concat(this.cutFloat(this["gameConfig"]['99'].EntranceRestrictions / 10000), "\u4E07") : this.cutFloat(this["gameConfig"]['99'].EntranceRestrictions);
      this.level[0].getChildByName("zhunrulayout").getChildByName('lab_center').getComponent(cc.Label).string = downString1;

      for (var i = 1; i < 6; i++) {
        var roomConfig = this["gameConfig"][i];
        var downString = roomConfig.EntranceRestrictions >= 1000000 ? "".concat(this.cutFloat(roomConfig.EntranceRestrictions / 10000), "\u4E07") : this.cutFloat(roomConfig.EntranceRestrictions);
        this.level[i].getChildByName("dizhulaout").getChildByName('lab_top').getComponent(cc.Label).string = "".concat(roomConfig.BaseConsume >= 1000000 ? this.cutFloat(roomConfig.BaseConsume / 10000) + '万' : this.cutFloat(roomConfig.BaseConsume));
        this.level[i].getChildByName("zhunrulayout").getChildByName('lab_center').getComponent(cc.Label).string = downString;
      }

      return;
    }

    ;
    var count = this.level.length;

    for (var _i = 1; _i < count; _i++) {
      if (this.gameID == glGame.scenetag.DZPK) {
        this.level[_i].getChildByName("dizhulaout").getChildByName('dizhu_numbig').getComponent(cc.Label).string = "".concat(this.cutFloat(configure[_i].SmallBaseChips), "/").concat(this.cutFloat(configure[_i].BaseChips));
        this.level[_i].getChildByName("zhunrulayout").getChildByName("zhunru_num").getComponent(cc.Label).string = this.cutFloat(configure[_i].EntranceRestrictions);
      } else {
        this.level[_i].getChildByName("dizhulaout").getChildByName("dizhu_num").getComponent(cc.Label).string = this.cutFloat(configure[_i].BaseChips);
        this.level[_i].getChildByName("zhunrulayout").getChildByName("zhunru_num").getComponent(cc.Label).string = this.cutFloat(configure[_i].EntranceRestrictions);
      }

      if (this.gameID == glGame.scenetag.DDZ) {
        this.level[_i].getChildByName('label').getComponent(cc.Label).string = "\u6700\u5927".concat(configure[_i].RoomMaxMultiple, "\u500D");
        this.level[_i].getChildByName('black').width = this.level[_i].getChildByName('label').width + 10;
      }
    }

    if (this.gameID == glGame.scenetag.DDZ) {
      this.level[0].getChildByName('label').getComponent(cc.Label).string = "\u6700\u5927".concat(this["gameConfig"]['99'].RoomMaxMultiple, "\u500D");
      this.level[0].getChildByName('black').width = this.level[0].getChildByName('label').width + 10;
    }
  },
  // 重写父类按钮点击事件
  onClick: function onClick(name, node) {
    switch (name) {
      case "primary":
        this.enterGame(99);
        break;

      case "intermediate":
        this.enterGame(1);
        break;

      case "senior":
        this.enterGame(2);
        break;

      case "tuhao":
        this.enterGame(3);
        break;

      case "supremacy":
        this.enterGame(4);
        break;

      case "volvo":
        this.enterGame(5);
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },

  /**
   * 进入金币场房间
   * @param level 场次类型 1:初级场 2:中级场 3:高级场 4:土豪场 5:至尊场
   */
  enterGame: function enterGame(level) {
    var _this = this;

    glGame.room.reqMyGameState(this.gameID, level).then(function () {
      var gameID = _this.gameID;

      if (_this.gameConfig[level] == null) {
        glGame.panel.showMsgBox('提示', '该房间尚未开放，请尝试其他房间。');
        return;
      }

      if (glGame.user.isTourist()) {
        if (level != 99) {
          glGame.panel.showRegisteredGift(true);
          return;
        }
      }

      if (gameID == glGame.scenetag.FISH2) {
        if (glGame.user.get("coin") >= _this["gameConfig"][level].EntranceRestrictions) {
          glGame.room.sendEnterRoom(level);
        } else {
          var string = "<color=#99C7FF>\u60A8\u7684\u91D1\u5E01\u4E0D\u8DB3\uFF0C\u8BE5\u623F\u95F4\u9700\u8981</c> <color=#ff0000> ".concat(_this.getFloat(_this.gameConfig[level].EntranceRestrictions), "  </c><color=#99C7FF>\u91D1\u5E01\u624D\u53EF\u4E0B\u6CE8\uFF0C\u662F\u5426\u9A6C\u4E0A\u524D\u5F80\u5145\u503C\uFF1F</c>");
          glGame.panel.showDialog("", string, function () {
            glGame.panel.showShop();
          }, function () {}, "取消", "充值");
        }

        return;
      }

      ;

      if (_this.gameConfig[level].EntranceRestrictions > glGame.user.get("coin")) {
        console.log("这是当前的房间限制", _this.gameConfig);

        var _string = "<color=#99C7FF>\u60A8\u7684\u91D1\u5E01\u4E0D\u8DB3\uFF0C\u8BE5\u623F\u95F4\u9700\u8981</c> <color=#ff0000> ".concat(_this.getFloat(_this.gameConfig[level].EntranceRestrictions), "  </c><color=#99C7FF>\u91D1\u5E01\u624D\u53EF\u4E0B\u6CE8\uFF0C\u662F\u5426\u9A6C\u4E0A\u524D\u5F80\u5145\u503C\uFF1F</c>");

        glGame.panel.showDialog("", _string, function () {
          glGame.panel.showShop();
        }, function () {}, "取消", "充值");
        return;
      }

      glGame.panel.showJuHua(); // glGame.readyroom.reqExitArea();

      _this.node.runAction(cc.sequence(cc.delayTime(15), cc.callFunc(function () {
        glGame.panel.closeJuHua();
      }))); // TODO
      // reqGoldRoomVerify为旧的进入房间方法，需要先请求验证，再进入房间
      // setGoldRoomInfo 新的进入房间方法，无需验证，设置游戏类型以及房间信息后，直接进入房间
      // if (glGame.enterRoomVerification) {
      //     glGame.room.reqGoldRoomVerify(gameID, level);
      // } else {
      //     glGame.room.setGoldRoomInfo(gameID, level);
      // }


      glGame.room.setGoldRoomInfo(gameID, level);
    });
  },

  /**
   * 检查玩家金币是否足够
   * @returns {boolean}
   */
  checkGold: function checkGold(coin, minCion) {
    console.log("金币检测", coin, minCion);

    if (parseInt(coin) < parseInt(minCion)) {
      glGame.panel.showDialog(glGame.i18n.t("USER.GOLDLACK.TITLE"), glGame.i18n.t("USER.GOLDLACK.CONTENT"), function () {
        glGame.panel.showPanelByName("shop");
      }, null);
      return false;
    }

    return true;
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  set: function set(key, value) {
    this[key] = value;
  },
  get: function get(key) {
    return this[key];
  },
  OnDestroy: function OnDestroy() {
    this.unregisterEvent();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxlbnRlclJvb21cXGdhbWVlbnRyeS5qcyJdLCJuYW1lcyI6WyJnbEdhbWUiLCJiYXNlY2xhc3MiLCJleHRlbmQiLCJwcm9wZXJ0aWVzIiwibGV2ZWwiLCJ0eXBlIiwiY2MiLCJOb2RlIiwib25Mb2FkIiwibm9kZSIsImFjdGl2ZSIsInJlcUVudGVyQXJlYSIsInJlZ2lzdGVyRXZlbnQiLCJzdGFydCIsImVtaXR0ZXIiLCJvbiIsImdvbGRPbmxpbmVOdW0iLCJvbkdhbWVDb25maWciLCJ1bnJlZ2lzdGVyRXZlbnQiLCJvZmYiLCJtc2ciLCJnYW1lQ29uZmlnIiwiaW5pdFVJIiwiY3V0RmxvYXQiLCJ2YWx1ZSIsIk51bWJlciIsImRpdiIsInRvU3RyaW5nIiwibmFtZSIsImdhbWVJRCIsInNjZW5ldGFnIiwiRERaIiwicmVhZHlyb29tIiwiRFpQSyIsIlBBSUpJVSIsIlFaTk4iLCJTQU5HT05HIiwiWkhBSklOSFVBIiwiRUJHIiwiRVNZRCIsIkZJU0gyIiwiSlNaSkgiLCJTU1MiLCJjb25zb2xlIiwibG9nIiwiY291bnQiLCJsZW5ndGgiLCJpIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJMYWJlbCIsInN0cmluZyIsImNvbmZpZ3VyZSIsIkJhc2VDb25zdW1lIiwiZG93blN0cmluZzEiLCJFbnRyYW5jZVJlc3RyaWN0aW9ucyIsInJvb21Db25maWciLCJkb3duU3RyaW5nIiwiU21hbGxCYXNlQ2hpcHMiLCJCYXNlQ2hpcHMiLCJSb29tTWF4TXVsdGlwbGUiLCJ3aWR0aCIsIm9uQ2xpY2siLCJlbnRlckdhbWUiLCJlcnJvciIsInJvb20iLCJyZXFNeUdhbWVTdGF0ZSIsInRoZW4iLCJwYW5lbCIsInNob3dNc2dCb3giLCJ1c2VyIiwiaXNUb3VyaXN0Iiwic2hvd1JlZ2lzdGVyZWRHaWZ0IiwiZ2V0Iiwic2VuZEVudGVyUm9vbSIsImdldEZsb2F0Iiwic2hvd0RpYWxvZyIsInNob3dTaG9wIiwic2hvd0p1SHVhIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyIsImNsb3NlSnVIdWEiLCJzZXRHb2xkUm9vbUluZm8iLCJjaGVja0dvbGQiLCJjb2luIiwibWluQ2lvbiIsInBhcnNlSW50IiwiaTE4biIsInQiLCJzaG93UGFuZWxCeU5hbWUiLCJzZXQiLCJrZXkiLCJPbkRlc3Ryb3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztBQUdBQSxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLENBQXdCO0FBQ3BCQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsS0FBSyxFQUFFO0FBQ0hDLE1BQUFBLElBQUksRUFBRUMsRUFBRSxDQUFDQyxJQUROO0FBRUgsaUJBQVM7QUFGTjtBQURDLEdBRFE7QUFRcEJDLEVBQUFBLE1BUm9CLG9CQVFYO0FBQ0wsU0FBS0MsSUFBTCxDQUFVQyxNQUFWLEdBQW1CLEtBQW5CO0FBQ0EsU0FBS0MsWUFBTDtBQUNBLFNBQUtDLGFBQUw7QUFDSCxHQVptQjtBQWNwQkMsRUFBQUEsS0Fkb0IsbUJBY1osQ0FFUCxDQWhCbUI7QUFpQnBCO0FBQ0FELEVBQUFBLGFBbEJvQiwyQkFrQko7QUFDWlosSUFBQUEsTUFBTSxDQUFDYyxPQUFQLENBQWVDLEVBQWYsQ0FBa0IsZUFBbEIsRUFBbUMsS0FBS0MsYUFBeEMsRUFBdUQsSUFBdkQ7QUFDQWhCLElBQUFBLE1BQU0sQ0FBQ2MsT0FBUCxDQUFlQyxFQUFmLENBQWtCLGNBQWxCLEVBQWtDLEtBQUtFLFlBQXZDLEVBQXFELElBQXJEO0FBQ0gsR0FyQm1CO0FBc0JwQjtBQUNBQyxFQUFBQSxlQXZCb0IsNkJBdUJGO0FBQ2RsQixJQUFBQSxNQUFNLENBQUNjLE9BQVAsQ0FBZUssR0FBZixDQUFtQixlQUFuQixFQUFvQyxJQUFwQztBQUNBbkIsSUFBQUEsTUFBTSxDQUFDYyxPQUFQLENBQWVLLEdBQWYsQ0FBbUIsY0FBbkIsRUFBbUMsSUFBbkM7QUFDSCxH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RUFBQUEsU0FyTm9CLHVCQXFOUjtBQUNSLFNBQUs1RSxlQUFMO0FBQ0g7QUF2Tm1CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog6YeR5biB5oi/6Ze05YWl5Y+j6YCa55So6ISa5pysXHJcbiAqL1xyXG5nbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbGV2ZWw6IHtcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogW11cclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVxRW50ZXJBcmVhKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG5cclxuICAgIH0sXHJcbiAgICAvL+S6i+S7tuebkeWQrFxyXG4gICAgcmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcImdvbGRPbmxpbmVOdW1cIiwgdGhpcy5nb2xkT25saW5lTnVtLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcIm9uR2FtZUNvbmZpZ1wiLCB0aGlzLm9uR2FtZUNvbmZpZywgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgLy/kuovku7bplIDmr4FcclxuICAgIHVucmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoXCJnb2xkT25saW5lTnVtXCIsIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcIm9uR2FtZUNvbmZpZ1wiLCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICBvbkdhbWVDb25maWcobXNnKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lQ29uZmlnID0gbXNnO1xyXG4gICAgICAgIHRoaXMuaW5pdFVJKCk7XHJcbiAgICB9LFxyXG4gICAgY3V0RmxvYXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKE51bWJlcih2YWx1ZSkuZGl2KDEwMCkpLnRvU3RyaW5nKCk7XHJcbiAgICB9LFxyXG4gICAgcmVxRW50ZXJBcmVhKCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5ub2RlLm5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSAnZGR6c2VsZWN0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLkREWjtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5ERFopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2R6cGtzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuRFpQSztcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5EWlBLKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwYWlqaXVzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuUEFJSklVO1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFbnRlckFyZWEoZ2xHYW1lLnNjZW5ldGFnLlBBSUpJVSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncXpubnNlbGVjdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVJRCA9IGdsR2FtZS5zY2VuZXRhZy5RWk5OO1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFbnRlckFyZWEoZ2xHYW1lLnNjZW5ldGFnLlFaTk4pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NhbmdvbmdzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuU0FOR09ORztcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5TQU5HT05HKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd6aGFqaW5odWFzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuWkhBSklOSFVBO1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFbnRlckFyZWEoZ2xHYW1lLnNjZW5ldGFnLlpIQUpJTkhVQSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZWJnc2VsZWN0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLkVCRztcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5FQkcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VzeWRzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSUQgPSBnbEdhbWUuc2NlbmV0YWcuRVNZRDtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5FU1lEKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdmaXNoc2VsZWN0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLkZJU0gyO1xyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnJlYWR5cm9vbS5yZXFFbnRlckFyZWEoZ2xHYW1lLnNjZW5ldGFnLkZJU0gyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdqc3pqaHNlbGVjdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVJRCA9IGdsR2FtZS5zY2VuZXRhZy5KU1pKSDtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5KU1pKSCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3Nzc2VsZWN0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLlNTUztcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5TU1MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdvbGRPbmxpbmVOdW0obXNnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLov5nmmK/lnKjnur/kurrmlbDnmoTmtojmga9cIiwgbXNnKVxyXG4gICAgICAgIGxldCBjb3VudCA9IHRoaXMubGV2ZWwubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobXNnW2kgKyAxXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZShcInBlb3BsZV9udW1cIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBtc2dbaSArIDFdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5pdFVJKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBjb25maWd1cmUgPSB0aGlzLmdhbWVDb25maWc7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUlEID09IGdsR2FtZS5zY2VuZXRhZy5GSVNIMikge1xyXG4gICAgICAgICAgICB0aGlzLmxldmVsWzBdLmdldENoaWxkQnlOYW1lKFwiZGl6aHVsYW91dFwiKS5nZXRDaGlsZEJ5TmFtZSgnbGFiX3RvcCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gYCR7dGhpc1tcImdhbWVDb25maWdcIl1bJzk5J10uQmFzZUNvbnN1bWUgPj0gMTAwMDAwMCA/IHRoaXMuY3V0RmxvYXQodGhpc1tcImdhbWVDb25maWdcIl1bJzk5J10uQmFzZUNvbnN1bWUgLyAxMDAwMCkgKyAn5LiHJyA6IHRoaXMuY3V0RmxvYXQodGhpc1tcImdhbWVDb25maWdcIl1bJzk5J10uQmFzZUNvbnN1bWUpfWA7XHJcbiAgICAgICAgICAgIGxldCBkb3duU3RyaW5nMSA9IHRoaXNbXCJnYW1lQ29uZmlnXCJdWyc5OSddLkVudHJhbmNlUmVzdHJpY3Rpb25zID49IDEwMDAwMDAgPyBgJHt0aGlzLmN1dEZsb2F0KHRoaXNbXCJnYW1lQ29uZmlnXCJdWyc5OSddLkVudHJhbmNlUmVzdHJpY3Rpb25zIC8gMTAwMDApfeS4h2AgOiB0aGlzLmN1dEZsb2F0KHRoaXNbXCJnYW1lQ29uZmlnXCJdWyc5OSddLkVudHJhbmNlUmVzdHJpY3Rpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5sZXZlbFswXS5nZXRDaGlsZEJ5TmFtZShcInpodW5ydWxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZSgnbGFiX2NlbnRlcicpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZG93blN0cmluZzE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vbUNvbmZpZyA9IHRoaXNbXCJnYW1lQ29uZmlnXCJdW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRvd25TdHJpbmcgPSByb29tQ29uZmlnLkVudHJhbmNlUmVzdHJpY3Rpb25zID49IDEwMDAwMDAgPyBgJHt0aGlzLmN1dEZsb2F0KHJvb21Db25maWcuRW50cmFuY2VSZXN0cmljdGlvbnMgLyAxMDAwMCl95LiHYCA6IHRoaXMuY3V0RmxvYXQocm9vbUNvbmZpZy5FbnRyYW5jZVJlc3RyaWN0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwiZGl6aHVsYW91dFwiKS5nZXRDaGlsZEJ5TmFtZSgnbGFiX3RvcCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gYCR7cm9vbUNvbmZpZy5CYXNlQ29uc3VtZSA+PSAxMDAwMDAwID8gdGhpcy5jdXRGbG9hdChyb29tQ29uZmlnLkJhc2VDb25zdW1lIC8gMTAwMDApICsgJ+S4hycgOiB0aGlzLmN1dEZsb2F0KHJvb21Db25maWcuQmFzZUNvbnN1bWUpfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZShcInpodW5ydWxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZSgnbGFiX2NlbnRlcicpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZG93blN0cmluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5sZXZlbC5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWVJRCA9PSBnbEdhbWUuc2NlbmV0YWcuRFpQSykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZShcImRpemh1bGFvdXRcIikuZ2V0Q2hpbGRCeU5hbWUoJ2Rpemh1X251bWJpZycpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gYCR7dGhpcy5jdXRGbG9hdChjb25maWd1cmVbaV0uU21hbGxCYXNlQ2hpcHMpfS8ke3RoaXMuY3V0RmxvYXQoY29uZmlndXJlW2ldLkJhc2VDaGlwcyl9YFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZShcInpodW5ydWxheW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcInpodW5ydV9udW1cIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aGlzLmN1dEZsb2F0KGNvbmZpZ3VyZVtpXS5FbnRyYW5jZVJlc3RyaWN0aW9ucyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwiZGl6aHVsYW91dFwiKS5nZXRDaGlsZEJ5TmFtZShcImRpemh1X251bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuY3V0RmxvYXQoY29uZmlndXJlW2ldLkJhc2VDaGlwcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxldmVsW2ldLmdldENoaWxkQnlOYW1lKFwiemh1bnJ1bGF5b3V0XCIpLmdldENoaWxkQnlOYW1lKFwiemh1bnJ1X251bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuY3V0RmxvYXQoY29uZmlndXJlW2ldLkVudHJhbmNlUmVzdHJpY3Rpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lSUQgPT0gZ2xHYW1lLnNjZW5ldGFnLkREWikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZSgnbGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGDmnIDlpKcke2NvbmZpZ3VyZVtpXS5Sb29tTWF4TXVsdGlwbGV95YCNYFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sZXZlbFtpXS5nZXRDaGlsZEJ5TmFtZSgnYmxhY2snKS53aWR0aCA9IHRoaXMubGV2ZWxbaV0uZ2V0Q2hpbGRCeU5hbWUoJ2xhYmVsJykud2lkdGggKyAxMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmdhbWVJRCA9PSBnbEdhbWUuc2NlbmV0YWcuRERaKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWxbMF0uZ2V0Q2hpbGRCeU5hbWUoJ2xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBg5pyA5aSnJHt0aGlzW1wiZ2FtZUNvbmZpZ1wiXVsnOTknXS5Sb29tTWF4TXVsdGlwbGV95YCNYFxyXG4gICAgICAgICAgICB0aGlzLmxldmVsWzBdLmdldENoaWxkQnlOYW1lKCdibGFjaycpLndpZHRoID0gdGhpcy5sZXZlbFswXS5nZXRDaGlsZEJ5TmFtZSgnbGFiZWwnKS53aWR0aCArIDEwXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIOmHjeWGmeeItuexu+aMiemSrueCueWHu+S6i+S7tlxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwcmltYXJ5XCI6IHRoaXMuZW50ZXJHYW1lKDk5KTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpbnRlcm1lZGlhdGVcIjogdGhpcy5lbnRlckdhbWUoMSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2VuaW9yXCI6IHRoaXMuZW50ZXJHYW1lKDIpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInR1aGFvXCI6IHRoaXMuZW50ZXJHYW1lKDMpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN1cHJlbWFjeVwiOiB0aGlzLmVudGVyR2FtZSg0KTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ2b2x2b1wiOiB0aGlzLmVudGVyR2FtZSg1KTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUuZXJyb3IoXCJubyBmaW5kIGJ1dHRvbiBuYW1lIC0+ICVzXCIsIG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOi/m+WFpemHkeW4geWcuuaIv+mXtFxyXG4gICAgICogQHBhcmFtIGxldmVsIOWcuuasoeexu+WeiyAxOuWInee6p+WcuiAyOuS4ree6p+WcuiAzOumrmOe6p+WcuiA0OuWcn+ixquWcuiA1OuiHs+WwiuWculxyXG4gICAgICovXHJcbiAgICBlbnRlckdhbWUobGV2ZWwpIHtcclxuICAgICAgICBnbEdhbWUucm9vbS5yZXFNeUdhbWVTdGF0ZSh0aGlzLmdhbWVJRCwgbGV2ZWwpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ2FtZUlEID0gdGhpcy5nYW1lSUQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWVDb25maWdbbGV2ZWxdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93TXNnQm94KCfmj5DnpLonLCAn6K+l5oi/6Ze05bCa5pyq5byA5pS+77yM6K+35bCd6K+V5YW25LuW5oi/6Ze044CCJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdsR2FtZS51c2VyLmlzVG91cmlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgIT0gOTkpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1JlZ2lzdGVyZWRHaWZ0KHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnYW1lSUQgPT0gZ2xHYW1lLnNjZW5ldGFnLkZJU0gyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xHYW1lLnVzZXIuZ2V0KFwiY29pblwiKSA+PSB0aGlzW1wiZ2FtZUNvbmZpZ1wiXVtsZXZlbF0uRW50cmFuY2VSZXN0cmljdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbEdhbWUucm9vbS5zZW5kRW50ZXJSb29tKGxldmVsKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmluZyA9IGA8Y29sb3I9Izk5QzdGRj7mgqjnmoTph5HluIHkuI3otrPvvIzor6XmiL/pl7TpnIDopoE8L2M+IDxjb2xvcj0jZmYwMDAwPiAke3RoaXMuZ2V0RmxvYXQodGhpcy5nYW1lQ29uZmlnW2xldmVsXS5FbnRyYW5jZVJlc3RyaWN0aW9ucyl9ICA8L2M+PGNvbG9yPSM5OUM3RkY+6YeR5biB5omN5Y+v5LiL5rOo77yM5piv5ZCm6ams5LiK5YmN5b6A5YWF5YC877yfPC9jPmBcclxuICAgICAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0RpYWxvZyhcIlwiLCBzdHJpbmcsICgpID0+IHsgZ2xHYW1lLnBhbmVsLnNob3dTaG9wKCkgfSwgKCkgPT4geyB9LCBcIuWPlua2iFwiLCBcIuWFheWAvFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUNvbmZpZ1tsZXZlbF0uRW50cmFuY2VSZXN0cmljdGlvbnMgPiBnbEdhbWUudXNlci5nZXQoXCJjb2luXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui/meaYr+W9k+WJjeeahOaIv+mXtOmZkOWItlwiLCB0aGlzLmdhbWVDb25maWcpXHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nID0gYDxjb2xvcj0jOTlDN0ZGPuaCqOeahOmHkeW4geS4jei2s++8jOivpeaIv+mXtOmcgOimgTwvYz4gPGNvbG9yPSNmZjAwMDA+ICR7dGhpcy5nZXRGbG9hdCh0aGlzLmdhbWVDb25maWdbbGV2ZWxdLkVudHJhbmNlUmVzdHJpY3Rpb25zKX0gIDwvYz48Y29sb3I9Izk5QzdGRj7ph5HluIHmiY3lj6/kuIvms6jvvIzmmK/lkKbpqazkuIrliY3lvoDlhYXlgLzvvJ88L2M+YFxyXG4gICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dEaWFsb2coXCJcIiwgc3RyaW5nLCAoKSA9PiB7IGdsR2FtZS5wYW5lbC5zaG93U2hvcCgpIH0sICgpID0+IHsgfSwgXCLlj5bmtohcIiwgXCLlhYXlgLxcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0p1SHVhKCk7XHJcbiAgICAgICAgICAgIC8vIGdsR2FtZS5yZWFkeXJvb20ucmVxRXhpdEFyZWEoKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShcclxuICAgICAgICAgICAgICAgIGNjLmRlbGF5VGltZSgxNSksXHJcbiAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLmNsb3NlSnVIdWEoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgIC8vIFRPRE9cclxuICAgICAgICAgICAgLy8gcmVxR29sZFJvb21WZXJpZnnkuLrml6fnmoTov5vlhaXmiL/pl7Tmlrnms5XvvIzpnIDopoHlhYjor7fmsYLpqozor4HvvIzlho3ov5vlhaXmiL/pl7RcclxuICAgICAgICAgICAgLy8gc2V0R29sZFJvb21JbmZvIOaWsOeahOi/m+WFpeaIv+mXtOaWueazle+8jOaXoOmcgOmqjOivge+8jOiuvue9rua4uOaIj+exu+Wei+S7peWPiuaIv+mXtOS/oeaBr+WQju+8jOebtOaOpei/m+WFpeaIv+mXtFxyXG4gICAgICAgICAgICAvLyBpZiAoZ2xHYW1lLmVudGVyUm9vbVZlcmlmaWNhdGlvbikge1xyXG4gICAgICAgICAgICAvLyAgICAgZ2xHYW1lLnJvb20ucmVxR29sZFJvb21WZXJpZnkoZ2FtZUlELCBsZXZlbCk7XHJcbiAgICAgICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICBnbEdhbWUucm9vbS5zZXRHb2xkUm9vbUluZm8oZ2FtZUlELCBsZXZlbCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgZ2xHYW1lLnJvb20uc2V0R29sZFJvb21JbmZvKGdhbWVJRCwgbGV2ZWwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDmo4Dmn6Xnjqnlrrbph5HluIHmmK/lkKbotrPlpJ9cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBjaGVja0dvbGQoY29pbiwgbWluQ2lvbikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi6YeR5biB5qOA5rWLXCIsIGNvaW4sIG1pbkNpb24pO1xyXG4gICAgICAgIGlmIChwYXJzZUludChjb2luKSA8IHBhcnNlSW50KG1pbkNpb24pKSB7XHJcbiAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RGlhbG9nKGdsR2FtZS5pMThuLnQoXCJVU0VSLkdPTERMQUNLLlRJVExFXCIpLCBnbEdhbWUuaTE4bi50KFwiVVNFUi5HT0xETEFDSy5DT05URU5UXCIpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBnbEdhbWUucGFuZWwuc2hvd1BhbmVsQnlOYW1lKFwic2hvcFwiKTtcclxuICAgICAgICAgICAgfSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0RmxvYXQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gKE51bWJlcih2YWx1ZSkuZGl2KDEwMCkpLnRvU3RyaW5nKCk7XHJcbiAgICB9LFxyXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcclxuICAgIH0sXHJcbiAgICBnZXQoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNba2V5XTtcclxuICAgIH0sXHJcbiAgICBPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==