
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/popularize/getrecord.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e19e4TUe1xJt6g/ACT49tKT', 'getrecord');
// modules/plaza/script/prefab/popularize/getrecord.js

"use strict";

glGame.baseclass.extend({
  properties: {
    now_get_commission: cc.Label,
    yet_get_commission: cc.Label,
    history_commission: cc.Label,
    norecord: cc.Node,
    //noneLab
    infoItem: cc.Node,
    content: cc.Node,
    Lab_CurPage: cc.Label,
    Lab_totalPage: cc.Label
  },
  onLoad: function onLoad() {
    this.CurPage = 1;
    this.Lab_CurPage.string = this.CurPage;
    this.recordData = {};
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "btn_pageup":
        this.btn_pageupCB();
        break;

      case "btn_pagedown":
        this.btn_pagedownCB();
        break;
    }
  },
  initUI: function initUI(pandectdata, data) {
    this.pandectdata = pandectdata;
    this.recordData[this.CurPage] = data;
    this.now_get_commission.string = this.getFloat(this.pandectdata.data.can_receive_extension);
    this.yet_get_commission.string = this.getFloat(this.pandectdata.data.received_profit);
    this.history_commission.string = this.getFloat(this.pandectdata.data.history_commission);
    this.Lab_totalPage.string = this.recordData[this.CurPage].page_total == 0 ? 1 : this.recordData[this.CurPage].page_total;
    this.setTable(this.recordData[this.CurPage].list);
  },
  ReqPlayerExtensionCountlessFlow: function ReqPlayerExtensionCountlessFlow() {
    var _this = this;

    var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
    var page_size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;
    glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessFlow', {
      page: page,
      page_size: page_size
    }, function (route, msg) {
      _this.recordData[_this.CurPage] = msg;
      _this.Lab_CurPage.string = page;

      _this.setTable(_this.recordData[_this.CurPage].list);
    });
  },
  setTable: function setTable(data) {
    this.content.destroyAllChildren();
    this.content.removeAllChildren();
    var count = data.length;

    if (count == 0) {
      this.norecord.active = true;
      return;
    }

    this.hiadShowNode(count > 0);

    for (var i = 0; i < count; i++) {
      var infoItem = cc.instantiate(this.infoItem);
      infoItem.parent = this.content;
      infoItem.active = false;
      infoItem.getChildByName("bg").active = i % 2 == 1;
      infoItem.getChildByName("time").getComponent(cc.Label).string = data[i].create_time;
      var teamMembler = infoItem.getChildByName("teamMembler"); // teamMembler.color = data[i].number < 0 ? glGame.plazaColor.loss : glGame.plazaColor.gain

      teamMembler.getComponent(cc.Label).string = this.getFloat(data[i].number);
      glGame.panel.settingTableLabelColor(teamMembler);
      infoItem.getChildByName("state").getComponent(cc.Label).string = this.getStringState(data[i].state);
      infoItem.getChildByName("state").color = this.getColor(data[i].state);
    }

    glGame.panel.showEffectNode(this, this.content, 0.02, true);
  },
  hiadShowNode: function hiadShowNode(isBool) {
    this.node.getChildByName("btn_pageup").active = isBool;
    this.node.getChildByName("pagelayout").active = isBool;
    this.node.getChildByName("btn_pagedown").active = isBool;
    this.node.getChildByName("explain").active = isBool;
  },
  getFloat: function getFloat(value) {
    return Number(value).div(100).toString();
  },
  getColor: function getColor(state) {
    var color = cc.color(0x00, 0xff, 0x36);

    switch (state) {
      case 0:
      case 1:
      case 4:
        color = cc.color(0x00, 0xff, 0x36);
        break;

      case 2:
      case 3:
        color = cc.color(0x66, 0xcc, 0xc8);
        break;

      case 5:
      case 6:
        color = cc.color(0x66, 0x90, 0xcc);
        break;
    }

    return color;
  },
  getStringState: function getStringState(state) {
    var color = "审核中";

    switch (state) {
      case 0:
      case 1:
      case 4:
        color = "已发放";
        break;

      case 2:
      case 3:
        color = "审核中";
        break;

      case 5:
        color = "取消退回";
        break;

      case 6:
        color = "审核拒绝";
        break;
    }

    return color;
  },
  btn_pagedownCB: function btn_pagedownCB() {
    this.CurPage++;

    if (this.CurPage > this.Lab_totalPage.string) {
      this.CurPage = this.Lab_totalPage.string;
      return;
    }

    this.ReqPlayerExtensionCountlessFlow(this.CurPage);
  },
  btn_pageupCB: function btn_pageupCB() {
    this.CurPage--;

    if (this.CurPage < 1) {
      this.CurPage = 1;
      return;
    }

    this.ReqPlayerExtensionCountlessFlow(this.CurPage);
  },
  OnDestroy: function OnDestroy() {}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxwb3B1bGFyaXplXFxnZXRyZWNvcmQuanMiXSwibmFtZXMiOlsiZ2xHYW1lIiwiYmFzZWNsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsIm5vd19nZXRfY29tbWlzc2lvbiIsImNjIiwiTGFiZWwiLCJ5ZXRfZ2V0X2NvbW1pc3Npb24iLCJoaXN0b3J5X2NvbW1pc3Npb24iLCJub3JlY29yZCIsIk5vZGUiLCJpbmZvSXRlbSIsImNvbnRlbnQiLCJMYWJfQ3VyUGFnZSIsIkxhYl90b3RhbFBhZ2UiLCJvbkxvYWQiLCJDdXJQYWdlIiwic3RyaW5nIiwicmVjb3JkRGF0YSIsIm9uQ2xpY2siLCJuYW1lIiwibm9kZSIsImJ0bl9wYWdldXBDQiIsImJ0bl9wYWdlZG93bkNCIiwiaW5pdFVJIiwicGFuZGVjdGRhdGEiLCJkYXRhIiwiZ2V0RmxvYXQiLCJjYW5fcmVjZWl2ZV9leHRlbnNpb24iLCJyZWNlaXZlZF9wcm9maXQiLCJwYWdlX3RvdGFsIiwic2V0VGFibGUiLCJsaXN0IiwiUmVxUGxheWVyRXh0ZW5zaW9uQ291bnRsZXNzRmxvdyIsInBhZ2UiLCJwYWdlX3NpemUiLCJnYW1lTmV0Iiwic2VuZF9tc2ciLCJyb3V0ZSIsIm1zZyIsImRlc3Ryb3lBbGxDaGlsZHJlbiIsInJlbW92ZUFsbENoaWxkcmVuIiwiY291bnQiLCJsZW5ndGgiLCJhY3RpdmUiLCJoaWFkU2hvd05vZGUiLCJpIiwiaW5zdGFudGlhdGUiLCJwYXJlbnQiLCJnZXRDaGlsZEJ5TmFtZSIsImdldENvbXBvbmVudCIsImNyZWF0ZV90aW1lIiwidGVhbU1lbWJsZXIiLCJudW1iZXIiLCJwYW5lbCIsInNldHRpbmdUYWJsZUxhYmVsQ29sb3IiLCJnZXRTdHJpbmdTdGF0ZSIsInN0YXRlIiwiY29sb3IiLCJnZXRDb2xvciIsInNob3dFZmZlY3ROb2RlIiwiaXNCb29sIiwidmFsdWUiLCJOdW1iZXIiLCJkaXYiLCJ0b1N0cmlu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V0FBSyxDQUFMO0FBQ0lBLFFBQUFBLEtBQUssR0FBRyxNQUFSO0FBQ0E7QUFaUjs7QUFjQSxXQUFPQSxLQUFQO0FBQ0gsR0ExR21CO0FBMkdwQm5DLEVBQUFBLGNBM0dvQiw0QkEyR0g7QUFDYixTQUFLUCxPQUFMOztBQUNBLFFBQUksS0FBS0EsT0FBTCxHQUFlLEtBQUtGLGFBQUwsQ0FBbUJHLE1BQXRDLEVBQThDO0FBQzFDLFdBQUtELE9BQUwsR0FBZSxLQUFLRixhQUFMLENBQW1CRyxNQUFsQztBQUNBO0FBQ0g7O0FBQ0QsU0FBS2dCLCtCQUFMLENBQXFDLEtBQUtqQixPQUExQztBQUNILEdBbEhtQjtBQW1IcEJNLEVBQUFBLFlBbkhvQiwwQkFtSEw7QUFDWCxTQUFLTixPQUFMOztBQUNBLFFBQUksS0FBS0EsT0FBTCxHQUFlLENBQW5CLEVBQXNCO0FBQ2xCLFdBQUtBLE9BQUwsR0FBZSxDQUFmO0FBQ0E7QUFDSDs7QUFDRCxTQUFLaUIsK0JBQUwsQ0FBcUMsS0FBS2pCLE9BQTFDO0FBQ0gsR0ExSG1CO0FBMkhwQmtELEVBQUFBLFNBM0hvQix1QkEySFIsQ0FFWDtBQTdIbUIsQ0FBeEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImdsR2FtZS5iYXNlY2xhc3MuZXh0ZW5kKHtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBub3dfZ2V0X2NvbW1pc3Npb246IGNjLkxhYmVsLFxyXG4gICAgICAgIHlldF9nZXRfY29tbWlzc2lvbjogY2MuTGFiZWwsXHJcbiAgICAgICAgaGlzdG9yeV9jb21taXNzaW9uOiBjYy5MYWJlbCxcclxuXHJcbiAgICAgICAgbm9yZWNvcmQ6IGNjLk5vZGUsLy9ub25lTGFiXHJcbiAgICAgICAgaW5mb0l0ZW06IGNjLk5vZGUsXHJcbiAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuICAgICAgICBMYWJfQ3VyUGFnZTogY2MuTGFiZWwsXHJcbiAgICAgICAgTGFiX3RvdGFsUGFnZTogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG4gICAgb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMuQ3VyUGFnZSA9IDE7XHJcbiAgICAgICAgdGhpcy5MYWJfQ3VyUGFnZS5zdHJpbmcgPSB0aGlzLkN1clBhZ2U7XHJcbiAgICAgICAgdGhpcy5yZWNvcmREYXRhID0ge307XHJcbiAgICB9LFxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fcGFnZXVwXCI6IHRoaXMuYnRuX3BhZ2V1cENCKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYnRuX3BhZ2Vkb3duXCI6IHRoaXMuYnRuX3BhZ2Vkb3duQ0IoKTsgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXRVSShwYW5kZWN0ZGF0YSwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMucGFuZGVjdGRhdGEgPSBwYW5kZWN0ZGF0YTtcclxuICAgICAgICB0aGlzLnJlY29yZERhdGFbdGhpcy5DdXJQYWdlXSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5ub3dfZ2V0X2NvbW1pc3Npb24uc3RyaW5nID0gdGhpcy5nZXRGbG9hdCh0aGlzLnBhbmRlY3RkYXRhLmRhdGEuY2FuX3JlY2VpdmVfZXh0ZW5zaW9uKTtcclxuICAgICAgICB0aGlzLnlldF9nZXRfY29tbWlzc2lvbi5zdHJpbmcgPSB0aGlzLmdldEZsb2F0KHRoaXMucGFuZGVjdGRhdGEuZGF0YS5yZWNlaXZlZF9wcm9maXQpO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeV9jb21taXNzaW9uLnN0cmluZyA9IHRoaXMuZ2V0RmxvYXQodGhpcy5wYW5kZWN0ZGF0YS5kYXRhLmhpc3RvcnlfY29tbWlzc2lvbik7XHJcblxyXG4gICAgICAgIHRoaXMuTGFiX3RvdGFsUGFnZS5zdHJpbmcgPSB0aGlzLnJlY29yZERhdGFbdGhpcy5DdXJQYWdlXS5wYWdlX3RvdGFsID09IDAgPyAxIDogdGhpcy5yZWNvcmREYXRhW3RoaXMuQ3VyUGFnZV0ucGFnZV90b3RhbDtcclxuICAgICAgICB0aGlzLnNldFRhYmxlKHRoaXMucmVjb3JkRGF0YVt0aGlzLkN1clBhZ2VdLmxpc3QpO1xyXG4gICAgfSxcclxuICAgIFJlcVBsYXllckV4dGVuc2lvbkNvdW50bGVzc0Zsb3cocGFnZSA9IDEsIHBhZ2Vfc2l6ZSA9IDgpIHtcclxuICAgICAgICBnbEdhbWUuZ2FtZU5ldC5zZW5kX21zZygnaHR0cC5SZXFQbGF5ZXJFeHRlbnNpb25Db3VudGxlc3NGbG93JywgeyBwYWdlOiBwYWdlLCBwYWdlX3NpemU6IHBhZ2Vfc2l6ZSB9LCAocm91dGUsIG1zZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlY29yZERhdGFbdGhpcy5DdXJQYWdlXSA9IG1zZztcclxuICAgICAgICAgICAgdGhpcy5MYWJfQ3VyUGFnZS5zdHJpbmcgPSBwYWdlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRoaXMucmVjb3JkRGF0YVt0aGlzLkN1clBhZ2VdLmxpc3QpXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBzZXRUYWJsZShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50LmRlc3Ryb3lBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgIHRoaXMuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgIGxldCBjb3VudCA9IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgIGlmIChjb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9yZWNvcmQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhpYWRTaG93Tm9kZShjb3VudCA+IDApO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5mb0l0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmluZm9JdGVtKTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0ucGFyZW50ID0gdGhpcy5jb250ZW50O1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJiZ1wiKS5hY3RpdmUgPSBpICUgMiA9PSAxO1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcInRpbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBkYXRhW2ldLmNyZWF0ZV90aW1lO1xyXG4gICAgICAgICAgICBsZXQgdGVhbU1lbWJsZXIgPSBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcInRlYW1NZW1ibGVyXCIpXHJcbiAgICAgICAgICAgIC8vIHRlYW1NZW1ibGVyLmNvbG9yID0gZGF0YVtpXS5udW1iZXIgPCAwID8gZ2xHYW1lLnBsYXphQ29sb3IubG9zcyA6IGdsR2FtZS5wbGF6YUNvbG9yLmdhaW5cclxuICAgICAgICAgICAgdGVhbU1lbWJsZXIuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aGlzLmdldEZsb2F0KGRhdGFbaV0ubnVtYmVyKTtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNldHRpbmdUYWJsZUxhYmVsQ29sb3IodGVhbU1lbWJsZXIpO1xyXG4gICAgICAgICAgICBpbmZvSXRlbS5nZXRDaGlsZEJ5TmFtZShcInN0YXRlXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGhpcy5nZXRTdHJpbmdTdGF0ZShkYXRhW2ldLnN0YXRlKTtcclxuICAgICAgICAgICAgaW5mb0l0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJzdGF0ZVwiKS5jb2xvciA9IHRoaXMuZ2V0Q29sb3IoZGF0YVtpXS5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RWZmZWN0Tm9kZSh0aGlzLHRoaXMuY29udGVudCwwLjAyLHRydWUpO1xyXG4gICAgfSxcclxuICAgIGhpYWRTaG93Tm9kZShpc0Jvb2wpIHtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJidG5fcGFnZXVwXCIpLmFjdGl2ZSA9IGlzQm9vbDtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJwYWdlbGF5b3V0XCIpLmFjdGl2ZSA9IGlzQm9vbDtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJidG5fcGFnZWRvd25cIikuYWN0aXZlID0gaXNCb29sO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImV4cGxhaW5cIikuYWN0aXZlID0gaXNCb29sO1xyXG4gICAgfSxcclxuICAgIGdldEZsb2F0KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIChOdW1iZXIodmFsdWUpLmRpdigxMDApKS50b1N0cmluZygpO1xyXG4gICAgfSxcclxuICAgIGdldENvbG9yKHN0YXRlKSB7XHJcbiAgICAgICAgbGV0IGNvbG9yID0gY2MuY29sb3IoMHgwMCwgMHhmZiwgMHgzNik7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgY29sb3IgPSBjYy5jb2xvcigweDAwLCAweGZmLCAweDM2KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6IGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gY2MuY29sb3IoMHg2NiwgMHhjYywgMHhjOCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICBjb2xvciA9IGNjLmNvbG9yKDB4NjYsIDB4OTAsIDB4Y2MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgIH0sXHJcbiAgICBnZXRTdHJpbmdTdGF0ZShzdGF0ZSkge1xyXG4gICAgICAgIGxldCBjb2xvciA9IFwi5a6h5qC45LitXCJcclxuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBjb2xvciA9IFwi5bey5Y+R5pS+XCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6IGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gXCLlrqHmoLjkuK1cIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gXCLlj5bmtojpgIDlm55cIlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgY29sb3IgPSBcIuWuoeaguOaLkue7nVwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xyXG4gICAgfSxcclxuICAgIGJ0bl9wYWdlZG93bkNCKCkge1xyXG4gICAgICAgIHRoaXMuQ3VyUGFnZSsrXHJcbiAgICAgICAgaWYgKHRoaXMuQ3VyUGFnZSA+IHRoaXMuTGFiX3RvdGFsUGFnZS5zdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5DdXJQYWdlID0gdGhpcy5MYWJfdG90YWxQYWdlLnN0cmluZ1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5SZXFQbGF5ZXJFeHRlbnNpb25Db3VudGxlc3NGbG93KHRoaXMuQ3VyUGFnZSlcclxuICAgIH0sXHJcbiAgICBidG5fcGFnZXVwQ0IoKSB7XHJcbiAgICAgICAgdGhpcy5DdXJQYWdlLS1cclxuICAgICAgICBpZiAodGhpcy5DdXJQYWdlIDwgMSkge1xyXG4gICAgICAgICAgICB0aGlzLkN1clBhZ2UgPSAxXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlJlcVBsYXllckV4dGVuc2lvbkNvdW50bGVzc0Zsb3codGhpcy5DdXJQYWdlKVxyXG4gICAgfSxcclxuICAgIE9uRGVzdHJveSgpIHtcclxuXHJcbiAgICB9LFxyXG59KTtcclxuIl19