
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/modules/plaza/script/prefab/enterRoom/qhbjlentry.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'fb4c8L36aBKMbxJ/7koda04', 'qhbjlentry');
// modules/plaza/script/prefab/enterRoom/qhbjlentry.js

"use strict";

glGame.baseclass.extend({
  properties: {
    BGM: {
      type: cc.AudioClip,
      "default": null
    },
    goldCount: cc.Label,
    qhbjlselect: cc.Node,
    record: cc.Prefab,
    rule: cc.Prefab,
    fire_node: cc.Node,
    fireworks: cc.Node,
    launchPoint: cc.Node
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.gameid = 0;
    this.node.zIndex = 20;
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);
    glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);
    glGame.emitter.on("nodeRemove", this.click_back, this);
    glGame.emitter.on("updateUserData", this.updateuserInfo, this);
    this.updateuserInfo();
    this.registerEvent();
    this.reqEnterArea();
    this.nodeInfo = {};
    this.indexFire = 0;
    this.playFireworks();
  },
  //事件监听
  registerEvent: function registerEvent() {
    glGame.emitter.on("onGameInfolist_area", this.onGameInfolist, this);
    glGame.emitter.on("onRoomInfo_area", this.onRoomInfo, this);
    glGame.emitter.on("onDeleteRoom_area", this.onDeleteRoom, this);
  },
  //事件销毁
  unregisterEvent: function unregisterEvent() {
    glGame.emitter.off("onGameInfolist_area", this);
    glGame.emitter.off("onRoomInfo_area", this);
    glGame.emitter.off("onDeleteRoom_area", this);
  },
  RootNodeShow: function RootNodeShow() {
    this.node.active = true;
    this.registerEvent();
    this.reqEnterArea();
  },
  RootNodeHide: function RootNodeHide() {
    this.node.active = false;
    this.unregisterEvent();
  },
  playFireworks: function playFireworks() {
    var _this = this;

    var time = Math.random() * 2;
    var indextemp = [1, 0, 3, 2];
    var index = indextemp[this.indexFire % 4];
    this.node.runAction(cc.sequence(cc.delayTime(time), cc.callFunc(function () {
      _this.indexFire++;
      console.log("烟花发射111111");

      _this.emissionFire(index);

      _this.playFireworks();
    })));
  },
  emissionFire: function emissionFire(index) {
    var distance = [this.node.height / 3.5, this.node.height / 3.8, this.node.height / 3, this.node.height / 3.5];
    var aniList = ["bluefireworks", "redfireworks", "yellowfireworks", "bluefireworks"];
    var scaleList = [1.18, 1.78, 1.13, 1.3];
    var fire_node = cc.instantiate(this.fire_node);
    fire_node.parent = this.node;
    fire_node.position = this.launchPoint.children[index].position;
    fire_node.active = true;
    var fireworks = cc.instantiate(this.fireworks);
    fireworks.parent = this.node;
    fireworks.setScale(scaleList[index]);
    fire_node.runAction(cc.sequence(cc.moveBy(1, 0, distance[index]), cc.callFunc(function () {
      fire_node.opacity = 0;
      fireworks.position = fire_node.position;
      fireworks.active = true;
      fireworks.getComponent(cc.Animation).play("".concat(aniList[index]));
    }), cc.delayTime(1.2), cc.callFunc(function () {
      fire_node.destroy();
      fireworks.destroy();
    })));
  },
  //发包
  reqEnterArea: function reqEnterArea() {
    this.gameID = glGame.scenetag.QHBJL;
    glGame.readyroom.reqEnterArea(glGame.scenetag.QHBJL);
  },
  onGameInfolist: function onGameInfolist(msg) {
    //this.roomlist = glGame.readyroom.roomlist;
    this.gameInfoTest = glGame.readyroom.get("gameInfo");
    console.log("这是当前房间配置", this.gameInfoTest);

    for (var key in this.gameInfoTest) {
      if (this.qhbjlselect.getChildByName("".concat(key))) {
        var lab_chiplimit = this.qhbjlselect.getChildByName("".concat(key)).getChildByName('chiplimit').getChildByName('num').getComponent(cc.Label);
        var lab_chip = this.qhbjlselect.getChildByName("".concat(key)).getChildByName('chip').getChildByName('num').getComponent(cc.Label);
        lab_chiplimit.string = this.cutFloat(this.gameInfoTest[key].EntranceRestrictions);
        lab_chip.string = this.cutFloat(this.gameInfoTest[key].BaseChips);
      }
    }

    this.initAni(); // console.log("这是当前的房间配置",this.gameInfoTest);
    // for (let bettype in this.roomlist) {
    //     for (let roomid in this.roomlist[bettype]) {
    //         if (!this.qhbjlselect.children[bettype - 1]) break;
    //         let chiplimitNum = this.qhbjlselect.children[bettype - 1].getChildByName('chiplimit').getChildByName('num').getComponent(cc.Label);
    //         let chipNum = this.qhbjlselect.children[bettype - 1].getChildByName('chip').getChildByName('num').getComponent(cc.Label);
    //         chiplimitNum.string = this.cutFloat(this.gameInfoTest[bettype].BaseChips);
    //         chipNum.string = this.cutFloat(this.gameInfoTest[bettype].EntranceRestrictions);
    //         this.qhbjlselect.children[bettype - 1].name = roomid;
    //         this.nodeInfo[roomid] = {
    //             tag: this.roomlist[bettype][roomid].roomserverid,
    //             type: bettype
    //         }
    //         break;
    //     }
    // }
  },
  onRoomInfo: function onRoomInfo(msg) {},
  onDeleteRoom: function onDeleteRoom(msg) {},
  initAni: function initAni() {
    this.renwu_pos = [];

    for (var index = 0; index < this.qhbjlselect.childrenCount; index++) {
      var pos = this.qhbjlselect.children[index].getPosition();
      this.renwu_pos.push(pos);
      this.qhbjlselect.children[index].x = this.node.width / 2 + pos.x;
      this.qhbjlselect.children[index].active = true;
    }

    for (var i = 0; i < this.qhbjlselect.childrenCount; i++) {
      this.qhbjlselect.children[i].runAction(cc.sequence(cc.delayTime(i * 0.05), cc.moveTo(0.25, cc.v2(this.renwu_pos[i].x - 40, this.renwu_pos[i].y)), cc.moveTo(0.1, this.renwu_pos[i])));
    }
  },
  onClick: function onClick(name, node) {
    switch (name) {
      case "btn_back":
        this.click_back();
        break;

      case "btn_help":
        this.click_help();
        break;

      case "btn_record":
        this.click_record();
        break;

      case "mycoinInfo":
        this.click_addgold();
        break;

      case "headbg":
        this.click_userinfo();
        break;

      case "btn_chongzhi":
        this.click_addgold();
        break;

      case "btn_start":
        this.enterroom(name, node);
        break;

      default:
        console.error("no find button name -> %s", name);
    }
  },
  //传房间id以及房间等级
  enterroom: function enterroom(name, node) {
    var _this2 = this;

    if (glGame.user.isTourist()) {
      glGame.panel.showRegisteredGift(true);
      return;
    }

    if (glGame.user.suspicious == 1 && glGame.user.game == 2 || glGame.user.is_game == 2) {
      glGame.panel.showDialog("", "您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！", function () {
        glGame.panel.showService();
      }, function () {}, "我知道了", "联系客服");
      return;
    }

    glGame.panel.showFieldSelectionJuHua();
    glGame.room.reqMyGameState(this.gameID, node.parent.name).then(function () {
      glGame.readyroom.enterHundredsRoomOther(_this2.gameID, node.parent.name);
    });
  },
  cutFloat: function cutFloat(value) {
    return Number(value).div(100).toString();
  },
  showUserInfo: function showUserInfo() {
    glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get("headURL"));
  },
  updateuserInfo: function updateuserInfo() {
    var coin = glGame.user.get("coin");
    this.goldCount.string = glGame.user.GoldTemp(coin);
  },
  setGameId: function setGameId(gameid) {
    this.gameid = gameid;
  },
  updateBgInfo: function updateBgInfo() {},
  click_userinfo: function click_userinfo() {
    glGame.panel.showPanelByName("userinfo");
  },
  click_addgold: function click_addgold() {
    glGame.panel.showShop(30);
  },
  click_back: function click_back() {
    glGame.readyroom.reqExitArea();
    this.remove();
  },
  click_help: function click_help() {
    // glGame.panel.showNewGameRule(this.gameid, 30);
    var panel = glGame.panel.showPanel(this.rule);
    panel.zIndex = 30;
  },
  click_record: function click_record() {
    // glGame.panel.showNewGameRecord(this.gameid, 30);
    var panel = glGame.panel.showPanel(this.record);
    panel.zIndex = 30;
  },
  set: function set(key, value) {
    this[key] = value;
  },
  get: function get(key) {
    return this[key];
  },
  OnDestroy: function OnDestroy() {
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);
    glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);
    glGame.emitter.off("nodeRemove", this);
    glGame.emitter.off("updateUserData", this);
    this.unregisterEvent();
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcbW9kdWxlc1xccGxhemFcXHNjcmlwdFxccHJlZmFiXFxlbnRlclJvb21cXHFoYmpsZW50cnkuanMiXSwibmFtZXMiOlsiZ2xHYW1lIiwiYmFzZWNsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsIkJHTSIsInR5cGUiLCJjYyIsIkF1ZGlvQ2xpcCIsImdvbGRDb3VudCIsIkxhYmVsIiwicWhiamxzZWxlY3QiLCJOb2RlIiwicmVjb3JkIiwiUHJlZmFiIiwicnVsZSIsImZpcmVfbm9kZSIsImZpcmV3b3JrcyIsImxhdW5jaFBvaW50Iiwib25Mb2FkIiwiZ2FtZWlkIiwibm9kZSIsInpJbmRleCIsImVtaXR0ZXIiLCJvbiIsIk1FU1NBR0UiLCJVSSIsIlJPT01fRU5URVJfU0hPVyIsIlJvb3ROb2RlU2hvdyIsIlJPT01fRU5URVJfSElERSIsIlJvb3ROb2RlSGlkZSIsImNsaWNrX2JhY2siLCJ1cGRhdGV1c2VySW5mbyIsInJlZ2lzdGVyRXZlbnQiLCJyZXFFbnRlckFyZWEiLCJub2RlSW5mbyIsImluZGV4RmlyZSIsInBsYXlGaXJld29ya3MiLCJvbkdhbWVJbmZvbGlzdCIsIm9uUm9vbUluZm8iLCJvbkRlbGV0ZVJvb20iLCJ1bnJlZ2lzdGVyRXZlbnQiLCJvZmYiLCJhY3RpdmUiLCJ0aW1lIiwiTWF0aCIsInJhbmRvbSIsImluZGV4dGVtcCIsImluZGV4IiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyIsImNvbnNvbGUiLCJsb2ciLCJlbWlzc2lvbkZpcmUiLCJkaXN0YW5jZSIsImhlaWdodCIsImFuaUxpc3QiLCJzY2FsZUxpc3QiLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsInBvc2l0aW9uIiwiY2hpbGRyZW4iLCJzZXRTY2FsZSIsIm1vdmVCeSIsIm9wYWNpdHkiLCJnZXRDb21wb25lbnQiLCJBbmltYXRpb24iLCJwbGF5IiwiZGVzdHJveSIsImdhbWVJRCIsInNjZW5ldGFnIiwiUUhCSkwiLCJyZWFkeXJvb20iLCJtc2ciLCJnYW1lSW5mb1Rlc3QiLCJnZXQiLCJrZXkiLCJnZXRDaGlsZEJ5TmFtZSIsImxhYl9jaGlwbGltaXQiLCJsYWJfY2hpcCIsInN0cmluZyIsImN1dEZsb2F0IiwiRW50cmFuY2VSZXN0cmljdGlvbnMiLCJCYXNlQ2hpcHMiLCJpbml0QW5pIiwicmVud3VfcG9zIiwiY2hpbGRyZW5Db3VudCIsInBvcyIsImdldFBvc2l0aW9uIiwicHVzaCIsIngiLCJ3aWR0aCIsImkiLCJtb3ZlVG8iLCJ2MiIsInkiLCJvbkNsaWNrIiwibmFtZSIsImNsaWNrX2hlbHAiLCJjbGlja19yZWNvcmQiLCJjbGlja19hZGRnb2xkIiwiY2xpY2tfdXNlcmluZm8iLCJlbnRlcnJvb20iLCJlcnJvciIsInVzZXIiLCJpc1RvdXJpc3QiLCJwYW5lbCIsInNob3dSZWdpc3RlcmVkR2lmdCIsInN1c3BpY2lvdXMiLCJnYW1lIiwiaXNfZ2FtZSIsInNob3dEaWFsb2ciLCJzaG93U2VydmljZSIsInNob3dGaWVsZFNlbGVjdGlvbkp1SHVhIiwicm9vbSIsInJlcU15R2FtZVN0YXRlIiwidGhlbiIsImVudGVySHVuZHJlZHNSb29tT3RoZXIiLCJ2YWx1ZSIsIk51bWJlciIsImRpdiIsInRvU3RyaW5nIiwic2hvd1VzZXJJbmZvIiwic2hvd1JlbW90ZUltYWdlIiwiUGxheWVyaGVhZCIsImNvaW4iLCJHb2xkVGVtcCIsInNldEdhbWVJZCIsInVwZGF0ZUJnSW5mbyIsInNob3dQYW5lbEJ5TmFtZSIsInNob3dTaG9wIiwicmVxRXhpdEFyZWEiLCJyZW1vdmUiLCJzaG93UGFuZWwiLCJzZXQiLCJPbkRlc3Ryb3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsTUFBakIsQ0FBd0I7QUFFcEJDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxHQUFHLEVBQUU7QUFDREMsTUFBQUEsSUFBSSxFQUFFQyxFQUFFLENBQUNDLFNBRFI7QUFFRCxpQkFBUztBQUZSLEtBREc7QUFLUkMsSUFBQUEsU0FBUyxFQUFFRixFQUFFLENBQUNHLEtBTE47QUFNUkMsSUFBQUEsV0FBVyxFQUFFSixFQUFFLENBQUNLLElBTlI7QUFPUkMsSUFBQUEsTUFBTSxFQUFFTixFQUFFLENBQUNPLE1BUEg7QUFRUkMsSUFBQUEsSUFBSSxFQUFFUixFQUFFLENBQUNPLE1BUkQ7QUFTUkUsSUFBQUEsU0FBUyxFQUFFVCxFQUFFLENBQUNLLElBVE47QUFVUkssSUFBQUEsU0FBUyxFQUFFVixFQUFFLENBQUNLLElBVk47QUFXUk0sSUFBQUEsV0FBVyxFQUFFWCxFQUFFLENBQUNLO0FBWFIsR0FGUTtBQWdCcEI7QUFFQU8sRUFBQUEsTUFsQm9CLG9CQWtCWDtBQUNMLFNBQUtDLE1BQUwsR0FBYyxDQUFkO0FBQ0EsU0FBS0MsSUFBTCxDQUFVQyxNQUFWLEdBQW1CLEVBQW5CO0FBRUFyQixJQUFBQSxNQUFNLENBQUNzQixPQUFQLENBQWVDLEVBQWYsQ0FBa0JDLE9BQU8sQ0FBQ0MsRUFBUixDQUFXQyxlQUE3QixFQUE4QyxLQUFLQyxZQUFuRCxFQUFpRSxJQUFqRTtBQUNBM0IsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlQyxFQUFmLENBQWtCQyxPQUFPLENBQUNDLEVBQVIsQ0FBV0csZUFBN0IsRUFBOEMsS0FBS0MsWUFBbkQsRUFBaUUsSUFBakU7QUFDQTdCLElBQUFBLE1BQU0sQ0FBQ3NCLE9BQVAsQ0FBZUMsRUFBZixDQUFrQixZQUFsQixFQUFnQyxLQUFLTyxVQUFyQyxFQUFpRCxJQUFqRDtBQUNBOUIsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlQyxFQUFmLENBQWtCLGdCQUFsQixFQUFvQyxLQUFLUSxjQUF6QyxFQUF5RCxJQUF6RDtBQUNBLFNBQUtBLGNBQUw7QUFDQSxTQUFLQyxhQUFMO0FBQ0EsU0FBS0MsWUFBTDtBQUNBLFNBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQSxTQUFLQyxTQUFMLEdBQWlCLENBQWpCO0FBQ0EsU0FBS0MsYUFBTDtBQUNILEdBaENtQjtBQWlDcEI7QUFDQUosRUFBQUEsYUFsQ29CLDJCQWtDSjtBQUNaaEMsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlQyxFQUFmLENBQWtCLHFCQUFsQixFQUF5QyxLQUFLYyxjQUE5QyxFQUE4RCxJQUE5RDtBQUNBckMsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlQyxFQUFmLENBQWtCLGlCQUFsQixFQUFxQyxLQUFLZSxVQUExQyxFQUFzRCxJQUF0RDtBQUNBdEMsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlQyxFQUFmLENBQWtCLG1CQUFsQixFQUF1QyxLQUFLZ0IsWUFBNUMsRUFBMEQsSUFBMUQ7QUFDSCxHQXRDbUI7QUF1Q3BCO0FBQ0FDLEVBQUFBLGVBeENvQiw2QkF3Q0Y7QUFDZHhDLElBQUFBLE1BQU0sQ0FBQ3NCLE9BQVAsQ0FBZW1CLEdBQWYsQ0FBbUIscUJBQW5CLEVBQTBDLElBQTFDO0FBQ0F6QyxJQUFBQSxNQUFNLENBQUNzQixPQUFQLENBQWVtQixHQUFmLENBQW1CLGlCQUFuQixFQUFzQyxJQUF0QztBQUNBekMsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlbUIsR0FBZixDQUFtQixtQkFBbkIsRUFBd0MsSUFBeEM7QUFDSCxHQTVDbUI7QUE2Q3BCZCxFQUFBQSxZQTdDb0IsMEJBNkNMO0FBQ1gsU0FBS1AsSUFBTCxDQUFVc0IsTUFBVixHQUFtQixJQUFuQjtBQUNBLFNBQUtWLGFBQUw7QUFDQSxTQUFLQyxZQUFMO0FBQ0gsR0FqRG1CO0FBa0RwQkosRUFBQUEsWUFsRG9CLDBCQWtETDtBQUNYLFNBQUtULElBQUwsQ0FBVXNCLE1BQVYsR0FBbUIsS0FBbkI7QUFDQSxTQUFLRixlQUFMO0FBQ0gsR0FyRG1CO0FBc0RwQkosRUFBQUEsYUF0RG9CLDJCQXNESjtBQUFBOztBQUNaLFFBQUlPLElBQUksR0FBR0MsSUFBSSxDQUFDQyxNQUFMLEtBQWMsQ0FBekI7QUFDQSxRQUFJQyxTQUFTLEdBQUcsQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLENBQWhCO0FBQ0EsUUFBSUMsS0FBSyxHQUFHRCxTQUFTLENBQUMsS0FBS1gsU0FBTCxHQUFlLENBQWhCLENBQXJCO0FBQ0EsU0FBS2YsSUFBTCxDQUFVNEIsU0FBVixDQUFvQjFDLEVBQUUsQ0FBQzJDLFFBQUgsQ0FDaEIzQyxFQUFFLENBQUM0QyxTQUFILENBQWFQLElBQWIsQ0FEZ0IsRUFFaEJyQyxFQUFFLENBQUM2QyxRQUFILENBQVksWUFBSTtBQUNaLE1BQUEsS0FBSSxDQUFDaEIsU0FBTDtBQUNBaUIsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksWUFBWjs7QUFDQSxNQUFBLEtBQUksQ0FBQ0MsWUFBTCxDQUFrQlAsS0FBbEI7O0FBQ0EsTUFBQSxLQUFJLENBQUNYLGFBQUw7QUFDSCxLQUxELENBRmdCLENBQXBCO0FBU0gsR0FuRW1CO0FBb0VwQmtCLEVBQUFBLFlBcEVvQix3QkFvRVBQLEtBcEVPLEVBb0VBO0FBQ2hCLFFBQUlRLFFBQVEsR0FBRyxDQUFDLEtBQUtuQyxJQUFMLENBQVVvQyxNQUFWLEdBQW1CLEdBQXBCLEVBQXlCLEtBQUtwQyxJQUFMLENBQVVvQyxNQUFWLEdBQW1CLEdBQTVDLEVBQWlELEtBQUtwQyxJQUFMLENBQVVvQyxNQUFWLEdBQW1CLENBQXBFLEVBQXVFLEtBQUtwQyxJQUFMLENBQVVvQyxNQUFWLEdBQW1CLEdBQTFGLENBQWY7QUFDQSxRQUFJQyxPQUFPLEdBQUcsQ0FBQyxlQUFELEVBQWlCLGNBQWpCLEVBQWdDLGlCQUFoQyxFQUFrRCxlQUFsRCxDQUFkO0FBQ0EsUUFBSUMsU0FBUyxHQUFHLENBQUMsSUFBRCxFQUFPLElBQVAsRUFBYSxJQUFiLEVBQW1CLEdBQW5CLENBQWhCO0FBRUEsUUFBSTNDLFNBQVMsR0FBR1QsRUFBRSxDQUFDcUQsV0FBSCxDQUFlLEtBQUs1QyxTQUFwQixDQUFoQjtBQUNBQSxJQUFBQSxTQUFTLENBQUM2QyxNQUFWLEdBQW1CLEtBQUt4QyxJQUF4QjtBQUNBTCxJQUFBQSxTQUFTLENBQUM4QyxRQUFWLEdBQXFCLEtBQUs1QyxXQUFMLENBQWlCNkMsUUFBakIsQ0FBMEJmLEtBQTFCLEVBQWlDYyxRQUF0RDtBQUNBOUMsSUFBQUEsU0FBUyxDQUFDMkIsTUFBVixHQUFtQixJQUFuQjtBQUNBLFFBQUkxQixTQUFTLEdBQUdWLEVBQUUsQ0FBQ3FELFdBQUgsQ0FBZSxLQUFLM0MsU0FBcEIsQ0FBaEI7QUFDQUEsSUFBQUEsU0FBUyxDQUFDNEMsTUFBVixHQUFtQixLQUFLeEMsSUFBeEI7QUFDQUosSUFBQUEsU0FBUyxDQUFDK0MsUUFBVixDQUFtQkwsU0FBUyxDQUFDWCxLQUFELENBQTVCO0FBQ0FoQyxJQUFBQSxTQUFTLENBQUNpQyxTQUFWLENBQW9CMUMsRUFBRSxDQUFDMkMsUUFBSCxDQUNoQjNDLEVBQUUsQ0FBQzBELE1BQUgsQ0FBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQlQsUUFBUSxDQUFDUixLQUFELENBQXhCLENBRGdCLEVBRWhCekMsRUFBRSxDQUFDNkMsUUFBSCxDQUFZLFlBQU07QUFDZHBDLE1BQUFBLFNBQVMsQ0FBQ2tELE9BQVYsR0FBb0IsQ0FBcEI7QUFDQWpELE1BQUFBLFNBQVMsQ0FBQzZDLFFBQVYsR0FBcUI5QyxTQUFTLENBQUM4QyxRQUEvQjtBQUNBN0MsTUFBQUEsU0FBUyxDQUFDMEIsTUFBVixHQUFtQixJQUFuQjtBQUNBMUIsTUFBQUEsU0FBUyxDQUFDa0QsWUFBVixDQUF1QjVELEVBQUUsQ0FBQzZELFNBQTFCLEVBQXFDQyxJQUFyQyxXQUE2Q1gsT0FBTyxDQUFDVixLQUFELENBQXBEO0FBQ0gsS0FMRCxDQUZnQixFQVFoQnpDLEVBQUUsQ0FBQzRDLFNBQUgsQ0FBYSxHQUFiLENBUmdCLEVBU2hCNUMsRUFBRSxDQUFDNkMsUUFBSCxDQUFZLFlBQU07QUFDZHBDLE1BQUFBLFNBQVMsQ0FBQ3NELE9BQVY7QUFDQXJELE1BQUFBLFNBQVMsQ0FBQ3FELE9BQVY7QUFDSCxLQUhELENBVGdCLENBQXBCO0FBY0gsR0E5Rm1CO0FBK0ZwQjtBQUNBcEMsRUFBQUEsWUFoR29CLDBCQWdHTDtBQUNYLFNBQUtxQyxNQUFMLEdBQWN0RSxNQUFNLENBQUN1RSxRQUFQLENBQWdCQyxLQUE5QjtBQUNBeEUsSUFBQUEsTUFBTSxDQUFDeUUsU0FBUCxDQUFpQnhDLFlBQWpCLENBQThCakMsTUFBTSxDQUFDdUUsUUFBUCxDQUFnQkMsS0FBOUM7QUFDSCxHQW5HbUI7QUFvR3BCbkMsRUFBQUEsY0FwR29CLDBCQW9HTHFDLEdBcEdLLEVBb0dBO0FBQ2hCO0FBQ0EsU0FBS0MsWUFBTCxHQUFvQjNFLE1BQU0sQ0FBQ3lFLFNBQVAsQ0FBaUJHLEdBQWpCLENBQXFCLFVBQXJCLENBQXBCO0FBQ0F4QixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaLEVBQXdCLEtBQUtzQixZQUE3Qjs7QUFDQSxTQUFLLElBQUlFLEdBQVQsSUFBZ0IsS0FBS0YsWUFBckIsRUFBbUM7QUFDL0IsVUFBSSxLQUFLakUsV0FBTCxDQUFpQm9FLGNBQWpCLFdBQW1DRCxHQUFuQyxFQUFKLEVBQStDO0FBQzNDLFlBQUlFLGFBQWEsR0FBRyxLQUFLckUsV0FBTCxDQUFpQm9FLGNBQWpCLFdBQW1DRCxHQUFuQyxHQUEwQ0MsY0FBMUMsQ0FBeUQsV0FBekQsRUFBc0VBLGNBQXRFLENBQXFGLEtBQXJGLEVBQTRGWixZQUE1RixDQUF5RzVELEVBQUUsQ0FBQ0csS0FBNUcsQ0FBcEI7QUFDQSxZQUFJdUUsUUFBUSxHQUFHLEtBQUt0RSxXQUFMLENBQWlCb0UsY0FBakIsV0FBbUNELEdBQW5DLEdBQTBDQyxjQUExQyxDQUF5RCxNQUF6RCxFQUFpRUEsY0FBakUsQ0FBZ0YsS0FBaEYsRUFBdUZaLFlBQXZGLENBQW9HNUQsRUFBRSxDQUFDRyxLQUF2RyxDQUFmO0FBQ0FzRSxRQUFBQSxhQUFhLENBQUNFLE1BQWQsR0FBdUIsS0FBS0MsUUFBTCxDQUFjLEtBQUtQLFlBQUwsQ0FBa0JFLEdBQWxCLEVBQXVCTSxvQkFBckMsQ0FBdkI7QUFDQUgsUUFBQUEsUUFBUSxDQUFDQyxNQUFULEdBQWtCLEtBQUtDLFFBQUwsQ0FBYyxLQUFLUCxZQUFMLENBQWtCRSxHQUFsQixFQUF1Qk8sU0FBckMsQ0FBbEI7QUFDSDtBQUNKOztBQUVELFNBQUtDLE9BQUwsR0FiZ0IsQ0FlaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSCxHQW5JbUI7QUFvSXBCL0MsRUFBQUEsVUFwSW9CLHNCQW9JVG9DLEdBcElTLEVBb0lKLENBRWYsQ0F0SW1CO0FBdUlwQm5DLEVBQUFBLFlBdklvQix3QkF1SVBtQyxHQXZJTyxFQXVJRixDQUVqQixDQXpJbUI7QUEySXBCVyxFQUFBQSxPQTNJb0IscUJBMklWO0FBQ04sU0FBS0MsU0FBTCxHQUFpQixFQUFqQjs7QUFDQSxTQUFLLElBQUl2QyxLQUFLLEdBQUcsQ0FBakIsRUFBb0JBLEtBQUssR0FBRyxLQUFLckMsV0FBTCxDQUFpQjZFLGFBQTdDLEVBQTREeEMsS0FBSyxFQUFqRSxFQUFxRTtBQUNqRSxVQUFJeUMsR0FBRyxHQUFHLEtBQUs5RSxXQUFMLENBQWlCb0QsUUFBakIsQ0FBMEJmLEtBQTFCLEVBQWlDMEMsV0FBakMsRUFBVjtBQUNBLFdBQUtILFNBQUwsQ0FBZUksSUFBZixDQUFvQkYsR0FBcEI7QUFDQSxXQUFLOUUsV0FBTCxDQUFpQm9ELFFBQWpCLENBQTBCZixLQUExQixFQUFpQzRDLENBQWpDLEdBQXFDLEtBQUt2RSxJQUFMLENBQVV3RSxLQUFWLEdBQWtCLENBQWxCLEdBQXNCSixHQUFHLENBQUNHLENBQS9EO0FBQ0EsV0FBS2pGLFdBQUwsQ0FBaUJvRCxRQUFqQixDQUEwQmYsS0FBMUIsRUFBaUNMLE1BQWpDLEdBQTBDLElBQTFDO0FBQ0g7O0FBRUQsU0FBSyxJQUFJbUQsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLbkYsV0FBTCxDQUFpQjZFLGFBQXJDLEVBQW9ETSxDQUFDLEVBQXJELEVBQXlEO0FBQ3JELFdBQUtuRixXQUFMLENBQWlCb0QsUUFBakIsQ0FBMEIrQixDQUExQixFQUE2QjdDLFNBQTdCLENBQXVDMUMsRUFBRSxDQUFDMkMsUUFBSCxDQUNuQzNDLEVBQUUsQ0FBQzRDLFNBQUgsQ0FBYTJDLENBQUMsR0FBRyxJQUFqQixDQURtQyxFQUVuQ3ZGLEVBQUUsQ0FBQ3dGLE1BQUgsQ0FBVSxJQUFWLEVBQWdCeEYsRUFBRSxDQUFDeUYsRUFBSCxDQUFNLEtBQUtULFNBQUwsQ0FBZU8sQ0FBZixFQUFrQkYsQ0FBbEIsR0FBc0IsRUFBNUIsRUFBZ0MsS0FBS0wsU0FBTCxDQUFlTyxDQUFmLEVBQWtCRyxDQUFsRCxDQUFoQixDQUZtQyxFQUduQzFGLEVBQUUsQ0FBQ3dGLE1BQUgsQ0FBVSxHQUFWLEVBQWUsS0FBS1IsU0FBTCxDQUFlTyxDQUFmLENBQWYsQ0FIbUMsQ0FBdkM7QUFLSDtBQUNKLEdBM0ptQjtBQTZKcEJJLEVBQUFBLE9BN0pvQixtQkE2SlpDLElBN0pZLEVBNkpOOUUsSUE3Sk0sRUE2SkE7QUFDaEIsWUFBUThFLElBQVI7QUFDSSxXQUFLLFVBQUw7QUFBaUIsYUFBS3BFLFVBQUw7QUFBbUI7O0FBQ3BDLFdBQUssVUFBTDtBQUFpQixhQUFLcUUsVUFBTDtBQUFtQjs7QUFDcEMsV0FBSyxZQUFMO0FBQW1CLGFBQUtDLFlBQUw7QUFBcUI7O0FBQ3hDLFdBQUssWUFBTDtBQUFtQixhQUFLQyxhQUFMO0FBQXNCOztBQUN6QyxXQUFLLFFBQUw7QUFBZSxhQUFLQyxjQUFMO0FBQXVCOztBQUN0QyxXQUFLLGNBQUw7QUFBcUIsYUFBS0QsYUFBTDtBQUFzQjs7QUFDM0MsV0FBSyxXQUFMO0FBQWtCLGFBQUtFLFNBQUwsQ0FBZUwsSUFBZixFQUFxQjlFLElBQXJCO0FBQTRCOztBQUM5QztBQUFTZ0MsUUFBQUEsT0FBTyxDQUFDb0QsS0FBUixDQUFjLDJCQUFkLEVBQTJDTixJQUEzQztBQVJiO0FBVUgsR0F4S21CO0FBeUtwQjtBQUNBSyxFQUFBQSxTQTFLb0IscUJBMEtWTCxJQTFLVSxFQTBLSjlFLElBMUtJLEVBMEtFO0FBQUE7O0FBQ2xCLFFBQUlwQixNQUFNLENBQUN5RyxJQUFQLENBQVlDLFNBQVosRUFBSixFQUE2QjtBQUN6QjFHLE1BQUFBLE1BQU0sQ0FBQzJHLEtBQVAsQ0FBYUMsa0JBQWIsQ0FBZ0MsSUFBaEM7QUFDQTtBQUNIOztBQUNELFFBQUs1RyxNQUFNLENBQUN5RyxJQUFQLENBQVlJLFVBQVosSUFBMEIsQ0FBMUIsSUFBK0I3RyxNQUFNLENBQUN5RyxJQUFQLENBQVlLLElBQVosSUFBb0IsQ0FBcEQsSUFBMEQ5RyxNQUFNLENBQUN5RyxJQUFQLENBQVlNLE9BQVosSUFBdUIsQ0FBckYsRUFBd0Y7QUFDcEYvRyxNQUFBQSxNQUFNLENBQUMyRyxLQUFQLENBQWFLLFVBQWIsQ0FBd0IsRUFBeEIsRUFBNEIsK0JBQTVCLEVBQTZELFlBQU07QUFBRWhILFFBQUFBLE1BQU0sQ0FBQzJHLEtBQVAsQ0FBYU0sV0FBYjtBQUE0QixPQUFqRyxFQUFtRyxZQUFNLENBQUcsQ0FBNUcsRUFBOEcsTUFBOUcsRUFBc0gsTUFBdEg7QUFDQTtBQUNIOztBQUNEakgsSUFBQUEsTUFBTSxDQUFDMkcsS0FBUCxDQUFhTyx1QkFBYjtBQUNBbEgsSUFBQUEsTUFBTSxDQUFDbUgsSUFBUCxDQUFZQyxjQUFaLENBQTJCLEtBQUs5QyxNQUFoQyxFQUF3Q2xELElBQUksQ0FBQ3dDLE1BQUwsQ0FBWXNDLElBQXBELEVBQTBEbUIsSUFBMUQsQ0FBK0QsWUFBTTtBQUNqRXJILE1BQUFBLE1BQU0sQ0FBQ3lFLFNBQVAsQ0FBaUI2QyxzQkFBakIsQ0FBd0MsTUFBSSxDQUFDaEQsTUFBN0MsRUFBcURsRCxJQUFJLENBQUN3QyxNQUFMLENBQVlzQyxJQUFqRTtBQUNILEtBRkQ7QUFHSCxHQXZMbUI7QUF3THBCaEIsRUFBQUEsUUF4TG9CLG9CQXdMWHFDLEtBeExXLEVBd0xKO0FBQ1osV0FBUUMsTUFBTSxDQUFDRCxLQUFELENBQU4sQ0FBY0UsR0FBZCxDQUFrQixHQUFsQixDQUFELENBQXlCQyxRQUF6QixFQUFQO0FBQ0gsR0ExTG1CO0FBMkxwQkMsRUFBQUEsWUEzTG9CLDBCQTJMTDtBQUNYM0gsSUFBQUEsTUFBTSxDQUFDMkcsS0FBUCxDQUFhaUIsZUFBYixDQUE2QixLQUFLQyxVQUFsQyxFQUE4QzdILE1BQU0sQ0FBQ3lHLElBQVAsQ0FBWTdCLEdBQVosQ0FBZ0IsU0FBaEIsQ0FBOUM7QUFDSCxHQTdMbUI7QUE4THBCN0MsRUFBQUEsY0E5TG9CLDRCQThMSDtBQUNiLFFBQUkrRixJQUFJLEdBQUc5SCxNQUFNLENBQUN5RyxJQUFQLENBQVk3QixHQUFaLENBQWdCLE1BQWhCLENBQVg7QUFDQSxTQUFLcEUsU0FBTCxDQUFleUUsTUFBZixHQUF3QmpGLE1BQU0sQ0FBQ3lHLElBQVAsQ0FBWXNCLFFBQVosQ0FBcUJELElBQXJCLENBQXhCO0FBQ0gsR0FqTW1CO0FBbU1wQkUsRUFBQUEsU0FuTW9CLHFCQW1NVjdHLE1Bbk1VLEVBbU1GO0FBQ2QsU0FBS0EsTUFBTCxHQUFjQSxNQUFkO0FBQ0gsR0FyTW1CO0FBdU1wQjhHLEVBQUFBLFlBdk1vQiwwQkF1TUwsQ0FFZCxDQXpNbUI7QUEwTXBCM0IsRUFBQUEsY0ExTW9CLDRCQTBNSDtBQUNidEcsSUFBQUEsTUFBTSxDQUFDMkcsS0FBUCxDQUFhdUIsZUFBYixDQUE2QixVQUE3QjtBQUNILEdBNU1tQjtBQTZNcEI3QixFQUFBQSxhQTdNb0IsMkJBNk1KO0FBQ1pyRyxJQUFBQSxNQUFNLENBQUMyRyxLQUFQLENBQWF3QixRQUFiLENBQXNCLEVBQXRCO0FBQ0gsR0EvTW1CO0FBZ05wQnJHLEVBQUFBLFVBaE5vQix3QkFnTlA7QUFDVDlCLElBQUFBLE1BQU0sQ0FBQ3lFLFNBQVAsQ0FBaUIyRCxXQUFqQjtBQUNBLFNBQUtDLE1BQUw7QUFDSCxHQW5ObUI7QUFvTnBCbEMsRUFBQUEsVUFwTm9CLHdCQW9OUDtBQUNUO0FBQ0EsUUFBSVEsS0FBSyxHQUFHM0csTUFBTSxDQUFDMkcsS0FBUCxDQUFhMkIsU0FBYixDQUF1QixLQUFLeEgsSUFBNUIsQ0FBWjtBQUNBNkYsSUFBQUEsS0FBSyxDQUFDdEYsTUFBTixHQUFlLEVBQWY7QUFDSCxHQXhObUI7QUF5TnBCK0UsRUFBQUEsWUF6Tm9CLDBCQXlOTDtBQUNYO0FBQ0EsUUFBSU8sS0FBSyxHQUFHM0csTUFBTSxDQUFDMkcsS0FBUCxDQUFhMkIsU0FBYixDQUF1QixLQUFLMUgsTUFBNUIsQ0FBWjtBQUNBK0YsSUFBQUEsS0FBSyxDQUFDdEYsTUFBTixHQUFlLEVBQWY7QUFDSCxHQTdObUI7QUErTnBCa0gsRUFBQUEsR0EvTm9CLGVBK05oQjFELEdBL05nQixFQStOWDBDLEtBL05XLEVBK05KO0FBQ1osU0FBSzFDLEdBQUwsSUFBWTBDLEtBQVo7QUFDSCxHQWpPbUI7QUFrT3BCM0MsRUFBQUEsR0FsT29CLGVBa09oQkMsR0FsT2dCLEVBa09YO0FBQ0wsV0FBTyxLQUFLQSxHQUFMLENBQVA7QUFDSCxHQXBPbUI7QUFxT3BCMkQsRUFBQUEsU0FyT29CLHVCQXFPUjtBQUNSeEksSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlbUIsR0FBZixDQUFtQmpCLE9BQU8sQ0FBQ0MsRUFBUixDQUFXQyxlQUE5QixFQUErQyxJQUEvQztBQUNBMUIsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlbUIsR0FBZixDQUFtQmpCLE9BQU8sQ0FBQ0MsRUFBUixDQUFXRyxlQUE5QixFQUErQyxJQUEvQztBQUNBNUIsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlbUIsR0FBZixDQUFtQixZQUFuQixFQUFpQyxJQUFqQztBQUNBekMsSUFBQUEsTUFBTSxDQUFDc0IsT0FBUCxDQUFlbUIsR0FBZixDQUFtQixnQkFBbkIsRUFBcUMsSUFBckM7QUFDQSxTQUFLRCxlQUFMO0FBQ0gsR0EzT21CLENBNE9wQjs7QUE1T29CLENBQXhCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJnbEdhbWUuYmFzZWNsYXNzLmV4dGVuZCh7XHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIEJHTToge1xyXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnb2xkQ291bnQ6IGNjLkxhYmVsLFxyXG4gICAgICAgIHFoYmpsc2VsZWN0OiBjYy5Ob2RlLFxyXG4gICAgICAgIHJlY29yZDogY2MuUHJlZmFiLFxyXG4gICAgICAgIHJ1bGU6IGNjLlByZWZhYixcclxuICAgICAgICBmaXJlX25vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgZmlyZXdvcmtzOiBjYy5Ob2RlLFxyXG4gICAgICAgIGxhdW5jaFBvaW50OiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1laWQgPSAwO1xyXG4gICAgICAgIHRoaXMubm9kZS56SW5kZXggPSAyMDtcclxuXHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oTUVTU0FHRS5VSS5ST09NX0VOVEVSX1NIT1csIHRoaXMuUm9vdE5vZGVTaG93LCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihNRVNTQUdFLlVJLlJPT01fRU5URVJfSElERSwgdGhpcy5Sb290Tm9kZUhpZGUsIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwibm9kZVJlbW92ZVwiLCB0aGlzLmNsaWNrX2JhY2ssIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9uKFwidXBkYXRlVXNlckRhdGFcIiwgdGhpcy51cGRhdGV1c2VySW5mbywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGV1c2VySW5mbygpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIHRoaXMucmVxRW50ZXJBcmVhKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlSW5mbyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5kZXhGaXJlID0gMDtcclxuICAgICAgICB0aGlzLnBsYXlGaXJld29ya3MoKTtcclxuICAgIH0sXHJcbiAgICAvL+S6i+S7tuebkeWQrFxyXG4gICAgcmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcIm9uR2FtZUluZm9saXN0X2FyZWFcIiwgdGhpcy5vbkdhbWVJbmZvbGlzdCwgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub24oXCJvblJvb21JbmZvX2FyZWFcIiwgdGhpcy5vblJvb21JbmZvLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vbihcIm9uRGVsZXRlUm9vbV9hcmVhXCIsIHRoaXMub25EZWxldGVSb29tLCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICAvL+S6i+S7tumUgOavgVxyXG4gICAgdW5yZWdpc3RlckV2ZW50KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcIm9uR2FtZUluZm9saXN0X2FyZWFcIiwgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKFwib25Sb29tSW5mb19hcmVhXCIsIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcIm9uRGVsZXRlUm9vbV9hcmVhXCIsIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIFJvb3ROb2RlU2hvdygpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgICAgICB0aGlzLnJlcUVudGVyQXJlYSgpO1xyXG4gICAgfSxcclxuICAgIFJvb3ROb2RlSGlkZSgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgIH0sXHJcbiAgICBwbGF5RmlyZXdvcmtzKCkge1xyXG4gICAgICAgIGxldCB0aW1lID0gTWF0aC5yYW5kb20oKSoyO1xyXG4gICAgICAgIGxldCBpbmRleHRlbXAgPSBbMSwwLDMsMl1cclxuICAgICAgICBsZXQgaW5kZXggPSBpbmRleHRlbXBbdGhpcy5pbmRleEZpcmUlNF07XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShcclxuICAgICAgICAgICAgY2MuZGVsYXlUaW1lKHRpbWUpLFxyXG4gICAgICAgICAgICBjYy5jYWxsRnVuYygoKT0+e1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleEZpcmUrKztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi54Of6Iqx5Y+R5bCEMTExMTExXCIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXNzaW9uRmlyZShpbmRleClcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheUZpcmV3b3JrcygpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkpXHJcbiAgICB9LFxyXG4gICAgZW1pc3Npb25GaXJlKGluZGV4KSB7XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gW3RoaXMubm9kZS5oZWlnaHQgLyAzLjUsIHRoaXMubm9kZS5oZWlnaHQgLyAzLjgsIHRoaXMubm9kZS5oZWlnaHQgLyAzLCB0aGlzLm5vZGUuaGVpZ2h0IC8gMy41XTtcclxuICAgICAgICBsZXQgYW5pTGlzdCA9IFtcImJsdWVmaXJld29ya3NcIixcInJlZGZpcmV3b3Jrc1wiLFwieWVsbG93ZmlyZXdvcmtzXCIsXCJibHVlZmlyZXdvcmtzXCJdO1xyXG4gICAgICAgIGxldCBzY2FsZUxpc3QgPSBbMS4xOCwgMS43OCwgMS4xMywgMS4zXTtcclxuXHJcbiAgICAgICAgbGV0IGZpcmVfbm9kZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuZmlyZV9ub2RlKTtcclxuICAgICAgICBmaXJlX25vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIGZpcmVfbm9kZS5wb3NpdGlvbiA9IHRoaXMubGF1bmNoUG9pbnQuY2hpbGRyZW5baW5kZXhdLnBvc2l0aW9uO1xyXG4gICAgICAgIGZpcmVfbm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBmaXJld29ya3MgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmZpcmV3b3Jrcyk7XHJcbiAgICAgICAgZmlyZXdvcmtzLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICBmaXJld29ya3Muc2V0U2NhbGUoc2NhbGVMaXN0W2luZGV4XSk7XHJcbiAgICAgICAgZmlyZV9ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShcclxuICAgICAgICAgICAgY2MubW92ZUJ5KDEsIDAsIGRpc3RhbmNlW2luZGV4XSksXHJcbiAgICAgICAgICAgIGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGZpcmVfbm9kZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgICAgIGZpcmV3b3Jrcy5wb3NpdGlvbiA9IGZpcmVfbm9kZS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGZpcmV3b3Jrcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZmlyZXdvcmtzLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pLnBsYXkoYCR7YW5pTGlzdFtpbmRleF19YCk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBjYy5kZWxheVRpbWUoMS4yKSxcclxuICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmlyZV9ub2RlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIGZpcmV3b3Jrcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKSlcclxuICAgIH0sXHJcbiAgICAvL+WPkeWMhVxyXG4gICAgcmVxRW50ZXJBcmVhKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZUlEID0gZ2xHYW1lLnNjZW5ldGFnLlFIQkpMO1xyXG4gICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRW50ZXJBcmVhKGdsR2FtZS5zY2VuZXRhZy5RSEJKTCk7XHJcbiAgICB9LFxyXG4gICAgb25HYW1lSW5mb2xpc3QobXNnKSB7XHJcbiAgICAgICAgLy90aGlzLnJvb21saXN0ID0gZ2xHYW1lLnJlYWR5cm9vbS5yb29tbGlzdDtcclxuICAgICAgICB0aGlzLmdhbWVJbmZvVGVzdCA9IGdsR2FtZS5yZWFkeXJvb20uZ2V0KFwiZ2FtZUluZm9cIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLov5nmmK/lvZPliY3miL/pl7TphY3nva5cIiwgdGhpcy5nYW1lSW5mb1Rlc3QpXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuZ2FtZUluZm9UZXN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnFoYmpsc2VsZWN0LmdldENoaWxkQnlOYW1lKGAke2tleX1gKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhYl9jaGlwbGltaXQgPSB0aGlzLnFoYmpsc2VsZWN0LmdldENoaWxkQnlOYW1lKGAke2tleX1gKS5nZXRDaGlsZEJ5TmFtZSgnY2hpcGxpbWl0JykuZ2V0Q2hpbGRCeU5hbWUoJ251bScpLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFiX2NoaXAgPSB0aGlzLnFoYmpsc2VsZWN0LmdldENoaWxkQnlOYW1lKGAke2tleX1gKS5nZXRDaGlsZEJ5TmFtZSgnY2hpcCcpLmdldENoaWxkQnlOYW1lKCdudW0nKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgbGFiX2NoaXBsaW1pdC5zdHJpbmcgPSB0aGlzLmN1dEZsb2F0KHRoaXMuZ2FtZUluZm9UZXN0W2tleV0uRW50cmFuY2VSZXN0cmljdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgbGFiX2NoaXAuc3RyaW5nID0gdGhpcy5jdXRGbG9hdCh0aGlzLmdhbWVJbmZvVGVzdFtrZXldLkJhc2VDaGlwcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEFuaSgpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIui/meaYr+W9k+WJjeeahOaIv+mXtOmFjee9rlwiLHRoaXMuZ2FtZUluZm9UZXN0KTtcclxuICAgICAgICAvLyBmb3IgKGxldCBiZXR0eXBlIGluIHRoaXMucm9vbWxpc3QpIHtcclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgcm9vbWlkIGluIHRoaXMucm9vbWxpc3RbYmV0dHlwZV0pIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmICghdGhpcy5xaGJqbHNlbGVjdC5jaGlsZHJlbltiZXR0eXBlIC0gMV0pIGJyZWFrO1xyXG4gICAgICAgIC8vICAgICAgICAgbGV0IGNoaXBsaW1pdE51bSA9IHRoaXMucWhiamxzZWxlY3QuY2hpbGRyZW5bYmV0dHlwZSAtIDFdLmdldENoaWxkQnlOYW1lKCdjaGlwbGltaXQnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAvLyAgICAgICAgIGxldCBjaGlwTnVtID0gdGhpcy5xaGJqbHNlbGVjdC5jaGlsZHJlbltiZXR0eXBlIC0gMV0uZ2V0Q2hpbGRCeU5hbWUoJ2NoaXAnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAvLyAgICAgICAgIGNoaXBsaW1pdE51bS5zdHJpbmcgPSB0aGlzLmN1dEZsb2F0KHRoaXMuZ2FtZUluZm9UZXN0W2JldHR5cGVdLkJhc2VDaGlwcyk7XHJcbiAgICAgICAgLy8gICAgICAgICBjaGlwTnVtLnN0cmluZyA9IHRoaXMuY3V0RmxvYXQodGhpcy5nYW1lSW5mb1Rlc3RbYmV0dHlwZV0uRW50cmFuY2VSZXN0cmljdGlvbnMpO1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5xaGJqbHNlbGVjdC5jaGlsZHJlbltiZXR0eXBlIC0gMV0ubmFtZSA9IHJvb21pZDtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMubm9kZUluZm9bcm9vbWlkXSA9IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0YWc6IHRoaXMucm9vbWxpc3RbYmV0dHlwZV1bcm9vbWlkXS5yb29tc2VydmVyaWQsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdHlwZTogYmV0dHlwZVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9LFxyXG4gICAgb25Sb29tSW5mbyhtc2cpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgb25EZWxldGVSb29tKG1zZykge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdEFuaSgpIHtcclxuICAgICAgICB0aGlzLnJlbnd1X3BvcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnFoYmpsc2VsZWN0LmNoaWxkcmVuQ291bnQ7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMucWhiamxzZWxlY3QuY2hpbGRyZW5baW5kZXhdLmdldFBvc2l0aW9uKClcclxuICAgICAgICAgICAgdGhpcy5yZW53dV9wb3MucHVzaChwb3MpO1xyXG4gICAgICAgICAgICB0aGlzLnFoYmpsc2VsZWN0LmNoaWxkcmVuW2luZGV4XS54ID0gdGhpcy5ub2RlLndpZHRoIC8gMiArIHBvcy54O1xyXG4gICAgICAgICAgICB0aGlzLnFoYmpsc2VsZWN0LmNoaWxkcmVuW2luZGV4XS5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucWhiamxzZWxlY3QuY2hpbGRyZW5Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucWhiamxzZWxlY3QuY2hpbGRyZW5baV0ucnVuQWN0aW9uKGNjLnNlcXVlbmNlKFxyXG4gICAgICAgICAgICAgICAgY2MuZGVsYXlUaW1lKGkgKiAwLjA1KSxcclxuICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjI1LCBjYy52Mih0aGlzLnJlbnd1X3Bvc1tpXS54IC0gNDAsIHRoaXMucmVud3VfcG9zW2ldLnkpKSxcclxuICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjEsIHRoaXMucmVud3VfcG9zW2ldKVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25DbGljayhuYW1lLCBub2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fYmFja1wiOiB0aGlzLmNsaWNrX2JhY2soKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5faGVscFwiOiB0aGlzLmNsaWNrX2hlbHAoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fcmVjb3JkXCI6IHRoaXMuY2xpY2tfcmVjb3JkKCk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibXljb2luSW5mb1wiOiB0aGlzLmNsaWNrX2FkZGdvbGQoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJoZWFkYmdcIjogdGhpcy5jbGlja191c2VyaW5mbygpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJ0bl9jaG9uZ3poaVwiOiB0aGlzLmNsaWNrX2FkZGdvbGQoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJidG5fc3RhcnRcIjogdGhpcy5lbnRlcnJvb20obmFtZSwgbm9kZSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmVycm9yKFwibm8gZmluZCBidXR0b24gbmFtZSAtPiAlc1wiLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/kvKDmiL/pl7RpZOS7peWPiuaIv+mXtOetiee6p1xyXG4gICAgZW50ZXJyb29tKG5hbWUsIG5vZGUpIHtcclxuICAgICAgICBpZiAoZ2xHYW1lLnVzZXIuaXNUb3VyaXN0KCkpIHtcclxuICAgICAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZWdpc3RlcmVkR2lmdCh0cnVlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoZ2xHYW1lLnVzZXIuc3VzcGljaW91cyA9PSAxICYmIGdsR2FtZS51c2VyLmdhbWUgPT0gMikgfHwgZ2xHYW1lLnVzZXIuaXNfZ2FtZSA9PSAyKSB7XHJcbiAgICAgICAgICAgIGdsR2FtZS5wYW5lbC5zaG93RGlhbG9nKFwiXCIsIFwi5oKo55qE6LSm5Y+35pWw5o2u5byC5bi477yM5pqC5pe256aB5q2i6L+b5YWl5ri45oiP77yM5aaC5pyJ55aR6Zeu77yM6K+36IGU57O75a6i5pyN77yBXCIsICgpID0+IHsgZ2xHYW1lLnBhbmVsLnNob3dTZXJ2aWNlKCkgfSwgKCkgPT4geyB9LCBcIuaIkeefpemBk+S6hlwiLCBcIuiBlOezu+WuouacjVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnbEdhbWUucGFuZWwuc2hvd0ZpZWxkU2VsZWN0aW9uSnVIdWEoKTtcclxuICAgICAgICBnbEdhbWUucm9vbS5yZXFNeUdhbWVTdGF0ZSh0aGlzLmdhbWVJRCwgbm9kZS5wYXJlbnQubmFtZSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGdsR2FtZS5yZWFkeXJvb20uZW50ZXJIdW5kcmVkc1Jvb21PdGhlcih0aGlzLmdhbWVJRCwgbm9kZS5wYXJlbnQubmFtZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBjdXRGbG9hdCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiAoTnVtYmVyKHZhbHVlKS5kaXYoMTAwKSkudG9TdHJpbmcoKTtcclxuICAgIH0sXHJcbiAgICBzaG93VXNlckluZm8oKSB7XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dSZW1vdGVJbWFnZSh0aGlzLlBsYXllcmhlYWQsIGdsR2FtZS51c2VyLmdldChcImhlYWRVUkxcIikpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZXVzZXJJbmZvKCkge1xyXG4gICAgICAgIGxldCBjb2luID0gZ2xHYW1lLnVzZXIuZ2V0KFwiY29pblwiKVxyXG4gICAgICAgIHRoaXMuZ29sZENvdW50LnN0cmluZyA9IGdsR2FtZS51c2VyLkdvbGRUZW1wKGNvaW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRHYW1lSWQoZ2FtZWlkKSB7XHJcbiAgICAgICAgdGhpcy5nYW1laWQgPSBnYW1laWQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZUJnSW5mbygpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgY2xpY2tfdXNlcmluZm8oKSB7XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dQYW5lbEJ5TmFtZShcInVzZXJpbmZvXCIpO1xyXG4gICAgfSxcclxuICAgIGNsaWNrX2FkZGdvbGQoKSB7XHJcbiAgICAgICAgZ2xHYW1lLnBhbmVsLnNob3dTaG9wKDMwKTtcclxuICAgIH0sXHJcbiAgICBjbGlja19iYWNrKCkge1xyXG4gICAgICAgIGdsR2FtZS5yZWFkeXJvb20ucmVxRXhpdEFyZWEoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgfSxcclxuICAgIGNsaWNrX2hlbHAoKSB7XHJcbiAgICAgICAgLy8gZ2xHYW1lLnBhbmVsLnNob3dOZXdHYW1lUnVsZSh0aGlzLmdhbWVpZCwgMzApO1xyXG4gICAgICAgIGxldCBwYW5lbCA9IGdsR2FtZS5wYW5lbC5zaG93UGFuZWwodGhpcy5ydWxlKTtcclxuICAgICAgICBwYW5lbC56SW5kZXggPSAzMDtcclxuICAgIH0sXHJcbiAgICBjbGlja19yZWNvcmQoKSB7XHJcbiAgICAgICAgLy8gZ2xHYW1lLnBhbmVsLnNob3dOZXdHYW1lUmVjb3JkKHRoaXMuZ2FtZWlkLCAzMCk7XHJcbiAgICAgICAgbGV0IHBhbmVsID0gZ2xHYW1lLnBhbmVsLnNob3dQYW5lbCh0aGlzLnJlY29yZCk7XHJcbiAgICAgICAgcGFuZWwuekluZGV4ID0gMzA7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0KGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzW2tleV07XHJcbiAgICB9LFxyXG4gICAgT25EZXN0cm95KCkge1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihNRVNTQUdFLlVJLlJPT01fRU5URVJfU0hPVywgdGhpcyk7XHJcbiAgICAgICAgZ2xHYW1lLmVtaXR0ZXIub2ZmKE1FU1NBR0UuVUkuUk9PTV9FTlRFUl9ISURFLCB0aGlzKTtcclxuICAgICAgICBnbEdhbWUuZW1pdHRlci5vZmYoXCJub2RlUmVtb3ZlXCIsIHRoaXMpO1xyXG4gICAgICAgIGdsR2FtZS5lbWl0dGVyLm9mZihcInVwZGF0ZVVzZXJEYXRhXCIsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcbn0pO1xyXG4iXX0=