{"version":3,"sources":["assets\\modules\\login\\script\\prefab\\click_action.js"],"names":["glGame","baseclass","extend","properties","click_node","cc","Node","chick_act","chick_meihua","base_sprite","SpriteFrame","onLoad","registerEvent","game","addPersistRootNode","node","creatSmear","itemScale","systemclass","convertInterface","start","emitter","on","MESSAGE","SYSTEM","TOUCH_BEGIN","clickCallBack","TOUCH_MOVE","moveCallBack","TOUCH_STATE","stateCallBack","unRegisterEvent","off","pos","action","runAction","sequence","delayTime","callFunc","picObj","getComponent","Sprite","spriteFrame","ParticleSystem","Pos","clickItem","instantiate","parent","active","position","scale","removeSelf","meihua","x","y","delay","fadeOut","scaleTo","spawn","update","dt","onDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        click_node: cc.Node,\r\n        chick_act: cc.Node,\r\n        chick_meihua: cc.Node,\r\n\r\n        base_sprite: cc.SpriteFrame,\r\n    },\r\n    onLoad() {\r\n        this.registerEvent();\r\n        cc.game.addPersistRootNode(this.node);\r\n        this.creatSmear = true;\r\n        this.itemScale = glGame.systemclass.convertInterface();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    registerEvent() {\r\n        glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_BEGIN, this.clickCallBack, this);\r\n        glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_MOVE, this.moveCallBack, this);\r\n        glGame.emitter.on(MESSAGE.SYSTEM.TOUCH_STATE, this.stateCallBack, this);\r\n    },\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_BEGIN, this);\r\n        glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_MOVE, this);\r\n        glGame.emitter.off(MESSAGE.SYSTEM.TOUCH_STATE, this);\r\n    },\r\n\r\n    clickCallBack(pos) {\r\n        this.action(pos);\r\n    },\r\n\r\n    moveCallBack(pos) {\r\n        if (!this.creatSmear) return;\r\n        this.node.runAction((cc.sequence(cc.delayTime(0.1), cc.callFunc(() => { this.creatSmear = true; }))));\r\n        this.action(pos);\r\n\r\n        this.creatSmear = false;\r\n    },\r\n\r\n    //设置点击特效的资源图片\r\n    stateCallBack(picObj) {\r\n        this.chick_meihua.getComponent(cc.Sprite).spriteFrame = picObj ? picObj : this.base_sprite;\r\n        this.chick_act.getComponent(cc.ParticleSystem).spriteFrame = picObj ? picObj : this.base_sprite;\r\n        //刷新图片，避免出现方块\r\n    },\r\n\r\n    action(Pos) {\r\n        let clickItem = cc.instantiate(this.chick_act);\r\n        clickItem.parent = this.node;\r\n        clickItem.active = true;\r\n        clickItem.position = Pos;\r\n        clickItem.scale = glGame.systemclass.convertInterface();\r\n        clickItem.runAction(cc.sequence(cc.delayTime(0.6), cc.removeSelf()));\r\n\r\n        let meihua = cc.instantiate(this.chick_meihua);\r\n        meihua.parent = clickItem;\r\n        meihua.active = true;\r\n        meihua.x = 0;\r\n        meihua.y = 0;\r\n        meihua.scale = 1;\r\n        let delay = cc.delayTime(0.1);\r\n        let fadeOut = cc.fadeOut(0.3);\r\n        let scaleTo = cc.scaleTo(0.4, 2.25);\r\n        meihua.runAction(cc.spawn(cc.sequence(delay, fadeOut), scaleTo));\r\n    },\r\n\r\n    update(dt) {\r\n    },\r\n\r\n    onDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n});\r\n"]}