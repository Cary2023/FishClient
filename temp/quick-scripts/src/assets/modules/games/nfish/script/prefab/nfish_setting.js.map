{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\prefab\\nfish_setting.js"],"names":["CONST","require","glGame","baseclass","extend","properties","BGM","cc","Toggle","SE","MSS","Slider","ESS","MSB","Node","ESB","musicProgressBar","soundProgressBar","musicToggle","soundToggle","onLoad","showPanelInfo","registerEvent","on","click_music","click_effect","MSBTouchCancelNext","ESBTouchCancelNext","unRegisterEvent","off","event","getComponent","isChecked","audio","openBGM","closeBGM","BGMSE","get","getChildByName","active","openSE","closeSE","progress","ProgressBar","saveVolume","onSliderProcess","node","process","name","setBGMVolume","setSoundEffectVolume","onClick","click_close","console","error","remove","update","dt","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["/***\r\n *  捕鱼：设置 - 音效\r\n * **/\r\nlet CONST = require(\"nfishConst\");\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        BGM: cc.Toggle,\r\n        SE: cc.Toggle,\r\n        MSS: cc.Slider,\r\n        ESS: cc.Slider,\r\n        MSB: cc.Node,\r\n        ESB: cc.Node,\r\n        musicProgressBar: cc.Node,\r\n        soundProgressBar: cc.Node,\r\n        musicToggle: cc.Node,\r\n        soundToggle: cc.Node,\r\n    },\r\n    onLoad () {\r\n        this.showPanelInfo();\r\n        this.registerEvent();\r\n    },\r\n    registerEvent () {\r\n        this.musicToggle.on(\"toggle\", this.click_music, this);\r\n        this.soundToggle.on(\"toggle\", this.click_effect, this);\r\n\r\n        this.MSB.on(\"touchcancel\", this.MSBTouchCancelNext, this);\r\n        this.MSB.on(\"touchend\", this.MSBTouchCancelNext, this);\r\n        this.ESB.on(\"touchcancel\", this.ESBTouchCancelNext, this);\r\n        this.ESB.on(\"touchend\", this.ESBTouchCancelNext, this);\r\n    },\r\n    unRegisterEvent () {\r\n        this.MSB.off(\"touchcancel\", this.MSBTouchCancelNext, this);\r\n        this.MSB.off(\"touchend\", this.MSBTouchCancelNext, this);\r\n        this.ESB.off(\"touchcancel\", this.ESBTouchCancelNext, this);\r\n        this.ESB.off(\"touchend\", this.ESBTouchCancelNext, this);\r\n    },\r\n\r\n    click_music (event) {\r\n        if (!this.musicToggle.getComponent(cc.Toggle).isChecked){\r\n            glGame.audio.openBGM();\r\n        }\r\n        else{\r\n            glGame.audio.closeBGM();\r\n        }\r\n        let BGMSE = glGame.audio.get(\"BGMSE\");\r\n        this.musicToggle.getChildByName(\"Background\").active = BGMSE[\"BGMPlayState\"];\r\n        this.soundToggle.getChildByName(\"Background\").active = BGMSE[\"SoundEffectPlayState\"];\r\n    },\r\n    click_effect (event) {\r\n        if (!this.soundToggle.getComponent(cc.Toggle).isChecked){\r\n            glGame.audio.openSE();\r\n        }\r\n        else{\r\n            glGame.audio.closeSE();\r\n        }\r\n        let BGMSE = glGame.audio.get(\"BGMSE\");\r\n        this.musicToggle.getChildByName(\"Background\").active = BGMSE[\"BGMPlayState\"];\r\n        this.soundToggle.getChildByName(\"Background\").active = BGMSE[\"SoundEffectPlayState\"];\r\n    },\r\n    showPanelInfo () {\r\n        // 根据本地缓存的声音数据来更新按钮状态\r\n        let BGMSE = glGame.audio.get(\"BGMSE\");\r\n        this.musicToggle.getComponent(cc.Toggle).isChecked = !BGMSE[\"BGMPlayState\"];\r\n        this.soundToggle.getComponent(cc.Toggle).isChecked = !BGMSE[\"SoundEffectPlayState\"];\r\n        this.musicToggle.getChildByName(\"Background\").active = BGMSE[\"BGMPlayState\"];\r\n        this.soundToggle.getChildByName(\"Background\").active = BGMSE[\"SoundEffectPlayState\"];\r\n        this.MSS.progress = BGMSE[\"BGMVolume\"];\r\n        this.ESS.progress = BGMSE[\"SoundEffectVolume\"];\r\n        this.musicProgressBar.getComponent(cc.ProgressBar).progress = BGMSE[\"BGMVolume\"];\r\n        this.soundProgressBar.getComponent(cc.ProgressBar).progress = BGMSE[\"SoundEffectVolume\"];\r\n    },\r\n    MSBTouchCancelNext () {\r\n        glGame.audio.saveVolume();\r\n    },\r\n    ESBTouchCancelNext () {\r\n        glGame.audio.saveVolume();\r\n    },\r\n    onSliderProcess (node, process) {\r\n        let name = node.name;\r\n        switch (name) {\r\n            case \"music\":\r\n                glGame.audio.setBGMVolume(process);\r\n                this.musicProgressBar.getComponent(cc.ProgressBar).progress = process;\r\n                break;\r\n            case \"sound\":\r\n                glGame.audio.setSoundEffectVolume(process);\r\n                this.soundProgressBar.getComponent(cc.ProgressBar).progress = process;\r\n                break;\r\n        }\r\n    },\r\n    onClick (name, node) {\r\n        switch (name) {\r\n            case \"close\": this.click_close(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_close () {\r\n        this.remove();\r\n    },\r\n    //水波赋值\r\n    update(dt) {\r\n    },\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n});"]}