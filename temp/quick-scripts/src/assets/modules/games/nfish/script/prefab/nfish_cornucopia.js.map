{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\prefab\\nfish_cornucopia.js"],"names":["CONST","require","glGame","baseclass","extend","properties","nodeNumber","cc","Node","nodeView","door","img_door_open","img_door_close","spine_boom","mask","moneyEffect_Atlas","displayName","tooltip","type","SpriteAtlas","onLoad","logic","getInstance","stopTime","runSpeed","scale","node","stopAllActions","cuarr_gonudaner","strobeFrequency","strobeTime","data","startRunCornucopia","res","fontIndex","getRandomNum","i","getChildByName","active","getComponent","BlockInputEvents","enabled","Widget","updateAlignment","Normal","opacity","playSpine","SpineName","TurnTableShowTime","runAction","sequence","delayTime","scaleTo","setPosition","position","MaxNum","num","top_num","Label","string","moveTo","callFunc","Count","Frequency","StartTimes","reward","parseInt","getFloat","rewardGold","str_reward","toString","numCount","length","charAt","update","dt","NumMax","Offsex","Speed","LightNum","y","emitter","emit","clientEvent","fishSound","flyGoldEffect","glodEndPosPer","getIsRotation","targetPosition","seatNum","Multiple","MaxCoin","CoinSaclc","effectCoin","Math","ceil","StartName","endName","plyTime","isHaveZero","speed","plyedDestroy","isRandomPly","RandomOffsexX","RandomOffsexY","RandomMinY","OneDelayTime","TwoDelayTime","ScaleToTime","BezierToTime","ScaleToArg","FadeToTime","MoveToTime","EndOpacity","glodStartPer","startPos","random","ui_CoinEffect","creatorEffect","x","parent","playName","initEffect","addChild","upPos","v2","Seat","LeftTop","RightTop","bounceAct1","spawn","fadeTo","bounceAct2","bezierPoint","act","bezierTo","destroy","endGlodTime","CornucopiaScaleToArg","CornucopiaScaleToTime","isYuRuyiRuning","addGoldEffect"],"mappings":"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","sourceRoot":"/","sourcesContent":["let CONST = require(\"nfishConst\");\r\n//拉霸\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        nodeNumber: cc.Node,\r\n        nodeView: cc.Node,\r\n        door: cc.Node,\r\n        img_door_open: cc.Node,\r\n        img_door_close: cc.Node,\r\n        // litght: cc.Node,\r\n        spine_boom: cc.Node,\r\n        mask: cc.Node,\r\n         //金币银币漂移动画 图集\r\n         moneyEffect_Atlas: {\r\n            default: null,\r\n            displayName: \"moneyEffect_Atlas\",\r\n            tooltip: \"金币银币漂移动画 图集\",\r\n            type:cc.SpriteAtlas,\r\n        },\r\n    },\r\n    onLoad() {\r\n        this.logic = require(\"nfishlogic\").getInstance();//数据中心\r\n        this.stopTime = -1;\r\n        this.runSpeed = 0;\r\n        this.nodeView.scale = 0;\r\n        this.node.stopAllActions();\r\n        this.node.scale = 1;\r\n        this.cuarr_gonudaner = 1;\r\n        this.strobeFrequency = 0.1;\r\n        this.strobeTime = 1;\r\n        this.data = null;\r\n    },\r\n    //开始拉霸\r\n    startRunCornucopia(res){\r\n        let fontIndex = this.logic.getRandomNum(1,8);\r\n        for(let i=1;i<9;i++){\r\n            this.door.getChildByName(\"img_font\"+i).active = i == fontIndex;\r\n        }\r\n        this.node.active = true;\r\n        this.node.getChildByName(\"mask\").getComponent(cc.BlockInputEvents).enabled = true;\r\n        this.data = res;\r\n        this.mask.active = true\r\n        this.mask.getComponent(cc.Widget).updateAlignment();\r\n        const Normal = 255;\r\n        this.nodeView.scale = 0;\r\n        this.node.opacity = Normal;\r\n        this.spine_boom.active = false;\r\n        this.logic.playSpine(this.node.getChildByName(\"spine_show\"),false,true,CONST.SpineName.TurnTableShowTime);\r\n        this.nodeView.stopAllActions();\r\n        this.nodeView.runAction(cc.sequence(cc.delayTime(0.1),cc.scaleTo(0.15,1.2),cc.scaleTo(0.15,1)));\r\n        this.door.active = true;\r\n        this.door.stopAllActions();\r\n        this.door.setPosition(this.img_door_close.position);\r\n        const MaxNum = 6;\r\n        for (let i=0;i<MaxNum;i++) {\r\n            let num = this.nodeNumber.getChildByName(\"\" + i);\r\n            let top_num = this.nodeNumber.getChildByName(\"t_\" + i);\r\n            top_num.getComponent(cc.Label).string = this.logic.getRandomNum(1,9);\r\n            num.getComponent(cc.Label).string = \"0\";\r\n        }\r\n        this.door.runAction(cc.sequence(cc.delayTime(0.7),cc.moveTo(0.3,this.img_door_open.position),cc.callFunc(()=>{\r\n            const Count = 7;\r\n            const Frequency = 0.65;\r\n            const StartTimes = 1;\r\n\r\n            let reward =  parseInt(this.logic.getFloat(res.rewardGold));\r\n            let str_reward = reward.toString();\r\n            let numCount = MaxNum - str_reward.length;\r\n            for (let i = 0; i < numCount; i++) {\r\n                str_reward = \"0\" + str_reward\r\n            }\r\n            for (let i=0;i<MaxNum;i++) {\r\n                let num = this.nodeNumber.getChildByName(\"\" + i);\r\n                let top_num = this.nodeNumber.getChildByName(\"t_\" + i);\r\n                num.stopTime = top_num.stopTime = (Count-(StartTimes+i)) * Frequency;//单个停止时间\r\n                num.num = top_num.num = str_reward.charAt(i);\r\n            }\r\n\r\n            this.stopTime = 4;//所有停止时间\r\n            this.runSpeed = 1000;//运行速度\r\n        })));\r\n    },\r\n\r\n    update(dt){\r\n        const NumMax = 6;\r\n        const Offsex = 160;\r\n        const Speed = 260;\r\n        if(this.stopTime > 0){\r\n            const LightNum = 4;\r\n            if(this.runSpeed < 2600){\r\n                this.runSpeed += dt * Speed;\r\n            }\r\n            for (let i=0;i<NumMax;i++){\r\n                let num = this.nodeNumber.getChildByName(\"\"+i);\r\n                let top_num = this.nodeNumber.getChildByName(\"t_\"+i);\r\n\r\n                if(num.stopTime != null){\r\n                    if(num.stopTime > 0){\r\n                        num.stopTime -= dt;\r\n                        num.getComponent(cc.Label).string = this.logic.getRandomNum(i==0?1:0,9);\r\n                        num.y -= dt * this.runSpeed;\r\n                        if(num.y <= -Offsex){\r\n                            num.y = Offsex;\r\n                        }\r\n                    }else{\r\n                        num.stopTime = null;\r\n                        num.y = 0;\r\n                        num.getComponent(cc.Label).string = num.num;\r\n                        glGame.emitter.emit(CONST.clientEvent.fishSound,\"juBaoShowNum\");//聚宝盆显示数字\r\n                    }\r\n                }\r\n\r\n                if(top_num.stopTime != null){\r\n                    if(top_num.stopTime > 0){\r\n                        top_num.stopTime -= dt;\r\n                        top_num.getComponent(cc.Label).string = this.logic.getRandomNum(i==0?1:0,9);\r\n                        top_num.y -= dt * this.runSpeed;\r\n                        if(top_num.y <= -Offsex){\r\n                            top_num.y = Offsex;\r\n                        }\r\n                    }else{\r\n                        top_num.y = Offsex;\r\n                        top_num.getComponent(cc.Label).string = num.num;\r\n                    }\r\n                }\r\n            }\r\n            this.stopTime -= dt;\r\n        }else{\r\n            if(this.stopTime > -1){\r\n                this.stopTime = -1;\r\n\r\n                for (let i=0;i<NumMax;i++){\r\n                    let num = this.nodeNumber.getChildByName(\"\"+i);\r\n                    let top_num = this.nodeNumber.getChildByName(\"t_\"+i);\r\n                    num.getComponent(cc.Label).string = num.num;\r\n                    num.y = 0;\r\n                    top_num.y = Offsex;\r\n                }\r\n\r\n                this.door.runAction(cc.sequence(cc.moveTo(0.7,this.img_door_open.position),cc.callFunc(()=>{\r\n                    this.flyGoldEffect(this.data);\r\n                })));\r\n\r\n            }\r\n        }\r\n    },\r\n    //漂移金币动画\r\n    flyGoldEffect(res) {\r\n        glGame.emitter.emit(CONST.clientEvent.fishSound,\"juBaoGet\");//聚宝盆获得\r\n        this.logic.playSpine(this.spine_boom,false,false,CONST.SpineName.Normal);\r\n\r\n        let glodEndPosPer = this.logic.getIsRotation() ? \"glodEndPosR\" : \"glodEndPos\";\r\n        let targetPosition = this.node.getChildByName(\"posList\").getChildByName(glodEndPosPer + res.seatNum).position;\r\n\r\n        const Multiple = 100;\r\n        const MaxCoin = 70;//最大数量\r\n        const CoinSaclc      = 3;\r\n\r\n        let effectCoin = Math.ceil(res.rewardGold / Multiple)*CoinSaclc;\r\n\r\n        if (effectCoin > MaxCoin) {\r\n            effectCoin = MaxCoin;\r\n        }\r\n\r\n        const StartName = 0;\r\n        const endName = 9;\r\n        const plyTime = 8;\r\n        const isHaveZero = false;\r\n        const speed = 0.035;\r\n        const plyedDestroy = false;\r\n        const isRandomPly = 1;\r\n\r\n\r\n        const RandomOffsexX = 30;\r\n        const RandomOffsexY = 50;\r\n        const RandomMinY = 20;\r\n\r\n        const OneDelayTime = 0.01;\r\n        const TwoDelayTime = 0.05;\r\n        const ScaleToTime = 0.3;\r\n        const BezierToTime = 0.5;\r\n        const ScaleToArg = 0.8;\r\n        const FadeToTime = 0.1;\r\n        const MoveToTime = 0.15;\r\n        const EndOpacity = 255;\r\n\r\n        let glodStartPer = this.logic.getIsRotation() ? \"glodStartPosR\" : \"glodStartPos\";\r\n        for (let i = 0; i < effectCoin; i++) {\r\n            let startPos = this.node.getChildByName(\"posList\").getChildByName(glodStartPer + parseInt(Math.random() * 5 +1)).position;\r\n            let ui_CoinEffect = this.logic.creatorEffect();\r\n            ui_CoinEffect.x = startPos.x;\r\n            ui_CoinEffect.y = startPos.y;\r\n            ui_CoinEffect.active = true;\r\n            ui_CoinEffect.parent = null;\r\n            ui_CoinEffect.opacity = 0;\r\n            let playName = \"gold\";\r\n\r\n            ui_CoinEffect.getComponent(\"nfish_MovieClip\").initEffect(this.moneyEffect_Atlas, playName, StartName, endName, plyTime, isHaveZero, speed, plyedDestroy, null, isRandomPly);\r\n            this.node.addChild(ui_CoinEffect);\r\n            let upPos = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX, ui_CoinEffect.position.y + Math.random() * RandomOffsexY + RandomMinY);\r\n\r\n            if (res.seatNum == CONST.Seat.LeftTop || res.seatNum == CONST.Seat.RightTop) {\r\n                upPos = cc.v2(ui_CoinEffect.position.x + Math.random() * RandomOffsexX, ui_CoinEffect.position.y - (Math.random() * RandomOffsexY + RandomMinY));\r\n            }\r\n            let bounceAct1 = cc.spawn(cc.fadeTo(FadeToTime, EndOpacity), cc.moveTo(MoveToTime, ui_CoinEffect.position));\r\n            let bounceAct2 = cc.moveTo(MoveToTime, upPos);\r\n            let bezierPoint = cc.v2(targetPosition.x, ui_CoinEffect.position.y);\r\n            let act = cc.spawn(cc.scaleTo(ScaleToTime, ScaleToArg, ScaleToArg), cc.bezierTo(BezierToTime, [upPos, bezierPoint, cc.v2(targetPosition.x, targetPosition.y)]));\r\n\r\n            ui_CoinEffect.runAction(cc.sequence(cc.delayTime(i*OneDelayTime), bounceAct1, bounceAct2, act, cc.delayTime(TwoDelayTime), cc.callFunc(() => {\r\n                ui_CoinEffect.destroy();\r\n            })));\r\n        }\r\n        let endGlodTime = 1;//最后一个金币漂移的时间\r\n        const CornucopiaScaleToArg = 0;\r\n        const CornucopiaScaleToTime = 0.3;\r\n\r\n        this.door.runAction(cc.sequence(cc.delayTime(endGlodTime),cc.moveTo(1,this.img_door_close.position),cc.callFunc(()=>{\r\n            this.node.stopAllActions();\r\n            this.node.runAction(cc.sequence(cc.delayTime(endGlodTime/2),cc.fadeTo(CornucopiaScaleToTime, CornucopiaScaleToArg),cc.callFunc(()=>{\r\n                this.logic.isYuRuyiRuning = false;\r\n                this.mask.active = false;\r\n                if(this.logic.seatNum == res.seatNum) {\r\n                    glGame.emitter.emit(CONST.clientEvent.addGoldEffect, res);\r\n                }\r\n            })));\r\n        })));\r\n    },\r\n});\r\n"]}