{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\model\\nfishlogic.js"],"names":["CONST","require","fishlogic","console","warn","initData","registerEvent","fish","prototype","g_instance","roomRule","isSetAngle","isEnterRoom","dialogPanelIsShow","fishPoolData","playerInfo","gunType","CannonType","Normal","isInFreeze","lockFishID","lastLockFishID","serverTime","gold","baseConsume","isLock","isAuto","isLockAutoChange","isRestoreIng","cannonLevel","seatNum","roomId","bullteNum","currentBullteType","Not","isYuRuyiRuning","MaxBullte","showTimeMsg","exitTimeMsg","lastShootTime","quickMove","isFishTideRuning","startFire","json_fishResEdit","json_fishTable","json_fishLineGroup","currPlayBgMusic","bossIDList","specialFishListBorn","specialFishListBornLen","isGunMoving0","isGunMoving1","isGunMoving2","isGunMoving3","playSoundTime","curWaitTime","tideRun","specialBulletPool","tidePlayCorrect","isFireLaser","lastBullteType0","undefined","lastBullteType1","lastBullteType2","lastBullteType3","isUpdateMoney0","isUpdateMoney1","isUpdateMoney2","isUpdateMoney3","playBossBGM","fishPool","cc","NodePool","bulletPool","currFishzIndex","Date","Format","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","length","k","offLineMissileData","gameZoomX","gameZoomY","bgIndex","glGame","emitter","on","STCEvent","onSyncData","onTideScript","onFishGroupScript","onAddFishLine","onShoot","onUseSpecialCannon","onKill","onEnterRoom","onLeaveRoom","room","getPlayerOp","scenetag","FISH2","onPlayerOp","onCoinChanged","onChangeCannonLevel","onMissileBomb","onOffline","onOnline","clientEvent","netDisconnect","EnterForeground","onEnterForeground","EnterBackground","onEnterBackground","horseRaceLamp","unregisterEvent","off","offNetHadnler","emit","clearbossComein","showAlert","AlertType","NetOff","msg","gameLevel","getRoomType","betType","horseLampLabel","nickname","fishName","getFloat","winCoin","notice","addContent","gameNet","disconnect","initBullet","userInfoMap","uid","Number","shells","i","bulletdata","bullet","cannonType","seatId","bulletId","id","gunLevel","level","type","createTime","aimFishId","error","angle","myid","user","userID","initBulletList","cannonReward","total","formatMoney","specialBulletStatistics","isoffNet","coin","missileShell","Missile","hitMax","fishSound","arg","offLine","pos","v2","onSpecialBulletExp","res","JSON","parse","stringify","now","BaseConsume","MaxShell","checkAutoAndLock","randomFishMap","addLine","fishTide","addTide","groupId","initFishPool","checkGold","cannonAmount","aimedFishLineID","userStatus","UserStatus","OnLine","cannonHitMax","comeInPlayer","StandbyTime","changeBackGround","getIsRotation","checkRotation","changeCantainer","checkBgMusic","closeLoading","data","isSysAddPool","fishLine","pathId","lineData","fishData1","fishTypeId","fishData2","fishData","isTide","specialIndex","SpecialFishTypeIds","indexOf","bossComein","showTime","addFishPool","IsTide","localData","killedFishIds","newFishPoolDataList","isAdd","seaWaveFishGroup","addFishTide","currTime","log","myUpdateMoney","checkSpecialBullet","updateShootGold","playShootBullet","checkSpecialCannon","lastCammpmType","Laser","clearSpecialBulletPool","restoreCannon","isNow","accumulate","specialCannonInfo","isNew","getSpecialCannon","BossLavaBasaltfishTypeId","rewardMap","fishId","isNaN","info","rewardGold","reward","killType","Bomb","delayDieTime","DelayDieTime","onKillFish","resGroupId","BossGodOfWealth","sprinkInfo","onSshock","sprinkleRedBag","YuRuyi","rewardArray","rewardMultiple","turntableInfo","AwardType","RUYI","showTurntable","otherPlayerShowSpecialAward","BossLavaBasalt","onSpecialBomb","TreasureBowl","CORNUCOPIA","newCannonType","newCannonAmount","maxFish","playCoinEffect","lives","speciaInfo","totalReward","updateGunRate","leaveRoomPlayer","leaveRoomUnLock","remoeAll","OffLine","updateUserStatus","offset","subGameCode","getP1ToP2Angle","startPos","endPos","comVec","Vec2","dirVec","sub","radian","signAngle","ofxAng","misc","radiansToDegrees","value","div","toString","getFixNumber","facetionDigits","value1","toFixed","getRandomNum","Min","Max","Range","Rand","random","round","playSpine","spineNode","loop","playerdClose","spineName","cb","nextPlyName","nextLoop","active","spine","getComponent","sp","Skeleton","setCompleteListener","trackEntry","loopCount","name","animation","setAnimation","creatorEffect","effect","Node","spr","addComponent","Sprite","Type","SIMPLE","sizeMode","SizeMode","TRIMMED","script","isNeedSet180Angle","node","isLog","len","childrenCount","onSet180Angle","children","nodeDesc","IsNeedRotation","isSetting","repeat","scale","x","scaleX","y","scaleY","offsex","widget","Widget","enabled","top","bottom","left","right","updateAlignment","Seat","RightTop","LeftTop","setAngle","x2","y2","x1","y1","atan2","PI","num","getClickArea","width","height","Harf","OffsexX","OffsexY","winSize","abs","destroy","clear","module","exports","getInstance"],"mappings":"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","sourceRoot":"/","sourcesContent":["let CONST = require(\"nfishConst\");\r\nlet fishlogic = function(){\r\n        console.warn(\"初始化捕鱼逻辑\");\r\n        this.initData();\r\n        this.registerEvent();\r\n    },\r\n    fish = fishlogic.prototype,\r\n    g_instance = null;\r\n//初始化数据中心\r\nfish.initData = function (){\r\n    //动态配置 roomRule 字段说明：\r\n    //         BaseConsume: 10,             // 每个炮弹的基础消耗\r\n    //         EntranceRestrictions: 1000,  // 进入房间的最低限制金额\r\n    //         Rank: 1,                     // 房间等级\r\n    //         MaxShell: 20,                // 炮弹数量上限\r\n    //         LightningMaxFish: 5,         // 闪电炮弹产生的连锁闪电最大的连锁目标数\r\n    //         LightningRadius: 250,        // 闪电炮弹产生的连锁闪电的连锁目标半径范围（单位：像素）\r\n    //         ExplodeRadius: 125,          // 炎爆炮弹的爆炸效果半径范围（单位：像素）\r\n    //         FirepillarWidth: 100,        // 龙息的宽度（单位：像素）\r\n    //         ExcaliburMaxFish: 20,        // 仙剑击中鱼的最大数量，即仙剑击中多少条鱼后，爆炸。\r\n    //         ExcaliburRadius: 125,        // 仙剑爆炸时的爆炸半径范围（单位：像素）\r\n    //         CornucopiaStopTime: 10,      // 聚宝盆捕获时，进行表现的时间，也就是暂停玩家发射炮弹的时间\r\n    //         RuyiStopTime: 10,            // 玉如意捕获时，进行表现的时间，也就是暂停玩家发射炮弹的时间\r\n    //         StandbyTime:\r\n    //         下标0                         // 多长时间未发射炮弹，进行提示（单位：秒）\r\n    //         下标1                         // 多长时间未发射炮弹，踢出房间（单位：秒）\r\n    this.roomRule               = null;     //动态配置\r\n    this.isSetAngle             = true;     //是否设置180°旋转\r\n    this.isEnterRoom            = false;    //用于判断发包等操作前置条件\r\n    this.dialogPanelIsShow      = false;    //金额不足不重复弹窗\r\n    this.fishPoolData           = null;     //鱼池数据\r\n    this.playerInfo             = {};       //桌上用户信息\r\n    this.gunType                = CONST.CannonType.Normal;//正常 0 ， 1-4特殊\r\n    this.isInFreeze             = false;    //是否冰冻\r\n    this.lockFishID             = null;     //锁定对象\r\n    this.lastLockFishID         = null;     //上一次锁定对象\r\n    this.serverTime             = 0;        //服务器时间，用于状态同步\r\n    this.gold                   = 0;        //玩家进入该场携带的钱\r\n    this.baseConsume            = 0;        //该房间的基础炮倍 用于提示余额不足 需要多少余额 才可以发射 当前炮倍的子弹\r\n    this.isLock                 = false;    //是否锁定\r\n    this.isAuto                 = false;    //是否自动\r\n    this.isLockAutoChange       = false;    //是否自动 切换\r\n    this.isRestoreIng           = {};       //是否正在恢复炮台\r\n    this.cannonLevel            = 1;        //自己炮台倍率\r\n    this.seatNum                = -1;       //自己的信息\r\n    this.roomId                 = 0;        //当前房间id 用做储存本地数据 子弹自动射击和自动锁定/自动寻找下一条鱼 的键\r\n    this.bullteNum              = 0;        //（自己的）子弹数量\r\n    this.currentBullteType      = CONST.CannonType.Not;   //（自己的）当前已发射的特殊子弹类型\r\n    this.isYuRuyiRuning         = false;    //玉如意是否在运行\r\n    this.MaxBullte              = 0;        //子弹最大数量\r\n    this.showTimeMsg            = 0;        //多长时间未发射炮弹，进行提示（单位：秒）\r\n    this.exitTimeMsg            = 0;        //多长时间未发射炮弹，踢出房间（单位：秒）\r\n    this.lastShootTime          = 0;        //最后一次发炮时间\r\n    this.quickMove              = false;    //鱼潮来了\r\n    this.isFishTideRuning       = false;    //鱼潮是否正在运行\r\n    this.startFire              = true;     //鱼潮来了 停止自动射击\r\n    this.json_fishResEdit       = null;     //资源描述表\r\n    this.json_fishTable         = null;     //鱼表\r\n    this.json_fishLineGroup     = null;     //鱼线组\r\n    this.currPlayBgMusic        = -1;//当前播放的\r\n    this.bossIDList             = [];       //boss id 组\r\n    this.specialFishListBorn    = {};       //特殊鱼即将来临数据\r\n    this.specialFishListBornLen = 0;        //特殊鱼来临数据长度\r\n    this.isGunMoving0           = -1;       //0座位是否正在换特殊炮台 , 如果是 那么停止所有射击行为等待动画播放完毕后在继续\r\n    this.isGunMoving1           = -1;       //1座位是否正在换特殊炮台 , 如果是 那么停止所有射击行为等待动画播放完毕后在继续\r\n    this.isGunMoving2           = -1;       //2座位是否正在换特殊炮台 , 如果是 那么停止所有射击行为等待动画播放完毕后在继续\r\n    this.isGunMoving3           = -1;       //3座位是否正在换特殊炮台 , 如果是 那么停止所有射击行为等待动画播放完毕后在继续\r\n    this.playSoundTime          = 0;//记录播放 特殊音效时间 2个特殊鱼身上的音效时间间距为5秒\r\n    this.curWaitTime            = 0;//记录当前射击时间，如果超时则显示时间和退出场景\r\n    this.tideRun                = 0;//开始\r\n    this.specialBulletPool      = {};  //特殊子弹的生命\r\n    this.tidePlayCorrect        = {};  //动画播放器矫正器\r\n    this.isFireLaser            = false;  //是否正在发射龙溪\r\n    this.lastBullteType0        = undefined;//0号位置上一次使用的子弹类型\r\n    this.lastBullteType1        = undefined;//1号位置上一次使用的子弹类型\r\n    this.lastBullteType2        = undefined;//2号位置上一次使用的子弹类型\r\n    this.lastBullteType3        = undefined;//3号位置上一次使用的子弹类型\r\n    this.isUpdateMoney0         = true;     //0位置是否立即更新余额 玉如意、聚宝盆 更新余额机制 用于 等待开奖之后更新\r\n    this.isUpdateMoney1         = true;     //1位置是否立即更新余额 玉如意、聚宝盆 更新余额机制 用于 等待开奖之后更新\r\n    this.isUpdateMoney2         = true;     //2位置是否立即更新余额 玉如意、聚宝盆 更新余额机制 用于 等待开奖之后更新\r\n    this.isUpdateMoney3         = true;     //3位置是否立即更新余额 玉如意、聚宝盆 更新余额机制 用于 等待开奖之后更新\r\n    this.playBossBGM            = -1;//是否是播放boss背景音乐\r\n    // 对时间格式化的扩展\r\n    this.fishPool               = new cc.NodePool(\"fish\");//鱼对象池\r\n    this.bulletPool             = new cc.NodePool(\"bullet\");//子弹对象池\r\n    this.currFishzIndex         = {};\r\n    Date.prototype.Format       = function (fmt) { //author: meizz\r\n        var o = {\r\n            \"M+\": this.getMonth() + 1, //月份\r\n            \"d+\": this.getDate(), //日\r\n            \"h+\": this.getHours(), //小时\r\n            \"m+\": this.getMinutes(), //分\r\n            \"s+\": this.getSeconds(), //秒\r\n            \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\r\n            \"S\": this.getMilliseconds() //毫秒\r\n        };\r\n        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n        for (var k in o)\r\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n        return fmt;\r\n    }\r\n    this.offLineMissileData     = null;//断线重连临时仙剑数据\r\n    this.gameZoomX              = 1;//x轴的缩放值，用于针对设计尺寸做偏移量，确保所有手机屏幕都是同屏的\r\n    this.gameZoomY              = 1;//y轴的缩放值，用于针对设计尺寸做偏移量，确保所有手机屏幕都是同屏的\r\n    this.bgIndex                = -1;//最后一次播放背景声音的 下标\r\n}\r\n//网络事件监听\r\nfish.registerEvent = function(){\r\n    glGame.emitter.on(CONST.STCEvent.onSyncData, this.onSyncData, this);\r\n    glGame.emitter.on(CONST.STCEvent.onTideScript, this.onTideScript, this);\r\n    glGame.emitter.on(CONST.STCEvent.onFishGroupScript, this.onFishGroupScript, this);\r\n    glGame.emitter.on(CONST.STCEvent.onAddFishLine, this.onAddFishLine, this);\r\n    glGame.emitter.on(CONST.STCEvent.onShoot, this.onShoot, this);\r\n    glGame.emitter.on(CONST.STCEvent.onUseSpecialCannon, this.onUseSpecialCannon, this);\r\n    glGame.emitter.on(CONST.STCEvent.onKill, this.onKill, this);\r\n    glGame.emitter.on(CONST.STCEvent.onEnterRoom, this.onEnterRoom, this);\r\n    glGame.emitter.on(CONST.STCEvent.onLeaveRoom, this.onLeaveRoom, this);\r\n    glGame.emitter.on(glGame.room.getPlayerOp(glGame.scenetag.FISH2), this.onPlayerOp, this);\r\n    glGame.emitter.on(CONST.STCEvent.onCoinChanged,this.onCoinChanged,this);\r\n    glGame.emitter.on(CONST.STCEvent.onChangeCannonLevel,this.onChangeCannonLevel,this);\r\n    glGame.emitter.on(CONST.STCEvent.onMissileBomb,this.onMissileBomb,this);\r\n    glGame.emitter.on(CONST.STCEvent.onOffline,this.onOffline,this);\r\n    glGame.emitter.on(CONST.STCEvent.onOnline,this.onOnline,this);\r\n    glGame.emitter.on(CONST.clientEvent.netDisconnect, this.netDisconnect, this);\r\n    glGame.emitter.on(CONST.clientEvent.EnterForeground, this.onEnterForeground, this);\r\n    glGame.emitter.on(CONST.clientEvent.EnterBackground, this.onEnterBackground, this);\r\n    glGame.emitter.on(CONST.STCEvent.horseRaceLamp, this.horseRaceLamp, this);\r\n}\r\n//反注册事件\r\nfish.unregisterEvent = function(){\r\n    glGame.emitter.off(CONST.clientEvent.netDisconnect, this);\r\n    glGame.emitter.off(CONST.clientEvent.EnterForeground, this);\r\n    glGame.emitter.off(CONST.clientEvent.EnterBackground, this);\r\n    glGame.emitter.off(CONST.STCEvent.onSyncData, this);\r\n    glGame.emitter.off(CONST.STCEvent.onTideScript, this);\r\n    glGame.emitter.off(CONST.STCEvent.onFishGroupScript, this);\r\n    glGame.emitter.off(CONST.STCEvent.onAddFishLine, this);\r\n    glGame.emitter.off(CONST.STCEvent.onShoot, this);\r\n    glGame.emitter.off(CONST.STCEvent.onUseSpecialCannon, this);\r\n    glGame.emitter.off(CONST.STCEvent.onKill, this);\r\n    glGame.emitter.off(CONST.STCEvent.onEnterRoom, this);\r\n    glGame.emitter.off(CONST.STCEvent.onLeaveRoom, this);\r\n    glGame.emitter.off(glGame.room.getPlayerOp(glGame.scenetag.FISH2), this);\r\n    glGame.emitter.off(CONST.STCEvent.onCoinChanged, this);\r\n    glGame.emitter.off(CONST.STCEvent.onChangeCannonLevel, this);\r\n    glGame.emitter.off(CONST.STCEvent.onMissileBomb, this);\r\n    glGame.emitter.off(CONST.STCEvent.onOffline, this);\r\n    glGame.emitter.off(CONST.STCEvent.onOnline, this);\r\n    glGame.emitter.off(CONST.STCEvent.horseRaceLamp, this);\r\n}\r\n//断网操作\r\nfish.offNetHadnler = function(){\r\n    this.isEnterRoom = false;\r\n    glGame.emitter.emit(CONST.clientEvent.clearbossComein);\r\n    glGame.emitter.emit(CONST.clientEvent.showAlert,CONST.AlertType.NetOff);\r\n}\r\n//资讯通知\r\nfish.horseRaceLamp = function(msg){\r\n    let gameLevel  = glGame.room.getRoomType(glGame.scenetag.FISH2);\r\n    let room = gameLevel[msg.betType];\r\n    let horseLampLabel = `恭喜玩家 <color=#27d9ff>${msg.nickname}</c>在${room}捕获<color=#ffdd20>${msg.fishName}</c>共获得<color=#00ff42>${this.getFloat(msg.winCoin)}</c>金币`;\r\n    glGame.notice.addContent(horseLampLabel);\r\n}\r\n//断网 - 可能无法恢复\r\nfish.netDisconnect = function(){\r\n    this.offNetHadnler();\r\n}\r\n//切后台\r\nfish.onEnterBackground = function(){\r\n    this.offNetHadnler();\r\n}\r\n//切前台\r\nfish.onEnterForeground = function(){\r\n    glGame.gameNet.disconnect();//断网\r\n    this.offNetHadnler();\r\n}\r\n//初始化子弹\r\nfish.initBullet = function(msg){\r\n    for(let k in msg.userInfoMap){\r\n        let uid = Number(k);\r\n        let playerInfo = msg.userInfoMap[uid];\r\n        //当前屏幕上的子弹\r\n        if(playerInfo.shells && playerInfo.shells.length > 0){\r\n            for (let i=0;i<playerInfo.shells.length;i++){\r\n                let bulletdata = playerInfo.shells[i];\r\n                let bullet = {\r\n                    uid:uid,\r\n                    cannonType:CONST.CannonType.Normal,\r\n                    seatNum:Number(playerInfo.seatId),\r\n                    bulletId:bulletdata.id,\r\n                    gunLevel:bulletdata.level,\r\n                    gunType:bulletdata.type,\r\n                    createTime:bulletdata.createTime,\r\n                    serverTime:msg.serverTime\r\n                };\r\n                if(bulletdata.aimFishId != null){\r\n                    if(this.fishPoolData[Number(bulletdata.aimFishId)] == null){\r\n                        cc.error(\"找不到鱼，无法实例化锁定该鱼(id:\"+bulletdata.aimFishId+\")的子弹\")\r\n                    }else {\r\n                        bullet[\"lock\"] = bulletdata.aimFishId;\r\n                    }\r\n                }\r\n                if(bulletdata.angle != null){\r\n                    bullet[\"angle\"] = bulletdata.angle;\r\n                }\r\n                let myid = glGame.user.userID;\r\n                glGame.emitter.emit(CONST.clientEvent.initBulletList,bullet);\r\n            }\r\n        }\r\n        if(playerInfo.cannonReward != null && Number(playerInfo.cannonReward) > 0){//断线重连同步特殊炮台发射的子弹的特效\r\n            let total = Number(this.formatMoney(Number(playerInfo.cannonReward+\"\")));\r\n            cc.warn(\"0 =====> 计分 ： \"+total,\"  playerInfo \",playerInfo);\r\n            glGame.emitter.emit(CONST.clientEvent.specialBulletStatistics, {isoffNet:1,cannonType:playerInfo.cannonType,total:total,coin: this.playerInfo[uid].gold,uid:uid,seatNum:this.playerInfo[uid].seatNum});\r\n        }\r\n        //当前屏幕上特殊的子弹 - 仙剑子弹\r\n        if(playerInfo.missileShell != null){\r\n            let bullet = {\r\n                uid:uid,\r\n                seatNum:Number(playerInfo.seatId),\r\n                cannonType:CONST.CannonType.Missile,\r\n                createTime:playerInfo.missileShell.createTime,\r\n                hitMax:playerInfo.missileShell.hitMax,\r\n                serverTime:msg.serverTime,\r\n                angle:playerInfo.missileShell.angle,\r\n            };\r\n            if(Number(playerInfo.missileShell.hitMax) > 0){\r\n                if(bullet.angle == undefined){\r\n                    bullet.angle = 0;\r\n                }\r\n                glGame.emitter.emit(CONST.clientEvent.initBulletList,bullet);\r\n            }else{\r\n                glGame.emitter.emit(CONST.clientEvent.fishSound,\"MissileBoom\");\r\n                let arg = {\r\n                    offLine: 1,//是否是断线重连\r\n                    cannonType:CONST.CannonType.Missile,\r\n                    uid:Number(uid+\"\"),\r\n                    pos:cc.v2(0,0)}\r\n                glGame.emitter.emit(CONST.clientEvent.onSpecialBulletExp,arg);\r\n            }\r\n        }\r\n    }\r\n}\r\n//同步数据 剧本 鱼线 鱼\r\nfish.onSyncData = function(res){\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    this.playSoundTime = Date.now();//重置时间\r\n    this.curWaitTime = Date.now();//重置时间\r\n    console.warn(\"同步数据 剧本 鱼线 鱼 onSyncData >> \",msg);\r\n    let myid = glGame.user.userID;\r\n    this.roomRule = msg.roomRule;\r\n    this.serverTime = msg.serverTime;\r\n    this.baseConsume = this.roomRule.BaseConsume;\r\n    this.MaxBullte = this.roomRule.MaxShell;//子弹上限数量\r\n    this.roomId = msg.roomId;//房间号 或 断线重连 标识\r\n    glGame.emitter.emit(CONST.clientEvent.checkAutoAndLock);\r\n    if(this.playerInfo == null){\r\n        this.playerInfo = {};\r\n    }\r\n    //*****************************   鱼池 start   ***************************************\r\n    this.fishPoolData = {};\r\n    if(msg.randomFishMap != null){//1: 随机鱼线 , 2: 随机鱼组（暂时没有） , 3 : 鱼潮\r\n        for (let id in msg.randomFishMap){\r\n            msg.randomFishMap[id].serverTime = msg.serverTime;\r\n            this.addLine(msg.randomFishMap[id],id,false);\r\n        }\r\n    }else if(msg.fishTide != null){\r\n        this.isFishTideRuning = true;\r\n        this.addTide(msg,msg.fishTide.groupId);\r\n    }\r\n    cc.warn(\">>> fishPoolData \",this.fishPoolData)\r\n    glGame.emitter.emit(CONST.clientEvent.initFishPool);\r\n    //*****************************   鱼池 end   *****************************************\r\n    //桌上玩家\r\n    for(let k in msg.userInfoMap){\r\n        let uid = Number(k);\r\n        let playerInfo = msg.userInfoMap[uid];\r\n        if(uid == Number(myid)){\r\n            this.lastShootTime = playerInfo.lastShootTime > 0 ? this.serverTime - playerInfo.lastShootTime : 0;\r\n            if(this.lastShootTime > 0){\r\n                this.curWaitTime -= this.lastShootTime;\r\n            }\r\n            this.gold = playerInfo.coin;\r\n            this.checkGold();\r\n            this.seatNum = Number(playerInfo.seatId);\r\n            if(playerInfo.shells && playerInfo.shells.length > 0){\r\n                this.bullteNum = playerInfo.shells.length;\r\n            }\r\n            this.cannonLevel = playerInfo.cannonLevel;\r\n        }\r\n        if(!this.playerInfo[uid])this.playerInfo[uid] = {};\r\n        let cannonLevel = playerInfo.cannonLevel != null ? playerInfo.cannonLevel : 1;\r\n        this.playerInfo[uid].uid             = uid;\r\n        this.playerInfo[uid].cannonAmount    = 0;\r\n        this.playerInfo[uid].seatNum         = Number(playerInfo.seatId);\r\n        this.playerInfo[uid].gold            = playerInfo.coin;\r\n        this.playerInfo[uid].cannonLevel     = cannonLevel == null || cannonLevel == 0 ? 1 : cannonLevel;\r\n        this.playerInfo[uid].angle           = playerInfo.angle;\r\n        this.playerInfo[uid].aimedFishLineID = playerInfo.aimedFishLineID;\r\n        this.playerInfo[uid].cannonType      = CONST.CannonType.Normal;\r\n        this.playerInfo[uid].hitMax          = 0;\r\n        this.playerInfo[uid].userStatus      = CONST.UserStatus.OnLine;\r\n        //特殊炮台以及 数量\r\n        if(playerInfo.cannonType != null){\r\n            this.playerInfo[uid].cannonType = Number(playerInfo.cannonType);\r\n        }else{\r\n            this.playerInfo[uid].cannonType = CONST.CannonType.Normal;\r\n        }\r\n        if(playerInfo.cannonType != null && playerInfo.cannonAmount != null){\r\n            this.playerInfo[uid].cannonAmount = Number(playerInfo.cannonAmount);\r\n        }\r\n        if(playerInfo.cannonHitMax != null){// 仙剑剩余的击中鱼数量  cannonType == CONST.CannonType.Missile\r\n            this.playerInfo[uid].hitMax = Number(playerInfo.cannonHitMax);\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.comeInPlayer,this.playerInfo[uid]);\r\n    }\r\n    this.showTimeMsg = this.roomRule.StandbyTime[0];\r\n    this.exitTimeMsg = this.roomRule.StandbyTime[1];\r\n    this.bgIndex     = msg.bgIndex % 4;\r\n    glGame.emitter.emit(CONST.clientEvent.changeBackGround,this.bgIndex);\r\n    this.initBullet(msg);\r\n    if(this.getIsRotation()){\r\n        glGame.emitter.emit(CONST.clientEvent.checkRotation);\r\n        glGame.emitter.emit(CONST.clientEvent.changeCantainer);\r\n    }\r\n    glGame.emitter.emit(CONST.clientEvent.checkBgMusic);\r\n    glGame.emitter.emit(CONST.clientEvent.closeLoading);\r\n}\r\n//添加线\r\nfish.addLine = function(data,id,isSysAddPool){\r\n    if(this.json_fishLineGroup[data.groupId+\"\"] == null){\r\n        cc.error(\">>鱼线不同步 找不到 鱼线组 groupId \"+data.groupId);\r\n        return;\r\n    }\r\n    if(this.json_fishLineGroup[data.groupId+\"\"].fishLine == null){\r\n        cc.error(\">>鱼线不同步 找不到 鱼线组 groupId \"+data.groupId);\r\n        return;\r\n    }\r\n    if(this.json_fishLineGroup[data.groupId+\"\"].fishLine[data.pathId+\"\"] == null){\r\n        cc.error(\">>鱼线不同步 找不到 鱼线组 groupId \"+data.groupId+\" pathId \"+data.pathId);\r\n        return;\r\n    }\r\n    let lineData = JSON.parse(JSON.stringify(this.json_fishLineGroup[data.groupId+\"\"].fishLine[data.pathId+\"\"]));\r\n    if(lineData == null || this.json_fishLineGroup[data.groupId+\"\"].fishLine == undefined){\r\n        cc.error(\">>1> 服务器客户端不同步鱼线配置 找不到 鱼组 groupId：\",data.groupId,\" pathId：\",data.pathId)\r\n    }\r\n    if(lineData){\r\n        let fishData1 = this.json_fishTable[data.fishTypeId+\"\"];\r\n        let fishData2 = this.json_fishTable[Number(data.fishTypeId)];\r\n        let fishData = fishData1 == undefined ? fishData2 :fishData1;\r\n        if(fishData){\r\n            lineData.fishTypeId           = data.fishTypeId+\"\";\r\n            lineData.serverTime           = Number(data.serverTime+\"\");\r\n            lineData.createTime           = Number(data.createTime+\"\");\r\n            lineData.id                   = Number(id);//用于 协议通讯使用\r\n            if(data.isTide != null){\r\n                lineData.isTide = 1;\r\n            }\r\n            this.fishPoolData[Number(id)] = lineData;\r\n            let specialIndex = CONST.SpecialFishTypeIds.indexOf(Number(data.fishTypeId));\r\n            if(specialIndex != -1){//有特殊鱼来啦\r\n                glGame.emitter.emit(CONST.clientEvent.bossComein, {id:Number(id+\"\"),fishTypeId:Number(data.fishTypeId),showTime:lineData.showTime,serverTime:Number(data.serverTime+\"\"),createTime:Number(data.createTime+\"\")});\r\n            }\r\n            if(isSysAddPool)glGame.emitter.emit(CONST.clientEvent.addFishPool,lineData);\r\n        }else{\r\n            cc.error(\">>2> 服务器客户端不同步鱼配置 找不到 鱼组  groupId：\",data.groupId,\" pathId \",data.pathId,\"  fishTypeId：\",data.fishTypeId)\r\n        }\r\n    }\r\n}\r\n//添加鱼潮\r\nfish.addTide = function(msg,groupId){\r\n    const IsTide = 1;\r\n    let localData = JSON.parse(JSON.stringify(this.json_fishLineGroup[groupId+\"\"].fishLine));\r\n    if(this.json_fishLineGroup[groupId+\"\"].fishLine == undefined){\r\n        cc.error(\">>3> 配置不同步 找不到 鱼组 \",groupId)\r\n    }\r\n    let killedFishIds = msg.killedFishIds;\r\n    if(killedFishIds == undefined && msg.fishTide != undefined){\r\n        killedFishIds = msg.fishTide.killedFishIds;\r\n    }\r\n    let newFishPoolDataList = {};\r\n    for (let id in localData){\r\n        let isAdd = true;\r\n        if(killedFishIds != undefined){\r\n            if(killedFishIds.indexOf((id+\"\")) != -1 || killedFishIds.indexOf(Number(id)) != -1){//去除已经死掉的鱼\r\n                isAdd = false;\r\n            }\r\n        }\r\n        if(isAdd){\r\n            this.fishPoolData[Number(id)]             = localData[Number(id)];\r\n            this.fishPoolData[Number(id)].isTide      = IsTide;\r\n            this.fishPoolData[Number(id)].id          = Number(id);\r\n            this.fishPoolData[Number(id)].serverTime  = Number(msg.serverTime+\"\");\r\n            this.fishPoolData[Number(id)].createTime  = msg.createTime != null ?  Number(msg.createTime+\"\") : Number(msg.fishTide.createTime+\"\");\r\n            newFishPoolDataList[Number(id)]           = this.fishPoolData[Number(id)];\r\n        }\r\n    }\r\n    return JSON.parse(JSON.stringify(newFishPoolDataList));\r\n}\r\n//添加鱼线（随机剧本时有）\r\nfish.onAddFishLine = function(res){\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    if(this.isFishTideRuning == true){\r\n        this.isFishTideRuning = false;\r\n    }\r\n    if(this.fishPoolData == null){\r\n        cc.error(\">> 加鱼线失败 鱼池未初始化 \",this.fishPoolData)\r\n        return;\r\n    }\r\n    // cc.log(\"> 添加鱼线  \",msg);\r\n    this.serverTime = msg.serverTime;\r\n    this.addLine(msg,msg.id,true);\r\n}\r\n//鱼潮来袭\r\nfish.onTideScript = function(res){\r\n    if(!this.isEnterRoom){\r\n        return;\r\n    }\r\n    this.isFishTideRuning = true;\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    if(this.fishPoolData == null){\r\n        cc.error(\">> 加鱼潮失败 鱼池未 初始化 \",this.fishPoolData)\r\n        return;\r\n    }\r\n    this.tidePlayCorrect = {};//重置播放矫正\r\n    // cc.log(\"> 鱼潮来袭 \",msg);\r\n    this.serverTime = msg.serverTime;\r\n    this.bgIndex = msg.bgIndex % 4;\r\n    glGame.emitter.emit(CONST.clientEvent.seaWaveFishGroup,msg);\r\n}\r\n//鱼组来袭\r\nfish.onFishGroupScript = function(res){\r\n    if(!this.isEnterRoom){\r\n        return;\r\n    }\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    if(this.isFishTideRuning == true){\r\n        this.isFishTideRuning = false;\r\n    }\r\n    glGame.emitter.emit(CONST.clientEvent.addFishTide,this.addTide(msg,msg.groupId));\r\n}\r\n//射击\r\nfish.onShoot = function(res){\r\n    if(!this.isEnterRoom){\r\n        return;\r\n    }\r\n    if(this.fishPoolData == null)return;\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    let currTime = new Date().Format(\"mm:ss\");\r\n    cc.log(\">>>　射击 \",msg,currTime);\r\n    let myid        = glGame.user.userID;\r\n    msg.gunLevel    = msg.cannonLevel;\r\n    msg.gold        = msg.coin;\r\n    msg.bulletId    = msg.id;\r\n    if(this.playerInfo == null || this.playerInfo[Number(msg.uid)] == null){\r\n        cc.warn(\"座位无人，暂无法射击\")\r\n        return;\r\n    }\r\n    msg.seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n    if(Number(msg.uid) == Number(myid) && msg.coin != null){\r\n        this.gold   = msg.coin;\r\n        this.checkGold();\r\n        // cc.warn(\">> 射击 更新我的钱 1\")\r\n        glGame.emitter.emit(CONST.clientEvent.myUpdateMoney);\r\n        return;\r\n    }else {\r\n        glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n        // cc.warn(\">> 射击 更新其他用户的钱 1\")\r\n        glGame.emitter.emit(CONST.clientEvent.updateShootGold,msg);\r\n    }\r\n    if(this.playerInfo[Number(msg.uid)] == undefined){\r\n        console.error(\"找不到服务器发过来的用户seatNum  \",msg.uid,\" 座位 \",msg,\" this.playerInfo \",this.playerInfo)\r\n        cc.warn(\">> this.playerInfo \",this.playerInfo)\r\n    }else{\r\n        if(msg.uid == undefined){\r\n            cc.error(\">>>>> msg : \",msg)\r\n            return;\r\n        }\r\n        msg.seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n        if(msg.coin != null)this.playerInfo[Number(msg.uid)].gold = msg.coin;\r\n        // console.warn(\"> 17. 射击 \",msg);\r\n        if(msg.cannonLevel == undefined){\r\n            this.playerInfo[Number(msg.uid)].cannonLevel;\r\n        }else{\r\n            this.playerInfo[Number(msg.uid)].cannonLevel = msg.cannonLevel;\r\n        }\r\n        glGame.emitter.emit(CONST.clientEvent.playShootBullet,msg);\r\n    }\r\n    glGame.emitter.emit(CONST.clientEvent.checkSpecialCannon,false);\r\n}\r\n//使用特殊炮台\r\nfish.onUseSpecialCannon = function(res){\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    let currTime = new Date().Format(\"mm:ss\");\r\n    if(this.playerInfo[Number(msg.uid)] == null || this.playerInfo[Number(msg.uid)].cannonAmount == null){\r\n        if(this.playerInfo[Number(msg.uid)] == null){\r\n            cc.warn(\"用户\"+msg.uid+\" 没有加入房间 就使用炮台 数据有误！！！playerInfo: \",this.playerInfo);\r\n        }else{\r\n            cc.error(\"还没得到过 特殊炮台 就使用炮台 数据有误！！！ \",msg);\r\n        }\r\n    }else{\r\n        let seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n        msg.seatNum = seatNum;\r\n        let lastCammpmType = Number(\"\" + this.playerInfo[Number(msg.uid)].cannonType);//记录老的炮台类型\r\n        this.playerInfo[Number(msg.uid)].cannonAmount = Number(msg.cannonAmount);\r\n        this.playerInfo[Number(msg.uid)].cannonType = Number(msg.cannonType);\r\n        cc.warn(\"==== 使用特殊炮台 seatNum :\"+seatNum,\" Info \",JSON.parse(JSON.stringify(this.playerInfo[Number(msg.uid)])));\r\n        if(lastCammpmType == CONST.CannonType.Laser && this.seatNum != seatNum){//维护其他人的子弹状态 - 仙剑\r\n            glGame.emitter.emit(CONST.clientEvent.clearSpecialBulletPool,seatNum);\r\n        }\r\n        if(this.seatNum == seatNum){\r\n            // cc.error(\">使用特殊炮台 >> playerInfo \",this.playerInfo[Number(msg.uid)],\" msg \",msg)\r\n            glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n        }\r\n        if(Number(msg.cannonAmount) == 0){\r\n            cc.log(\">服务器广播 已经没有龙溪了 开始恢复 炮台 \",msg)\r\n            if(this.currentBullteType == CONST.CannonType.Not){\r\n                glGame.emitter.emit(CONST.clientEvent.restoreCannon,{uid:Number(msg.uid),isNow:true,lastCammpmType:lastCammpmType});\r\n            }else{\r\n                glGame.emitter.emit(CONST.clientEvent.restoreCannon,{uid:Number(msg.uid),isNow:false,lastCammpmType:lastCammpmType});\r\n            }\r\n        }else{\r\n            glGame.emitter.emit(CONST.clientEvent.accumulate,{seatNum:seatNum,cannonType:Number(msg.cannonType)});\r\n            cc.log(\"> 特殊炮台的数量更新 \",this.playerInfo[Number(msg.uid)].cannonAmount,\" msg \",msg,currTime)\r\n            let specialCannonInfo = {uid:msg.uid,seatNum:msg.seatNum,isNew:false};\r\n            glGame.emitter.emit(CONST.clientEvent.getSpecialCannon,specialCannonInfo);\r\n        }\r\n    }\r\n    glGame.emitter.emit(CONST.clientEvent.checkSpecialCannon,false);\r\n}\r\n//鱼死亡\r\nfish.onKill = function(res){\r\n    let msg = JSON.parse(JSON.stringify(res));\r\n    let BossLavaBasaltfishTypeId = -1;\r\n    let total = 0;\r\n    let myid = Number(glGame.user.userID);\r\n    if(this.fishPoolData == null)return;\r\n    if(this.playerInfo[Number(msg.uid)] != null){\r\n        this.playerInfo[Number(msg.uid)].gold = msg.coin;\r\n        msg.gold    = msg.coin;\r\n        msg.seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n    }else{\r\n        cc.error(\"玩家未初始化\")\r\n        for (let k=0;k<msg.rewardMap.length;k++) {\r\n            let data = msg.rewardMap[k];\r\n            let fishTypeId = this.fishPoolData[Number(data.fishId)] != null ? Number(this.fishPoolData[Number(data.fishId)].fishTypeId) : 0;\r\n            if(isNaN(Number(data.fishId))){\r\n                cc.error(\">1>数据错误 \",data,\" msg : \",msg);\r\n                continue;\r\n            }\r\n            let info = {\r\n                fishId: Number(data.fishId),\r\n                rewardGold : data.reward ? data.reward : 0,\r\n                fishTypeId:fishTypeId,\r\n                seatNum:msg.seatNum,\r\n                killType:msg.cannonType\r\n            }\r\n            if(info.killType == CONST.CannonType.Bomb){\r\n                info.delayDieTime = k * CONST.DelayDieTime;\r\n            }\r\n            glGame.emitter.emit(CONST.clientEvent.onKillFish,info);//销毁鱼\r\n        }\r\n        if(myid == Number(msg.uid)){\r\n            this.gold = Number(msg.coin);\r\n            this.checkGold();\r\n            // cc.error(\">> 射击 更新我的钱 2\")\r\n            glGame.emitter.emit(CONST.clientEvent.myUpdateMoney);\r\n        }else {\r\n            // cc.error(\">> 射击 更新其他用户的钱 2\")\r\n            glGame.emitter.emit(CONST.clientEvent.updateShootGold,msg);\r\n        }\r\n        return;\r\n    }\r\n    for (let k=0;k<msg.rewardMap.length;k++){\r\n        let data = msg.rewardMap[k];\r\n        if(data.reward != undefined){\r\n            total += Number(this.formatMoney(Number(data.reward+\"\")));\r\n        }\r\n        if(isNaN(Number(data.fishId))){\r\n            cc.error(\">2>数据错误 \",data,\" msg : \",msg);\r\n            continue;\r\n        }\r\n        let fishTypeId = this.fishPoolData[Number(data.fishId)] != null ? Number(this.fishPoolData[Number(data.fishId)].fishTypeId) : 0;\r\n        let localData  = this.json_fishTable[this.fishPoolData[Number(data.fishId)]];\r\n        let info = {\r\n            fishId: Number(data.fishId),\r\n            rewardGold : data.reward ? data.reward : 0,\r\n            seatNum:msg.seatNum,\r\n            uid:msg.uid,\r\n            fishTypeId:fishTypeId,\r\n            killType:msg.cannonType\r\n        }\r\n        if(info.killType == CONST.CannonType.Bomb){\r\n            info.delayDieTime = k * CONST.DelayDieTime;\r\n        }\r\n        if(localData){\r\n            cc.warn(\"id:\",Number(data.fishId),\">死鱼fTId:\",fishTypeId,\"n:\",localData.fishName,\"resGroupId:\",localData.resGroupId)\r\n        }\r\n        if(fishTypeId == CONST.BossGodOfWealth){//boss1 财神特殊处理\r\n            let sprinkInfo = {uid:msg.uid,fishId:Number(data.fishId),seatNum:msg.seatNum, rewardGold : data.reward ? data.reward : 0,info:info,uid:msg.uid};\r\n            glGame.emitter.emit(CONST.clientEvent.onSshock);\r\n            glGame.emitter.emit(CONST.clientEvent.sprinkleRedBag,sprinkInfo);\r\n        }\r\n        if(fishTypeId == CONST.YuRuyi){//玉如意 出转盘\r\n            if(data.rewardArray != null && data.rewardMultiple != null){\r\n                // cc.error(\">>=========== 停止 更新 余额 ============== 1 玉如意 >>\");\r\n                let turntableInfo = {\r\n                    uid:msg.uid,\r\n                    fishId:Number(data.fishId),\r\n                    seatNum:msg.seatNum,\r\n                    rewardGold : data.reward ? data.reward : 0,\r\n                    rewardArray:data.rewardArray,\r\n                    rewardMultiple:data.rewardMultiple,\r\n                    msg:msg\r\n                };\r\n                if(myid == Number(msg.uid)){\r\n                    this[\"isUpdateMoney\"+msg.seatNum] = false;\r\n                    turntableInfo.type = CONST.AwardType.RUYI;\r\n                    glGame.emitter.emit(CONST.clientEvent.showTurntable,turntableInfo);\r\n                }else{\r\n                    turntableInfo.type = CONST.AwardType.RUYI;\r\n                    glGame.emitter.emit(CONST.clientEvent.otherPlayerShowSpecialAward,turntableInfo);\r\n                }\r\n            }else{\r\n                cc.warn(\"玉如意 缺少 rewardArray 或 rewardMultiple 数据 无法弹出转盘 data: \",data);\r\n            }\r\n        }\r\n        if(fishTypeId == CONST.BossLavaBasalt) {//熔岩玄武 死亡\r\n            BossLavaBasaltfishTypeId = fishTypeId;\r\n            glGame.emitter.emit(CONST.clientEvent.onSpecialBomb,info);\r\n        }\r\n        if(fishTypeId == CONST.TreasureBowl){//聚宝盆 出拉霸\r\n            // cc.error(\">>=========== 停止 更新 余额 ============== 2 聚宝盆 >>\");\r\n            let turntableInfo = {\r\n                uid:msg.uid,\r\n                fishId:Number(data.fishId),\r\n                seatNum:msg.seatNum,\r\n                rewardGold : data.reward ? data.reward : 0,\r\n                msg:msg\r\n            };\r\n            if(myid == Number(msg.uid)){\r\n                this[\"isUpdateMoney\"+msg.seatNum] = false;\r\n                cc.warn(\">>>  聚宝盆 data.reward： \"+data.reward)\r\n                turntableInfo.type = CONST.AwardType.CORNUCOPIA;\r\n                glGame.emitter.emit(CONST.clientEvent.showTurntable,turntableInfo);\r\n            }else{\r\n                turntableInfo.type = CONST.AwardType.CORNUCOPIA;\r\n                glGame.emitter.emit(CONST.clientEvent.otherPlayerShowSpecialAward,turntableInfo);\r\n            }\r\n        }\r\n        let specialCannonInfo = {uid:msg.uid,fishId:Number(data.fishId),seatNum:msg.seatNum};\r\n        if(data.newCannonType != null){\r\n            if(data.newCannonType == CONST.CannonType.Bomb) {//熔岩玄武 全屏爆炸\r\n                cc.error(\">> XXX 熔岩玄武 全屏爆炸 newCannonType error  msg: \", msg);\r\n            }\r\n            if(this.playerInfo[Number(msg.uid)].cannonType != null && this.playerInfo[Number(msg.uid)].cannonType != Number(data.newCannonType)){\r\n                specialCannonInfo.isNew = true;\r\n                if(myid == Number(msg.uid)){\r\n                    cc.warn(\"GETCANNON ===>>>  获得不同 炮台 ，改变炮台\")\r\n                }\r\n            }else{\r\n                specialCannonInfo.isNew = false;\r\n                if(myid == Number(msg.uid)) {\r\n                    cc.warn(\"GETCANNON ===>>>  获得相同 炮台，覆盖之前的 \")\r\n                }\r\n            }\r\n            this.playerInfo[Number(msg.uid)].cannonType     =  Number(data.newCannonType);\r\n            this.playerInfo[Number(msg.uid)].cannonAmount   =  Number(data.newCannonAmount);\r\n            if(data.maxFish != null){// 仙剑最大击中鱼数量\r\n                this.playerInfo[Number(msg.uid)].hitMax     =  Number(data.maxFish);\r\n            }\r\n            // if(myid == Number(msg.uid)) {\r\n            //     glGame.emitter.emit(CONST.clientEvent.fishSound,\"getSpcliaUser\");//获得特殊炮台时播放\r\n            // }\r\n            glGame.emitter.emit(CONST.clientEvent.getSpecialCannon,specialCannonInfo);\r\n            glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n        }\r\n        if(fishTypeId == CONST.BossGodOfWealth || fishTypeId == CONST.YuRuyi || fishTypeId == CONST.TreasureBowl) {\r\n            //财神\r\n            //玉如意\r\n            //聚宝盆\r\n            //这三个不出现飘分和金币。  财神特殊处理\r\n        }else{\r\n            glGame.emitter.emit(CONST.clientEvent.playCoinEffect, info);//死鱼飘金币\r\n        }\r\n        if(fishTypeId == CONST.BossGodOfWealth && data.lives){\r\n            //财神还没死透，不能销毁\r\n        }else{\r\n            //财神死透或者其他的鱼死亡\r\n            glGame.emitter.emit(CONST.clientEvent.onKillFish,info);//销毁鱼\r\n        }\r\n\r\n    }\r\n    if(msg.cannonType != null && msg.cannonType != CONST.CannonType.Normal && msg.cannonType != CONST.CannonType.Bomb){//如果这一发子弹不是普通子弹那么统计数值显示特效\r\n        let speciaInfo = {cannonType:msg.cannonType,total:total,coin:msg.coin,uid:msg.uid,seatNum:msg.seatNum,totalReward:this.formatMoney(msg.totalReward)};\r\n\r\n        if(BossLavaBasaltfishTypeId == CONST.BossLavaBasalt) {//熔岩玄武 死亡\r\n            cc.warn(\">> 熔岩玄武 触发 特殊子弹统计 错误  msg: \",msg);\r\n        }\r\n        cc.warn(\"1 =====> 计分 ：  \"+total , \"  totalReward  \"+speciaInfo.totalReward , \" seatNum \"+msg.seatNum+\" msg.cannonType \"+msg.cannonType);\r\n        glGame.emitter.emit(CONST.clientEvent.specialBulletStatistics, speciaInfo);\r\n    }\r\n    //玉如意、聚宝盆 更新余额机制 用于 等待开奖之后更新\r\n    if(this[\"isUpdateMoney\"+msg.seatNum]){\r\n        if(myid == Number(msg.uid)){\r\n            this.gold = Number(msg.coin);\r\n            this.checkGold();\r\n            // cc.error(\">> 射击 更新我的钱 4\")\r\n            glGame.emitter.emit(CONST.clientEvent.myUpdateMoney);\r\n        }else {\r\n            // cc.error(\">> 射击 更新其他用户的钱 4\")\r\n            glGame.emitter.emit(CONST.clientEvent.updateShootGold,msg);\r\n        }\r\n    }\r\n}\r\n//仙剑爆炸\r\nfish.onMissileBomb = function(msg){\r\n    cc.warn(\">onMissileBomb 仙剑爆炸 \",msg);\r\n    if(this.fishPoolData == null)return;\r\n    if(this.playerInfo == null || this.playerInfo[Number(msg.uid)] == null){\r\n        cc.warn(\"座位无人\")\r\n        return;\r\n    }\r\n    let seatNum = Number(this.playerInfo[Number(msg.uid)].seatNum);\r\n    msg.seatNum = seatNum;\r\n    cc.warn(\"======== delete ========= 仙剑爆炸 uid \"+Number(msg.uid))\r\n    glGame.emitter.emit(CONST.clientEvent.clearSpecialBulletPool,seatNum);\r\n}\r\n//切换炮台\r\nfish.onChangeCannonLevel = function(msg){\r\n    if(this.fishPoolData == null)return;\r\n    if(this.playerInfo == null || this.playerInfo[Number(msg.uid)] == null){\r\n        cc.warn(\"座位无人，暂无法射击\")\r\n        return;\r\n    }\r\n    msg.seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n    msg.gunType = CONST.CannonType.Normal;\r\n    glGame.emitter.emit(CONST.clientEvent.updateGunRate,msg);\r\n}\r\n//离开房间\r\nfish.onLeaveRoom = function(msg){\r\n    if(this.playerInfo == null){\r\n        this.playerInfo = {};\r\n    }\r\n    if(this.playerInfo[Number(msg.uid)]){\r\n        msg.seatNum = this.playerInfo[Number(msg.uid)].seatNum;\r\n        console.log(\"> 4. 离开房间 \",msg == undefined ? \" nul \" : msg,\" this.playerInfo \",this.playerInfo);\r\n        glGame.emitter.emit(CONST.clientEvent.leaveRoomPlayer,msg);\r\n        glGame.emitter.emit(CONST.clientEvent.leaveRoomUnLock,msg);\r\n        msg.remoeAll = 1;\r\n        this.playerInfo[Number(msg.uid)] = null;\r\n        glGame.emitter.emit(CONST.clientEvent.checkSpecialBullet);\r\n        cc.warn(\">> playerInfo \",this.playerInfo)\r\n    }else{\r\n        cc.error(\">>该用户 从未加入过房间 \",msg);\r\n    }\r\n}\r\n//进入房间\r\nfish.onEnterRoom = function(msg){\r\n    if(this.playerInfo == null){\r\n        this.playerInfo = {};\r\n    }\r\n    let cannonLevel = msg.cannonLevel != null ? msg.cannonLevel : 1;\r\n    this.playerInfo[Number(msg.uid)]                = msg;\r\n    this.playerInfo[Number(msg.uid)].cannonAmount   = 0;\r\n    this.playerInfo[Number(msg.uid)].hitMax         = 0;\r\n    this.playerInfo[Number(msg.uid)].cannonType     = CONST.CannonType.Normal;\r\n    this.playerInfo[Number(msg.uid)].cannonLevel    = cannonLevel == null || cannonLevel == 0 ? 1 : cannonLevel;\r\n    this.playerInfo[Number(msg.uid)].seatNum        = Number(msg.seatId);\r\n    this.playerInfo[Number(msg.uid)].gold           = msg.coin;\r\n    this.playerInfo[Number(msg.uid)].userStatus     = CONST.UserStatus.OnLine;\r\n    console.log(\"> 5. 用户进入房间 \",msg == undefined ? \" nul \" : msg,\" this.playerInfo \",this.playerInfo);\r\n\r\n    cc.warn(\">> 用户进入房间 this.playerInfo \",this.playerInfo)\r\n    glGame.emitter.emit(CONST.clientEvent.comeInPlayer,this.playerInfo[Number(msg.uid)]);\r\n}\r\n//用户掉线显示连线中\r\nfish.onOffline = function(msg){\r\n    if(this.playerInfo == null){\r\n        this.playerInfo = {};\r\n    }\r\n    if(this.playerInfo[Number(msg.uid)]){\r\n        this.playerInfo[Number(msg.uid)].userStatus = CONST.UserStatus.OffLine;\r\n        glGame.emitter.emit(CONST.clientEvent.updateUserStatus, this.playerInfo[Number(msg.uid)]);\r\n    }\r\n}\r\n//用户在线\r\nfish.onOnline = function(msg){\r\n    if(this.playerInfo == null){\r\n        this.playerInfo = {};\r\n    }\r\n    if(this.playerInfo[Number(msg.uid)]){\r\n        this.playerInfo[Number(msg.uid)].userStatus = CONST.UserStatus.OnLine;\r\n        glGame.emitter.emit(CONST.clientEvent.updateUserStatus, this.playerInfo[Number(msg.uid)]);\r\n    }\r\n}\r\n//改变余额 - 后台充值\r\nfish.onCoinChanged = function(msg){\r\n    console.log(\"onCoinChanged > 20. 改变余额 \",msg == undefined ? \" nul \" : msg);\r\n    this.gold               += msg.offset;\r\n    this.dialogPanelIsShow  = true;\r\n    glGame.emitter.emit(CONST.clientEvent.onCoinChanged,msg);\r\n    // cc.error(\">> 射击 更新我的钱 5\")\r\n    glGame.emitter.emit(CONST.clientEvent.myUpdateMoney);\r\n}\r\n//操作回调\r\nfish.onPlayerOp = function(msg){\r\n    if(msg.subGameCode != null && msg.subGameCode != 0){\r\n        cc.error(\">>  onPlayerOp 操作 报错了 \",msg)\r\n    }\r\n}\r\n//获取2个坐标的 夹角角度值，这个方法有点落后和一定的局限性，建议使用 setAngle 方法，效果差不多\r\nfish.getP1ToP2Angle = function(startPos,endPos){\r\n    let comVec = new cc.Vec2(1, 0);                 //计算夹角的参考方向，这里选择x轴正方向,座位 2、3默认值180°旋转\r\n    let dirVec = startPos.sub(endPos);              //获得从startPos指向endPos的方向向量\r\n    let radian = cc.v2(dirVec).signAngle(comVec);   //获得带方向的夹角弧度值(参考方向顺时针为正值，逆时针为负值)\r\n    let ofxAng = 270;                               //偏移量\r\n    let angle  = -(Math.floor(cc.misc.radiansToDegrees(radian))+ofxAng);//将弧度转换为角度\r\n    return angle;\r\n}\r\n//格式化 金额 文本显示\r\nfish.getFloat = function(value){\r\n    return (Number(value).div(100)).toString();\r\n}\r\n//返回保留两位小数的数值\r\nfish.getFixNumber = function (value,facetionDigits = 2) {\r\n    let value1 = Number(value).div(10);\r\n    value = Number(value).div(100);\r\n    if (isNaN(value)) return;\r\n    if (~~value === value) {\r\n        return value.toString();\r\n    } else if (~~value1 === value1) {\r\n        return value.toFixed(facetionDigits-1 < 0 ? 0 : facetionDigits-1 );\r\n    } else {\r\n        return value.toFixed(facetionDigits);\r\n    }\r\n}\r\n//传入一个小数和一个大数获得之间的随机整数值\r\nfish.getRandomNum = function(Min,Max){\r\n    let Range = Number(Max) - Number(Min);\r\n    let Rand = Math.random();\r\n    return (Min + Math.round(Rand * Range));\r\n}\r\n//扩展 - 播放动画\r\nfish.playSpine = function(spineNode,loop,playerdClose,spineName,cb = null,nextPlyName = null,nextLoop = false){\r\n    spineNode.active = true;\r\n    let spine = spineNode.getComponent(sp.Skeleton);\r\n    spine.setCompleteListener((trackEntry, loopCount)=>{\r\n        let name = trackEntry.animation ? trackEntry.animation.name : \"\";\r\n        if(nextPlyName != null){\r\n            if (name == spineName) {\r\n                spine.setAnimation(0,nextPlyName,nextLoop);\r\n                if(playerdClose){\r\n                    spineNode.active = false;\r\n                }\r\n                if(cb){\r\n                    cb(name);\r\n                }\r\n            }\r\n        }else{\r\n            if(playerdClose){\r\n                spineNode.active = false;\r\n            }\r\n            if(cb){\r\n                cb(name);\r\n            }\r\n        }\r\n    })\r\n    spine.setAnimation(0,spineName,loop);\r\n}\r\n//检查余额恢复状态\r\nfish.checkGold = function(){\r\n    let coin = this.baseConsume * this.cannonLevel;\r\n    if(this.gold >= coin){\r\n        this.dialogPanelIsShow = false;\r\n    }\r\n}\r\n//创建特效\r\nfish.creatorEffect = function(){\r\n    let effect  = new cc.Node();\r\n    let spr     = effect.addComponent(cc.Sprite);\r\n    spr.type    = cc.Sprite.Type.SIMPLE;\r\n    spr.sizeMode= cc.Sprite.SizeMode.TRIMMED;\r\n    let script  = effect.addComponent(\"nfish_MovieClip\");\r\n    script.type = 2;\r\n    return effect;\r\n}\r\n//角度旋转180 - 递归\r\nfish.isNeedSet180Angle = function(node,isLog = false){\r\n    if(this.getIsRotation()){\r\n        let len = node.childrenCount;\r\n        this.onSet180Angle(node,isLog);\r\n        for (let i=0;i<len;i++){\r\n            this.onSet180Angle(node.children[i]);\r\n            if(node.children[i].childrenCount > 0){\r\n                this.isNeedSet180Angle(node.children[i]);\r\n            }\r\n        }\r\n    }\r\n}\r\n//开始设置\r\nfish.onSet180Angle = function(node,isLog = false){\r\n    let name = node.name;\r\n    let nodeDesc = CONST.IsNeedRotation[name];\r\n    if(nodeDesc != null && node.isSetting == null) {\r\n        if(nodeDesc.repeat == null){\r\n            node.isSetting = true;\r\n        }\r\n        node.angle = nodeDesc.angle;\r\n        if(nodeDesc.scale != null){\r\n            //初始化 scaleX\r\n            if(nodeDesc.scale.x != null){\r\n                node.scaleX = nodeDesc.scale.x;\r\n            }\r\n            //初始化 scaleY\r\n            if(nodeDesc.scale.y != null){\r\n                node.scaleY = nodeDesc.scale.y;\r\n            }\r\n        }\r\n        if(nodeDesc.offsex != null){\r\n            let widget = node.getComponent(cc.Widget);\r\n            if(widget != null){\r\n                widget.enabled = false;\r\n            }\r\n            //初始化 x\r\n            if(nodeDesc.offsex.x != null){\r\n                node.x = nodeDesc.offsex.x;\r\n            }\r\n            //初始化 y\r\n            if(nodeDesc.offsex.y != null){\r\n                node.y = nodeDesc.offsex.y;\r\n            }\r\n        }\r\n        // //初始化 widget\r\n        if(nodeDesc.widget != null){\r\n            let widget = node.getComponent(cc.Widget);\r\n            if(widget != null){\r\n                if(nodeDesc.widget.top != null)widget.top       = nodeDesc.widget.top;\r\n                if(nodeDesc.widget.bottom != null)widget.bottom = nodeDesc.widget.bottom;\r\n                if(nodeDesc.widget.left != null)widget.left     = nodeDesc.widget.left;\r\n                if(nodeDesc.widget.right != null)widget.right   = nodeDesc.widget.right;\r\n                widget.enabled = true;\r\n                widget.updateAlignment();\r\n            }\r\n        }\r\n\r\n        if(isLog){\r\n            cc.error(\">> name : \"+name)\r\n        }\r\n    }\r\n}\r\n//是否有旋转\r\nfish.getIsRotation = function() {\r\n    return this.isSetAngle && (this.seatNum == CONST.Seat.RightTop || this.seatNum == CONST.Seat.LeftTop);\r\n}\r\n//角度计算器\r\nfish.setAngle = (x2,y2,x1,y1)=>{\r\n    return Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;\r\n}\r\n//格式化货币/100\r\nfish.formatMoney = (value, num = 2)=>{\r\n    if (isNaN(value)) return;\r\n    if (~~value === value) {\r\n        return value.div(100).toString();\r\n    } else {\r\n        value = Number(value).div(100);\r\n        return (Math.floor(value * 100) / 100).toFixed(num);\r\n    }\r\n}\r\n//点击区域合法性\r\nfish.getClickArea = (fish,width,height)=>{\r\n    const Harf = 2;\r\n    const OffsexX = -50;\r\n    const OffsexY = -50;\r\n    if(((cc.winSize.width/Harf - OffsexX ) - Math.abs(fish.x)) > 0 && ((cc.winSize.height/Harf - OffsexY) - Math.abs(fish.y)) > 0){\r\n        return true;\r\n    }else{\r\n        return false;\r\n    }\r\n}\r\n//销毁清理\r\nfish.destroy = function(){\r\n    console.warn(\"destroy fishlogic\")\r\n    if(this.fishPool)this.fishPool.clear();\r\n    if(this.bulletPool)this.bulletPool.clear();\r\n    this.initData();\r\n    this.unregisterEvent();\r\n    g_instance = null;\r\n    cc.log(\">>销毁清理 fishlogic\")\r\n    delete this;\r\n}\r\n//数据中心 单例获取\r\nmodule.exports.getInstance = function (){\r\n    if (!g_instance) {\r\n        g_instance = new fishlogic();\r\n    }\r\n    return g_instance;\r\n}\r\n//销毁Fish数据层\r\nmodule.exports.destroy = function () {\r\n    if (g_instance) {\r\n        console.warn('destroy fishlogic');\r\n        g_instance.destroy();\r\n    }\r\n}"]}