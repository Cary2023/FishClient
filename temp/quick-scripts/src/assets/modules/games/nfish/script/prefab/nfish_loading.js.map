{"version":3,"sources":["assets\\modules\\games\\nfish\\script\\prefab\\nfish_loading.js"],"names":["glGame","baseclass","extend","properties","progress","cc","ProgressBar","lab_percent","Label","lab_loading","onLoad","scene","director","getScene","setloadingSprite","node","active","string","zIndex","emitter","on","MESSAGE","UI","PLAZA_LOADING","plazaloading","setProgress","Math","floor","setloadingTipsSprite","data","completedCount","totalCount","OnDestroy","off","loader","onProgress","onComplete"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AACpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAEC,EAAE,CAACC,WADL;AAERC,IAAAA,WAAW,EAAEF,EAAE,CAACG,KAFR;AAGRC,IAAAA,WAAW,EAAEJ,EAAE,CAACG;AAHR,GADQ;AAMpBE,EAAAA,MANoB,oBAMX;AACL,SAAKC,KAAL,GAAaN,EAAE,CAACO,QAAH,CAAYC,QAAZ,EAAb;AACA,SAAKC,gBAAL;AACA,SAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,SAAKZ,QAAL,CAAcA,QAAd,GAAyB,CAAzB;AACA,SAAKG,WAAL,CAAiBU,MAAjB,GAA0B,IAA1B;AACA,SAAKF,IAAL,CAAUG,MAAV,GAAmB,IAAnB;AACAlB,IAAAA,MAAM,CAACmB,OAAP,CAAeC,EAAf,CAAkBC,OAAO,CAACC,EAAR,CAAWC,aAA7B,EAA4C,KAAKC,YAAjD,EAA+D,IAA/D;AACH,GAdmB;AAgBpBC,EAAAA,WAhBoB,uBAgBRrB,QAhBQ,EAgBE;AAClB,SAAKA,QAAL,CAAcA,QAAd,GAAyBA,QAAzB;AACA,SAAKG,WAAL,CAAiBU,MAAjB,aAA6BS,IAAI,CAACC,KAAL,CAAWvB,QAAQ,GAAG,GAAtB,CAA7B;AACH,GAnBmB;AAqBpB;AACAU,EAAAA,gBAtBoB,8BAsBD;AACf,SAAKL,WAAL,CAAiBQ,MAAjB,GAA0B,OAA1B;AACH,GAxBmB;AA0BpBW,EAAAA,oBA1BoB,kCA0BG;AACnB,SAAKb,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,SAAKZ,QAAL,CAAcA,QAAd,GAAyB,CAAzB;AACA,SAAKG,WAAL,CAAiBU,MAAjB,GAA0B,MAA1B;AACH,GA9BmB;AAgCpB;AACAO,EAAAA,YAjCoB,wBAiCPK,IAjCO,EAiCD;AACf,QAAIzB,QAAQ,GAAGyB,IAAI,CAACC,cAAL,GAAsBD,IAAI,CAACE,UAA1C;;AACA,QAAG3B,QAAQ,GAAG,KAAKA,QAAL,CAAcA,QAA5B,EAAsC;AAClCA,MAAAA,QAAQ,GAAG,KAAKA,QAAL,CAAcA,QAAd,GAAyB,MAApC;AACH;;AAED,QAAGA,QAAQ,GAAG,CAAd,EAAiB;AACbA,MAAAA,QAAQ,GAAG,CAAX;AACH;;AAED,SAAKA,QAAL,CAAcA,QAAd,GAAyBA,QAAzB;AACA,SAAKG,WAAL,CAAiBU,MAAjB,aAA6BS,IAAI,CAACC,KAAL,CAAWvB,QAAQ,GAAG,GAAtB,CAA7B;AACH,GA7CmB;AA+CpB4B,EAAAA,SA/CoB,uBA+CR;AACRhC,IAAAA,MAAM,CAACmB,OAAP,CAAec,GAAf,CAAmBZ,OAAO,CAACC,EAAR,CAAWC,aAA9B,EAA6C,IAA7C;;AACAlB,IAAAA,EAAE,CAAC6B,MAAH,CAAUC,UAAV,GAAuB,YAAM,CAAG,CAAhC;;AACA9B,IAAAA,EAAE,CAAC6B,MAAH,CAAUE,UAAV,GAAuB,YAAM,CAAG,CAAhC;AACH;AAnDmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        progress: cc.ProgressBar,\r\n        lab_percent: cc.Label,\r\n        lab_loading: cc.Label,\r\n    },\r\n    onLoad() {\r\n        this.scene = cc.director.getScene();\r\n        this.setloadingSprite();\r\n        this.node.active = true;\r\n        this.progress.progress = 0;\r\n        this.lab_percent.string = '0%';\r\n        this.node.zIndex = 1000;\r\n        glGame.emitter.on(MESSAGE.UI.PLAZA_LOADING, this.plazaloading, this);\r\n    },\r\n\r\n    setProgress(progress) {\r\n        this.progress.progress = progress;\r\n        this.lab_percent.string = `${Math.floor(progress * 100)}%`;\r\n    },\r\n\r\n    //加载界面设置不同的图片\r\n    setloadingSprite() {\r\n        this.lab_loading.string = '正在加载中';\r\n    },\r\n\r\n    setloadingTipsSprite() {\r\n        this.node.active = true;\r\n        this.progress.progress = 1;\r\n        this.lab_percent.string = '100%';\r\n    },\r\n\r\n    //加载界面读条设置\r\n    plazaloading(data) {\r\n        let progress = data.completedCount / data.totalCount;\r\n        if(progress < this.progress.progress) {\r\n            progress = this.progress.progress + 0.0001;\r\n        }\r\n\r\n        if(progress > 1) {\r\n            progress = 1;\r\n        }\r\n\r\n        this.progress.progress = progress;\r\n        this.lab_percent.string = `${Math.floor(progress * 100)}%`;\r\n    },\r\n\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.PLAZA_LOADING, this);\r\n        cc.loader.onProgress = () => { };\r\n        cc.loader.onComplete = () => { }\r\n    },\r\n});\r\n"]}