{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\userInfo\\popups\\bankmodifypsw.js"],"names":["glGame","baseclass","extend","properties","usedpsw","cc","EditBox","newpsw","confirmpsw","onLoad","emitter","on","editpswsuccess","onClick","name","node","click_confirm","click_close","console","error","psw","checkPassword","string","user","reqEditPwd","remove","panel","showErrorTip","tips","EDITBOX","OLDPSW","test","PSWWRONGFUL","NEWPSWNULL","NEWPSWWRONGFUL","CONFIRMNEWPSW","CONFIRMPSWWRONGFUL","OLDNEWPSWEQUALS","PSWCOFAIL","NUMBERIC6","old_pwd","md5","pwd","type","set","key","value","get","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 修改银行密码\r\n */\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        usedpsw: cc.EditBox,    // 旧密码\r\n        newpsw: cc.EditBox,     // 新密码\r\n        confirmpsw: cc.EditBox  // 确认新密码\r\n    },\r\n    onLoad() {\r\n        glGame.emitter.on(\"editpswsuccess\", this.editpswsuccess, this);\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"confirm\": this.click_confirm(); break;\r\n            case \"btn_close\": this.click_close(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_confirm() {\r\n        let psw = this.checkPassword(this.usedpsw.string, this.newpsw.string, this.confirmpsw.string);\r\n        if (psw) {\r\n            glGame.user.reqEditPwd(psw);\r\n        }\r\n    },\r\n    click_close() {\r\n        this.remove();\r\n    },\r\n    editpswsuccess() {\r\n        this.usedpsw.string = \"\";\r\n        this.newpsw.string = \"\";\r\n        this.confirmpsw.string = \"\";\r\n        this.remove();\r\n    },\r\n    // 密码检查\r\n    checkPassword(usedpsw, newpsw, confirmpsw) {\r\n        if (!usedpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.OLDPSW);\r\n            return null;\r\n        }\r\n        if (!/\\w$/.test(usedpsw)) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.PSWWRONGFUL);\r\n            return null;\r\n        }\r\n        if (!newpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.NEWPSWNULL);\r\n            return null;\r\n        }\r\n        if (!/\\w$/.test(newpsw)) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.NEWPSWWRONGFUL);\r\n            return null;\r\n        }\r\n        if (!confirmpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.CONFIRMNEWPSW);\r\n            return null;\r\n        }\r\n        if (!/\\w$/.test(confirmpsw)) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.CONFIRMPSWWRONGFUL);\r\n            return null;\r\n        }\r\n        if (usedpsw === newpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.OLDNEWPSWEQUALS);\r\n            return null;\r\n        }\r\n        if (newpsw !== confirmpsw) {\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.PSWCOFAIL);\r\n            return null;\r\n        }\r\n        if(!/^[0-9]{6,6}$/.test(newpsw)){\r\n            glGame.panel.showErrorTip(glGame.tips.EDITBOX.NUMBERIC6);\r\n            return null\r\n        }\r\n        return { old_pwd: md5(usedpsw), pwd: md5(newpsw), type: 2 };\r\n    },\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(\"editpswsuccess\", this);\r\n    },\r\n});\r\n"]}