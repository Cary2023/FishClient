{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\historybrokerage.js"],"names":["glGame","baseclass","extend","properties","histroyCommission","cc","Prefab","norecord","Node","infoItem","content","Lab_CurPage","Label","Lab_totalPage","history_direct_achievement","history_achievement","history_commission","kuang","onLoad","page","string","date","onClick","name","node","remove","pageup_CB","pagedown_CB","btn_detailCB","ReqPlayerExtensionCountlessRecord","gameNet","send_msg","page_size","route","msg","recordData","page_total","setTable","list","initUI","data","getFloat","totalPage","destroyAllChildren","removeAllChildren","count","length","active","hiadShowNode","i","instantiate","parent","getChildByName","getComponent","direct_achievement","DirectCommission","direct_commission","panel","settingTableLabelColor","achievement","teamDiffachieve","sub_commission","totalCommission","showEffectNode","isBool","value","Number","div","toString","histroyCommissiondata","showChildPanel","script","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        histroyCommission: cc.Prefab,\r\n        norecord: cc.Node,//noneLab\r\n        infoItem: cc.Node,\r\n        content: cc.Node,\r\n        Lab_CurPage: cc.Label,\r\n        Lab_totalPage: cc.Label,\r\n\r\n        history_direct_achievement: cc.Label,\r\n        history_achievement: cc.Label,\r\n        history_commission: cc.Label,\r\n\r\n        kuang: cc.Node,\r\n    },\r\n    onLoad() {\r\n        this.page = 1;\r\n        this.Lab_CurPage.string = this.page;\r\n        this.date = \"\";\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"close\": this.remove(); break;\r\n            case \"btn_pageup\": this.pageup_CB(); break;\r\n            case \"btn_pagedown\": this.pagedown_CB(); break;\r\n            case \"btn_detail\": this.btn_detailCB(node); break;\r\n        }\r\n    },\r\n    ReqPlayerExtensionCountlessRecord() {\r\n        let page = this.page,\r\n            date = this.date;\r\n        this.Lab_CurPage.string = this.page;\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessRecord', { page: page, date: date, page_size: 8 }, (route, msg) => {\r\n            this.recordData = msg;\r\n            this.Lab_CurPage.string = page;\r\n            this.Lab_totalPage.string = this.recordData.page_total == 0 ? 1 : this.recordData.page_total;\r\n            this.setTable(this.recordData.list);\r\n        })\r\n    },\r\n    initUI(data) {\r\n        this.recordData = data;\r\n        this.history_direct_achievement.string = this.getFloat(this.recordData.history_direct_achievement);\r\n        this.history_achievement.string = this.getFloat(this.recordData.history_achievement);\r\n        this.history_commission.string = this.getFloat(this.recordData.history_commission);\r\n        this.totalPage = this.recordData.page_total\r\n        this.Lab_totalPage.string = this.recordData.page_total == 0 ? 1 : this.recordData.page_total;\r\n        this.setTable(this.recordData.list);\r\n    },\r\n    setTable(data) {\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        let count = data.length;\r\n        if (count == 0) {\r\n            this.norecord.active = true;\r\n            return;\r\n        }\r\n        this.hiadShowNode(count > 0);\r\n        for (let i = 0; i < count; i++) {\r\n            let infoItem = cc.instantiate(this.infoItem);\r\n            infoItem.parent = this.content;\r\n            infoItem.active = false;\r\n            infoItem.getChildByName(\"bg\").active = i % 2 == 1;\r\n            infoItem.getChildByName(\"time\").getComponent(cc.Label).string = data[i].date;\r\n            infoItem.getChildByName(\"Directachieve\").getComponent(cc.Label).string = this.getFloat(data[i].direct_achievement);     //直推业绩\r\n\r\n            let DirectCommission = infoItem.getChildByName(\"DirectCommission\")\r\n            DirectCommission.getComponent(cc.Label).string = this.getFloat(data[i].direct_commission);   //直推佣金\r\n            glGame.panel.settingTableLabelColor(DirectCommission);\r\n\r\n            infoItem.getChildByName(\"teamachieve\").getComponent(cc.Label).string = this.getFloat(data[i].achievement);              //团队业绩\r\n            let teamDiffachieve = infoItem.getChildByName(\"teamDiffachieve\")\r\n            teamDiffachieve.getComponent(cc.Label).string = this.getFloat(data[i].sub_commission);       //级差佣金\r\n            glGame.panel.settingTableLabelColor(teamDiffachieve);\r\n\r\n            let totalCommission = infoItem.getChildByName(\"totalCommission\")\r\n            totalCommission.getComponent(cc.Label).string = this.getFloat(data[i].direct_commission + data[i].sub_commission);\r\n            glGame.panel.settingTableLabelColor(totalCommission);\r\n\r\n            infoItem.name = `${data[i].date}`\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n    hiadShowNode(isBool) {\r\n        this.node.getChildByName(\"btn_pageup\").active = isBool;\r\n        this.node.getChildByName(\"pagelayout\").active = isBool;\r\n        this.node.getChildByName(\"btn_pagedown\").active = isBool;\r\n        this.node.getChildByName(\"explain\").active = isBool;\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    btn_detailCB(node) {\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessRecordDetail', { page: 1, date: node.parent.name, page_size: 8 }, (route, msg) => {\r\n            this.histroyCommissiondata = msg;\r\n            let histroyCommission = glGame.panel.showChildPanel(this.histroyCommission, this.node.parent.parent);\r\n            let script = histroyCommission.getComponent(\"histroyCommission\");\r\n            script.initUI(this.histroyCommissiondata, node.parent.name);\r\n        })\r\n    },\r\n\r\n    pageup_CB() {\r\n        this.page--\r\n        if (this.page < 1) {\r\n            this.page = 1\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessRecord()\r\n    },\r\n    pagedown_CB() {\r\n        this.page++;\r\n        if (this.page > Number(this.Lab_totalPage.string)) {\r\n            this.page = Number(this.Lab_totalPage.string);\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessRecord()\r\n    },\r\n    OnDestroy() {\r\n    },\r\n});\r\n"]}