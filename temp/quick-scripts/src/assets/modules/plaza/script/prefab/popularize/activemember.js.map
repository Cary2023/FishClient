{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\activemember.js"],"names":["glGame","baseclass","extend","properties","content","cc","Node","effectiveItem","Lab_condition","RichText","effectivemember","Label","achiveData","onLoad","ReqPlayerExtensionCountlessReward","gameNet","send_msg","route","msg","TaskData","str","recharge","getFloat","bet","string","effective_number","audit","setTable","list","console","log","ReqPlayerExtensionCountlessRewardApply","id","data","i","length","instantiate","parent","active","strTip","number","getChildByName","getComponent","Count","j","reward","strReward","state","name","panel","showEffectNode","value","Number","div","toString","onClick","node","remove","btn_receivedCB","strTitle","tips","POPULARIZE","GETMEMBERPRIZE","showAwardBox","type","awardtype","COIN","isCloseRed","user","ReqRedDot","reqGetCoin","emitter","emit","initUI"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AAEpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAEC,EAAE,CAACC,IADJ;AAERC,IAAAA,aAAa,EAAEF,EAAE,CAACC,IAFV;AAGRE,IAAAA,aAAa,EAAEH,EAAE,CAACI,QAHV;AAIRC,IAAAA,eAAe,EAAEL,EAAE,CAACM,KAJZ;AAKRC,IAAAA,UAAU,EAAEP,EAAE,CAACM;AALP,GAFQ;AAUpBE,EAAAA,MAVoB,oBAUX;AACL,SAAKC,iCAAL;AACH,GAZmB;AAapBA,EAAAA,iCAboB,+CAagB;AAAA;;AAChCd,IAAAA,MAAM,CAACe,OAAP,CAAeC,QAAf,CAAwB,wCAAxB,EAAkE,EAAlE,EAAsE,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAClF,MAAA,KAAI,CAACC,QAAL,GAAgBD,GAAhB;AACA,UAAIE,GAAG,GAAG,KAAI,CAACD,QAAL,CAAcE,QAAd,IAA0B,CAA1B,gKAA2E,KAAI,CAACC,QAAL,CAAc,KAAI,CAACH,QAAL,CAAcE,QAA5B,CAA3E,gFAAmJ,KAAI,CAACC,QAAL,CAAc,KAAI,CAACH,QAAL,CAAcI,GAA5B,CAAnJ,oBAAV;AACA,MAAA,KAAI,CAACf,aAAL,CAAmBgB,MAAnB,GAA4BJ,GAA5B;AACA,MAAA,KAAI,CAACV,eAAL,CAAqBc,MAArB,GAA8B,KAAI,CAACL,QAAL,CAAcM,gBAA5C;AACA,MAAA,KAAI,CAACb,UAAL,CAAgBY,MAAhB,2FAAyC,KAAI,CAACL,QAAL,CAAcO,KAAvD;;AACA,MAAA,KAAI,CAACC,QAAL,CAAcT,GAAG,CAACU,IAAlB;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBZ,GAAzB;AACH,KARD;AASH,GAvBmB;AAwBpBa,EAAAA,sCAxBoB,kDAwBmBC,EAxBnB,EAwBuB,CAE1C,CA1BmB;AA2BpBL,EAAAA,QA3BoB,oBA2BXM,IA3BW,EA2BL;AAEX,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,UAAI3B,aAAa,GAAGF,EAAE,CAAC+B,WAAH,CAAe,KAAK7B,aAApB,CAApB;AACAA,MAAAA,aAAa,CAAC8B,MAAd,GAAuB,KAAKjC,OAA5B;AACAG,MAAAA,aAAa,CAAC+B,MAAd,GAAuB,KAAvB;AACA,UAAIC,MAAM,mFAA+BN,IAAI,CAACC,CAAD,CAAJ,CAAQM,MAAvC,oBAAV;AACAjC,MAAAA,aAAa,CAACkC,cAAd,CAA6B,eAA7B,EAA8CC,YAA9C,CAA2DrC,EAAE,CAACI,QAA9D,EAAwEe,MAAxE,GAAiFe,MAAjF;AACA,UAAII,KAAK,GAAG,CAAZ;;AACA,WAAK,IAAIC,CAAC,GAAGV,CAAb,EAAgBU,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AACzBD,QAAAA,KAAK,IAAIV,IAAI,CAACW,CAAD,CAAJ,CAAQC,MAAjB;AACH;;AACD,UAAIC,SAAS,qDAA0B,KAAKxB,QAAL,CAAcW,IAAI,CAACC,CAAD,CAAJ,CAAQW,MAAtB,CAA1B,yDAAuF,KAAKvB,QAAL,CAAcqB,KAAd,CAAvF,qBAAb;AACApC,MAAAA,aAAa,CAACkC,cAAd,CAA6B,YAA7B,EAA2CC,YAA3C,CAAwDrC,EAAE,CAACI,QAA3D,EAAqEe,MAArE,GAA8EsB,SAA9E;AACAvC,MAAAA,aAAa,CAACkC,cAAd,CAA6B,cAA7B,EAA6CH,MAA7C,GAAsDL,IAAI,CAACC,CAAD,CAAJ,CAAQa,KAAR,IAAiB,CAAvE;;AACA,UAAId,IAAI,CAACC,CAAD,CAAJ,CAAQa,KAAR,IAAiB,CAArB,EAAwB;AACpBxC,QAAAA,aAAa,CAACkC,cAAd,CAA6B,YAA7B,EAA2CH,MAA3C,GAAoD,IAApD;AACA/B,QAAAA,aAAa,CAACkC,cAAd,CAA6B,YAA7B,EAA2CC,YAA3C,CAAwDrC,EAAE,CAACM,KAA3D,EAAkEa,MAAlE,mBAA+ES,IAAI,CAACC,CAAD,CAAJ,CAAQM,MAAR,GAAiB,KAAKrB,QAAL,CAAcM,gBAA9G;AACH;;AACDlB,MAAAA,aAAa,CAACkC,cAAd,CAA6B,cAA7B,EAA6CH,MAA7C,GAAsDL,IAAI,CAACC,CAAD,CAAJ,CAAQa,KAAR,IAAiB,CAAvE;AACAxC,MAAAA,aAAa,CAACkC,cAAd,CAA6B,IAA7B,EAAmCH,MAAnC,GAA4CJ,CAAC,GAAG,CAAJ,IAAS,CAArD;AACA3B,MAAAA,aAAa,CAACyC,IAAd,aAAwBd,CAAxB;AACH;;AACDlC,IAAAA,MAAM,CAACiD,KAAP,CAAaC,cAAb,CAA4B,IAA5B,EAAiC,KAAK9C,OAAtC,EAA8C,IAA9C,EAAmD,IAAnD;AACH,GAnDmB;AAoDpBkB,EAAAA,QApDoB,oBAoDX6B,KApDW,EAoDJ;AACZ,WAAQC,MAAM,CAACD,KAAD,CAAN,CAAcE,GAAd,CAAkB,GAAlB,CAAD,CAAyBC,QAAzB,EAAP;AACH,GAtDmB;AAuDpBC,EAAAA,OAvDoB,mBAuDZP,IAvDY,EAuDNQ,IAvDM,EAuDA;AAChB,YAAQR,IAAR;AACI,WAAK,WAAL;AAAkB,aAAKS,MAAL;AAAe;;AACjC,WAAK,cAAL;AAAqB,aAAKC,cAAL,CAAoBF,IAApB;AAA2B;;AAChD;AAAS;AAHb;AAKH,GA7DmB;AA+DpBE,EAAAA,cA/DoB,0BA+DLF,IA/DK,EA+DC;AAAA;;AACjB,QAAIxB,EAAE,GAAG,KAAKb,QAAL,CAAcS,IAAd,CAAmB4B,IAAI,CAACnB,MAAL,CAAYW,IAA/B,EAAqChB,EAA9C;AACAhC,IAAAA,MAAM,CAACe,OAAP,CAAeC,QAAf,CAAwB,6CAAxB,EAAuE;AAAEgB,MAAAA,EAAE,EAAEA;AAAN,KAAvE,EAAmF,UAACf,KAAD,EAAQC,GAAR,EAAgB;AAC/FsC,MAAAA,IAAI,CAACnB,MAAL,CAAYI,cAAZ,CAA2B,cAA3B,EAA2CH,MAA3C,GAAoD,IAApD;AACAkB,MAAAA,IAAI,CAAClB,MAAL,GAAc,KAAd;AACA,UAAIqB,QAAQ,GAAG3D,MAAM,CAAC4D,IAAP,CAAYC,UAAZ,CAAuBC,cAAtC;AACA9D,MAAAA,MAAM,CAACiD,KAAP,CAAac,YAAb,CAA0BJ,QAA1B,EAAoC,CAAC;AAAEK,QAAAA,IAAI,EAAEhE,MAAM,CAACiE,SAAP,CAAiBC,IAAzB;AAA+Bf,QAAAA,KAAK,EAAE,MAAI,CAAC7B,QAAL,CAAc,MAAI,CAACH,QAAL,CAAcS,IAAd,CAAmB4B,IAAI,CAACnB,MAAL,CAAYW,IAA/B,EAAqCH,MAAnD;AAAtC,OAAD,CAApC;AACA,MAAA,MAAI,CAAC1B,QAAL,CAAcS,IAAd,CAAmB4B,IAAI,CAACnB,MAAL,CAAYW,IAA/B,EAAqCD,KAArC,GAA6C,CAA7C;;AACA,MAAA,MAAI,CAACoB,UAAL;;AACAnE,MAAAA,MAAM,CAACoE,IAAP,CAAYC,SAAZ;AACArE,MAAAA,MAAM,CAACoE,IAAP,CAAYE,UAAZ;AACH,KATD;AAUH,GA3EmB;AA4EpBH,EAAAA,UA5EoB,wBA4EP;AACT,QAAIlC,IAAI,GAAG,KAAKd,QAAL,CAAcS,IAAzB;;AACA,SAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,UAAGD,IAAI,CAACC,CAAD,CAAJ,CAAQa,KAAR,IAAiB,CAApB,EAAsB;AAClB;AACH;AACJ;;AACD/C,IAAAA,MAAM,CAACuE,OAAP,CAAeC,IAAf,CAAoB,gBAApB;AACH,GApFmB;AAqFpBC,EAAAA,MArFoB,kBAqFbxC,IArFa,EAqFP;AACTJ,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBG,IAAzB;AACH;AAvFmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        content: cc.Node,\r\n        effectiveItem: cc.Node,\r\n        Lab_condition: cc.RichText,\r\n        effectivemember: cc.Label,\r\n        achiveData: cc.Label,\r\n    },\r\n\r\n    onLoad() {\r\n        this.ReqPlayerExtensionCountlessReward();\r\n    },\r\n    ReqPlayerExtensionCountlessReward() {\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessReward', {}, (route, msg) => {\r\n            this.TaskData = msg;\r\n            let str = this.TaskData.recharge == 0 ? `您的下级无条件成为团队有效成员` : `存款金额达到 <color=#f4c404>${this.getFloat(this.TaskData.recharge)}</color> 元，打码量达到 <color=#f4c404>${this.getFloat(this.TaskData.bet)}</color> 元`\r\n            this.Lab_condition.string = str;\r\n            this.effectivemember.string = this.TaskData.effective_number;\r\n            this.achiveData.string = `以上奖励，只需要打码量达到${this.TaskData.audit}倍即可提现`\r\n            this.setTable(msg.list)\r\n            console.log(\"这是任务列表的消息\", msg)\r\n        })\r\n    },\r\n    ReqPlayerExtensionCountlessRewardApply(id) {\r\n\r\n    },\r\n    setTable(data) {\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n            let effectiveItem = cc.instantiate(this.effectiveItem);\r\n            effectiveItem.parent = this.content;\r\n            effectiveItem.active = false;\r\n            let strTip = `直属下级有效成员达 <color=#f4c404>${data[i].number}</color> 人`\r\n            effectiveItem.getChildByName(\"Lab_condition\").getComponent(cc.RichText).string = strTip;\r\n            let Count = 0;\r\n            for (let j = i; j >= 0; j--) {\r\n                Count += data[j].reward\r\n            }\r\n            let strReward = `额外奖励 <color=#f4c404>${this.getFloat(data[i].reward)}</color> 元(累积 <color=#f4c404>${this.getFloat(Count)}</color> 元)`\r\n            effectiveItem.getChildByName(\"Lab_reward\").getComponent(cc.RichText).string = strReward;\r\n            effectiveItem.getChildByName(\"Havereceived\").active = data[i].state == 0;\r\n            if (data[i].state == 2) {\r\n                effectiveItem.getChildByName(\"needpeople\").active = true;\r\n                effectiveItem.getChildByName(\"needpeople\").getComponent(cc.Label).string = `差${data[i].number - this.TaskData.effective_number}人`\r\n            }\r\n            effectiveItem.getChildByName(\"btn_received\").active = data[i].state == 1;\r\n            effectiveItem.getChildByName(\"bg\").active = i % 2 == 1;\r\n            effectiveItem.name = `${i}`;\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            case \"btn_received\": this.btn_receivedCB(node); break;\r\n            default: break;\r\n        }\r\n    },\r\n\r\n    btn_receivedCB(node) {\r\n        let id = this.TaskData.list[node.parent.name].id\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessRewardApply', { id: id }, (route, msg) => {\r\n            node.parent.getChildByName(\"Havereceived\").active = true;\r\n            node.active = false;\r\n            let strTitle = glGame.tips.POPULARIZE.GETMEMBERPRIZE;\r\n            glGame.panel.showAwardBox(strTitle, [{ type: glGame.awardtype.COIN, value: this.getFloat(this.TaskData.list[node.parent.name].reward)}]);\r\n            this.TaskData.list[node.parent.name].state = 3;\r\n            this.isCloseRed();\r\n            glGame.user.ReqRedDot();\r\n            glGame.user.reqGetCoin();\r\n        })\r\n    },\r\n    isCloseRed() {\r\n        let data = this.TaskData.list;\r\n        for (let i = 0; i < data.length; i++) {\r\n            if(data[i].state == 1){\r\n                return\r\n            }\r\n        }\r\n        glGame.emitter.emit(\"activeRedclose\");\r\n    },\r\n    initUI(data) {\r\n        console.log(\"这是本条数据的显示\", data)\r\n    }\r\n});\r\n"]}