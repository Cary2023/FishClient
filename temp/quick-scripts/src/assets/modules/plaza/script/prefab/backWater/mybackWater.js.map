{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\backWater\\mybackWater.js"],"names":["WATER_TIMING","WATER_REALTIME","GAME_VARIETY_TAB","tabs_qipai","tabs_jieji","tabs_buyu","tabs_shixun","tabs_tiyu","tabs_caipiao","tabs_dianjing","glGame","baseclass","extend","properties","typeNodeList","cc","Node","today_bet","Label","today_back","curback","time","timestrip","cfgContent","cfgItem","btn_applyback","Button","btn_rtimeback","end_backtip","wfsWenhao","klqWenhao","dmtips","fstips","onLoad","registerEvent","type","gameRecord","user","ReqRebateRecord","accountId","userID","clickNode","node","getChildByName","on","EventType","TOUCH_START","active","clickMask","setSelectToggle","name","initContent","player_config","removeAllChildren","gameRebateDetail","gameOrPlatMap","index","Object","keys","key","data","item","instantiate","parent","height","getComponent","string","cutFloat","betting","Number","proportion","mul","toFixed","number","panel","settingTableLabelColor","showEffectNode","initOtherUI","betCoin","allRebateCoin","canReceive","rebateCoin","setEndbacktip","rebateType","interactable","rebateExpirationTime","emitter","updateReqRebateRecord","updateReqRebateApply","unRegisterEvent","off","OnDestroy","get","msg","coin","strContent","tips","BACKWATER","GIVENOTICE","format","APPLYSUCCESS","showMsgBox","onClick","isTourist","indexOf","showRegisteredGift","applyback_cb","dmwenhao_cb","fswenhao_cb","selectClick","switchPlatform","titleContent","isGameOpen","typeList","id","count","length","i","value","div","toString","minReceiveAmount","showErrorTip","MINLIMIT","ReqRebateApply","stopAllActions","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 返水信息面板\r\n * 有效投注*比例 = 返水金额\r\n * 今日有效投注 = 总的子游戏有效投注之和\r\n * 今日预计返水 = 总的子游戏返水金额之和\r\n */\r\nconst WATER_TIMING = 1;     //定时返水\r\nconst WATER_REALTIME = 2;   //实时返水\r\n\r\n\r\n// key 为控件名称， value 为与服务端约定好的数组名称\r\nconst GAME_VARIETY_TAB = {\r\n    tabs_qipai: \"pokerConfig\",              //棋牌\r\n    tabs_jieji: \"arcadeConfig\",             //街机\r\n    tabs_buyu: \"fishConfig\",                //捕鱼\r\n    tabs_shixun: \"videoConfig\",             //视讯\r\n    tabs_tiyu: \"sportsConfig\",              //体育\r\n    tabs_caipiao: \"lotteryConfig\",          //彩票\r\n    tabs_dianjing: \"electronicSportsConfig\",//电竞\r\n}\r\n\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        typeNodeList: cc.Node,\r\n        today_bet: cc.Label,        //未返水有效投注\r\n        today_back: cc.Label,       //今日预计返水\r\n        curback: cc.Label,          //返水数额\r\n        time: cc.Label,             //返水结算时间\r\n\r\n        timestrip: cc.Node,        //非实时返水数据\r\n\r\n        cfgContent: cc.Node,\r\n        cfgItem: cc.Node,\r\n        btn_applyback: cc.Button,\r\n        btn_rtimeback: cc.Node,\r\n\r\n        end_backtip: [cc.Node],\r\n        wfsWenhao: cc.Node,         //未返水问号\r\n        klqWenhao: cc.Node,         //可领取问号\r\n        dmtips: cc.Node,            //打码提示\r\n        fstips: cc.Node,            //返水提示\r\n    },\r\n\r\n    onLoad() {\r\n        this.registerEvent()\r\n        this.type = 0;    \r\n        this.gameRecord = null;\r\n        glGame.user.ReqRebateRecord({\r\n            accountId: glGame.user.userID,\r\n            type: 0,\r\n        });\r\n\r\n        let clickNode = this.node.getChildByName(\"clickmask\");\r\n        clickNode.on(cc.Node.EventType.TOUCH_START, ()=> {\r\n            this.dmtips.active = false;\r\n            this.fstips.active = false;\r\n            this.clickMask.active = false;\r\n        }, this);\r\n        clickNode.active = false;\r\n        this.clickMask = clickNode;\r\n    },\r\n\r\n    //设置对应关系处理\r\n    setSelectToggle(name) {\r\n    },\r\n\r\n    //棋牌返水\r\n    initContent(player_config) {\r\n        this.cfgContent.removeAllChildren();\r\n\r\n        let gameRebateDetail = this.gameRecord.gameRebateDetail;\r\n        let gameOrPlatMap = this.gameRecord.gameOrPlatMap;\r\n\r\n        if(!gameRebateDetail[this.type]) {\r\n            this.node.getChildByName(\"img_wodefanshui\").active = true;\r\n            return;\r\n        }\r\n        \r\n        let index = 0;\r\n        if (Object.keys(gameRebateDetail[this.type]) == 0) {\r\n            this.node.getChildByName(\"img_wodefanshui\").active = true;\r\n            return;\r\n        }\r\n\r\n        gameRebateDetail = gameRebateDetail[this.type];\r\n\r\n        for (let key in gameRebateDetail) {\r\n            let data = gameRebateDetail[key];\r\n            let item = cc.instantiate(this.cfgItem);\r\n            item.parent = this.cfgContent;\r\n            this.cfgContent.height += item.height;\r\n            item.active = false;\r\n            item.getChildByName(\"game\").getComponent(cc.Label).string = data.name;            //游戏ID\r\n            item.getChildByName(\"bet\").getComponent(cc.Label).string = `${this.cutFloat(data.betting)}`;            //有效投注\r\n            item.getChildByName(\"porpor\").getComponent(cc.Label).string = `${Number(data.proportion).mul(100).toFixed(2)}%`;\r\n            item.getChildByName(\"coin\").getComponent(cc.Label).string = `${this.cutFloat(data.number)}`;     //返水金额\r\n            glGame.panel.settingTableLabelColor(item.getChildByName(\"coin\"));\r\n            item.getChildByName(\"bg\").active = index % 2 == 0\r\n            index++;\r\n        }\r\n        this.node.getChildByName(\"img_wodefanshui\").active = index == 0;\r\n        glGame.panel.showEffectNode(this,this.cfgContent,0.02,true);\r\n    },\r\n\r\n    //渲染上下部的其他UI\r\n    initOtherUI() {\r\n        this.today_bet.string = `${this.cutFloat(this.gameRecord.betCoin)}`;\r\n        let allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);\r\n        this.setEndbacktip();\r\n\r\n        if (this.gameRecord.rebateType == WATER_REALTIME) {\r\n            // 实时返水\r\n            this.btn_applyback.node.active = false;\r\n            this.btn_rtimeback.active = true;\r\n            this.timestrip.active = false;\r\n\r\n            this.today_back.string = `${this.cutFloat(allRebateCoin)}`;\r\n            // this.btn_rtimeback.getComponent(cc.Button).interactable = allRebateCoin != 0;\r\n            \r\n        } else {\r\n            // 定时返水\r\n            this.btn_rtimeback.active = false;\r\n            this.timestrip.active = true;\r\n\r\n            this.today_back.string = `${this.cutFloat(this.gameRecord.rebateCoin)}`;\r\n            this.curback.string = `${this.cutFloat(this.gameRecord.canReceive)}`;\r\n            this.time.string = `${this.gameRecord.time}`;\r\n\r\n            this.btn_applyback.node.active = true;\r\n            this.btn_applyback.interactable = this.gameRecord.canReceive != 0;;\r\n        }\r\n\r\n        this.klqWenhao.active = this.gameRecord.rebateType == WATER_TIMING && this.gameRecord.rebateExpirationTime != 0;\r\n        this.wfsWenhao.active = this.gameRecord.rebateType == WATER_REALTIME && this.gameRecord.rebateExpirationTime != 0;\r\n    },\r\n\r\n    setEndbacktip() {\r\n        if (this.gameRecord.rebateType == WATER_REALTIME) {\r\n            this.end_backtip[0].active = false;\r\n            this.end_backtip[1].active = true;\r\n        } else {\r\n            this.end_backtip[0].active = true;\r\n            this.end_backtip[1].active = false;\r\n        }\r\n    },\r\n\r\n    registerEvent() {\r\n        glGame.emitter.on(\"updateReqRebateRecord\", this.updateReqRebateRecord, this);\r\n        glGame.emitter.on(\"updateReqRebateApply\", this.updateReqRebateApply, this);\r\n    },\r\n\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"updateReqRebateRecord\", this);\r\n        glGame.emitter.off(\"updateReqRebateApply\", this);\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n\r\n    updateReqRebateRecord() {\r\n        this.gameRecord = glGame.user.get(\"userPumpRecord\");\r\n        if (!this.gameRecord) {\r\n            return glGame.user.ReqRebateRecord();\r\n        }\r\n\r\n        this.initOtherUI();\r\n        this.initContent();\r\n    },\r\n\r\n    //领取返水成功\r\n    updateReqRebateApply(msg) {\r\n        let coin = msg.coin || 0;        //暂时\r\n        let strContent = \"\";\r\n        if (msg.type == 1) {\r\n            strContent = glGame.tips.BACKWATER.GIVENOTICE.format(`${this.cutFloat(coin)}`);\r\n        } else if (msg.type == 3) {\r\n            strContent = glGame.tips.BACKWATER.APPLYSUCCESS.format(`${this.cutFloat(coin)}`);\r\n        }\r\n\r\n        glGame.panel.showMsgBox(\"\", strContent);\r\n        glGame.user.ReqRebateRecord();\r\n    },\r\n\r\n    onClick(name, node) {\r\n        if (glGame.user.isTourist()) {\r\n            if (name != 'close' && name.indexOf(\"tabs_\") == -1) {\r\n                glGame.panel.showRegisteredGift(true);\r\n                return;\r\n            }\r\n        }\r\n\r\n        switch (name) {\r\n            case \"btn_applyback\": this.applyback_cb(); break;\r\n            case \"btn_rtimeback\": this.applyback_cb(); break;\r\n            case \"btn_dmwenhao\": this.dmwenhao_cb(); break;\r\n            case \"btn_fswenhao\": this.fswenhao_cb(); break;\r\n            default:\r\n                if (name.indexOf(\"tabs_\") > -1) this.selectClick(name);\r\n                break;\r\n        }\r\n    },\r\n\r\n    selectClick(name) {\r\n        this.switchPlatform(GAME_VARIETY_TAB[name]);\r\n        this.initContent();\r\n    },\r\n\r\n    // 切换平台\r\n    switchPlatform(type) {\r\n        this.type = type;\r\n        this.titleContent.getChildByName(\"img_yx\").active = this.type == 2 || this.type == 0;\r\n        this.titleContent.getChildByName(\"img_yxpt\").active = this.type != 2 && this.type != 0;\r\n    },\r\n\r\n    ReqRebateRecord() {\r\n        glGame.user.ReqRebateRecord({\r\n            accountId: glGame.user.userID,\r\n            type: 1,\r\n        });\r\n    },\r\n\r\n    // 游戏是否开启\r\n    isGameOpen(typeList, id) {\r\n        let count = typeList.length;\r\n        for(let i = 0; i < count; i++) {\r\n            if(typeList[i].id == id) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    //浮点型运算取俩位\r\n    cutFloat(value) {\r\n        return Number(value).div(100).toFixed(2).toString();\r\n    },\r\n\r\n    applyback_cb() {\r\n        let allRebateCoin = Number(this.gameRecord.canReceive);\r\n        if(this.gameRecord.rebateType == WATER_REALTIME) {\r\n            allRebateCoin = Number(this.gameRecord.canReceive) + Number(this.gameRecord.rebateCoin);\r\n        }\r\n        \r\n        if (allRebateCoin < this.gameRecord.minReceiveAmount * 100) {\r\n            glGame.panel.showErrorTip(glGame.tips.BACKWATER.MINLIMIT.format(`${this.gameRecord.minReceiveAmount}`));\r\n            return;\r\n        }\r\n        glGame.user.ReqRebateApply();\r\n    },\r\n\r\n    dmwenhao_cb() {\r\n        this.clickMask.active = true;\r\n        this.dmtips.stopAllActions();\r\n        this.dmtips.active = true;\r\n        this.dmtips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(()=> {\r\n            this.dmtips.active = false;\r\n            this.clickMask.active = false;\r\n        })));\r\n\r\n        this.dmtips.getChildByName(\"label\").getComponent(cc.Label).string = `每天0点清除${this.gameRecord.rebateExpirationTime}天前未返水的打码量`;\r\n    },\r\n\r\n    fswenhao_cb() {\r\n        this.clickMask.active = true;\r\n        this.fstips.stopAllActions();\r\n        this.fstips.active = true;\r\n        this.fstips.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(()=> {\r\n            this.fstips.active = false;\r\n            this.clickMask.active = false;\r\n        })));\r\n\r\n        this.fstips.getChildByName(\"label\").getComponent(cc.Label).string = `每天0点清除${this.gameRecord.rebateExpirationTime}天前未领取的返水金额`;\r\n    }\r\n});\r\n"]}