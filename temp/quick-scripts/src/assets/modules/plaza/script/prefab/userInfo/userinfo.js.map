{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\userInfo\\userinfo.js"],"names":["GAMETYPE","CHESS","COMPLEX","glGame","baseclass","extend","properties","mainPanel","cc","Node","leftbtns","reddot","left_node","head","sex","Sprite","vip_level","Label","img_sex","SpriteFrame","base_acc","base_phone","base_id","base_nickname","onLoad","isFirst","gameDisplayType","user","get","registerEvent","start","showInfo","showPanel","initUi","initReddot","panel","showHeadImage","string","phoneStr","toString","new_str","console","log","length","i","valueNum","spriteFrame","onClick","name","node","changeHead_cb","userEdit_cb","phoneEdit_cb","nicknameEdit_cb","remove","active","vipReq","hideAllPanel","childrenCount","children","panelName","panellist","index","getChildByName","zIndex","emitter","emit","getPanelByName","then","panelData","parent","cutFloat","num","getFloat","Number","div","value","isNaN","Math","floor","toFixed","showPanelByName","phone","self_edit_phone","changepsw_cb","self_edit_login_pwd","showErrorTip","tips","USER","PASSWORD","UNCHANGE","on","MESSAGE","UI","ACTION_END","updateVip","unRegisterEvent","off","msg","vipList","vipId","userInfo","id","vipName","set","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 玩家个人信息界面\r\n */\r\nconst GAMETYPE = {\r\n    CHESS: 1,    //棋牌版\r\n    COMPLEX: 2,  //综合版\r\n}\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        mainPanel: cc.Node,\r\n        leftbtns: cc.Node,\r\n\r\n        reddot: cc.Node,\r\n\r\n        left_node: cc.Node,\r\n\r\n        head: cc.Node,\r\n        sex: cc.Sprite,\r\n        vip_level: cc.Label,\r\n        img_sex: [cc.SpriteFrame],\r\n\r\n        base_acc: cc.Label,\r\n        base_phone: cc.Label,\r\n        base_id: cc.Label,\r\n        base_nickname: cc.Label,\r\n    },\r\n    onLoad() {\r\n\r\n        this.isFirst = true;\r\n        this.gameDisplayType = glGame.user.get(\"gameDisplayType\");\r\n        this.registerEvent();\r\n\r\n    },\r\n    start() {\r\n\r\n    },\r\n\r\n    showInfo() {\r\n        if (this.isFirst) {\r\n            this.showPanel(\"vipinfo\");\r\n            this.isFirst = false;\r\n        }\r\n        this.initUi();\r\n        this.initReddot();\r\n    },\r\n\r\n    initUi() {\r\n        //头像\r\n        glGame.panel.showHeadImage(this.head, glGame.user.get(\"headURL\"));\r\n        //基础信息\r\n        this.base_acc.string = glGame.user.get(\"userName\") || \"\";\r\n        let phoneStr = glGame.user.get(\"phone\").toString();\r\n        let new_str = '';\r\n        console.log('phoneStrphoneStr', phoneStr, phoneStr.length)\r\n        for (let i = 0; i < phoneStr.length; i++) {\r\n            let valueNum = phoneStr[i];\r\n            if (i > 2 && i < 8) {\r\n                valueNum = '*';\r\n            }\r\n            new_str += valueNum\r\n        }\r\n        this.base_phone.string = glGame.user.get(\"phone\") ? new_str : \"\";\r\n        this.sex.spriteFrame = this.img_sex[glGame.user.get(\"userSex\")];\r\n\r\n        this.base_id.string = glGame.user.get(\"logicID\") || \"\";\r\n        this.base_nickname.string = glGame.user.get(\"nickname\") || \"\";\r\n\r\n        this.vip_level.string = glGame.user.get(\"vip_name\");\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"account\":\r\n            case \"vipinfo\":\r\n            case \"statement\":\r\n            case \"record\":\r\n            case \"bank\":\r\n            case \"seting\":\r\n                this.showPanel(name); break;\r\n            case \"head\": this.changeHead_cb(); break;\r\n            case 'btn_grzl': this.userEdit_cb(); break;\r\n            case 'btn_phoneEdit': this.phoneEdit_cb(); break;\r\n            case 'btn_nicknameEdit': this.nicknameEdit_cb(); break;\r\n            case \"close\":\r\n                this.remove()\r\n                break;\r\n        }\r\n    },\r\n\r\n    initReddot() {\r\n        this.reddot.active = glGame.user.get(\"redDotData\").vipReq == 1;\r\n    },\r\n\r\n    //隐藏所有界面\r\n    hideAllPanel() {\r\n        if (!this.mainPanel.childrenCount) return;\r\n        for (let i = 0; i < this.mainPanel.childrenCount; i++) {\r\n            this.mainPanel.children[i].active = false;\r\n        }\r\n    },\r\n\r\n    //显示某个界面。按名字来显示\r\n    showPanel(panelName) {\r\n        this.hideAllPanel()\r\n        let panellist = {}\r\n        panellist[\"vipinfo\"] = \"userinfoVip\";\r\n        panellist[\"statement\"] = this.gameDisplayType == GAMETYPE.CHESS ? \"userinfostatement\" : \"userinfostatement_complex\";\r\n        panellist[\"account\"] = \"userinfoaccount\";\r\n        panellist[\"record\"] = this.gameDisplayType == GAMETYPE.CHESS ? \"userinforecord\" : \"userinforecord_complex\";\r\n        panellist[\"bank\"] = \"userinfoBank\";\r\n        panellist[\"seting\"] = \"userinfoSeting\";\r\n\r\n        for (let name in panellist) {\r\n            let index = 0;\r\n            if (panelName == name) index = 1;\r\n            this.leftbtns.getChildByName(name).zIndex = index;\r\n        }\r\n\r\n\r\n        if (this.mainPanel.getChildByName(panellist[panelName])) {\r\n            this.mainPanel.getChildByName(panellist[panelName]).active = true;\r\n            glGame.emitter.emit(\"userinfo_switchFace\");\r\n            return;\r\n        }\r\n\r\n        glGame.panel.getPanelByName(panellist[panelName]).then(panelData => {\r\n            panelData.parent = this.mainPanel;\r\n        })\r\n    },\r\n\r\n    //浮点型运算取俩位\r\n    cutFloat(num) {\r\n        return (this.getFloat(Number(num).div(100))).toString();\r\n    },\r\n    //浮点型运算取俩位\r\n    getFloat(value, num = 2) {\r\n        value = Number(value);\r\n        if (isNaN(value)) return;\r\n        if (~~value === value) {\r\n            return value.toString();\r\n        } else {\r\n            return (Math.floor(value * 100) / 100).toFixed(num);\r\n        }\r\n    },\r\n\r\n    changeHead_cb() {\r\n        glGame.panel.showPanelByName(\"changehead\");\r\n    },\r\n\r\n    //个人资料\r\n    userEdit_cb() {\r\n        console.log(\"显示个人资料\")\r\n        glGame.panel.showPanelByName(\"changeInfo\");\r\n    },\r\n\r\n    //修改昵称\r\n    nicknameEdit_cb() {\r\n        console.log(\"显示修改昵称\")\r\n        glGame.panel.showPanelByName(\"editNickName\");\r\n    },\r\n\r\n    //修改手机\r\n    phoneEdit_cb() {\r\n        //允许手机更改密码\r\n        let phone = glGame.user.get(\"phone\").toString();\r\n        if (phone && phone != \"\") {\r\n            if (phone == 0) glGame.panel.showPanelByName(\"bindPhone\");      //绑定\r\n            else if (glGame.user.get(\"loginSwitch\").self_edit_phone == 1) glGame.panel.showPanelByName(\"untiedPhone\");\r\n            else glGame.panel.showPanelByName(\"unbind\");\r\n        } else {\r\n            glGame.panel.showPanelByName(\"bindPhone\");       //绑定\r\n        }\r\n    },\r\n\r\n    //修改密码\r\n    changepsw_cb() {\r\n        if (glGame.user.get(\"loginSwitch\").self_edit_login_pwd == 1) {\r\n            glGame.panel.showPanelByName(\"modifypsw\");\r\n        } else {\r\n            glGame.panel.showErrorTip(glGame.tips.USER.PASSWORD.UNCHANGE);\r\n        }\r\n    },\r\n\r\n    // 注册界面监听事件\r\n    registerEvent() {\r\n        glGame.emitter.on(\"ReqRedDot\", this.initReddot, this);\r\n        glGame.emitter.on(\"updateUserData\", this.showInfo, this);\r\n        glGame.emitter.on(`${this.node.name}${MESSAGE.UI.ACTION_END}`, this.showInfo, this);\r\n        glGame.emitter.on(\"notifyVipInfo\", this.updateVip, this);\r\n    },\r\n    // 销毁界面监听事件\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"ReqRedDot\", this);\r\n        glGame.emitter.off(\"updateUserData\", this);\r\n        glGame.emitter.off(`${this.node.name}${MESSAGE.UI.ACTION_END}`, this);\r\n        glGame.emitter.off(\"notifyVipInfo\", this);\r\n    },\r\n    updateVip(msg) {\r\n        let vipList = msg.vipList,\r\n            vipId = msg.userInfo.vipId;\r\n        for (let i = 0; i < vipList.length; i++) {\r\n            if (vipList[i].id == vipId && vipList[i].vipName != glGame.user.get(\"vip_name\")) {\r\n                glGame.user.set(\"vip_name\", vipList[i].vipName);\r\n                this.vip_level.string = glGame.user.get(\"vip_name\");\r\n                glGame.emitter.emit(\"updateUserData\");\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n});\r\n"]}