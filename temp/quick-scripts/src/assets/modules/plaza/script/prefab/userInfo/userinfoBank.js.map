{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\userInfo\\userinfoBank.js"],"names":["glGame","baseclass","extend","properties","lab_suncoin","cc","Label","lab_mycoin","lab_bankcoin","savegold","EditBox","progress","ProgressBar","lab_cutstate","pic_title","cutstate_node","Node","pic_confirm","audio_safebox","type","AudioClip","onLoad","curBankPattern","bank","DEPOSIT","curBankText","resetData","refreshUi","registerEvent","user","reqGetBankCoin","start","emitter","on","updateUserData","showPanelInfo","updateBankSuccess","unRegisterEvent","off","gold","get","bankgold","string","getFixNumber","cutFloat","node","getChildByName","getComponent","Slider","active","WITHDRAW","isDeposit","isWithdraw","audio","playSoundEffect","updateEditbox","onClick","name","click_confirm","click_modifypsw","click_Deposit","click_Withdraw","click_coinMax","placeholder","tips","BANK","SAVEPLACEHOLDER","TAKEPLACEHOLDER","onSliderProcess","process","onEditBox","numGold","console","log","Number","substr","toString","value","value1","div","isNaN","toFixed","panel","showPanelByName","length","showErrorTip","SAVEZERO","TAKEZERO","test","SAVEERROR","TAKEERROR","mul","SAVELITTLE","TAKELITTLE","SAVEMUCH","TAKEMUCH","reqBankSave","then","script","setConfirmNext","password","reqBankTakeOut","OnDestroy"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AACpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,WAAW,EAAEC,EAAE,CAACC,KADR;AAGRC,IAAAA,UAAU,EAAEF,EAAE,CAACC,KAHP;AAIRE,IAAAA,YAAY,EAAEH,EAAE,CAACC,KAJT;AAMRG,IAAAA,QAAQ,EAAEJ,EAAE,CAACK,OANL;AAMoB;AAC5BC,IAAAA,QAAQ,EAAEN,EAAE,CAACO,WAPL;AASRC,IAAAA,YAAY,EAAER,EAAE,CAACC,KATT;AAURQ,IAAAA,SAAS,EAAET,EAAE,CAACC,KAVN;AAWRS,IAAAA,aAAa,EAAE,CAACV,EAAE,CAACW,IAAJ,CAXP;AAYRC,IAAAA,WAAW,EAAE,CAACZ,EAAE,CAACW,IAAJ,CAZL;AAcRE,IAAAA,aAAa,EAAE;AACXC,MAAAA,IAAI,EAAEd,EAAE,CAACe,SADE;AAEX,iBAAS;AAFE;AAdP,GADQ;AAqBpBC,EAAAA,MArBoB,oBAqBX;AACL,SAAKC,cAAL,GAAsBtB,MAAM,CAACuB,IAAP,CAAYC,OAAlC;AACA,SAAKC,WAAL,GAAmB;AAAC,SAAG,IAAJ;AAAU,SAAG;AAAb,KAAnB;AAEA,SAAKC,SAAL;AACA,SAAKC,SAAL;AACA,SAAKC,aAAL;AACA5B,IAAAA,MAAM,CAAC6B,IAAP,CAAYC,cAAZ;AACH,GA7BmB;AA+BpBC,EAAAA,KA/BoB,mBA+BZ,CACP,CAhCmB;AAmCpB;AACAH,EAAAA,aApCoB,2BAoCJ;AACZ5B,IAAAA,MAAM,CAACgC,OAAP,CAAeC,EAAf,CAAkB,gBAAlB,EAAoC,KAAKC,cAAzC,EAAyD,IAAzD;AACAlC,IAAAA,MAAM,CAACgC,OAAP,CAAeC,EAAf,CAAkB,gBAAlB,EAAoC,KAAKE,aAAzC,EAAwD,IAAxD;AACAnC,IAAAA,MAAM,CAACgC,OAAP,CAAeC,EAAf,CAAkB,mBAAlB,EAAuC,KAAKG,iBAA5C,EAA+D,IAA/D;AACH,GAxCmB;AAyCpB;AACAC,EAAAA,eA1CoB,6BA0CF;AACdrC,IAAAA,MAAM,CAACgC,OAAP,CAAeM,GAAf,CAAmB,gBAAnB,EAAqC,IAArC;AACAtC,IAAAA,MAAM,CAACgC,OAAP,CAAeM,GAAf,CAAmB,gBAAnB,EAAqC,IAArC;AACAtC,IAAAA,MAAM,CAACgC,OAAP,CAAeM,GAAf,CAAmB,mBAAnB,EAAwC,IAAxC;AACH,GA9CmB;AAgDpB;AACAJ,EAAAA,cAjDoB,4BAiDH;AACb,SAAKR,SAAL;AACA,SAAKS,aAAL;AACA,SAAKR,SAAL;AACH,GArDmB;AAuDpB;AACAD,EAAAA,SAxDoB,uBAwDR;AACR,SAAKa,IAAL,GAAYvC,MAAM,CAAC6B,IAAP,CAAYW,GAAZ,CAAgB,MAAhB,CAAZ;AACA,SAAKC,QAAL,GAAgBzC,MAAM,CAAC6B,IAAP,CAAYW,GAAZ,CAAgB,WAAhB,CAAhB;AACH,GA3DmB;AA6DpB;AACAL,EAAAA,aA9DoB,2BA8DJ;AACZ,SAAK5B,UAAL,CAAgBmC,MAAhB,GAAyB,KAAKC,YAAL,CAAkB,KAAKJ,IAAvB,CAAzB;AACA,SAAK/B,YAAL,CAAkBkC,MAAlB,GAA2B,KAAKC,YAAL,CAAkB,KAAKF,QAAvB,CAA3B;AACA,SAAKrC,WAAL,CAAiBsC,MAAjB,GAA0B1C,MAAM,CAAC6B,IAAP,CAAYe,QAAZ,CAAqB,KAAKL,IAAL,GAAY,KAAKE,QAAtC,CAA1B;AAEA,SAAKhC,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACA,SAAK/B,QAAL,CAAcA,QAAd,GAAyB,IAAzB;AACA,SAAKA,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,IAA/E;AACH,GAtEmB;AAwEpBgB,EAAAA,SAxEoB,uBAwER;AACR,SAAKV,WAAL,CAAiBjB,MAAM,CAACuB,IAAP,CAAYC,OAA7B,EAAsCyB,MAAtC,GAA+C,KAA/C;AACA,SAAKhC,WAAL,CAAiBjB,MAAM,CAACuB,IAAP,CAAY2B,QAA7B,EAAuCD,MAAvC,GAAgD,KAAhD;AACA,SAAKlC,aAAL,CAAmBf,MAAM,CAACuB,IAAP,CAAY2B,QAA/B,EAAyCD,MAAzC,GAAkD,KAAlD;AACA,SAAKlC,aAAL,CAAmBf,MAAM,CAACuB,IAAP,CAAYC,OAA/B,EAAwCyB,MAAxC,GAAiD,KAAjD;;AACA,QAAI,KAAKE,SAAL,EAAJ,EAAsB;AAClB,WAAKtC,YAAL,CAAkB6B,MAAlB,GAA2B,KAAKjB,WAAL,CAAiBzB,MAAM,CAACuB,IAAP,CAAY2B,QAA7B,CAA3B;AACA,WAAKpC,SAAL,CAAe4B,MAAf,aAA2B,KAAKjB,WAAL,CAAiBzB,MAAM,CAACuB,IAAP,CAAYC,OAA7B,CAA3B;AACA,WAAKP,WAAL,CAAiBjB,MAAM,CAACuB,IAAP,CAAYC,OAA7B,EAAsCyB,MAAtC,GAA+C,IAA/C;AACA,WAAKlC,aAAL,CAAmBf,MAAM,CAACuB,IAAP,CAAYC,OAA/B,EAAwCyB,MAAxC,GAAiD,IAAjD;AACH,KALD,MAKO,IAAI,KAAKG,UAAL,EAAJ,EAAuB;AAC1B,WAAKvC,YAAL,CAAkB6B,MAAlB,GAA2B,KAAKjB,WAAL,CAAiBzB,MAAM,CAACuB,IAAP,CAAYC,OAA7B,CAA3B;AACA,WAAKV,SAAL,CAAe4B,MAAf,aAA2B,KAAKjB,WAAL,CAAiBzB,MAAM,CAACuB,IAAP,CAAY2B,QAA7B,CAA3B;AACA,WAAKjC,WAAL,CAAiBjB,MAAM,CAACuB,IAAP,CAAY2B,QAA7B,EAAuCD,MAAvC,GAAgD,IAAhD;AACA,WAAKlC,aAAL,CAAmBf,MAAM,CAACuB,IAAP,CAAY2B,QAA/B,EAAyCD,MAAzC,GAAkD,IAAlD;AACH;AACJ,GAxFmB;AA0FpBb,EAAAA,iBA1FoB,+BA0FA;AAChBpC,IAAAA,MAAM,CAACqD,KAAP,CAAaC,eAAb,CAA6B,KAAKpC,aAAlC,EAAiD,IAAjD;AACA,SAAKqC,aAAL;AACH,GA7FmB;AA+FpBA,EAAAA,aA/FoB,2BA+FJ;AACZ,SAAK9C,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACA,SAAK/B,QAAL,CAAcA,QAAd,GAAyB,IAAzB;AACA,SAAKA,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,IAA/E;AACH,GAnGmB;AAqGpB6C,EAAAA,OArGoB,mBAqGZC,IArGY,EAqGNZ,IArGM,EAqGA;AAChB,YAAQY,IAAR;AACI,WAAK,SAAL;AAAgB,aAAKC,aAAL;AAAsB;;AACtC,WAAK,kBAAL;AAAyB,aAAKC,eAAL;AAAwB;;AACjD,WAAK,aAAL;AAAoB,aAAKC,aAAL;AAAsB;;AAC1C,WAAK,eAAL;AAAsB,aAAKC,cAAL;AAAuB;;AAC7C,WAAK,aAAL;AAAoB,aAAKC,aAAL;AAAsB;;AAC1C;AAAS;AANb;AAQH,GA9GmB;AAgHpB;AACAX,EAAAA,SAjHoB,uBAiHR;AACR,WAAO,KAAK7B,cAAL,KAAwBtB,MAAM,CAACuB,IAAP,CAAYC,OAA3C;AACH,GAnHmB;AAoHpB;AACA4B,EAAAA,UArHoB,wBAqHP;AACT,WAAO,KAAK9B,cAAL,KAAwBtB,MAAM,CAACuB,IAAP,CAAY2B,QAA3C;AACH,GAvHmB;AAyHpBU,EAAAA,aAzHoB,2BAyHJ;AACZ,SAAKnD,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACA,SAAKjC,QAAL,CAAcsD,WAAd,GAA4B/D,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiBC,eAA7C;AACA,SAAKvD,QAAL,CAAcA,QAAd,GAAyB,IAAzB;AACA,SAAKA,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,IAA/E;AACA,SAAKW,cAAL,GAAsBtB,MAAM,CAACuB,IAAP,CAAYC,OAAlC;AACA,SAAKG,SAAL;AACH,GAhImB;AAkIpBkC,EAAAA,cAlIoB,4BAkIH;AACb,SAAKpD,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACA,SAAKjC,QAAL,CAAcsD,WAAd,GAA4B/D,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiBE,eAA7C;AACA,SAAKxD,QAAL,CAAcA,QAAd,GAAyB,IAAzB;AACA,SAAKA,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,IAA/E;AACA,SAAKW,cAAL,GAAsBtB,MAAM,CAACuB,IAAP,CAAY2B,QAAlC;AACA,SAAKvB,SAAL;AACH,GAzImB;AA2IpBmC,EAAAA,aA3IoB,2BA2IL;AACX,SAAKrD,QAAL,CAAciC,MAAd,GAAuB,KAAKC,YAAL,CAAkB,KAAKQ,SAAL,KAAmB,KAAKZ,IAAxB,GAA+B,KAAKE,QAAtD,CAAvB;AACA,SAAK9B,QAAL,CAAcA,QAAd,GAAyB,CAAzB;AACA,SAAKA,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,CAA/E;AACH,GA/ImB;AAiJpByD,EAAAA,eAjJoB,2BAiJJvB,IAjJI,EAiJEwB,OAjJF,EAiJW;AAC3B,QAAIZ,IAAI,GAAGZ,IAAI,CAACY,IAAhB;;AACA,YAAQA,IAAR;AACI,WAAK,QAAL;AACI,aAAK9C,QAAL,CAAcoC,YAAd,CAA2B1C,EAAE,CAACO,WAA9B,EAA2CD,QAA3C,GAAsD0D,OAAO,IAAI,CAAX,GAAe,IAAf,GAAsBA,OAA5E;;AACA,YAAI,KAAKlB,SAAL,EAAJ,EAAsB;AAClB,eAAK1C,QAAL,CAAciC,MAAd,GAAuB,KAAKC,YAAL,CAAkB0B,OAAO,GAAG,KAAK9B,IAAjC,CAAvB;AACH,SAFD,MAEO;AACH,eAAK9B,QAAL,CAAciC,MAAd,GAAuB,KAAKC,YAAL,CAAkB0B,OAAO,GAAG,KAAK5B,QAAjC,CAAvB;AACH;;AACD;;AACJ;AAAS;AATb;AAWH,GA9JmB;AAgKpB6B,EAAAA,SAhKoB,qBAgKVzB,IAhKU,EAgKJ;AACZ,QAAI0B,OAAO,GAAG,KAAKpB,SAAL,KAAmB,KAAKZ,IAAxB,GAA+B,KAAKE,QAAlD;AACA+B,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BC,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAhC,EAAuD6B,OAAvD;;AACA,QAAIG,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAN,GAA+B,CAA/B,IAAoC6B,OAAO,GAAG,CAAlD,EAAqD;AACjD,UAAIF,OAAO,GAAGK,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAN,IAAgC6B,OAAO,GAAG,GAA1C,CAAd;;AACA,UAAIG,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAN,GAA+B,GAA/B,IAAsC6B,OAA1C,EAAmD;AAC/C;AACA,aAAKT,aAAL;AACAO,QAAAA,OAAO,GAAG,CAAV;AACH,OAJD,MAIO;AACH,aAAK1D,QAAL,CAAcA,QAAd,GAAyB0D,OAAzB;AACA,aAAK1D,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E0D,OAA/E;AACH;;AAED,UAAI,KAAK5D,QAAL,CAAciC,MAAd,CAAqBiC,MAArB,CAA4B,CAA5B,EAA+B,CAA/B,MAAsC,GAA1C,EACI,KAAKlE,QAAL,CAAciC,MAAd,GAAuBgC,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAN,CAA6BkC,QAA7B,EAAvB;AACP,KAbD,MAaO;AACH,WAAKjE,QAAL,CAAckC,IAAd,CAAmBC,cAAnB,CAAkC,QAAlC,EAA4CC,YAA5C,CAAyD1C,EAAE,CAAC2C,MAA5D,EAAoErC,QAApE,GAA+E,IAA/E;AACA,WAAKA,QAAL,CAAcA,QAAd,GAAyB,IAAzB;AACA,WAAKF,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACH;AACJ,GArLmB;AAuLpBC,EAAAA,YAvLoB,wBAuLPkC,KAvLO,EAuLA;AAChB,QAAIC,MAAM,GAAGJ,MAAM,CAACG,KAAD,CAAN,CAAcE,GAAd,CAAkB,EAAlB,CAAb;AACAF,IAAAA,KAAK,GAAGH,MAAM,CAACG,KAAD,CAAN,CAAcE,GAAd,CAAkB,GAAlB,CAAR;AACA,QAAIC,KAAK,CAACH,KAAD,CAAT,EAAkB;;AAClB,QAAI,CAAC,CAACA,KAAF,KAAYA,KAAhB,EAAuB;AACnB,aAAOA,KAAK,CAACD,QAAN,EAAP;AACH,KAFD,MAEO,IAAI,CAAC,CAACE,MAAF,KAAaA,MAAjB,EAAyB;AAC5B,aAAOD,KAAK,CAACI,OAAN,CAAc,CAAd,CAAP;AACH,KAFM,MAEA;AACH,aAAOJ,KAAK,CAACI,OAAN,CAAc,CAAd,CAAP;AACH;AACJ,GAlMmB;AAsMpBtB,EAAAA,eAtMoB,6BAsMF;AACd3D,IAAAA,MAAM,CAACkF,KAAP,CAAaC,eAAb,CAA6B,eAA7B;AACH,GAxMmB;AA0MpB;AACAzB,EAAAA,aA3MoB,2BA2MJ;AACZ,QAAG,KAAKjD,QAAL,CAAciC,MAAd,CAAqB0C,MAArB,IAA+B,CAAlC,EAAqC;AACjC,aAAOpF,MAAM,CAACkF,KAAP,CAAaG,YAAb,CAA0B,KAAKlC,SAAL,KAAkBnD,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiBqB,QAAnC,GAA8CtF,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiBsB,QAAzF,CAAP;AACH;;AAED,QAAI,CAAC,oBAAoBC,IAApB,CAAyB,KAAK/E,QAAL,CAAciC,MAAvC,CAAL,EAAqD;AACjD,aAAO1C,MAAM,CAACkF,KAAP,CAAaG,YAAb,CAA0B,KAAKlC,SAAL,KAAkBnD,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiBwB,SAAnC,GAA+CzF,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiByB,SAA1F,CAAP;AACH;;AACD,QAAIjF,QAAQ,GAAG,CAAf,CARY,CASZ;AACA;AACA;AACA;AACA;;AACAA,IAAAA,QAAQ,GAAGiE,MAAM,CAAC,KAAKjE,QAAL,CAAciC,MAAf,CAAN,CAA6BiD,GAA7B,CAAiC,GAAjC,CAAX;AACA,QAAIlF,QAAQ,IAAI,CAAhB,EAAmB,OAAOT,MAAM,CAACkF,KAAP,CAAaG,YAAb,CAA0B,KAAKlC,SAAL,KAAmBnD,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiB2B,UAApC,GAAiD5F,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiB4B,UAA5F,CAAP;;AACnB,QAAIpF,QAAQ,IAAI,KAAK0C,SAAL,KAAmB,KAAKZ,IAAxB,GAA+B,KAAKE,QAAxC,CAAZ,EAA+D;AAC3D,aAAOzC,MAAM,CAACkF,KAAP,CAAaG,YAAb,CAA0B,KAAKlC,SAAL,KAAmBnD,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiB6B,QAApC,GAA+C9F,MAAM,CAACgE,IAAP,CAAYC,IAAZ,CAAiB8B,QAA1F,CAAP;AACH;;AACD,QAAI,KAAK5C,SAAL,EAAJ,EAAsB;AAClBnD,MAAAA,MAAM,CAAC6B,IAAP,CAAYmE,WAAZ,CAAwBvF,QAAxB;AACH,KAFD,MAEO,IAAI,KAAK2C,UAAL,EAAJ,EAAuB;AAC1BpD,MAAAA,MAAM,CAACkF,KAAP,CAAaC,eAAb,CAA6B,cAA7B,EAA6Cc,IAA7C,CAAkD,UAAAf,KAAK,EAAI;AACvD,YAAIgB,MAAM,GAAGhB,KAAK,CAACnC,YAAN,CAAmBmC,KAAK,CAACzB,IAAzB,CAAb;AACAyC,QAAAA,MAAM,CAACC,cAAP,CAAsB,UAACC,QAAD,EAAc;AAChCpG,UAAAA,MAAM,CAAC6B,IAAP,CAAYwE,cAAZ,CAA2B5F,QAA3B,EAAqC2F,QAArC;AACH,SAFD;AAGH,OALD;AAMH;AACJ,GAxOmB;AA2OpBE,EAAAA,SA3OoB,uBA2OR;AACR,SAAKjE,eAAL;AACH;AA7OmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        lab_suncoin: cc.Label,\r\n\r\n        lab_mycoin: cc.Label,\r\n        lab_bankcoin: cc.Label,\r\n\r\n        savegold: cc.EditBox,       // 要提交的金币数额\r\n        progress: cc.ProgressBar,\r\n\r\n        lab_cutstate: cc.Label,\r\n        pic_title: cc.Label,\r\n        cutstate_node: [cc.Node],\r\n        pic_confirm: [cc.Node],\r\n\r\n        audio_safebox: {\r\n            type: cc.AudioClip,\r\n            default: null\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        this.curBankPattern = glGame.bank.DEPOSIT;\r\n        this.curBankText = {0: '存入', 1: '取出'};\r\n\r\n        this.resetData();\r\n        this.refreshUi();\r\n        this.registerEvent();\r\n        glGame.user.reqGetBankCoin();\r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n\r\n    // 注册界面监听事件\r\n    registerEvent() {\r\n        glGame.emitter.on(\"updateUserData\", this.updateUserData, this);\r\n        glGame.emitter.on(\"updateBankCoin\", this.showPanelInfo, this);\r\n        glGame.emitter.on(\"updateBankSuccess\", this.updateBankSuccess, this);\r\n    },\r\n    // 销毁界面监听事件\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"updateUserData\", this);\r\n        glGame.emitter.off(\"updateBankCoin\", this);\r\n        glGame.emitter.off(\"updateBankSuccess\", this);\r\n    },\r\n\r\n    // 刷新界面数据、UI\r\n    updateUserData() {\r\n        this.resetData();\r\n        this.showPanelInfo();\r\n        this.refreshUi();\r\n    },\r\n\r\n    // 初始化界面数据\r\n    resetData() {\r\n        this.gold = glGame.user.get(\"coin\");\r\n        this.bankgold = glGame.user.get(\"bank_coin\");\r\n    },\r\n\r\n    // 显示界面信息\r\n    showPanelInfo() {\r\n        this.lab_mycoin.string = this.getFixNumber(this.gold);\r\n        this.lab_bankcoin.string = this.getFixNumber(this.bankgold);\r\n        this.lab_suncoin.string = glGame.user.cutFloat(this.gold + this.bankgold);\r\n\r\n        this.savegold.string = \"\";\r\n        this.progress.progress = 0.01;\r\n        this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 0.01;\r\n    },\r\n\r\n    refreshUi() {\r\n        this.pic_confirm[glGame.bank.DEPOSIT].active = false;\r\n        this.pic_confirm[glGame.bank.WITHDRAW].active = false;\r\n        this.cutstate_node[glGame.bank.WITHDRAW].active = false;\r\n        this.cutstate_node[glGame.bank.DEPOSIT].active = false;\r\n        if (this.isDeposit()) {\r\n            this.lab_cutstate.string = this.curBankText[glGame.bank.WITHDRAW];\r\n            this.pic_title.string = `${this.curBankText[glGame.bank.DEPOSIT]}比例:`;\r\n            this.pic_confirm[glGame.bank.DEPOSIT].active = true;\r\n            this.cutstate_node[glGame.bank.DEPOSIT].active = true;\r\n        } else if (this.isWithdraw()) {\r\n            this.lab_cutstate.string = this.curBankText[glGame.bank.DEPOSIT];\r\n            this.pic_title.string = `${this.curBankText[glGame.bank.WITHDRAW]}比例:`;\r\n            this.pic_confirm[glGame.bank.WITHDRAW].active = true;\r\n            this.cutstate_node[glGame.bank.WITHDRAW].active = true;\r\n        }\r\n    },\r\n\r\n    updateBankSuccess() {\r\n        glGame.audio.playSoundEffect(this.audio_safebox, true);\r\n        this.updateEditbox();\r\n    },\r\n\r\n    updateEditbox() {\r\n        this.savegold.string = \"\";\r\n        this.progress.progress = 0.01;\r\n        this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 0.01;\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"confirm\": this.click_confirm(); break;\r\n            case \"btn_xgbxgmm_grzx\": this.click_modifypsw(); break;\r\n            case \"btn_deposit\": this.click_Deposit(); break;\r\n            case \"btn_withdrawn\": this.click_Withdraw(); break;\r\n            case \"btn_coinmax\": this.click_coinMax(); break;\r\n            default: break;\r\n        }\r\n    },\r\n\r\n    // 存款模式\r\n    isDeposit() {\r\n        return this.curBankPattern === glGame.bank.DEPOSIT;\r\n    },\r\n    // 取出模式\r\n    isWithdraw() {\r\n        return this.curBankPattern === glGame.bank.WITHDRAW;\r\n    },\r\n\r\n    click_Deposit() {\r\n        this.savegold.string = \"\";\r\n        this.savegold.placeholder = glGame.tips.BANK.SAVEPLACEHOLDER;\r\n        this.progress.progress = 0.01;\r\n        this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 0.01;\r\n        this.curBankPattern = glGame.bank.DEPOSIT;\r\n        this.refreshUi();\r\n    },\r\n\r\n    click_Withdraw() {\r\n        this.savegold.string = \"\";\r\n        this.savegold.placeholder = glGame.tips.BANK.TAKEPLACEHOLDER;\r\n        this.progress.progress = 0.01;\r\n        this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 0.01;\r\n        this.curBankPattern = glGame.bank.WITHDRAW;\r\n        this.refreshUi();\r\n    },\r\n\r\n    click_coinMax(){\r\n        this.savegold.string = this.getFixNumber(this.isDeposit() ? this.gold : this.bankgold);\r\n        this.progress.progress = 1;\r\n        this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 1;\r\n    },\r\n\r\n    onSliderProcess(node, process) {\r\n        let name = node.name;\r\n        switch (name) {\r\n            case \"slider\":\r\n                this.progress.getComponent(cc.ProgressBar).progress = process == 0 ? 0.01 : process;\r\n                if (this.isDeposit()) {\r\n                    this.savegold.string = this.getFixNumber(process * this.gold)\r\n                } else {\r\n                    this.savegold.string = this.getFixNumber(process * this.bankgold)\r\n                }\r\n                break;\r\n            default: break;\r\n        }\r\n    },\r\n\r\n    onEditBox(node) {\r\n        let numGold = this.isDeposit() ? this.gold : this.bankgold;\r\n        console.log(\"这是当前两个参数的大小\",Number(this.savegold.string),numGold)\r\n        if (Number(this.savegold.string) > 0 && numGold > 0) {\r\n            let process = Number(this.savegold.string) / (numGold / 100);\r\n            if (Number(this.savegold.string) * 100 >= numGold) {\r\n                //this.isDeposit() ? this.click_DepositMax() : this.click_WithdrawMax();\r\n                this.click_coinMax();\r\n                process = 1;\r\n            } else {\r\n                this.progress.progress = process;\r\n                this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = process;\r\n            }\r\n\r\n            if (this.savegold.string.substr(0, 1) === '0')\r\n                this.savegold.string = Number(this.savegold.string).toString();\r\n        } else {\r\n            this.progress.node.getChildByName(\"slider\").getComponent(cc.Slider).progress = 0.01;\r\n            this.progress.progress = 0.01;\r\n            this.savegold.string = '';\r\n        }\r\n    },\r\n\r\n    getFixNumber(value) {\r\n        let value1 = Number(value).div(10);\r\n        value = Number(value).div(100);\r\n        if (isNaN(value)) return;\r\n        if (~~value === value) {\r\n            return value.toString();\r\n        } else if (~~value1 === value1) {\r\n            return value.toFixed(1);\r\n        } else {\r\n            return value.toFixed(2);\r\n        }\r\n    },\r\n\r\n\r\n\r\n    click_modifypsw() {\r\n        glGame.panel.showPanelByName(\"bankmodifypsw\");\r\n    },\r\n\r\n    // 提交银行操作到服务器\r\n    click_confirm() {\r\n        if(this.savegold.string.length == 0) {\r\n            return glGame.panel.showErrorTip(this.isDeposit()? glGame.tips.BANK.SAVEZERO : glGame.tips.BANK.TAKEZERO);\r\n        }\r\n\r\n        if (!/^\\d+(\\.\\d{0,2})?$/.test(this.savegold.string)) {\r\n            return glGame.panel.showErrorTip(this.isDeposit()? glGame.tips.BANK.SAVEERROR : glGame.tips.BANK.TAKEERROR);\r\n        }\r\n        let savegold = 0;\r\n        // if (this.savegold.string.indexOf('.') != -1)\r\n        //     savegold = Number(this.savegold.string.replace('.', ''));\r\n        // else {\r\n        //     savegold = Number(this.savegold.string).mul(100);\r\n        // }\r\n        savegold = Number(this.savegold.string).mul(100);\r\n        if (savegold <= 0) return glGame.panel.showErrorTip(this.isDeposit() ? glGame.tips.BANK.SAVELITTLE : glGame.tips.BANK.TAKELITTLE);\r\n        if (savegold > (this.isDeposit() ? this.gold : this.bankgold)) {\r\n            return glGame.panel.showErrorTip(this.isDeposit() ? glGame.tips.BANK.SAVEMUCH : glGame.tips.BANK.TAKEMUCH);\r\n        }\r\n        if (this.isDeposit()) {\r\n            glGame.user.reqBankSave(savegold);\r\n        } else if (this.isWithdraw()) {\r\n            glGame.panel.showPanelByName(\"bankpassword\").then(panel => {\r\n                let script = panel.getComponent(panel.name);\r\n                script.setConfirmNext((password) => {\r\n                    glGame.user.reqBankTakeOut(savegold, password);\r\n                });\r\n            });\r\n        }\r\n    },\r\n\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n})"]}