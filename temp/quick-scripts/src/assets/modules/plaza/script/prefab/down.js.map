{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\down.js"],"names":["glGame","baseclass","extend","properties","btnLayout","cc","Node","btn_popu","btn_acctivit","btn_backWater","btn_email","btn_task","btn_withdraw","btn_shop","btn_rank","onLoad","registerEvent","initUI","reqRedDot","active","user","missionSwitch","rebateSwitch","console","log","count","i","childrenCount","children","windowsWidth","winSize","width","emitter","on","MESSAGE","UI","SCENE","unRegisterEvent","off","data","get","getChildByName","length","OnDestroy","onClick","name","node","click_email","click_exchange","click_shop","click_acctivit","click_popu","click_task","click_backWater","click_Rank","error","panel","showPanelByName","isTourist","showRegisteredGift","showSuspicious","showTip","is_withdraw","showDialog","tips","COMMON","ACCOUNTEXCEPTION","showService","showShop"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        btnLayout: cc.Node,//按钮父节点排序之用\r\n        btn_popu: cc.Node,//推广按钮\r\n        btn_acctivit: cc.Node,//活动按钮\r\n        //btn_yuebao: cc.Node,//余额宝按钮\r\n        btn_backWater: cc.Node,//返水按钮\r\n        btn_email: cc.Node,//邮件按钮\r\n        btn_task: cc.Node,//任务按钮\r\n        btn_withdraw: cc.Node,//提现按钮\r\n        btn_shop: cc.Node,//充值按钮\r\n        btn_rank:cc.Node\r\n    },\r\n\r\n    onLoad() {\r\n        this.registerEvent();\r\n        this.initUI();\r\n        this.reqRedDot();\r\n    },\r\n    initUI() {\r\n        this.btn_task.active = glGame.user.missionSwitch == 1;\r\n        this.btn_backWater.active = glGame.user.rebateSwitch == 1;\r\n        console.log(\"这是当前的开关\",glGame.user.missionSwitch,glGame.user.rebateSwitch)\r\n        let count = 0;\r\n        for (let i = 1; i < this.btnLayout.childrenCount; i++) {\r\n            if(this.btnLayout.children[i].active){\r\n                count++\r\n            }\r\n        }\r\n        //根据当前窗口大小调整按钮大小从而调整间距\r\n        let windowsWidth = (cc.winSize.width - this.btn_shop.width - this.btn_popu.width) / count;\r\n        for (let i = 1; i < this.btnLayout.childrenCount; i++) {\r\n            this.btnLayout.children[i].width = windowsWidth;\r\n        }\r\n    },\r\n    // 注册界面监听事件\r\n    registerEvent() {\r\n        glGame.emitter.on(MESSAGE.UI.SCENE, this.initUI, this);\r\n        glGame.emitter.on(\"ReqRedDot\", this.reqRedDot, this);\r\n    },\r\n    // 销毁界面监听事件\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(MESSAGE.UI.SCENE, this);\r\n        glGame.emitter.off(\"ReqRedDot\", this);\r\n    },\r\n \r\n    //刷新按钮上的红点\r\n    reqRedDot(data) {\r\n        if (!data) data = glGame.user.get('redDotData');\r\n        let count = 0;\r\n        for (let i in data) { count++ };\r\n        if (count == 0) return;\r\n        this.btn_email.getChildByName(\"redMark\").active = data['mailReq'] == 1 || data['mailCapitalReq'] == 1;\r\n        this.btn_popu.getChildByName(\"redMark\").active = data['extensionReq'] == 1;\r\n        this.btn_acctivit.getChildByName(\"redMark\").active = data['discountReq'].length != 0;\r\n        this.btn_backWater.getChildByName(\"redMark\").active = data['playerRebatReq'] == 1;\r\n        this.btn_task.getChildByName(\"redMark\").active = data['missionReq'] == 1;\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n    // 重写父类按钮点击事件\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_email\": this.click_email(); break;\r\n            case \"btn_withdraw\": this.click_exchange(); break;\r\n            case \"btn_shop\": this.click_shop(); break;\r\n            case \"btn_acctivit\": this.click_acctivit(); break;\r\n            case \"btn_popu\": this.click_popu(); break;\r\n            case \"btn_task\": this.click_task(); break;\r\n            case \"btn_backWater\": this.click_backWater(); break; //这是洗码的功能\r\n            case \"btn_rank\": this.click_Rank(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_Rank() {\r\n        glGame.panel.showPanelByName(\"rank\");\r\n    },\r\n    click_backWater() {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        \r\n        if (glGame.panel.showSuspicious(\"receive_rebate\")) {\r\n            return;\r\n        }\r\n\r\n        if(glGame.user.get(\"rebateSwitchEx\") != 1) {\r\n            glGame.panel.showTip(\"该功能暂未开放\");\r\n            return;\r\n        }\r\n\r\n        glGame.panel.showPanelByName('backWater');\r\n    },\r\n    click_task() {\r\n        glGame.panel.showPanelByName(\"Task\");\r\n    },\r\n    click_popu() {\r\n        if (glGame.panel.showSuspicious(\"receive_promotion_award\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName(\"popularize\");\r\n    },\r\n    click_acctivit() {\r\n        if (glGame.panel.showSuspicious(\"receive_discount\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName(\"announcement\");\r\n    },\r\n    click_email() {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        glGame.panel.showPanelByName(\"email\");\r\n    },\r\n   \r\n    click_exchange() {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        if (glGame.panel.showSuspicious(\"withdraw\")) {\r\n            return;\r\n        }\r\n        if (glGame.user.is_withdraw == 2) {\r\n            glGame.panel.showDialog(\"账号异常\", glGame.tips.COMMON.ACCOUNTEXCEPTION,\r\n                () => { glGame.panel.showService() }, () => { }, \"我知道了\", \"联系客服\")\r\n            return;\r\n        }\r\n        //glGame.panel.showPanelByName(\"exchangeType\");\r\n        glGame.panel.showPanelByName(\"withdrawal\")\r\n    },\r\n    click_shop() {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true);\r\n            return;\r\n        }\r\n        if (glGame.panel.showSuspicious(\"recharge\")) {\r\n            return;\r\n        }\r\n        glGame.panel.showShop();\r\n    },\r\n  \r\n\r\n});\r\n"]}