{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\withdrawal\\popup\\extractVerifica.js"],"names":["glGame","baseclass","extend","properties","phoneNumber","cc","Label","extracttip","RichText","btn_sendCode","Node","verificaCode","EditBox","onLoad","VerificaCD","emitter","on","withdrawSuccess","initData","coin","Number_str","toString","string","replace","substring","onClick","name","node","remove","sendCode","sure","setCutDown","getComponent","Button","interactable","getChildByName","active","runAction","repeatForever","sequence","delayTime","callFunc","stopAllActions","gameNet","send_msg","route","data","result","panel","showTip","code","console","log","showErrorTip","tips","COMMON","CODE_NULL","user","reqWithdraw","Number","type","set","key","value","OnDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        phoneNumber: cc.Label,\r\n        extracttip: cc.RichText,\r\n        btn_sendCode: cc.Node,\r\n        verificaCode:cc.EditBox,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() { \r\n        this.VerificaCD = 60;\r\n        \r\n        glGame.emitter.on(\"withdrawSuccess\", this.withdrawSuccess, this);\r\n    },\r\n    initData(phoneNumber, coin) {\r\n        let Number_str = phoneNumber.toString();\r\n        this.phoneNumber.string = Number_str.replace(Number_str.substring(3, 7), \"****\");\r\n        this.coin = coin\r\n        this.extracttip.string = `是否确定立即提现${coin}金币？`\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            case \"btn_sendCode\": this.sendCode(); break;\r\n            case \"btn_sure\": this.sure(); break;\r\n        }\r\n    },\r\n    //设置60秒倒计时\r\n    setCutDown() {\r\n        this.btn_sendCode.getComponent(cc.Button).interactable = false;\r\n        this.btn_sendCode.getChildByName(\"time\").active = true;\r\n        this.btn_sendCode.getChildByName(\"tip\").active = false;\r\n        this.node.runAction(cc.repeatForever(cc.sequence(\r\n            cc.delayTime(1),\r\n            cc.callFunc(() => {\r\n                this.VerificaCD--\r\n                this.btn_sendCode.getChildByName(\"time\").getComponent(cc.Label).string = `${this.VerificaCD}秒`;\r\n                if (this.VerificaCD == 0) {\r\n                    this.node.stopAllActions();\r\n                    this.VerificaCD = 60;\r\n                    this.btn_sendCode.getChildByName(\"time\").active = false;\r\n                    this.btn_sendCode.getChildByName(\"tip\").active = true;\r\n                    this.btn_sendCode.getComponent(cc.Button).interactable = true;\r\n                }\r\n            })\r\n        )\r\n        ))\r\n    },\r\n    sendCode() {\r\n        if(this.VerificaCD!=60)return\r\n        glGame.gameNet.send_msg(\"http.reqWithdrawPhone\", null, (route, data) => {\r\n            if (!data.result) {\r\n                glGame.panel.showTip(\"验证码发送失败\");\r\n                return;\r\n            }\r\n            glGame.panel.showTip(\"验证码发送成功\");\r\n            this.setCutDown();\r\n            if (data && data.code) {\r\n                console.log(\"是否有验证码\", data.code)\r\n            }\r\n            \r\n        })\r\n    },\r\n    withdrawSuccess(){\r\n        this.remove();\r\n    },\r\n    sure() {\r\n        if (this.verificaCode.string == \"\")return glGame.panel.showErrorTip(glGame.tips.COMMON.CODE_NULL);\r\n        glGame.user.reqWithdraw(Number(this.coin), this.type, this.verificaCode.string);\r\n    },\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    OnDestroy(){\r\n        glGame.emitter.off(\"withdrawSuccess\",this);\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}