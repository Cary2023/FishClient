{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\enterRoom\\slwhentry.js"],"names":["glGame","baseclass","extend","properties","goldCount","cc","Label","prefab_record","Prefab","prefab_gameRule","slwhselect","Node","BGM","type","AudioClip","onLoad","gameid","node","zIndex","emitter","on","MESSAGE","UI","ROOM_ENTER_SHOW","RootNodeShow","ROOM_ENTER_HIDE","RootNodeHide","click_back","updateuserInfo","registerEvent","reqEnterArea","nodeInfo","active","unregisterEvent","gameID","scenetag","SLWH","readyroom","onGameInfolist","onRoomInfo","onDeleteRoom","off","onClick","name","click_help","click_record","click_addgold","click_userinfo","enterroom","console","error","user","isTourist","panel","showRegisteredGift","suspicious","game","is_game","showDialog","showService","showFieldSelectionJuHua","room","reqMyGameState","parent","then","enterHundredsRoomOther","cutFloat","value","Number","div","toString","showUserInfo","showRemoteImage","Playerhead","get","coin","string","GoldTemp","setGameId","updateBgInfo","showPanelByName","showShop","reqExitArea","remove","showPanel","msg","gameInfoTest","key","getChildByName","content","lab_zhunru","getComponent","Chips","set","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n\r\n    properties: {\r\n        goldCount: cc.Label,\r\n        prefab_record:cc.Prefab,\r\n        prefab_gameRule:cc.Prefab,\r\n        slwhselect: cc.Node,\r\n        BGM: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameid = 0;\r\n        this.node.zIndex = 20;\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_SHOW, this.RootNodeShow, this);\r\n        glGame.emitter.on(MESSAGE.UI.ROOM_ENTER_HIDE, this.RootNodeHide, this);\r\n        glGame.emitter.on(\"nodeRemove\", this.click_back, this);\r\n        glGame.emitter.on(\"updateUserData\", this.updateuserInfo, this);\r\n        this.updateuserInfo();\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n        this.nodeInfo = {};\r\n    },\r\n    RootNodeShow() {\r\n        this.node.active = true;\r\n        this.registerEvent();\r\n        this.reqEnterArea();\r\n    },\r\n    RootNodeHide() {\r\n        this.node.active = false;\r\n        this.unregisterEvent();\r\n    },\r\n    //发包\r\n    reqEnterArea() {\r\n        this.gameID = glGame.scenetag.SLWH;\r\n        glGame.readyroom.reqEnterArea(glGame.scenetag.SLWH);\r\n    },\r\n    //事件监听\r\n    registerEvent() {\r\n        glGame.emitter.on(\"onGameInfolist_area\", this.onGameInfolist, this);\r\n        glGame.emitter.on(\"onRoomInfo_area\", this.onRoomInfo, this);\r\n        glGame.emitter.on(\"onDeleteRoom_area\", this.onDeleteRoom, this);\r\n    },\r\n    //事件销毁\r\n    unregisterEvent() {\r\n        glGame.emitter.off(\"onGameInfolist_area\", this);\r\n        glGame.emitter.off(\"onRoomInfo_area\", this);\r\n        glGame.emitter.off(\"onDeleteRoom_area\", this);\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_back\": this.click_back(); break;\r\n            case \"btn_help\": this.click_help(); break;\r\n            case \"btn_record\": this.click_record(); break;\r\n            case \"mycoinInfo\": this.click_addgold(); break;\r\n            case \"headbg\": this.click_userinfo(); break;\r\n            case \"btn_chongzhi\": this.click_addgold(); break;\r\n            case \"btn_start\": this.enterroom(name, node); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    enterroom(name, node) {\r\n        if (glGame.user.isTourist()) {\r\n            glGame.panel.showRegisteredGift(true)\r\n            return;\r\n        }\r\n        if((glGame.user.suspicious == 1 &&glGame.user.game == 2 ) || glGame.user.is_game == 2 ){\r\n            glGame.panel.showDialog(\"\", \"您的账号数据异常，暂时禁止进入游戏，如有疑问，请联系客服！\", () => { glGame.panel.showService() }, () => {}, \"我知道了\", \"联系客服\");\r\n            return;\r\n        }\r\n        glGame.panel.showFieldSelectionJuHua();\r\n        glGame.room.reqMyGameState(this.gameID,node.parent.name).then(() => {\r\n            glGame.readyroom.enterHundredsRoomOther(this.gameID,node.parent.name);\r\n        })\r\n    },\r\n    cutFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    showUserInfo() {\r\n        glGame.panel.showRemoteImage(this.Playerhead, glGame.user.get(\"headURL\"));\r\n    },\r\n    updateuserInfo() {\r\n        let coin = glGame.user.get(\"coin\")\r\n        this.goldCount.string = glGame.user.GoldTemp(coin);\r\n    },\r\n\r\n    setGameId(gameid) {\r\n        this.gameid = gameid;\r\n    },\r\n\r\n    updateBgInfo() {\r\n\r\n\r\n    },\r\n    click_userinfo() {\r\n        glGame.panel.showPanelByName(\"userinfo\");\r\n    },\r\n    click_addgold() {\r\n        glGame.panel.showShop(30);\r\n    },\r\n    click_back() {\r\n        glGame.readyroom.reqExitArea();\r\n        this.remove();\r\n    },\r\n    click_help() {\r\n        let prefab_gameRule = glGame.panel.showPanel(this.prefab_gameRule);\r\n        prefab_gameRule.zIndex = 30;\r\n    },\r\n    click_record() {\r\n        let prefab_record = glGame.panel.showPanel(this.prefab_record);\r\n        prefab_record.zIndex = 30;\r\n    },\r\n    onGameInfolist(msg) {\r\n        this.gameInfoTest = glGame.readyroom.get(\"gameInfo\");\r\n        for(let key in this.gameInfoTest){\r\n            if(this.slwhselect.getChildByName(`${key}`)){\r\n                let content = this.slwhselect.getChildByName(`${key}`).getChildByName(\"content\");\r\n                let lab_zhunru = content.getChildByName('lab_zhunru').getComponent(cc.Label);\r\n                lab_zhunru.string = \" \" + this.cutFloat(this.gameInfoTest[key].Chips[0]);\r\n            }\r\n        }\r\n    },\r\n    onRoomInfo(msg) {\r\n\r\n    },\r\n    onDeleteRoom(msg) {\r\n\r\n    },\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    get(key) {\r\n        return this[key];\r\n    },\r\n    OnDestroy() {\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_SHOW, this);\r\n        glGame.emitter.off(MESSAGE.UI.ROOM_ENTER_HIDE, this);\r\n        glGame.emitter.off(\"nodeRemove\", this);\r\n        glGame.emitter.off(\"updateUserData\", this);\r\n        this.unregisterEvent();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}