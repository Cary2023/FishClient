{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\withdrawal\\backWaterRule.js"],"names":["glGame","baseclass","extend","properties","content","cc","Node","item","curPage","Label","totalPage","onLoad","page","record","reqWithdrawDiscount","onClick","name","node","remove","upPage","downPage","string","updateItem","gameNet","send_msg","page_size","route","data","result","total_page","destroyAllChildren","removeAllChildren","list","i","length","panel","instantiate","parent","bg","getChildByName","time","getComponent","type","coinNumber","state","waterAsk","RichText","active","timeStamp","Date","rechargeTimeStamp","strTime","getFullYear","getMonth","getDate","tips","WEEKNAME","getDay","getHours","getMinutes","getSeconds","source","getFloat","coin","current_flow","need_flow","color","showEffectNode","value","Number","div","toString","set","key","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        content: cc.Node,\r\n        item: cc.Node,\r\n        curPage: cc.Label,\r\n        totalPage: cc.Label,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.page = 1\r\n        this.record = {};\r\n        this.reqWithdrawDiscount();\r\n    },\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            case \"btn_upPage\":this.upPage();break;\r\n            case \"btn_downPage\":this.downPage();break;\r\n        }\r\n    },\r\n    reqWithdrawDiscount() {\r\n        if (this.record[this.page]) {\r\n            this.curPage.string = this.page;\r\n            this.updateItem(this.record[this.page]);\r\n            return\r\n        }\r\n        glGame.gameNet.send_msg(\"http.reqWithdrawDiscount\", { page: this.page, page_size: 8 }, (route, data) => {\r\n            this.totalPage.string = data.result.total_page;\r\n            this.curPage.string = this.page;\r\n            this.record[this.page] = data;\r\n            this.updateItem(data);\r\n        })\r\n    },\r\n    updateItem(data) {\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        let list = data.result.list;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let panel = cc.instantiate(this.item);\r\n            panel.parent = this.content;\r\n            let bg = panel.getChildByName(\"bg\")\r\n            let time = panel.getChildByName(\"time\").getComponent(cc.Label);\r\n            let type = panel.getChildByName(\"type\").getComponent(cc.Label);\r\n            let coinNumber = panel.getChildByName(\"coinNumber\").getComponent(cc.Label);\r\n            let state = panel.getChildByName(\"state\").getComponent(cc.Label);\r\n            let waterAsk = panel.getChildByName(\"waterAsk\").getComponent(cc.RichText);\r\n            // let current_flow = panel.getChildByName(\"waterAsk\").getChildByName(\"lab_one\").getComponent(cc.Label);\r\n            // let need_flow = panel.getChildByName(\"waterAsk\").getChildByName(\"lab_two\").getComponent(cc.Label);\r\n            bg.active = i % 2 != 0;\r\n            let timeStamp = new Date(list[i].rechargeTimeStamp * 1000);\r\n            let strTime = `${timeStamp.getFullYear()}/${timeStamp.getMonth() + 1 >= 10 ? timeStamp.getMonth() + 1 : \"0\" + (timeStamp.getMonth() + 1)}/${timeStamp.getDate() >= 10 ? timeStamp.getDate() : '0' + timeStamp.getDate()}`\r\n            strTime += `（${glGame.tips.WEEKNAME[timeStamp.getDay()]}）`\r\n            strTime += `${timeStamp.getHours() >= 10 ? timeStamp.getHours() : \"0\" + timeStamp.getHours()}:`\r\n            strTime += `${timeStamp.getMinutes() >= 10 ? timeStamp.getMinutes() : \"0\" + timeStamp.getMinutes()}:`\r\n            strTime += `${timeStamp.getSeconds() >= 10 ? timeStamp.getSeconds() : \"0\" + timeStamp.getSeconds()}`\r\n            time.string = strTime;\r\n            type.string = list[i].source;\r\n            coinNumber.string = this.getFloat(list[i].coin)+\"元\";\r\n            if(list[i].current_flow == list[i].need_flow){\r\n                waterAsk.string = `<color=#00ff18>${this.getFloat(list[i].current_flow)}</c>/${this.getFloat(list[i].need_flow)}`\r\n            }else{\r\n                waterAsk.string = `<color=#dc4848>${this.getFloat(list[i].current_flow)}</c>/${this.getFloat(list[i].need_flow)}`\r\n            }\r\n            state.node.color = list[i].current_flow == list[i].need_flow?cc.color(0,255,24):cc.color(220,72,72);\r\n            state.string = list[i].type;\r\n            //panel.active = true;\r\n        }\r\n        this.node.getChildByName(\"tip\").active = list.length > 0;\r\n        this.node.getChildByName(\"btn_downPage\").active = list.length > 0;\r\n        this.node.getChildByName(\"btn_upPage\").active = list.length > 0;\r\n        this.node.getChildByName(\"pageLayout\").active = list.length > 0;\r\n        this.node.getChildByName(\"img_wujilu\").active = list.length == 0;\r\n        glGame.panel.showEffectNode(this,this.content,0.01,true)\r\n    },\r\n    //桌面数据的显示\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    set(key, value) {\r\n        this[key] = value;\r\n    },\r\n    upPage() {\r\n        if (this.page - 1 < 1) {\r\n            return\r\n        }\r\n        this.page--;\r\n        this.reqWithdrawDiscount();\r\n    },\r\n    downPage() {\r\n        if (this.page + 1 > Number(this.totalPage.string)) {\r\n            return\r\n        }\r\n        this.page++;\r\n        this.reqWithdrawDiscount();\r\n    },\r\n    OnDestroy() {\r\n\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}