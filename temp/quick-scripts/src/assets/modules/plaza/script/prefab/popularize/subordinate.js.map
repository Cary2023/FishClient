{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\subordinate.js"],"names":["glGame","baseclass","extend","properties","norecord","cc","Node","infoItem","content","Lab_CurPage","Label","Lab_totalPage","sub_number","sub_effective_number","team_number","team_effective_number","onLoad","page","string","recordReqData","id","nickname","date","onClick","name","node","remove","pageup_CB","pagedown_CB","ReqPlayerExtensionCountlessMember","gameNet","send_msg","page_size","route","msg","recordData","page_total","setTable","list","initUI","data","team_sub_number","effective_number","destroyAllChildren","removeAllChildren","count","length","active","hiadShowNode","i","instantiate","parent","getChildByName","getComponent","logicid","ag_effective","histroytotalcommission","history_contribute_sub_commission","history_contribute_bet_commission","m_histroytotalcommission","getFloat","panel","settingTableLabelColor","offline_time","showEffectNode","isBool","value","Number","div","toString","timestampToTime","timestamp","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        norecord: cc.Node,//noneLab\r\n        infoItem: cc.Node,\r\n        content: cc.Node,\r\n        Lab_CurPage: cc.Label,\r\n        Lab_totalPage: cc.Label,\r\n        //up\r\n        sub_number:cc.Label,\r\n        sub_effective_number:cc.Label,\r\n        team_number:cc.Label,\r\n        team_effective_number:cc.Label,\r\n\r\n    },\r\n    onLoad() {\r\n        this.page = 1;\r\n        this.Lab_CurPage.string = this.page;\r\n        this.recordReqData = {id :\"\", nickname : \"\",date:\"\"};\r\n    },\r\n\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"close\": this.remove(); break;\r\n            case \"btn_pageup\": this.pageup_CB(); break;\r\n            case \"btn_pagedown\": this.pagedown_CB(); break;\r\n        }\r\n    },\r\n    ReqPlayerExtensionCountlessMember() {\r\n        let page = this.page,\r\n        id = this.recordReqData.id,\r\n        nickname = this.recordReqData.nickname,\r\n        date = this.recordReqData.date;\r\n        this.Lab_CurPage.string = this.page;\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessMember', { page: page, id: id, nickname: nickname, date: date, page_size: 8 }, (route, msg) => {\r\n            this.recordData = msg;\r\n            this.Lab_totalPage.string = this.recordData.page_total == 0?1:this.recordData.page_total;\r\n            this.setTable(this.recordData.list);\r\n        })\r\n    },\r\n    initUI(data) {\r\n        this.recordData = data;\r\n        this.sub_number.string = this.recordData.sub_number;\r\n        this.sub_effective_number.string = `(${this.recordData.sub_effective_number})`;\r\n\r\n        this.team_number.string = this.recordData.team_sub_number;\r\n        this.team_effective_number.string = `(${this.recordData.effective_number})`;\r\n\r\n        //this.history_commission.string = this.getFloat(this.recordData.history_commission);\r\n\r\n        this.Lab_totalPage.string = this.recordData.page_total == 0?1:this.recordData.page_total;\r\n        \r\n        this.setTable(this.recordData.list);\r\n    },\r\n    setTable(data) {\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        let count = data.length;\r\n        if (count == 0) {\r\n            this.norecord.active = true;\r\n            return;\r\n        }\r\n        this.hiadShowNode(count > 0)\r\n        for (let i = 0; i < count; i++) {\r\n            let infoItem = cc.instantiate(this.infoItem);\r\n            infoItem.parent = this.content;\r\n            infoItem.active = false;\r\n            infoItem.getChildByName(\"bg\").active = i % 2 == 1;\r\n            infoItem.getChildByName(\"memberID\").getComponent(cc.Label).string = data[i].logicid;\r\n            infoItem.getChildByName(\"name\").getComponent(cc.Label).string = data[i].nickname;\r\n            infoItem.getChildByName(\"isTrue\").getChildByName(data[i].ag_effective == 1 ? \"img_gou\" : \"img_cha\").active = true;\r\n            infoItem.getChildByName(\"trueMember\").getComponent(cc.Label).string = data[i].effective_number;         //团队有效成员\r\n            let histroytotalcommission = data[i].history_contribute_sub_commission + data[i].history_contribute_bet_commission\r\n            let m_histroytotalcommission = infoItem.getChildByName(\"histroytotalcommission\")\r\n            m_histroytotalcommission.getComponent(cc.Label).string = this.getFloat(histroytotalcommission);    //总佣金\r\n            glGame.panel.settingTableLabelColor(m_histroytotalcommission);\r\n            infoItem.getChildByName(\"loginTime\").getComponent(cc.Label).string = data[i].offline_time;            //离线时间\r\n        }\r\n        glGame.panel.showEffectNode(this,this.content,0.02,true);\r\n    },\r\n    hiadShowNode(isBool) {\r\n        this.node.getChildByName(\"btn_pageup\").active = isBool;\r\n        this.node.getChildByName(\"pagelayout\").active = isBool;\r\n        this.node.getChildByName(\"btn_pagedown\").active = isBool;\r\n        // this.node.getChildByName(\"explain\").active = isBool;\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n\r\n    pageup_CB() {\r\n        this.page--;\r\n        if(this.page<1){\r\n            this.page = 1\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessMember()\r\n    },\r\n    pagedown_CB() {\r\n        this.page++;\r\n        if(this.page>Number(this.Lab_totalPage.string)){\r\n            this.page = Number(this.Lab_totalPage.string);\r\n            return\r\n        }\r\n        this.ReqPlayerExtensionCountlessMember()\r\n    },\r\n    timestampToTime(timestamp) {\r\n        var date = new Date(timestamp * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n        var Y = date.getFullYear() + '-';\r\n        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\r\n        var D = date.getDate()<10?'0'+date.getDate()+' ':date.getDate()+' '\r\n        var h = date.getHours() + ':';\r\n        var m = date.getMinutes()<10?'0'+date.getMinutes():date.getMinutes();\r\n        return Y+M+D+h+m;\r\n        \r\n    },\r\n    OnDestroy() {\r\n    },\r\n});\r\n"]}