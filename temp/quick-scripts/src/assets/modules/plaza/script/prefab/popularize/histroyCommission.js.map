{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\popularize\\histroyCommission.js"],"names":["glGame","baseclass","extend","properties","Lab_time","cc","Label","infoItem","Node","content","Lab_CurPage","Lab_totalPage","onLoad","CurPage","string","recordData","onClick","name","node","remove","pageup_CB","pagedown_CB","ReqPlayerExtensionCountlessRecordDetail","page","date","curdate","gameNet","send_msg","page_size","route","msg","console","log","setTable","list","initUI","data","page_total","destroyAllChildren","removeAllChildren","i","length","instantiate","parent","active","getChildByName","getComponent","logicid","nickname","getFloat","bet","achievecontribu","contribute_bet_commission","panel","settingTableLabelColor","achievement","rankcontribu","contribute_sub_commission","totalcontribu","Number","value","div","toString","OnDestroy"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AACpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAEC,EAAE,CAACC,KADL;AAERC,IAAAA,QAAQ,EAAEF,EAAE,CAACG,IAFL;AAGRC,IAAAA,OAAO,EAAEJ,EAAE,CAACG,IAHJ;AAIRE,IAAAA,WAAW,EAAEL,EAAE,CAACC,KAJR;AAKRK,IAAAA,aAAa,EAAEN,EAAE,CAACC;AALV,GADQ;AAQpBM,EAAAA,MARoB,oBAQX;AACL,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKH,WAAL,CAAiBI,MAAjB,GAA0B,KAAKD,OAA/B;AACA,SAAKE,UAAL,GAAkB,EAAlB;AACH,GAZmB;AAcpBC,EAAAA,OAdoB,mBAcZC,IAdY,EAcNC,IAdM,EAcA;AAChB,YAAQD,IAAR;AACI,WAAK,WAAL;AAAkB,aAAKE,MAAL;AAAe;;AACjC,WAAK,YAAL;AAAmB,aAAKC,SAAL;AAAkB;;AACrC,WAAK,cAAL;AAAqB,aAAKC,WAAL;AAAoB;AAH7C;AAKH,GApBmB;AAqBpBC,EAAAA,uCArBoB,qDAqB8B;AAAA;;AAAA,QAAVC,IAAU,uEAAH,CAAG;AAC9C,QAAIC,IAAI,GAAG,KAAKC,OAAhB;AACAzB,IAAAA,MAAM,CAAC0B,OAAP,CAAeC,QAAf,CAAwB,8CAAxB,EAAwE;AAAEJ,MAAAA,IAAI,EAAEA,IAAR;AAAcC,MAAAA,IAAI,EAAEA,IAApB;AAA0BI,MAAAA,SAAS,EAAE;AAArC,KAAxE,EAAkH,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAC9HC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBF,GAArB;AACA,MAAA,KAAI,CAACf,UAAL,CAAgB,KAAI,CAACF,OAArB,IAAgCiB,GAAhC;;AAEA,MAAA,KAAI,CAACG,QAAL,CAAc,KAAI,CAAClB,UAAL,CAAgB,KAAI,CAACF,OAArB,EAA8BqB,IAA5C;AACH,KALD;AAMH,GA7BmB;AA8BpBC,EAAAA,MA9BoB,kBA8BbC,IA9Ba,EA8BPZ,IA9BO,EA8BD;AACf,SAAKC,OAAL,GAAeD,IAAf;AACA,SAAKT,UAAL,CAAgB,KAAKF,OAArB,IAAgCuB,IAAhC;AACA,SAAKhC,QAAL,CAAcU,MAAd,GAAuB,KAAKW,OAA5B;AACA,SAAKd,aAAL,CAAmBG,MAAnB,GAA4BsB,IAAI,CAACC,UAAjC;AACA,SAAKJ,QAAL,CAAcG,IAAI,CAACF,IAAnB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BI,IAA3B;AACH,GArCmB;AAsCpBH,EAAAA,QAtCoB,oBAsCXG,IAtCW,EAsCL;AACX,SAAK3B,OAAL,CAAa6B,kBAAb;AACA,SAAK7B,OAAL,CAAa8B,iBAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACK,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,UAAIjC,QAAQ,GAAGF,EAAE,CAACqC,WAAH,CAAe,KAAKnC,QAApB,CAAf;AACAA,MAAAA,QAAQ,CAACoC,MAAT,GAAkB,KAAKlC,OAAvB;AACAF,MAAAA,QAAQ,CAACqC,MAAT,GAAkB,IAAlB;AACArC,MAAAA,QAAQ,CAACsC,cAAT,CAAwB,IAAxB,EAA8BD,MAA9B,GAAuCJ,CAAC,GAAC,CAAzC;AACAjC,MAAAA,QAAQ,CAACsC,cAAT,CAAwB,QAAxB,EAAkCC,YAAlC,CAA+CzC,EAAE,CAACC,KAAlD,EAAyDQ,MAAzD,GAAkEsB,IAAI,CAACI,CAAD,CAAJ,CAAQO,OAA1E;AACAxC,MAAAA,QAAQ,CAACsC,cAAT,CAAwB,MAAxB,EAAgCC,YAAhC,CAA6CzC,EAAE,CAACC,KAAhD,EAAuDQ,MAAvD,GAAgEsB,IAAI,CAACI,CAAD,CAAJ,CAAQQ,QAAxE;AACAzC,MAAAA,QAAQ,CAACsC,cAAT,CAAwB,aAAxB,EAAuCC,YAAvC,CAAoDzC,EAAE,CAACC,KAAvD,EAA8DQ,MAA9D,GAAuE,KAAKmC,QAAL,CAAcb,IAAI,CAACI,CAAD,CAAJ,CAAQU,GAAtB,CAAvE,CAPkC,CAOkE;;AACpG,UAAIC,eAAe,GAAG5C,QAAQ,CAACsC,cAAT,CAAwB,iBAAxB,CAAtB;AACAM,MAAAA,eAAe,CAACL,YAAhB,CAA6BzC,EAAE,CAACC,KAAhC,EAAuCQ,MAAvC,GAAgD,KAAKmC,QAAL,CAAcb,IAAI,CAACI,CAAD,CAAJ,CAAQY,yBAAtB,CAAhD,CATkC,CASmE;;AACrGpD,MAAAA,MAAM,CAACqD,KAAP,CAAaC,sBAAb,CAAoCH,eAApC;AACA5C,MAAAA,QAAQ,CAACsC,cAAT,CAAwB,cAAxB,EAAwCC,YAAxC,CAAqDzC,EAAE,CAACC,KAAxD,EAA+DQ,MAA/D,GAAwE,KAAKmC,QAAL,CAAcb,IAAI,CAACI,CAAD,CAAJ,CAAQe,WAAtB,CAAxE,CAXkC,CAW8F;;AAChI,UAAIC,YAAY,GAAGjD,QAAQ,CAACsC,cAAT,CAAwB,cAAxB,CAAnB;AACAW,MAAAA,YAAY,CAACV,YAAb,CAA0BzC,EAAE,CAACC,KAA7B,EAAoCQ,MAApC,GAA6C,KAAKmC,QAAL,CAAcb,IAAI,CAACI,CAAD,CAAJ,CAAQiB,yBAAtB,CAA7C,CAbkC,CAamE;;AACrGzD,MAAAA,MAAM,CAACqD,KAAP,CAAaC,sBAAb,CAAoCE,YAApC;AACA,UAAIE,aAAa,GAAGnD,QAAQ,CAACsC,cAAT,CAAwB,eAAxB,CAApB;AACAa,MAAAA,aAAa,CAACZ,YAAd,CAA2BzC,EAAE,CAACC,KAA9B,EAAqCQ,MAArC,GAA8C,KAAKmC,QAAL,CAAcb,IAAI,CAACI,CAAD,CAAJ,CAAQY,yBAAR,GAAoChB,IAAI,CAACI,CAAD,CAAJ,CAAQiB,yBAA1D,CAA9C,CAhBkC,CAgBiG;;AACnIzD,MAAAA,MAAM,CAACqD,KAAP,CAAaC,sBAAb,CAAoCI,aAApC;AACH;AACJ,GA5DmB;AA6DpBtC,EAAAA,SA7DoB,uBA6DR;AACR,SAAKP,OAAL;;AAEA,QAAI,KAAKA,OAAL,GAAe,CAAnB,EAAsB;AAClB,WAAKA,OAAL,GAAe,CAAf;AACA;AACH;;AACD,SAAKH,WAAL,CAAiBI,MAAjB,GAA0B,KAAKD,OAA/B;AACA,SAAKS,uCAAL,CAA6C,KAAKT,OAAlD;AACH,GAtEmB;AAuEpBQ,EAAAA,WAvEoB,yBAuEN;AACV,SAAKR,OAAL;;AAEA,QAAI,KAAKA,OAAL,GAAe8C,MAAM,CAAC,KAAKhD,aAAL,CAAmBG,MAApB,CAAzB,EAAsD;AAClD,WAAKD,OAAL,GAAe8C,MAAM,CAAC,KAAKhD,aAAL,CAAmBG,MAApB,CAArB;AACA;AACH;;AACD,SAAKJ,WAAL,CAAiBI,MAAjB,GAA0B,KAAKD,OAA/B;AACA,SAAKS,uCAAL,CAA6C,KAAKT,OAAlD;AACH,GAhFmB;AAiFpBoC,EAAAA,QAjFoB,oBAiFXW,KAjFW,EAiFJ;AACZ,WAAQD,MAAM,CAACC,KAAD,CAAN,CAAcC,GAAd,CAAkB,GAAlB,CAAD,CAAyBC,QAAzB,EAAP;AACH,GAnFmB;AAoFpBC,EAAAA,SApFoB,uBAoFR,CAEX;AAtFmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        Lab_time: cc.Label,\r\n        infoItem: cc.Node,\r\n        content: cc.Node,\r\n        Lab_CurPage: cc.Label,\r\n        Lab_totalPage: cc.Label,\r\n    },\r\n    onLoad() {\r\n        this.CurPage = 1;\r\n        this.Lab_CurPage.string = this.CurPage;\r\n        this.recordData = {};\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"btn_close\": this.remove(); break;\r\n            case \"btn_pageup\": this.pageup_CB(); break;\r\n            case \"btn_pagedown\": this.pagedown_CB(); break;\r\n        }\r\n    },\r\n    ReqPlayerExtensionCountlessRecordDetail(page = 1) {\r\n        let date = this.curdate;\r\n        glGame.gameNet.send_msg('http.ReqPlayerExtensionCountlessRecordDetail', { page: page, date: date, page_size: 8 }, (route, msg) => {\r\n            console.log(\"这是当前数据\",msg)\r\n            this.recordData[this.CurPage] = msg\r\n            \r\n            this.setTable(this.recordData[this.CurPage].list)\r\n        })\r\n    },\r\n    initUI(data, date) {\r\n        this.curdate = date;\r\n        this.recordData[this.CurPage] = data;\r\n        this.Lab_time.string = this.curdate;\r\n        this.Lab_totalPage.string = data.page_total;\r\n        this.setTable(data.list)\r\n        console.log(\"这是历史佣金明细的消息\", data)\r\n    },\r\n    setTable(data) {\r\n        this.content.destroyAllChildren();\r\n        this.content.removeAllChildren();\r\n        for (let i = 0; i < data.length; i++) {\r\n            let infoItem = cc.instantiate(this.infoItem);\r\n            infoItem.parent = this.content;\r\n            infoItem.active = true;\r\n            infoItem.getChildByName(\"bg\").active = i%2;\r\n            infoItem.getChildByName(\"member\").getComponent(cc.Label).string = data[i].logicid;\r\n            infoItem.getChildByName(\"name\").getComponent(cc.Label).string = data[i].nickname;\r\n            infoItem.getChildByName(\"achievement\").getComponent(cc.Label).string = this.getFloat(data[i].bet);  //打码量\r\n            let achievecontribu = infoItem.getChildByName(\"achievecontribu\")\r\n            achievecontribu.getComponent(cc.Label).string = this.getFloat(data[i].contribute_bet_commission);    //直推佣金\r\n            glGame.panel.settingTableLabelColor(achievecontribu);\r\n            infoItem.getChildByName(\"teamcontribu\").getComponent(cc.Label).string = this.getFloat(data[i].achievement);                     //团队业绩\r\n            let rankcontribu = infoItem.getChildByName(\"rankcontribu\")\r\n            rankcontribu.getComponent(cc.Label).string = this.getFloat(data[i].contribute_sub_commission);       //级差佣金贡献\r\n            glGame.panel.settingTableLabelColor(rankcontribu);\r\n            let totalcontribu = infoItem.getChildByName(\"totalcontribu\")\r\n            totalcontribu.getComponent(cc.Label).string = this.getFloat(data[i].contribute_bet_commission + data[i].contribute_sub_commission);//总贡献佣金\r\n            glGame.panel.settingTableLabelColor(totalcontribu);\r\n        }\r\n    },\r\n    pageup_CB() {\r\n        this.CurPage--\r\n        \r\n        if (this.CurPage < 1) {\r\n            this.CurPage = 1\r\n            return\r\n        }\r\n        this.Lab_CurPage.string = this.CurPage;\r\n        this.ReqPlayerExtensionCountlessRecordDetail(this.CurPage)\r\n    },\r\n    pagedown_CB() {\r\n        this.CurPage++\r\n        \r\n        if (this.CurPage > Number(this.Lab_totalPage.string)) {\r\n            this.CurPage = Number(this.Lab_totalPage.string)\r\n            return\r\n        }\r\n        this.Lab_CurPage.string = this.CurPage;\r\n        this.ReqPlayerExtensionCountlessRecordDetail(this.CurPage)\r\n    },\r\n    getFloat(value) {\r\n        return (Number(value).div(100)).toString();\r\n    },\r\n    OnDestroy() {\r\n\r\n    },\r\n});\r\n"]}