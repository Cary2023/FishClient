{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\banner.js"],"names":["MODE","GROUP","UNGROUP","glGame","baseclass","extend","properties","page1","type","cc","Node","page2","page3","pageTouch","mask","dianGroup","dianItem","onLoad","emitter","on","initBillBoradsUI","lastPage","curPage","nextPage","pages","moveWidth","node","width","temp","dianWidthMax","ratex","moveBool","DTY","curIndex","nextIndex","laseIndex","isCanMove","start","user","get","reqBillboards","bannerData","list","loop","length","panel","showRemoteImage","getPageSprite","img","EventType","TOUCH_START","click_pageTouch","item","i","registerTouchEvent","initDian","initDianState","schedule","runPage","itemTemp","instantiate","getComponent","Layout","spacingX","resizeMode","ResizeMode","CHILDREN","parent","active","childrenCount","children","getChildByName","touchstart","TOUCH_MOVE","touchmove","TOUCH_END","touchend","TOUCH_CANCEL","touchcancel","event","unschedule","touches","getTouches","startPos","movePos","target","convertToNodeSpaceAR","getStartLocation","getLocation","x","convertToNodeSpace","Math","abs","setTimeout","dty","delayTime","moveTo","v2","moveTo1","runAction","cb","callFunc","setPage","sequence","dir","shift","push","pop","unshift","setcurIndex","initBannerUI","maxIndex","index","setOtherIndex","onClick","name","url","indexOf","console","log","gameid","Number","substring","gamelistcfg","onEnterGame","logon","sys","openURL","OnDestroy","off","clearTimeout"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 当手动滑动时，屏蔽自动滑动\r\n * 当自动滑动时，开启遮罩，防止连续滑动\r\n * 当手动滑动时，开启遮罩，防止连续滑动 \r\n */\r\nconst MODE = {\r\n    GROUP: 1,\r\n    UNGROUP: 2\r\n}\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        page1: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        page2: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        page3: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        pageTouch: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        mask: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        dianGroup: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        dianItem: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        glGame.emitter.on(\"initBillBoradsUI\", this.initBillBoradsUI, this)\r\n        this.lastPage = this.page1;\r\n        this.curPage = this.page2;\r\n        this.nextPage = this.page3;\r\n        this.pages = [this.page1, this.page2, this.page3]\r\n        this.moveWidth = this.node.width;\r\n        this.temp = 100;\r\n        this.dianWidthMax = 380;                        //相对舒服的参数，无法与其他相对项参数挂钩\r\n        this.ratex = 0.2;\r\n        this.moveBool = true;                           //是否在移动\r\n        this.DTY = 0;\r\n        this.curIndex = 0;\r\n        this.nextIndex = 0;\r\n        this.laseIndex = 0;\r\n        this.isCanMove = false;                        //开启监听  只有1页的时候不需要开启\r\n    },\r\n\r\n    start() {\r\n        if (glGame.user.get(\"reqBillboardsData\")) {\r\n            this.initBillBoradsUI();\r\n        } else {\r\n            glGame.user.reqBillboards();\r\n        }\r\n    },\r\n\r\n    initBillBoradsUI() {\r\n        this.bannerData = glGame.user.get(\"reqBillboardsData\").list;\r\n        this.loop = glGame.user.get(\"reqBillboardsData\").loop;\r\n        this.curIndex = 0;\r\n\r\n        if (this.bannerData.length == 1) {\r\n            glGame.panel.showRemoteImage(this.getPageSprite(1), this.bannerData[0].img);    //中间渲染\r\n            this.pageTouch.on(cc.Node.EventType.TOUCH_START, this.click_pageTouch, this)\r\n        } else if (this.bannerData.length == 2) {\r\n            glGame.panel.showRemoteImage(this.getPageSprite(0), this.bannerData[1].img);    //中间渲染\r\n            glGame.panel.showRemoteImage(this.getPageSprite(1), this.bannerData[0].img);    //中间渲染\r\n            glGame.panel.showRemoteImage(this.getPageSprite(2), this.bannerData[1].img);    //中间渲染\r\n            this.isCanMove = true;\r\n        } else if (this.bannerData.length >= 2) {\r\n            let item = this.getPageSprite(0);\r\n            glGame.panel.showRemoteImage(item, this.bannerData[this.bannerData.length - 1].img);\r\n            for (let i = 1; i < this.pages.length; i++) {\r\n                item = this.getPageSprite(i);\r\n                glGame.panel.showRemoteImage(item, this.bannerData[i - 1].img);\r\n            }\r\n            this.isCanMove = true;\r\n        }\r\n        if (this.isCanMove) this.registerTouchEvent();\r\n        this.initDian();\r\n        this.initDianState();\r\n\r\n        //开启自动滑动\r\n        if (this.isCanMove && this.loop > 0) {\r\n            this.schedule(this.runPage, this.loop);\r\n        }\r\n    },\r\n    //初始化点\r\n    initDian() {\r\n        let itemTemp = cc.instantiate(this.dianItem);\r\n        if (this.dianWidthMax <= this.bannerData.length*(itemTemp.width + this.dianGroup.getComponent(cc.Layout).spacingX)){\r\n            this.dianGroup.getComponent(cc.Layout).resizeMode = cc.Layout.ResizeMode.CHILDREN;\r\n            this.dianGroup.width = this.dianWidthMax;\r\n        }\r\n        for (let i = 0; i < this.bannerData.length; i++) {\r\n            let item = cc.instantiate(this.dianItem);\r\n            item.parent = this.dianGroup;\r\n            item.active = true;\r\n        }\r\n    },\r\n    //初始化点的状态\r\n    initDianState() {\r\n        for (let i = 0; i < this.dianGroup.childrenCount; i++) {\r\n            let node = this.dianGroup.children[i];\r\n            node.getChildByName(\"dian\").active = i == this.curIndex\r\n        }\r\n    },\r\n\r\n    registerTouchEvent() {\r\n        this.pageTouch.on(cc.Node.EventType.TOUCH_START, this.touchstart, this);\r\n        this.pageTouch.on(cc.Node.EventType.TOUCH_MOVE, this.touchmove, this);\r\n        this.pageTouch.on(cc.Node.EventType.TOUCH_END, this.touchend, this);\r\n        this.pageTouch.on(cc.Node.EventType.TOUCH_CANCEL, this.touchcancel, this);\r\n    },\r\n\r\n    touchstart(event) {\r\n        this.unschedule(this.runPage);          //关闭滑动事件\r\n        this.mask.active = true;                //开启遮罩，防止连续手动滑动\r\n        this.moveBool = true;\r\n        var touches = event.getTouches();\r\n        this.startPos = this.movePos = event.target.convertToNodeSpaceAR(touches[0].getStartLocation())\r\n    },\r\n    touchmove(event) {\r\n        if (!this.moveBool) return;\r\n        var touches = event.getTouches();\r\n        this.movePos = event.target.convertToNodeSpaceAR(touches[0].getLocation())\r\n        if (this.movePos.x - this.startPos.x > 0) {\r\n            //向右\r\n            this.lastPage.x = -this.moveWidth + (this.movePos.x - this.startPos.x)\r\n            this.curPage.x = 0 + (this.movePos.x - this.startPos.x);\r\n            this.nextPage.x = this.moveWidth + (this.movePos.x - this.startPos.x)\r\n        } else if (this.movePos.x - this.startPos.x < 0) {\r\n            //向左\r\n            this.lastPage.x = -this.moveWidth + (this.movePos.x - this.startPos.x);\r\n            this.curPage.x = 0 + (this.movePos.x - this.startPos.x);\r\n            this.nextPage.x = this.moveWidth + (this.movePos.x - this.startPos.x);\r\n        }\r\n        if (event.target.convertToNodeSpace(event.getLocation()).x > this.moveWidth || event.target.convertToNodeSpace(event.getLocation()).x < 0) {\r\n            this.moveBool = false;\r\n        }\r\n    },\r\n    touchend(event) {\r\n        this.moveBool = false;\r\n        this.DTY = Math.abs(this.movePos.x - this.startPos.x) / this.moveWidth * this.ratex;\r\n        if (this.loop > 0) {\r\n            setTimeout(() => {\r\n                this.schedule(this.runPage, this.loop)\r\n            }, 1)\r\n        }\r\n        let dty = cc.delayTime(this.DTY);\r\n        if (this.movePos.x - this.startPos.x > 0) {\r\n            //向右\r\n            if (Math.abs(this.movePos.x - this.startPos.x) >= this.temp) {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(this.moveWidth, 0));\r\n                this.lastPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(2)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n            } else {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(-this.moveWidth, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                this.lastPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(1)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n\r\n            }\r\n        } else if (this.movePos.x - this.startPos.x < 0) {\r\n            //向左\r\n            if (Math.abs(this.movePos.x - this.startPos.x) >= this.temp) {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(-this.moveWidth, 0));\r\n                this.nextPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(0)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n\r\n            } else {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(this.moveWidth, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                this.nextPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(1)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n\r\n            }\r\n        }\r\n        else if (this.movePos.x - this.startPos.x == 0) {\r\n            this.click_pageTouch();\r\n            this.mask.active = false;\r\n        }\r\n    },\r\n    touchcancel(event) {\r\n        this.moveBool = false;\r\n        this.DTY = Math.abs(this.movePos.x - this.startPos.x) / this.moveWidth * this.ratex;\r\n        if (this.loop > 0) {\r\n            setTimeout(() => {\r\n                this.schedule(this.runPage, this.loop);\r\n            }, 1)\r\n        }\r\n        let dty = cc.delayTime(this.DTY);\r\n        if (this.movePos.x - this.startPos.x > 0) {\r\n            //向右\r\n            if (Math.abs(this.movePos.x - this.startPos.x) >= this.temp) {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(this.moveWidth, 0));\r\n                this.lastPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(2)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n            } else {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(-this.moveWidth, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                this.lastPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(1)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n            }\r\n        } else if (this.movePos.x - this.startPos.x < 0) {\r\n            //向左\r\n            if (Math.abs(this.movePos.x - this.startPos.x) >= this.temp) {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(-this.moveWidth, 0));\r\n                this.nextPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(0)\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n            } else {\r\n                let moveTo = cc.moveTo(this.DTY, cc.v2(this.moveWidth, 0));\r\n                let moveTo1 = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n                this.nextPage.runAction(moveTo);\r\n                this.curPage.runAction(moveTo1);\r\n\r\n                let cb = cc.callFunc(() => {\r\n                    this.setPage(1);\r\n                })\r\n                this.node.runAction(cc.sequence(dty, cb));\r\n            }\r\n        }\r\n        else if (this.movePos.x - this.startPos.x == 0) {\r\n            this.click_pageTouch();\r\n            this.mask.active = false;\r\n        }\r\n    },\r\n    //设置节点位置\r\n    setPage(dir) {\r\n        this.setTimeout = setTimeout(() => {\r\n            this.mask.active = false;\r\n        }, 10)\r\n        let node;\r\n        switch (dir) {\r\n            case 0:             //左\r\n                this.lastPage.x = this.moveWidth;\r\n                node = this.pages.shift();\r\n                this.pages.push(node)\r\n                break;\r\n            case 1:\r\n                return;\r\n            case 2:             //右\r\n                this.nextPage.x = -this.moveWidth;\r\n                node = this.pages.pop();\r\n                this.pages.unshift(node);\r\n                break;\r\n        }\r\n        this.lastPage = this.pages[0];\r\n        this.curPage = this.pages[1];\r\n        this.nextPage = this.pages[2];\r\n        this.setcurIndex(dir);\r\n        this.initDianState();\r\n        this.initBannerUI(dir);\r\n    },\r\n\r\n    //设置当前界面的索引\r\n    setcurIndex(dir) {\r\n        let maxIndex = this.bannerData.length - 1;\r\n        switch (dir) {\r\n            case 0: this.curIndex++; break;   //左\r\n            case 2: this.curIndex--; break;     //右\r\n        }\r\n        if (this.curIndex > maxIndex) {\r\n            this.curIndex = 0;\r\n        } else if (this.curIndex < 0) {\r\n            this.curIndex = maxIndex\r\n        }\r\n    },\r\n\r\n    getPageSprite(index){\r\n        return this.pages[index].children[1].children[0];\r\n    },\r\n\r\n    //设置页面精灵\r\n    initBannerUI(dir) {\r\n        this.setOtherIndex(dir);\r\n        switch (dir) {\r\n            case 0:         //左  渲染最后一张\r\n                glGame.panel.showRemoteImage(this.getPageSprite(2), this.bannerData[this.nextIndex].img);    //中间渲染\r\n                break;\r\n            case 2:         //右  渲染第一张\r\n                glGame.panel.showRemoteImage(this.getPageSprite(0), this.bannerData[this.laseIndex].img);    //中间渲染\r\n                break;\r\n        }\r\n    },\r\n    //设置当前界面的索引\r\n    setOtherIndex(dir) {\r\n        let maxIndex = this.bannerData.length - 1;\r\n        switch (dir) {\r\n            case 0:             //左\r\n                this.nextIndex = this.curIndex + 1;\r\n                if (this.nextIndex > maxIndex) {\r\n                    this.nextIndex = 0;\r\n                }\r\n                break;\r\n            case 2:             //右\r\n                this.laseIndex = this.curIndex - 1;\r\n                if (this.laseIndex < 0) {\r\n                    this.laseIndex = maxIndex;\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    runPage() {\r\n        this.mask.active = true;\r\n        this.moveBool = false;\r\n        this.DTY = 0.2;\r\n        let dty = cc.delayTime(0.2);\r\n        let moveTo1 = cc.moveTo(this.DTY, cc.v2(-this.moveWidth, 0));\r\n        this.curPage.runAction(moveTo1);\r\n        let moveTo = cc.moveTo(this.DTY, cc.v2(0, 0));\r\n        this.nextPage.runAction(moveTo);\r\n\r\n        let cb = cc.callFunc(() => {\r\n            this.setPage(0)\r\n        })\r\n        this.node.runAction(cc.sequence(dty, cb));\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    click_pageTouch() {\r\n        let url;\r\n        for (let i = 0; i < this.bannerData.length; i++) {\r\n            if (this.curIndex == i) {\r\n                url = this.bannerData[i].url\r\n                if (!url || url == \"\") return;\r\n                if (url.indexOf(\"data://gid=\") > -1) {\r\n                    console.log(\"=======》点击banner调用游戏\");\r\n                    let gameid = Number(url.substring(11));\r\n                    // glGame.emitter.emit(\"roomEntrance\", gameid);\r\n                    glGame.gamelistcfg.onEnterGame(gameid, true);\r\n                } else {\r\n                    url = `${url}?token=${glGame.logon.get(\"_token\")}`;\r\n                    cc.sys.openURL(url);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    OnDestroy() {\r\n        glGame.emitter.off(\"initBillBoradsUI\", this);\r\n        clearTimeout(this.setTimeout);\r\n        this.unschedule(this.runPage);\r\n    },\r\n});\r\n"]}