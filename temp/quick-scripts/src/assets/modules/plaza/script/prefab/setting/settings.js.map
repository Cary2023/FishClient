{"version":3,"sources":["assets\\modules\\plaza\\script\\prefab\\setting\\settings.js"],"names":["glGame","baseclass","extend","properties","mainPanel","cc","Node","toggleRepair","toggleModify","onLoad","registerEvent","sys","isNative","active","user","isTourist","frame","node","getChildByName","getComponent","Label","string","version","showPanel","panel","showEffectPariticle","onClick","name","changeHead_cb","userEdit_cb","phoneEdit_cb","nicknameEdit_cb","remove","panelName","hideAllPanel","panellist","index","getPanelByName","then","panelData","setPosition","v2","parent","childrenCount","i","children","unRegisterEvent","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 设置\r\n */\r\n\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        mainPanel: cc.Node,\r\n        toggleRepair: cc.Node,\r\n        toggleModify: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.registerEvent();\r\n        if(!cc.sys.isNative) {\r\n            this.toggleRepair.active = false;\r\n        }\r\n\r\n        if (glGame.user.isTourist()) {\r\n            this.toggleModify.active = false;\r\n        }\r\n\r\n        if(cc.sys.isNative) {\r\n            let frame = this.node.getChildByName(\"bg\");\r\n            frame.getChildByName(\"version\").getComponent(cc.Label).string = `当前版本: ${glGame.version}`;\r\n        }\r\n\r\n        this.showPanel(\"volume\");\r\n\r\n        glGame.panel.showEffectPariticle(this.node);\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"volume\":\r\n            case \"sound\":\r\n            case \"repair\":\r\n            case \"about\":\r\n            case \"modifypsd\":\r\n                this.showPanel(name); break;\r\n            case \"head\": this.changeHead_cb(); break;\r\n            case 'btn_grzl': this.userEdit_cb(); break;\r\n            case 'btn_phoneEdit': this.phoneEdit_cb(); break;\r\n            case 'btn_nicknameEdit': this.nicknameEdit_cb(); break;\r\n            case \"close\":\r\n                this.remove()\r\n                break;\r\n        }\r\n    },\r\n\r\n    //显示某个界面。按名字来显示\r\n    showPanel(panelName) {\r\n        this.hideAllPanel();\r\n        let panellist = {};\r\n        panellist[\"volume\"] = \"settingVolume\";\r\n        panellist[\"sound\"] = \"settingSelectMusic\";\r\n        panellist[\"repair\"] = \"settingRepair\";\r\n        panellist[\"about\"] = \"settingAbout\";\r\n        panellist[\"modifypsd\"] = \"settingModifypsd\";\r\n        \r\n        for (let name in panellist) {\r\n            let index = 0;\r\n            if (panelName == name) index = 1;\r\n        }\r\n\r\n        if (this.mainPanel.getChildByName(panellist[panelName])) {\r\n            this.mainPanel.getChildByName(panellist[panelName]).active = true;\r\n            return;\r\n        }\r\n\r\n        glGame.panel.getPanelByName(panellist[panelName]).then(panelData => {\r\n            panelData.setPosition(cc.v2(0, 0));\r\n            panelData.parent = this.mainPanel;\r\n\r\n        })\r\n    },\r\n\r\n    //隐藏所有界面\r\n    hideAllPanel() {\r\n        if (!this.mainPanel.childrenCount) return;\r\n        for (let i = 0; i < this.mainPanel.childrenCount; i++) {\r\n            this.mainPanel.children[i].active = false;\r\n        }\r\n    },\r\n\r\n    // 注册界面监听事件\r\n    registerEvent() {\r\n        \r\n    },\r\n\r\n    // 销毁界面监听事件\r\n    unRegisterEvent() {\r\n        \r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n});\r\n"]}