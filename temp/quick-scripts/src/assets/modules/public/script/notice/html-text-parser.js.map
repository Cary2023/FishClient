{"version":3,"sources":["assets\\modules\\public\\script\\notice\\html-text-parser.js"],"names":["eventRegx","imageAttrReg","HtmlTextParser","_parsedObject","_specialSymbolArray","push","prototype","constructor","parse","htmlString","_resultObjectArray","_stack","startIndex","length","tagEndIndex","indexOf","tagBeginIndex","lastIndexOf","noTagBegin","pop","_processResult","substring","newStr","tagStr","charAt","_addToStack","_attributeToObject","attribute","trim","obj","header","match","tagName","nextSpace","eventObj","eventHanlderString","color","size","parseInt","_processEventHandler","event","startsWith","isNewLine","text","style","newline","tagValue","remainingArgument","isValidImageTag","substr","replace","toLocaleLowerCase","endsWith","slice","charCodeAt","isImage","src","imageHeight","imageWidth","imageAlign","imageOffset","param","defaultOutlineObject","width","outlineAttrReg","outline","underline","italic","bold","eventString","index","eventNames","isValidTag","eventName","eventValue","previousTagObj","key","value","_escapeSpecialSymbol","str","i","CC_TEST","cc","_Test","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/****************************************************************************\r\n Copyright (c) 2013-2016 Chukong Technologies Inc.\r\n Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated engine source code (the \"Software\"), a limited,\r\n worldwide, royalty-free, non-assignable, revocable and non-exclusive license\r\n to use Cocos Creator solely to develop games on your target platforms. You shall\r\n not use Cocos Creator software for developing other software or tools that's\r\n used for developing games. You are not granted to publish, distribute,\r\n sublicense, and/or sell copies of Cocos Creator.\r\n\r\n The software or tools in this License Agreement are licensed, not sold.\r\n Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n ****************************************************************************/\r\n\r\nvar eventRegx = /^(click)(\\s)*=|(param)(\\s)*=/;\r\nvar imageAttrReg = /(\\s)*src(\\s)*=|(\\s)*height(\\s)*=|(\\s)*width(\\s)*=|(\\s)*align(\\s)*=|(\\s)*offset(\\s)*=|(\\s)*click(\\s)*=|(\\s)*param(\\s)*=/;\r\n/**\r\n * A utils class for parsing HTML texts. The parsed results will be an object array.\r\n */\r\nvar HtmlTextParser = function() {\r\n    this._parsedObject = {};\r\n    this._specialSymbolArray = [];\r\n    this._specialSymbolArray.push([/&lt;/g, '<']);\r\n    this._specialSymbolArray.push([/&gt;/g, '>']);\r\n    this._specialSymbolArray.push([/&amp;/g, '&']);\r\n    this._specialSymbolArray.push([/&quot;/g, '\"']);\r\n    this._specialSymbolArray.push([/&apos;/g, '\\'']);\r\n    this._specialSymbolArray.push([/&nbsp;/g, ' ']);\r\n};\r\n\r\nHtmlTextParser.prototype = {\r\n    constructor: HtmlTextParser,\r\n    parse: function(htmlString) {\r\n        this._resultObjectArray = [];\r\n        this._stack = [];\r\n\r\n        var startIndex = 0;\r\n        var length = htmlString.length;\r\n        while (startIndex < length) {\r\n            var tagEndIndex = htmlString.indexOf('>', startIndex);\r\n            var tagBeginIndex = -1;\r\n            if (tagEndIndex >= 0) {\r\n                tagBeginIndex = htmlString.lastIndexOf('<', tagEndIndex);\r\n                var noTagBegin = tagBeginIndex < (startIndex - 1);\r\n\r\n                if (noTagBegin) {\r\n                    tagBeginIndex = htmlString.indexOf('<', tagEndIndex + 1);\r\n                    tagEndIndex = htmlString.indexOf('>', tagBeginIndex + 1);\r\n                }\r\n            }\r\n\r\n            if (tagBeginIndex < 0) {\r\n                this._stack.pop();\r\n                this._processResult(htmlString.substring(startIndex));\r\n                startIndex = length;\r\n            } else {\r\n                var newStr = htmlString.substring(startIndex, tagBeginIndex);\r\n                var tagStr = htmlString.substring(tagBeginIndex + 1, tagEndIndex);\r\n                if (tagStr === \"\") newStr = htmlString.substring(startIndex, tagEndIndex + 1);\r\n                this._processResult(newStr);\r\n                if (tagEndIndex === -1) {\r\n                    // cc.error('The HTML tag is invalid!');\r\n                    tagEndIndex = tagBeginIndex;\r\n                } else if (htmlString.charAt(tagBeginIndex + 1) === '\\/'){\r\n                    this._stack.pop();\r\n                } else {\r\n                    this._addToStack(tagStr);\r\n                }\r\n                startIndex = tagEndIndex + 1;\r\n            }\r\n        }\r\n\r\n\r\n        return this._resultObjectArray;\r\n    },\r\n\r\n    _attributeToObject: function (attribute) {\r\n        attribute = attribute.trim();\r\n\r\n        var obj = {};\r\n        var header = attribute.match(/^(color|size)(\\s)*=/);\r\n        var tagName;\r\n        var nextSpace;\r\n        var eventObj;\r\n        var eventHanlderString;\r\n        if (header) {\r\n            tagName = header[0];\r\n            attribute = attribute.substring(tagName.length).trim();\r\n            if(attribute === \"\") return obj;\r\n\r\n            //parse color\r\n            nextSpace = attribute.indexOf(' ');\r\n            switch(tagName[0]){\r\n              case 'c':\r\n                  if (nextSpace > -1) {\r\n                      obj.color = attribute.substring(0, nextSpace).trim();\r\n                  } else {\r\n                      obj.color = attribute;\r\n                  }\r\n                  break;\r\n              case 's':\r\n                  obj.size = parseInt(attribute);\r\n                  break;\r\n            }\r\n\r\n            //tag has event arguments\r\n            if(nextSpace > -1) {\r\n                eventHanlderString = attribute.substring(nextSpace+1).trim();\r\n                eventObj = this._processEventHandler(eventHanlderString);\r\n                obj.event = eventObj;\r\n            }\r\n            return obj;\r\n        }\r\n\r\n        header = attribute.match(/^(br(\\s)*\\/)/);\r\n        if(header && header[0].length > 0) {\r\n            tagName = header[0].trim();\r\n            if(tagName.startsWith(\"br\") && tagName[tagName.length-1] === \"/\") {\r\n                obj.isNewLine = true;\r\n                this._resultObjectArray.push({text: \"\", style: {newline: true}});\r\n                return obj;\r\n            }\r\n        }\r\n\r\n        header = attribute.match(/^(img(\\s)*src(\\s)*=[^>]+\\/)/);\r\n        if(header && header[0].length > 0) {\r\n            tagName = header[0].trim();\r\n            if(tagName.startsWith(\"img\") && tagName[tagName.length-1] === \"/\") {\r\n                header = attribute.match(imageAttrReg);\r\n                var tagValue;\r\n                var remainingArgument;\r\n                var isValidImageTag = false;\r\n                while (header) {\r\n                    //skip the invalid tags at first\r\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\r\n                    tagName = attribute.substr(0, header[0].length);\r\n                    //remove space and = character\r\n                    remainingArgument = attribute.substring(tagName.length).trim();\r\n                    nextSpace = remainingArgument.indexOf(' ');\r\n\r\n                    tagValue = (nextSpace > -1) ? remainingArgument.substr(0, nextSpace) : remainingArgument;\r\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\r\n                    tagName = tagName.toLocaleLowerCase();\r\n\r\n                    attribute = remainingArgument.substring(nextSpace).trim();\r\n                    if ( tagValue.endsWith( '\\/' ) ) tagValue = tagValue.slice( 0, -1 );\r\n                    if (tagName === \"src\") {\r\n                        switch (tagValue.charCodeAt(0)) {\r\n                            case 34: // \"\r\n                            case 39: // '\r\n                                isValidImageTag = true;\r\n                                tagValue = tagValue.slice(1, -1);\r\n                                break;\r\n                        }\r\n                        obj.isImage = true;\r\n                        obj.src = tagValue;\r\n                    } else if (tagName === \"height\") {\r\n                        obj.imageHeight = parseInt(tagValue);\r\n                    } else if (tagName === \"width\") {\r\n                        obj.imageWidth = parseInt(tagValue);\r\n                    } else if (tagName === \"align\") {\r\n                        switch (tagValue.charCodeAt(0)) {\r\n                            case 34: // \"\r\n                            case 39: // '\r\n                                tagValue = tagValue.slice(1, -1);\r\n                                break;\r\n                        }\r\n                        obj.imageAlign = tagValue.toLocaleLowerCase();\r\n                    } else if (tagName === \"offset\") {\r\n                        obj.imageOffset = tagValue;\r\n                    } else if (tagName === \"click\") {\r\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\r\n                    }\r\n\r\n                    if (obj.event && tagName === 'param') {\r\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\r\n                    }\r\n\r\n                    header = attribute.match(imageAttrReg);\r\n                }\r\n\r\n                if( isValidImageTag && obj.isImage ) {\r\n                    this._resultObjectArray.push({text: \"\", style: obj});\r\n                }\r\n\r\n                return {};\r\n            }\r\n        }\r\n\r\n        header = attribute.match(/^(outline(\\s)*[^>]*)/);\r\n        if (header) {\r\n            attribute = header[0].substring(\"outline\".length).trim();\r\n            var defaultOutlineObject = {color: \"#ffffff\", width: 1};\r\n            if (attribute) {\r\n                var outlineAttrReg = /(\\s)*color(\\s)*=|(\\s)*width(\\s)*=|(\\s)*click(\\s)*=|(\\s)*param(\\s)*=/;\r\n                header = attribute.match(outlineAttrReg);\r\n                var tagValue;\r\n                while (header) {\r\n                    //skip the invalid tags at first\r\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\r\n                    tagName = attribute.substr(0, header[0].length);\r\n                    //remove space and = character\r\n                    remainingArgument = attribute.substring(tagName.length).trim();\r\n                    nextSpace = remainingArgument.indexOf(' ');\r\n                    if (nextSpace > -1) {\r\n                        tagValue = remainingArgument.substr(0, nextSpace);\r\n                    } else {\r\n                        tagValue = remainingArgument;\r\n                    }\r\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\r\n                    tagName = tagName.toLocaleLowerCase();\r\n\r\n                    attribute = remainingArgument.substring(nextSpace).trim();\r\n                    if (tagName === \"click\") {\r\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\r\n                    } else if (tagName === \"color\") {\r\n                        defaultOutlineObject.color = tagValue;\r\n                    } else if (tagName === \"width\") {\r\n                        defaultOutlineObject.width = parseInt(tagValue);\r\n                    }\r\n\r\n                    if (obj.event && tagName === 'param') {\r\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\r\n                    }\r\n\r\n                    header = attribute.match(outlineAttrReg);\r\n                }\r\n            }\r\n            obj.outline = defaultOutlineObject;\r\n        }\r\n\r\n        header = attribute.match(/^(on|u|b|i)(\\s)*/);\r\n        if(header && header[0].length > 0) {\r\n            tagName = header[0];\r\n            attribute = attribute.substring(tagName.length).trim();\r\n            switch(tagName[0]){\r\n              case 'u':\r\n                  obj.underline = true;\r\n                  break;\r\n              case 'i':\r\n                  obj.italic = true;\r\n                  break;\r\n              case 'b':\r\n                  obj.bold = true;\r\n                  break;\r\n            }\r\n            if(attribute === \"\") {\r\n                return obj;\r\n            }\r\n            eventObj = this._processEventHandler(attribute);\r\n            obj.event = eventObj;\r\n        }\r\n\r\n        return obj;\r\n    },\r\n\r\n    _processEventHandler: function (eventString) {\r\n        var index = 0;\r\n        var obj = {};\r\n        var eventNames = eventString.match(eventRegx);\r\n        var isValidTag = false;\r\n        while(eventNames) {\r\n            var eventName = eventNames[0];\r\n            var eventValue = \"\";\r\n            isValidTag = false;\r\n            eventString = eventString.substring(eventName.length).trim();\r\n            if(eventString.charAt(0) === \"\\\"\") {\r\n                index = eventString.indexOf(\"\\\"\", 1);\r\n                if (index > -1) {\r\n                    eventValue = eventString.substring(1, index).trim();\r\n                    isValidTag = true;\r\n                }\r\n                index++;\r\n            } else if(eventString.charAt(0) === \"\\'\") {\r\n                index = eventString.indexOf('\\'', 1);\r\n                if(index > -1) {\r\n                    eventValue = eventString.substring(1, index).trim();\r\n                    isValidTag = true;\r\n                }\r\n                index++;\r\n            } else {\r\n                //skip the invalid attribute value\r\n                var match = eventString.match(/(\\S)+/);\r\n                if(match) {\r\n                    eventValue = match[0];\r\n                } else {\r\n                    eventValue = \"\";\r\n                }\r\n                index = eventValue.length;\r\n            }\r\n\r\n            if(isValidTag) {\r\n                eventName = eventName.substring(0, eventName.length-1).trim();\r\n                obj[eventName] = eventValue;\r\n            }\r\n\r\n            eventString = eventString.substring(index).trim();\r\n            eventNames = eventString.match(eventRegx);\r\n        }\r\n\r\n        return obj;\r\n    },\r\n\r\n    _addToStack: function(attribute) {\r\n        var obj = this._attributeToObject(attribute);\r\n\r\n        if (this._stack.length === 0){\r\n            this._stack.push(obj);\r\n        } else {\r\n            if(obj.isNewLine || obj.isImage) {\r\n                return;\r\n            }\r\n            //for nested tags\r\n            var previousTagObj = this._stack[this._stack.length - 1];\r\n            for (var key in previousTagObj) {\r\n                if (!(obj[key])) {\r\n                    obj[key] = previousTagObj[key];\r\n                }\r\n            }\r\n            this._stack.push(obj);\r\n        }\r\n    },\r\n\r\n    _processResult: function(value) {\r\n        if (value === \"\") {\r\n            return;\r\n        }\r\n\r\n        value = this._escapeSpecialSymbol(value);\r\n        if (this._stack.length > 0) {\r\n            this._resultObjectArray.push({text: value, style: this._stack[this._stack.length - 1]});\r\n        } else {\r\n            this._resultObjectArray.push({text: value});\r\n        }\r\n    },\r\n\r\n    _escapeSpecialSymbol: function(str) {\r\n        for(var i = 0; i < this._specialSymbolArray.length; ++i) {\r\n            var key = this._specialSymbolArray[i][0];\r\n            var value = this._specialSymbolArray[i][1];\r\n\r\n            str = str.replace(key, value);\r\n        }\r\n        return str;\r\n    }\r\n};\r\n\r\nif (CC_TEST) {\r\n    cc._Test.HtmlTextParser = HtmlTextParser;\r\n}\r\n\r\nmodule.exports = HtmlTextParser;\r\n"]}