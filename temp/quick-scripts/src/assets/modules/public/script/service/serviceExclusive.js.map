{"version":3,"sources":["assets\\modules\\public\\script\\service\\serviceExclusive.js"],"names":["glGame","baseclass","extend","properties","node_item","cc","Node","node_content","node_copyid","label_copyid","Label","scrollView","ScrollView","onLoad","registerEvent","isShop","node","active","string","user","get","refPayData","reqCustomServer","on","scrollLeftCb","scrollRigthCb","emitter","customData","unRegisterEvent","off","getChildByName","onClick","name","i","ExclusiveInfoList","length","Url","url","platform","openURL","enumber","contact","copyToClip","console","log","executionScrollTo","scrollToLeft","scrollToRight","severice","initExclusiveInfo","page","serviceData","exclusive","m_width","width","item","instantiate","parent","avatar","panel","showRemoteImage","contactType","getComponent","haoma","substring","start","OnDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nglGame.baseclass.extend({\r\n\r\n    properties: {\r\n        node_item: cc.Node,\r\n        node_content: cc.Node,\r\n        node_copyid: cc.Node,\r\n        label_copyid: cc.Label,\r\n        scrollView: cc.ScrollView,\r\n    },\r\n\r\n    onLoad() {\r\n        this.registerEvent();\r\n        this.isShop = false;\r\n        this.node.active = false;\r\n\r\n        // this.node_copyid.active = !glGame.user.isTourist();\r\n        // if (this.node_copyid.active) this.label_copyid.string = \"\" + glGame.user.get(\"logicID\");\r\n        this.label_copyid.string = \"\" + glGame.user.get(\"logicID\");\r\n    },\r\n\r\n    refPayData() {\r\n        this.node.active = true;\r\n        glGame.user.reqCustomServer(1, 1, true);\r\n    },\r\n\r\n    registerEvent() {\r\n        // 监听scrollView的滚动事件\r\n        this.scrollView.node.on(\"scroll-to-left\", this.scrollLeftCb, this);\r\n        this.scrollView.node.on(\"scroll-to-right\", this.scrollRigthCb, this);\r\n\r\n        glGame.emitter.on(\"updateCustomServer\", this.customData, this);\r\n    },\r\n    unRegisterEvent() {\r\n        glGame.emitter.off(\"updateCustomServer\", this);\r\n    },\r\n    scrollLeftCb(scrollView){\r\n        // cc.log(\"**********************************触摸到Left，反弹函数\");\r\n        this.node.getChildByName(\"jiantou_l\").active = false;\r\n        this.node.getChildByName(\"jiantou_r\").active = false;\r\n        this.node.getChildByName(\"jiantou_r\").active = true;\r\n    },\r\n    scrollRigthCb(scrollView) {\r\n        // 回调的参数是 ScrollView 组件\r\n        // do whatever you want with scrollview\r\n        // cc.log(\"**********************************触摸到Rigth，反弹函数\");\r\n        this.node.getChildByName(\"jiantou_l\").active = false;\r\n        this.node.getChildByName(\"jiantou_r\").active = false;\r\n        this.node.getChildByName(\"jiantou_l\").active = true;\r\n     },\r\n    onClick(name, node) {\r\n        for (let i = 0; i < this.ExclusiveInfoList.length; i++) {\r\n            if (name == `jump${i}`) {\r\n                let Url =  this.ExclusiveInfoList[i].url;\r\n                glGame.platform.openURL(Url)\r\n                //cc.sys.openURL(Url)\r\n            }\r\n            if (name == `copy${i}`) {\r\n                let enumber = this.ExclusiveInfoList[i].contact\r\n                glGame.platform.copyToClip(enumber, '');\r\n            }\r\n        }\r\n        switch (name) {\r\n            case \"btn_cpid\": glGame.platform.copyToClip(\"\" + glGame.user.get(\"logicID\"), \"\"); break;\r\n            case \"jiantou_l\":\r\n            case \"jiantou_r\":\r\n                console.log(\"点击了按钮\");\r\n                this.executionScrollTo(name);\r\n                break;\r\n            default: break;\r\n        }\r\n    },\r\n\r\n    executionScrollTo(name) {\r\n        this.node.getChildByName(\"jiantou_l\").active = false;\r\n        this.node.getChildByName(\"jiantou_r\").active = false;\r\n\r\n        if (name == \"jiantou_l\") {\r\n            this.node.getChildByName(\"jiantou_r\").active = true;\r\n            this.scrollView.scrollToLeft(0.1);\r\n        } else {\r\n            this.node.getChildByName(\"jiantou_l\").active = true;\r\n            this.scrollView.scrollToRight(0.1);\r\n        }\r\n    },\r\n\r\n    customData() {\r\n        this.severice = glGame.user.get(\"customSever\");\r\n        this.initExclusiveInfo()\r\n    },\r\n    initExclusiveInfo() {\r\n        if (this.severice.page > 1) return;\r\n        this.ExclusiveInfoList = this.isShop ? this.serviceData : this.severice.exclusive;\r\n        if (!this.ExclusiveInfoList) return;\r\n        let m_width = this.ExclusiveInfoList.length * this.node_item.width + (this.ExclusiveInfoList.length-1) * 97 + 180 > this.scrollView.node.width\r\n        if (this.ExclusiveInfoList.length > 0 && m_width) {\r\n            this.node.getChildByName(\"jiantou_r\").active = true;\r\n        }\r\n        for (let i = 0; i < this.ExclusiveInfoList.length; i++) {\r\n            let item = cc.instantiate(this.node_item);\r\n            item.parent = this.node_content;\r\n            if (this.ExclusiveInfoList[i].avatar) glGame.panel.showRemoteImage(item.getChildByName('mask').getChildByName('head'), this.ExclusiveInfoList[i].avatar);\r\n            //if (this.ExclusiveInfoList[i].avatar) glGame.panel.showRemoteImage(item.getChildByName('img_qrcode'), this.ExclusiveInfoList[i].qrCodeUrl);\r\n            item.getChildByName('img_qqkefutubiao').active = this.ExclusiveInfoList[i].contactType == 2;\r\n            item.getChildByName('img_wechatkefutubiao').active = this.ExclusiveInfoList[i].contactType == 1;\r\n            item.getChildByName('name').getComponent(cc.Label).string = this.ExclusiveInfoList[i].name;\r\n            let haoma = this.ExclusiveInfoList[i].contact.length>11?this.ExclusiveInfoList[i].contact.substring(this.ExclusiveInfoList[i].contact.length-9):this.ExclusiveInfoList[i].contact\r\n            item.getChildByName('haoma').getComponent(cc.Label).string = haoma;\r\n            item.getChildByName('jumpto').name = `jump${i}`\r\n            item.getChildByName('copy').name = `copy${i}`\r\n            item.active = true;\r\n        }\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}