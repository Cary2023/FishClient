{"version":3,"sources":["assets\\modules\\public\\script\\setting\\setting.js"],"names":["glGame","baseclass","extend","properties","BGM","cc","Toggle","SE","GS","Node","MSS","Slider","ESS","MSB","ESB","onLoad","showPanelInfo","registerEvent","on","MSBTouchCancelNext","ESBTouchCancelNext","node","click_music","click_effect","unRegisterEvent","off","OnDestroy","BGMSE","audio","get","isChecked","getChildByName","active","progress","parent","getComponent","ProgressBar","saveVolume","onSliderProcess","process","name","setBGMVolume","setSoundEffectVolume","onClick","click_close","click_switchacc","console","error","remove","event","target","openBGM","closeBGM","openSE","closeSE","logon","logout","storage","removeItemByKey"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 设置面板\r\n */\r\nglGame.baseclass.extend({\r\n    properties: {\r\n        BGM: cc.Toggle,\r\n        SE: cc.Toggle,\r\n        GS: cc.Node,\r\n        MSS: cc.Slider,\r\n        ESS: cc.Slider,\r\n        MSB: cc.Node,\r\n        ESB: cc.Node,\r\n    },\r\n    onLoad () {\r\n        this.showPanelInfo();\r\n        this.registerEvent();\r\n    },\r\n    registerEvent () {\r\n        this.MSB.on(\"touchcancel\", this.MSBTouchCancelNext, this);\r\n        this.MSB.on(\"touchend\", this.MSBTouchCancelNext, this);\r\n        this.ESB.on(\"touchcancel\", this.ESBTouchCancelNext, this);\r\n        this.ESB.on(\"touchend\", this.ESBTouchCancelNext, this);\r\n        this.BGM.node.on(\"toggle\", this.click_music, this);\r\n        this.SE.node.on(\"toggle\", this.click_effect, this);\r\n    },\r\n    unRegisterEvent () {\r\n        this.MSB.off(\"touchcancel\", this.MSBTouchCancelNext, this);\r\n        this.MSB.off(\"touchend\", this.MSBTouchCancelNext, this);\r\n        this.ESB.off(\"touchcancel\", this.ESBTouchCancelNext, this);\r\n        this.ESB.off(\"touchend\", this.ESBTouchCancelNext, this);\r\n    },\r\n    OnDestroy() {\r\n        this.unRegisterEvent();\r\n    },\r\n    showPanelInfo () {\r\n        // 根据本地缓存的声音数据来更新按钮状态\r\n        let BGMSE = glGame.audio.get(\"BGMSE\");\r\n        this.BGM.isChecked = BGMSE[\"BGMPlayState\"];\r\n        this.BGM.node.getChildByName(\"music\").active = !BGMSE[\"BGMPlayState\"];\r\n        this.SE.isChecked = BGMSE[\"SoundEffectPlayState\"];\r\n        this.SE.node.getChildByName(\"effect\").active = !BGMSE[\"SoundEffectPlayState\"];\r\n        this.MSS.progress = this.MSS.node.parent.getComponent(cc.ProgressBar).progress = BGMSE[\"BGMVolume\"];\r\n        this.ESS.progress = this.ESS.node.parent.getComponent(cc.ProgressBar).progress = BGMSE[\"SoundEffectVolume\"];\r\n    },\r\n    MSBTouchCancelNext () {\r\n        glGame.audio.saveVolume();\r\n    },\r\n    ESBTouchCancelNext () {\r\n        glGame.audio.saveVolume();\r\n    },\r\n    onSliderProcess (node, process) {\r\n        let name = node.name;\r\n        switch (name) {\r\n            case \"musicslider\":\r\n                node.parent.getComponent(cc.ProgressBar).progress = process;\r\n                glGame.audio.setBGMVolume(process);\r\n                break;\r\n            case \"effectslider\":\r\n                node.parent.getComponent(cc.ProgressBar).progress = process;\r\n                glGame.audio.setSoundEffectVolume(process);\r\n                break;\r\n        }\r\n    },\r\n    onClick (name, node) {\r\n        switch (name) {\r\n            case \"close\": this.click_close(); break;\r\n            case \"switchacc\": this.click_switchacc(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_close () {\r\n        this.remove();\r\n    },\r\n    click_music (event) {\r\n        let node = event.target\r\n        let isChecked = event.isChecked;\r\n        node.active = !isChecked;\r\n        if (isChecked) glGame.audio.openBGM();\r\n        else glGame.audio.closeBGM();\r\n    },\r\n    click_effect (event) {\r\n        let node = event.target\r\n        let isChecked = event.isChecked;\r\n        node.active = !isChecked;\r\n        if (isChecked) glGame.audio.openSE();\r\n        else glGame.audio.closeSE();\r\n    },\r\n    click_switchacc () {\r\n        glGame.logon.logout();\r\n        glGame.storage.removeItemByKey(\"loginCache\");\r\n    }\r\n});\r\n"]}