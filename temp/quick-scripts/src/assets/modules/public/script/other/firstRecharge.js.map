{"version":3,"sources":["assets\\modules\\public\\script\\other\\firstRecharge.js"],"names":["glGame","baseclass","extend","properties","audio","type","cc","AudioClip","lblRebate","Label","lblCoin","onLoad","node","scale","systemclass","convertInterface","closeCurEffect","playSoundEffect","userRecharge","user","get","discount_mode","getChildByName","active","string","discount","hideDiscountMax","discount_max","onClick","name","click_close","console","error","click_showShop","panel","firstShowShop","zIndex","remove"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AACpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,KAAK,EAAC;AACFC,MAAAA,IAAI,EAACC,EAAE,CAACC,SADN;AAEF,iBAAS;AAFP,KADE;AAKRC,IAAAA,SAAS,EAAEF,EAAE,CAACG,KALN;AAMRC,IAAAA,OAAO,EAAEJ,EAAE,CAACG;AANJ,GADQ;AASpBE,EAAAA,MAToB,oBASX;AACL,SAAKC,IAAL,CAAUC,KAAV,GAAkBb,MAAM,CAACc,WAAP,CAAmBC,gBAAnB,EAAlB;AACAf,IAAAA,MAAM,CAACI,KAAP,CAAaY,cAAb;AACAhB,IAAAA,MAAM,CAACI,KAAP,CAAaa,eAAb,CAA6B,KAAKb,KAAlC,EAAwC,IAAxC;AACA,QAAIc,YAAY,GAAGlB,MAAM,CAACmB,IAAP,CAAYC,GAAZ,CAAgB,cAAhB,CAAnB;AACA,QAAIC,aAAa,GAAGH,YAAY,CAACG,aAAjC;;AACA,QAAGA,aAAa,IAAI,CAApB,EAAuB;AACnBA,MAAAA,aAAa,GAAG,CAAhB;AACH;;AAED,SAAKT,IAAL,CAAUU,cAAV,CAAyB,kBAAzB,EAA6CC,MAA7C,GAAsD,IAAtD;AACA,SAAKX,IAAL,CAAUU,cAAV,CAAyB,mBAAzB,EAA8CC,MAA9C,GAAuD,KAAvD,CAXK,CAYL;;AACA,QAAGF,aAAa,IAAI,CAApB,EAAuB;AACnB,WAAKb,SAAL,CAAegB,MAAf,GAAyBN,YAAY,CAACO,QAAb,GAAwB,GAAjD;AACA,WAAKC,eAAL;AACH,KAHD,MAGO;AACH,WAAKlB,SAAL,CAAegB,MAAf,GAAyBN,YAAY,CAACO,QAAb,GAAwB,GAAzB,GAAgC,GAAxD;AACA,WAAKf,OAAL,CAAac,MAAb,GAAuBN,YAAY,CAACS,YAAb,GAA4B,GAAnD,CAFG,CAIH;;AACA,UAAGT,YAAY,CAACS,YAAb,IAA6B,CAAC,CAAjC,EAAoC;AAChC,aAAKD,eAAL;AACH;AACJ;AACJ,GAlCmB;AAoCpB;AACAA,EAAAA,eArCoB,6BAqCF;AACd,SAAKd,IAAL,CAAUU,cAAV,CAAyB,OAAzB,EAAkCC,MAAlC,GAA2C,KAA3C;AACA,SAAKX,IAAL,CAAUU,cAAV,CAAyB,kBAAzB,EAA6CC,MAA7C,GAAsD,KAAtD;AACA,SAAKX,IAAL,CAAUU,cAAV,CAAyB,mBAAzB,EAA8CC,MAA9C,GAAuD,IAAvD;AACH,GAzCmB;AA2CpBK,EAAAA,OA3CoB,mBA2CZC,IA3CY,EA2CNjB,IA3CM,EA2CA;AAChB,YAAQiB,IAAR;AACI,WAAK,WAAL;AAAkB,aAAKC,WAAL;AAAoB;;AACtC,WAAK,kBAAL;AAAyB,aAAKA,WAAL;AAAoB;;AAC7C,WAAK,mBAAL;AAA0B,aAAKA,WAAL;AAAoB;;AAC9C;AAASC,QAAAA,OAAO,CAACC,KAAR,CAAc,2BAAd,EAA2CH,IAA3C;AAJb;AAMH,GAlDmB;AAmDpBI,EAAAA,cAnDoB,4BAmDH;AACbjC,IAAAA,MAAM,CAACkC,KAAP,CAAaC,aAAb,CAA2B,KAAKvB,IAAL,CAAUwB,MAArC;AACA,SAAKN,WAAL;AACH,GAtDmB;AAuDpBA,EAAAA,WAvDoB,yBAuDN;AACV,SAAKO,MAAL;AACH;AAzDmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        audio:{\r\n            type:cc.AudioClip,\r\n            default: null\r\n        },\r\n        lblRebate: cc.Label,\r\n        lblCoin: cc.Label,\r\n    },\r\n    onLoad() {\r\n        this.node.scale = glGame.systemclass.convertInterface();\r\n        glGame.audio.closeCurEffect();\r\n        glGame.audio.playSoundEffect(this.audio,true);\r\n        let userRecharge = glGame.user.get(\"userRecharge\");\r\n        let discount_mode = userRecharge.discount_mode;\r\n        if(discount_mode == 0) {\r\n            discount_mode = 2;\r\n        }\r\n\r\n        this.node.getChildByName(\"btn_querenxiugai\").active = true;\r\n        this.node.getChildByName(\"btn_querenxiugai2\").active = false;\r\n        // 奖励模式 1:比例 2:固定\r\n        if(discount_mode == 2) {\r\n            this.lblRebate.string = (userRecharge.discount / 100);\r\n            this.hideDiscountMax();\r\n        } else {\r\n            this.lblRebate.string = (userRecharge.discount / 100) + '%';\r\n            this.lblCoin.string = (userRecharge.discount_max / 100);\r\n\r\n            // 无上限\r\n            if(userRecharge.discount_max == -1) {\r\n                this.hideDiscountMax();\r\n            }\r\n        }\r\n    },\r\n\r\n    // 隐藏最高上限\r\n    hideDiscountMax() {\r\n        this.node.getChildByName(\"node2\").active = false;\r\n        this.node.getChildByName(\"btn_querenxiugai\").active = false;\r\n        this.node.getChildByName(\"btn_querenxiugai2\").active = true;\r\n    },\r\n\r\n    onClick(name, node) {\r\n        switch (name) {\r\n            case \"close_eff\": this.click_close(); break;\r\n            case \"btn_querenxiugai\": this.click_close(); break;\r\n            case \"btn_querenxiugai2\": this.click_close(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_showShop() {\r\n        glGame.panel.firstShowShop(this.node.zIndex);\r\n        this.click_close();\r\n    },\r\n    click_close() {\r\n        this.remove();\r\n    },\r\n\r\n});\r\n"]}