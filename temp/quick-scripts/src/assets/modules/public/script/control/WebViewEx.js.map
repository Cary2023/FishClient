{"version":3,"sources":["assets\\modules\\public\\script\\control\\WebViewEx.js"],"names":["WebViewImpl","require","EventType","emptyCallback","WebViewEx","cc","Class","Component","properties","_useOriginalSize","_url","url","type","String","get","set","_impl","createDomElementIfNeeded","game","container","style","width","height","setVisible","impl","loadURL","ctor","onEnable","onDisable","CC_EDITOR","setEventListener","LOADED","LOADING","ERROR","onDestroy","destroy","update","dt","setJavascriptInterfaceScheme","scheme","setOnJSCallback","callback","module","exports"],"mappings":";;;;;;AAAA;AAEA,IAAMA,WAAW,GAAGC,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAMC,SAAS,GAAGF,WAAW,CAACE,SAA9B;;AAEA,SAASC,aAAT,GAA0B,CAAG;;AAG7B,IAAIC,SAAS,GAAGC,EAAE,CAACC,KAAH,CAAS;AACrB,aAASD,EAAE,CAACE,SADS;AAGrBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,gBAAgB,EAAE,IADV;AAGRC,IAAAA,IAAI,EAAE,EAHE;;AAIR;;;;;AAKAC,IAAAA,GAAG,EAAE;AACDC,MAAAA,IAAI,EAAEP,EAAE,CAACQ,MADR;AAEDC,MAAAA,GAAG,EAAE,eAAY;AACb,eAAO,KAAKJ,IAAZ;AACH,OAJA;AAKDK,MAAAA,GAAG,EAAE,aAAUJ,GAAV,EAAe;AAChB,aAAKD,IAAL,GAAYC,GAAZ;;AACA,YAAG,KAAKK,KAAL,IAAc,IAAjB,EACA;AACI,eAAKA,KAAL,GAAa,IAAIhB,WAAJ,EAAb;;AACA,eAAKgB,KAAL,CAAWC,wBAAX,CAAoCZ,EAAE,CAACa,IAAH,CAAQC,SAAR,CAAkBC,KAAlB,CAAwBC,KAA5D,EAAmEhB,EAAE,CAACa,IAAH,CAAQC,SAAR,CAAkBC,KAAlB,CAAwBE,MAA3F;AACH;;AAED,aAAKN,KAAL,CAAWO,UAAX,CAAsB,IAAtB;;AACA,YAAIC,IAAI,GAAG,KAAKR,KAAhB;;AACA,YAAIQ,IAAJ,EAAU;AACNA,UAAAA,IAAI,CAACC,OAAL,CAAad,GAAb;AACH;AACJ;AAlBA;AATG,GAHS;AAkCrBe,EAAAA,IAlCqB,kBAkCb,CAEP,CApCoB;AAsCrBC,EAAAA,QAtCqB,sBAsCT,CACR;AACH,GAxCoB;AA0CrBC,EAAAA,SA1CqB,uBA0CR;AACT,QAAIJ,IAAI,GAAG,KAAKR,KAAhB;AACAQ,IAAAA,IAAI,CAACD,UAAL,CAAgB,KAAhB;;AACA,QAAI,CAACM,SAAL,EAAgB;AACZL,MAAAA,IAAI,CAACM,gBAAL,CAAsB5B,SAAS,CAAC6B,MAAhC,EAAwC5B,aAAxC;AACAqB,MAAAA,IAAI,CAACM,gBAAL,CAAsB5B,SAAS,CAAC8B,OAAhC,EAAyC7B,aAAzC;AACAqB,MAAAA,IAAI,CAACM,gBAAL,CAAsB5B,SAAS,CAAC+B,KAAhC,EAAuC9B,aAAvC;AACH;AACJ,GAlDoB;AAoDrB+B,EAAAA,SApDqB,uBAoDR;AACT,QAAI,KAAKlB,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWmB,OAAX;;AACA,WAAKnB,KAAL,GAAa,IAAb;AACH;AACJ,GAzDoB;AA2DrBoB,EAAAA,MA3DqB,kBA2DbC,EA3Da,EA2DT,CACR;AACA;AACA;AACH,GA/DoB;AAiErBC,EAAAA,4BAjEqB,wCAiESC,MAjET,EAiEiB,CAErC,CAnEoB;AAqErBC,EAAAA,eArEqB,2BAqEJC,QArEI,EAqEM,CAE1B;AAvEoB,CAAT,CAAhB;AA0EApC,EAAE,CAACD,SAAH,GAAesC,MAAM,CAACC,OAAP,GAAiBvC,SAAhC","sourceRoot":"/","sourcesContent":["// 仅提供给第三方电子webview使用,不适用于其他场合\r\n\r\nconst WebViewImpl = require('./webview-impl');\r\nconst EventType = WebViewImpl.EventType;\r\n\r\nfunction emptyCallback () { }\r\n\r\n\r\nlet WebViewEx = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _useOriginalSize: true,\r\n\r\n        _url: '',\r\n        /**\r\n         * !#en A given URL to be loaded by the WebView, it should have a http or https prefix.\r\n         * !#zh 指定 WebView 加载的网址，它应该是一个 http 或者 https 开头的字符串\r\n         * @property {String} url\r\n         */\r\n        url: {\r\n            type: cc.String,\r\n            get: function () {\r\n                return this._url;\r\n            },\r\n            set: function (url) {\r\n                this._url = url;\r\n                if(this._impl == null)\r\n                {\r\n                    this._impl = new WebViewImpl();\r\n                    this._impl.createDomElementIfNeeded(cc.game.container.style.width, cc.game.container.style.height);\r\n                }\r\n                \r\n                this._impl.setVisible(true);\r\n                let impl = this._impl;\r\n                if (impl) {\r\n                    impl.loadURL(url);\r\n                }\r\n            }\r\n        },\r\n    },\r\n\r\n    ctor () {\r\n       \r\n    },\r\n\r\n    onEnable () {\r\n        // this._impl.setVisible(true);\r\n    },\r\n\r\n    onDisable () {\r\n        let impl = this._impl;\r\n        impl.setVisible(false);\r\n        if (!CC_EDITOR) {\r\n            impl.setEventListener(EventType.LOADED, emptyCallback);\r\n            impl.setEventListener(EventType.LOADING, emptyCallback);\r\n            impl.setEventListener(EventType.ERROR, emptyCallback);\r\n        }\r\n    },\r\n\r\n    onDestroy () {\r\n        if (this._impl) {\r\n            this._impl.destroy();\r\n            this._impl = null;\r\n        }\r\n    },\r\n\r\n    update (dt) {\r\n        // if (this._impl) {\r\n        //     this._impl.updateMatrix(this.node);\r\n        // }\r\n    },\r\n\r\n    setJavascriptInterfaceScheme (scheme) {\r\n        \r\n    },\r\n\r\n    setOnJSCallback (callback) {\r\n        \r\n    },\r\n});\r\n\r\ncc.WebViewEx = module.exports = WebViewEx;\r\n"]}