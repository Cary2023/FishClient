{"version":3,"sources":["assets\\modules\\public\\script\\control\\EditBoxCustom.js"],"names":["NORMALCY","CHECKED","cc","Class","Component","properties","title","String","placeholder","editbox","EditBox","placeholder_label","Label","text_label","move_label","mask_node","Node","frame_node","frame_spriter","Sprite","bottom_spriter","bottom_pic","SpriteFrame","frame_pic","onLoad","selfNode","node","getSelfFunc","getComponent","_topmovex","width","_topmovey","height","_topmaskmovex","Widget","left","_centermovex","_centermovey","_movetime","_tet_size","mask_max","string","x","y","endedcall","move_colos","color","spriteFrame","scale","onBegon","active","runAction","moveTo","fadeIn","onEnded","sequence","callFunc","fadeOut","setString","strContent","setPlaceholder","onEndedCall","call","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nconst NORMALCY = 0;\r\nconst CHECKED = 1;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        title: cc.String,\r\n        placeholder: cc.String,\r\n        editbox: cc.EditBox,\r\n        placeholder_label: cc.Label,\r\n        text_label: cc.Label,\r\n        move_label: cc.Label,\r\n        mask_node: cc.Node,\r\n        frame_node: cc.Node,\r\n        frame_spriter: cc.Sprite,\r\n        bottom_spriter: cc.Sprite,\r\n        bottom_pic: [cc.SpriteFrame],\r\n        frame_pic: [cc.SpriteFrame],\r\n    },\r\n\r\n    onLoad() {\r\n        var selfNode = this.node;\r\n        this.node.getSelfFunc = function () { return selfNode.getComponent(\"EditBoxCustom\"); };\r\n        this._topmovex = -(this.node.width / 2 - 75);\r\n        this._topmovey = this.node.height / 2 + 5;\r\n        this._topmaskmovex = this.editbox.node.getComponent(cc.Widget).left / 2;\r\n        this._centermovex = -(this.node.width / 2 - 2);\r\n        this._centermovey = 0;\r\n        this._movetime = 0.05;\r\n        this._tet_size = [1.15, 1];          //输入中，输入后    字体大小            \r\n\r\n\r\n        this.mask_max = 20;\r\n        this.move_label.string = this.title;\r\n        this.placeholder_label.string = this.placeholder;\r\n        this.move_label.node.x = this._centermovex;\r\n        this.move_label.node.y = 0;\r\n        this.mask_node.x = this._centermovex;\r\n        this.mask_node.y = 0;\r\n        this.mask_node.width = this.move_label.node.width + this.mask_max * 2;\r\n        this.endedcall = 0;\r\n        this.move_colos = [cc.color(0x93, 0xae, 0xdf), cc.color(0x32, 0x75, 0xE8)];\r\n        this.bottom_spriter.spriteFrame = this.bottom_pic[NORMALCY];\r\n        this.frame_spriter.spriteFrame = this.frame_pic[NORMALCY];\r\n        this.move_label.node.color = this.move_colos[NORMALCY];\r\n        this.text_label.node.scale = this._tet_size[NORMALCY];\r\n    },\r\n\r\n    onBegon() {\r\n        if (this.editbox.string == \"\") {\r\n            this.move_label.node.active = true;\r\n            this.placeholder_label.string = \"\";\r\n            this.mask_node.width = this.move_label.node.width + this.mask_max * 2;\r\n            this.move_label.node.runAction(cc.moveTo(this._movetime, this._topmovex, this._topmovey));\r\n            this.mask_node.runAction(cc.moveTo(this._movetime, this._topmovex - this.mask_max + this._topmaskmovex, this._topmovey));\r\n            this.frame_node.runAction(cc.fadeIn(this._movetime));\r\n        }\r\n        this.bottom_spriter.spriteFrame = this.bottom_pic[CHECKED];\r\n        this.frame_spriter.spriteFrame = this.frame_pic[CHECKED];\r\n        this.move_label.node.color = this.move_colos[CHECKED];\r\n        this.text_label.node.scale = this._tet_size[CHECKED];\r\n    },\r\n\r\n    onEnded() {\r\n        if (this.editbox.string == \"\") {\r\n            this.move_label.node.active = true;\r\n            this.editbox.placeholder = \"\";\r\n            this.move_label.node.runAction(cc.sequence(cc.moveTo(this._movetime, this._centermovex, this._centermovey), cc.callFunc(() => {\r\n                this.move_label.node.active = false;\r\n                this.placeholder_label.string = this.placeholder;\r\n            })));\r\n            this.mask_node.runAction(cc.moveTo(this._movetime, this._centermovex, this._centermovey));\r\n            this.frame_node.runAction(cc.fadeOut(this._movetime));\r\n            this.bottom_spriter.spriteFrame = this.bottom_pic[NORMALCY];\r\n        } else this.bottom_spriter.spriteFrame = this.bottom_pic[CHECKED];\r\n\r\n        this.frame_spriter.spriteFrame = this.frame_pic[NORMALCY];\r\n        this.move_label.node.color = this.move_colos[NORMALCY];\r\n        this.text_label.node.scale = this._tet_size[NORMALCY];\r\n        if (this.endedcall) this.endedcall();\r\n    },\r\n\r\n    setString(strContent) {\r\n        if (strContent == \"\" && this.editbox.string == \"\") return;\r\n        if (strContent == \"\" && this.editbox.string != \"\") {\r\n            this.move_label.node.active = true;\r\n            this.editbox.placeholder = \"\";\r\n            this.move_label.node.runAction(cc.sequence(cc.moveTo(0, this._centermovex, this._centermovey), cc.callFunc(() => {\r\n                this.move_label.node.active = false;\r\n                this.placeholder_label.string = this.placeholder;\r\n            })));\r\n            this.mask_node.runAction(cc.moveTo(0, this._centermovex, this._centermovey));\r\n            this.frame_node.runAction(cc.fadeOut(0));\r\n        } else if (this.editbox.string == \"\" && strContent != \"\") {\r\n            this.move_label.node.active = true;\r\n            this.placeholder_label.string = \"\";\r\n            this.mask_node.width = this.move_label.node.width + this.mask_max * 2;\r\n            this.move_label.node.runAction(cc.moveTo(0, this._topmovex, this._topmovey));\r\n            this.mask_node.runAction(cc.moveTo(0, this._topmovex - this.mask_max + this._topmaskmovex, this._topmovey));\r\n            this.frame_node.runAction(cc.fadeIn(0));\r\n        }\r\n        this.editbox.string = strContent;\r\n    },\r\n\r\n\r\n    setPlaceholder(placeholder) {\r\n        if (placeholder == \"\") return;\r\n        this.placeholder = placeholder;\r\n        this.placeholder_label.string = this.placeholder;\r\n    },\r\n\r\n    onEndedCall(call) {\r\n        this.endedcall = call;\r\n    },\r\n\r\n    update(dt) {\r\n    }\r\n});\r\n"]}