{"version":3,"sources":["assets\\modules\\public\\script\\shop\\shopAgencyPanel.js"],"names":["glGame","baseclass","extend","properties","serviceContent","cc","Node","QQItem","WechatItem","complainPanel","Prefab","mylogicID","Label","labDescribe","lab_freepecent","lab_complain","lab_des_miaosu","onLoad","onClick","name","node","i","pageData","data","length","list","id","type","contactType","number","contactAccount","jump","user","get","service_url_jump","url","platform","openURL","btn_copyCB","payPageList","parent","ReqPayType","emitter","emit","btn_serviceCB","btn_copyMyId","click_close","console","error","click_record","pageId","typeId","gameNet","send_msg","route","msg","setContent","result","initUI","string","giveProportion","active","Number","div","toFixed","complaint","reward","toString","destroyAllChildren","removeAllChildren","setDescribe","describe","serviceItem","instantiate","getChildByName","getComponent","comment","headUrl","resource_url","avatar","panel","showRemoteImage","rechargeType","j","startLevel","star","Math","ceil","Layout","enabled","width","_forceUpdateRenderData","height","overflow","verticalAlign","showChildPanel","copyId","copyToClip","OnDestroy"],"mappings":";;;;;;AAAAA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB;AACpBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,cAAc,EAAEC,EAAE,CAACC,IADX;AAERC,IAAAA,MAAM,EAAEF,EAAE,CAACC,IAFH;AAGRE,IAAAA,UAAU,EAAEH,EAAE,CAACC,IAHP;AAIRG,IAAAA,aAAa,EAAEJ,EAAE,CAACK,MAJV;AAKRC,IAAAA,SAAS,EAAEN,EAAE,CAACO,KALN;AAMRC,IAAAA,WAAW,EAAER,EAAE,CAACO,KANR;AAORE,IAAAA,cAAc,EAAET,EAAE,CAACO,KAPX;AAQRG,IAAAA,YAAY,EAAEV,EAAE,CAACO,KART;AASRI,IAAAA,cAAc,EAAEX,EAAE,CAACC;AATX,GADQ;AAYpBW,EAAAA,MAZoB,oBAYX,CAER,CAdmB;AAgBpBC,EAAAA,OAhBoB,mBAgBZC,IAhBY,EAgBNC,IAhBM,EAgBA;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAL,CAAcC,IAAd,CAAmBC,MAAvC,EAA+CH,CAAC,EAAhD,EAAoD;AAChD,UAAII,IAAI,GAAG,KAAKH,QAAL,CAAcC,IAAd,CAAmBF,CAAnB,CAAX;;AACA,UAAIF,IAAI,wBAAiBE,CAAjB,gBAAwB,KAAKC,QAAL,CAAcI,EAAtC,CAAR,EAAoD;AAChD,YAAIC,IAAI,GAAGF,IAAI,CAACG,WAAhB;AACA,YAAIC,MAAM,GAAGJ,IAAI,CAACK,cAAlB;AACA,YAAIC,IAAI,GAAG/B,MAAM,CAACgC,IAAP,CAAYC,GAAZ,CAAgB,KAAhB,EAAuBC,gBAAlC;AACA,YAAIC,GAAG,GAAG,EAAV,CAJgD,CAKhD;;AACA,YAAIR,IAAI,IAAI,CAAZ,EAAe;AACX;AACA;AACA3B,UAAAA,MAAM,CAACoC,QAAP,CAAgBC,OAAhB,CAAwB,WAAxB;AACH,SAJD,MAIO,IAAIV,IAAI,IAAI,CAAZ,EAAe;AAClB;AACAQ,UAAAA,GAAG,GAAGJ,IAAI,GAAG,GAAP,uBAA0B,CAA1B,gBAAwCF,MAAxC,CAAN;AACA7B,UAAAA,MAAM,CAACoC,QAAP,CAAgBC,OAAhB,CAAwBF,GAAxB;AACH;;AACD;AACH;;AACD,UAAIhB,IAAI,sBAAeE,CAAf,gBAAsB,KAAKC,QAAL,CAAcI,EAApC,CAAR,EAAkD;AAC9C,aAAKY,UAAL,CAAgBb,IAAI,CAACK,cAArB;AACA;AACH;AACJ;;AACD,SAAK,IAAIT,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAKkB,WAAL,CAAiBf,MAArC,EAA6CH,EAAC,EAA9C,EAAkD;AAC9C,UAAID,IAAI,CAACoB,MAAL,CAAYrB,IAAZ,uBAAgCE,EAAhC,CAAJ,EAAyC;AACrC,aAAKoB,UAAL,CAAgB,KAAKF,WAAL,CAAiBlB,EAAjB,EAAoBK,EAApC;AACA;AACH;AACJ;;AACD,YAAQP,IAAR;AACI,WAAK,YAAL;AAAmBnB,QAAAA,MAAM,CAAC0C,OAAP,CAAeC,IAAf,CAAoB,oBAApB;AAA2C;;AAC9D,WAAK,aAAL;AAAoB,aAAKC,aAAL;AAAsB;;AAC1C,WAAK,UAAL;AAAiB,aAAKC,YAAL;AAAqB;;AACtC,WAAK,WAAL;AAAkB,aAAKC,WAAL;AAAoB;;AACtC;AAASC,QAAAA,OAAO,CAACC,KAAR,CAAc,2BAAd,EAA2C7B,IAA3C;AALb;AAOH,GAzEmB;AA0EpB8B,EAAAA,YA1EoB,0BA0EL,CAEd,CA5EmB;AA6EpBR,EAAAA,UA7EoB,sBA6ETS,MA7ES,EA6ED;AAAA;;AACf;AACA,QAAIC,MAAM,GAAG,KAAKA,MAAlB;AACAnD,IAAAA,MAAM,CAACoD,OAAP,CAAeC,QAAf,CAAwB,iBAAxB,EAA2C;AAAEH,MAAAA,MAAM,EAAEA,MAAV;AAAkBC,MAAAA,MAAM,EAAEA;AAA1B,KAA3C,EAA+E,UAACG,KAAD,EAAQC,GAAR,EAAgB;AAC3F,MAAA,KAAI,CAACC,UAAL,CAAgBD,GAAG,CAACE,MAApB;AACH,KAFD;AAGH,GAnFmB;AAoFpBC,EAAAA,MApFoB,kBAoFbnC,IApFa,EAoFP;AACT,SAAKgB,WAAL,GAAmBhB,IAAI,CAACgB,WAAxB;AACA,SAAK5B,SAAL,CAAegD,MAAf,GAAwB3D,MAAM,CAACgC,IAAP,CAAYC,GAAZ,CAAgB,SAAhB,CAAxB;;AACA,QAAIV,IAAI,CAACqC,cAAL,IAAuB,CAA3B,EAA8B;AAC1B,WAAK9C,cAAL,CAAoBM,IAApB,CAAyBoB,MAAzB,CAAgCqB,MAAhC,GAAyC,KAAzC;AACA,WAAK7C,cAAL,CAAoB6C,MAApB,GAA6B,IAA7B;AACH,KAHD,MAGO;AACH,WAAK/C,cAAL,CAAoB6C,MAApB,GAA8BG,MAAM,CAACvC,IAAI,CAACqC,cAAN,CAAN,CAA4BG,GAA5B,CAAgC,GAAhC,CAAD,CAAuCC,OAAvC,CAA+C,CAA/C,IAAoD,GAAjF;AACH;;AAED,QAAIzC,IAAI,CAAC0C,SAAT,EAAoB,KAAKlD,YAAL,CAAkB4C,MAAlB,yBAAgCG,MAAM,CAACvC,IAAI,CAAC0C,SAAL,CAAeC,MAAhB,CAAN,CAA8BH,GAA9B,CAAkC,GAAlC,EAAuCI,QAAvC,EAAhC,YAVX,CAWT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAKhB,MAAL,GAAc5B,IAAI,CAACG,EAAnB;AACA,SAAK8B,UAAL,CAAgBjC,IAAI,CAACgB,WAAL,CAAiB,CAAjB,CAAhB;AACH,GAzGmB;AA0GpBiB,EAAAA,UA1GoB,sBA0GTjC,IA1GS,EA0GH;AACb,SAAKnB,cAAL,CAAoBgE,kBAApB;AACA,SAAKhE,cAAL,CAAoBiE,iBAApB;;AACA,QAAI9C,IAAJ,EAAU,CAAG,CAAb,MAAmB;AAAE;AAAQ;;AAAA;AAC7B,SAAK+C,WAAL,CAAiB/C,IAAI,CAACgD,QAAtB;AACA,SAAKjD,QAAL,GAAgBC,IAAhB;;AACA,SAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,IAAI,CAACA,IAAL,CAAUC,MAA9B,EAAsCH,CAAC,EAAvC,EAA2C;AACvC,UAAImD,WAAW,GAAGnE,EAAE,CAACoE,WAAH,CAAelD,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAaO,WAAb,IAA4B,CAA5B,GAAgC,KAAKrB,MAArC,GAA8C,KAAKC,UAAlE,CAAlB;AACAgE,MAAAA,WAAW,CAAChC,MAAZ,GAAqB,KAAKpC,cAA1B;AACAoE,MAAAA,WAAW,CAACX,MAAZ,GAAqB,IAArB;AACAW,MAAAA,WAAW,CAACE,cAAZ,CAA2B,MAA3B,EAAmCC,YAAnC,CAAgDtE,EAAE,CAACO,KAAnD,EAA0D+C,MAA1D,GAAmEpC,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAaF,IAAhF;AACAqD,MAAAA,WAAW,CAACE,cAAZ,CAA2B,OAA3B,EAAoCC,YAApC,CAAiDtE,EAAE,CAACO,KAApD,EAA2D+C,MAA3D,GAAoE,OAAOpC,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAauD,OAAxF;AACAJ,MAAAA,WAAW,CAACE,cAAZ,CAA2B,OAA3B,EAAoCb,MAApC,GAA6C,KAA7C;AACAW,MAAAA,WAAW,CAACE,cAAZ,CAA2B,QAA3B,EAAqCC,YAArC,CAAkDtE,EAAE,CAACO,KAArD,EAA4D+C,MAA5D,GAAqEpC,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAaO,WAAb,IAA4B,CAA5B,GAAgC,QAAQL,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAaS,cAArD,GAAsE,QAAQP,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAaS,cAAhK;AACA0C,MAAAA,WAAW,CAACE,cAAZ,CAA2B,gBAA3B,EAA6CvD,IAA7C,uBAAiEE,CAAjE,gBAAwEE,IAAI,CAACG,EAA7E;AACA,UAAImD,OAAO,GAAG7E,MAAM,CAACgC,IAAP,CAAYC,GAAZ,CAAgB,KAAhB,EAAuB6C,YAAvB,GAAsCvD,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAa0D,MAAjE;AACA/E,MAAAA,MAAM,CAACgF,KAAP,CAAaC,eAAb,CAA6BT,WAAW,CAACE,cAAZ,CAA2B,UAA3B,EAAuCA,cAAvC,CAAsD,MAAtD,CAA7B,EAA4FG,OAA5F;AACA,UAAIK,YAAY,GAAG3D,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAa6D,YAAhC;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAAC1D,MAAjC,EAAyC2D,CAAC,EAA1C,EAA8C;AAC1CX,QAAAA,WAAW,CAACE,cAAZ,CAA2B,UAA3B,EAAuCA,cAAvC,WAAyDQ,YAAY,CAACC,CAAD,CAArE,GAA4EtB,MAA5E,GAAqF,IAArF;AACH;;AACD,UAAIuB,UAAU,GAAGtB,MAAM,CAACvC,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAagE,IAAd,CAAN,GAA4B,IAA5B,GAAmC,CAACC,IAAI,CAACC,IAAL,CAAUzB,MAAM,CAACvC,IAAI,CAACA,IAAL,CAAUF,CAAV,EAAagE,IAAd,CAAhB,IAAuC,CAAxC,IAA6C,CAAjG;AACAb,MAAAA,WAAW,CAACE,cAAZ,CAA2B,WAA3B,EAAwCC,YAAxC,CAAqDtE,EAAE,CAACmF,MAAxD,EAAgEC,OAAhE,GAA0E,KAA1E;AACAjB,MAAAA,WAAW,CAACE,cAAZ,CAA2B,WAA3B,EAAwCgB,KAAxC,GAAgDN,UAAhD;AACH;AACJ,GAnImB;AAoIpBd,EAAAA,WApIoB,uBAoIR/C,IApIQ,EAoIF;AACd,SAAKV,WAAL,CAAiB8C,MAAjB,GAA0BpC,IAA1B;;AACA,SAAKV,WAAL,CAAiB8E,sBAAjB;;AACA,QAAI,KAAK9E,WAAL,CAAiBO,IAAjB,CAAsBwE,MAAtB,GAA+B,GAAnC,EAAwC;AACpC,WAAK/E,WAAL,CAAiBgF,QAAjB,GAA4B,CAA5B;AACA,WAAKhF,WAAL,CAAiBO,IAAjB,CAAsBwE,MAAtB,GAA+B,GAA/B;AACA,WAAK/E,WAAL,CAAiBiF,aAAjB,GAAiC,CAAjC;AACH;AACJ,GA5ImB;AA6IpBlD,EAAAA,aA7IoB,2BA6IJ;AACZ5C,IAAAA,MAAM,CAACgF,KAAP,CAAae,cAAb,CAA4B,KAAKtF,aAAjC,EAAgD,KAAKW,IAAL,CAAUoB,MAAV,CAAiBA,MAAjE;AACH,GA/ImB;AAgJpBF,EAAAA,UAhJoB,sBAgJT0D,MAhJS,EAgJD;AACfhG,IAAAA,MAAM,CAACoC,QAAP,CAAgB6D,UAAhB,CAA2BD,MAA3B;AACH,GAlJmB;AAmJpBnD,EAAAA,YAnJoB,0BAmJL;AACX7C,IAAAA,MAAM,CAACoC,QAAP,CAAgB6D,UAAhB,CAA2BjG,MAAM,CAACgC,IAAP,CAAYC,GAAZ,CAAgB,SAAhB,CAA3B;AACH,GArJmB;AAsJpBiE,EAAAA,SAtJoB,uBAsJR,CAEX;AAxJmB,CAAxB","sourceRoot":"/","sourcesContent":["glGame.baseclass.extend({\r\n    properties: {\r\n        serviceContent: cc.Node,\r\n        QQItem: cc.Node,\r\n        WechatItem: cc.Node,\r\n        complainPanel: cc.Prefab,\r\n        mylogicID: cc.Label,\r\n        labDescribe: cc.Label,\r\n        lab_freepecent: cc.Label,\r\n        lab_complain: cc.Label,\r\n        lab_des_miaosu: cc.Node\r\n    },\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    onClick(name, node) {\r\n        // for(let i = 0 ;i<this.payPageList.length;i++){\r\n        //     let list = this.payPageList[i]\r\n        //     for(let j = 0;j<list.data.length;j++){\r\n        //         if(name == `btnContact${j}add${list.data[j].name}`){\r\n        //             let type = list.data[j].contactType;\r\n        //             let number = list.data[j].contactAccount\r\n        //             let jump = glGame.user.get('url').service_url_jump\r\n        //             let url = jump +'?'+`jump_type=${type}&jump_url=${number}`\r\n        //             cc.sys.openURL(url)\r\n        //             return\r\n        //         }\r\n        //         console.log('ddddddddddddddddddd=========',name,list.name)\r\n        //         if(name == `btn_copy${j}add${list.name}`){\r\n        //             this.btn_copyCB(list.data[j].contactAccount)\r\n        //             return;\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        for (let i = 0; i < this.pageData.data.length; i++) {\r\n            let list = this.pageData.data[i]\r\n            if (name == `btnContact${i}add${this.pageData.id}`) {\r\n                let type = list.contactType;\r\n                let number = list.contactAccount\r\n                let jump = glGame.user.get('url').service_url_jump\r\n                let url = '';\r\n                //contactType: 1:微信 2：qq\r\n                if (type == 2) {\r\n                    //jump_type 1:跳QQ，2跳微信\r\n                    // url = jump +'?'+`jump_type=${2}&jump_url=${number}`\r\n                    glGame.platform.openURL(\"weixin://\")\r\n                } else if (type == 1) {\r\n                    //jump_type 1:跳QQ，2跳微信\r\n                    url = jump + '?' + `jump_type=${1}&jump_url=${number}`\r\n                    glGame.platform.openURL(url)\r\n                }\r\n                return\r\n            }\r\n            if (name == `btn_copy${i}add${this.pageData.id}`) {\r\n                this.btn_copyCB(list.contactAccount)\r\n                return;\r\n            }\r\n        }\r\n        for (let i = 0; i < this.payPageList.length; i++) {\r\n            if (node.parent.name == `selectBtn${i}`) {\r\n                this.ReqPayType(this.payPageList[i].id)\r\n                return;\r\n            }\r\n        }\r\n        switch (name) {\r\n            case \"btn_record\": glGame.emitter.emit(\"showrechargeRecord\"); break;\r\n            case \"btn_service\": this.btn_serviceCB(); break;\r\n            case \"btn_copy\": this.btn_copyMyId(); break;\r\n            case \"close_eff\": this.click_close(); break;\r\n            default: console.error(\"no find button name -> %s\", name);\r\n        }\r\n    },\r\n    click_record() {\r\n\r\n    },\r\n    ReqPayType(pageId) {\r\n        //this.pageId = pageId\r\n        let typeId = this.typeId;\r\n        glGame.gameNet.send_msg('http.ReqPayPage', { pageId: pageId, typeId: typeId }, (route, msg) => {\r\n            this.setContent(msg.result);\r\n        })\r\n    },\r\n    initUI(data) {\r\n        this.payPageList = data.payPageList;\r\n        this.mylogicID.string = glGame.user.get(\"logicID\");\r\n        if (data.giveProportion == 0) {\r\n            this.lab_freepecent.node.parent.active = false;\r\n            this.lab_des_miaosu.active = true;\r\n        } else {\r\n            this.lab_freepecent.string = (Number(data.giveProportion).div(100)).toFixed(2) + \"%\"\r\n        }\r\n\r\n        if (data.complaint) this.lab_complain.string = `奖励${Number(data.complaint.reward).div(100).toString()}元`;\r\n        // for (let i = 0; i < data.payPageList.length; i++) {\r\n        //     let RowItem = cc.instantiate(this.RowItem);   \r\n        //     RowItem.parent = this.Rowcontent;\r\n        //     RowItem.active = true;\r\n        //     RowItem.getChildByName(\"Background\").getChildByName(\"Label\").getComponent(cc.Label).string = data.payPageList[i].name;\r\n        //     RowItem.getChildByName(\"checkmark\").getChildByName(\"Label\").getComponent(cc.Label).string = data.payPageList[i].name;\r\n        //     RowItem.name = `selectBtn${i}`\r\n        //   }\r\n        this.typeId = data.id;\r\n        this.setContent(data.payPageList[0])\r\n    },\r\n    setContent(data) {\r\n        this.serviceContent.destroyAllChildren();\r\n        this.serviceContent.removeAllChildren();\r\n        if (data) { } else { return };\r\n        this.setDescribe(data.describe)\r\n        this.pageData = data\r\n        for (let i = 0; i < data.data.length; i++) {\r\n            let serviceItem = cc.instantiate(data.data[i].contactType == 1 ? this.QQItem : this.WechatItem);\r\n            serviceItem.parent = this.serviceContent;\r\n            serviceItem.active = true;\r\n            serviceItem.getChildByName(\"name\").getComponent(cc.Label).string = data.data[i].name;\r\n            serviceItem.getChildByName(\"Level\").getComponent(cc.Label).string = \"好评\" + data.data[i].comment;\r\n            serviceItem.getChildByName(\"Level\").active = false;\r\n            serviceItem.getChildByName(\"strNum\").getComponent(cc.Label).string = data.data[i].contactType == 1 ? \"QQ:\" + data.data[i].contactAccount : \"微信:\" + data.data[i].contactAccount;\r\n            serviceItem.getChildByName(\"btn_lianjiblue\").name = `btnContact${i}add${data.id}`\r\n            let headUrl = glGame.user.get('url').resource_url + data.data[i].avatar\r\n            glGame.panel.showRemoteImage(serviceItem.getChildByName(\"headmask\").getChildByName('head'), headUrl)\r\n            let rechargeType = data.data[i].rechargeType;\r\n            for (let j = 0; j < rechargeType.length; j++) {\r\n                serviceItem.getChildByName(\"banksign\").getChildByName(`${rechargeType[j]}`).active = true;\r\n            }\r\n            let startLevel = Number(data.data[i].star) * 56.2 - (Math.ceil(Number(data.data[i].star)) - 1) * 4;\r\n            serviceItem.getChildByName(\"levelSpot\").getComponent(cc.Layout).enabled = false;\r\n            serviceItem.getChildByName(\"levelSpot\").width = startLevel;\r\n        }\r\n    },\r\n    setDescribe(data) {\r\n        this.labDescribe.string = data;\r\n        this.labDescribe._forceUpdateRenderData();\r\n        if (this.labDescribe.node.height > 250) {\r\n            this.labDescribe.overflow = 1;\r\n            this.labDescribe.node.height = 120\r\n            this.labDescribe.verticalAlign = 0\r\n        }\r\n    },\r\n    btn_serviceCB() {\r\n        glGame.panel.showChildPanel(this.complainPanel, this.node.parent.parent);\r\n    },\r\n    btn_copyCB(copyId) {\r\n        glGame.platform.copyToClip(copyId);\r\n    },\r\n    btn_copyMyId() {\r\n        glGame.platform.copyToClip(glGame.user.get(\"logicID\"));\r\n    },\r\n    OnDestroy() {\r\n\r\n    }\r\n});\r\n"]}