{"version":3,"sources":["assets\\frames\\base\\systemclass.js"],"names":["SystemClass","systemClass","prototype","g_instance","enterFrontandback","cc","game","on","EVENT_HIDE","window","isShow","glGame","emitter","emit","EVENT_SHOW","iponeXFit","osVer","sys","osVersion","Number","substr","isNaN","radion","devicePixelRatio","screen","width","height","os","OS_IOS","orientation","browserType","BROWSER_TYPE_SAFARI","BROWSER_TYPE_FIREFOX","document","querySelector","content","webGameChange","evt","addEventListener","console","log","isBrowser","director","getScene","name","scene","enterNowScene","readyroom","reqExitArea","_widgetManager","widgetInitFunc","init","call","thisOnResized","onResized","bind","view","webChange","isNative","ratio","getDevicePixelRatio","cutSize","getFrameSize","winWidth","winHeight","resizeWithBrowserSize","size","setFrameSize","updateBag","version","comparisonVersion","newVer","ver_list","split","new_ver","count","length","i","iphonex","platform","IPHONE","cvs","_children","getComponent","Canvas","fitHeight","fitWidth","MESSAGE","UI","SCENE","convertInterface","designSize","nowSize","designResolution","widthRate","heightRate","androidOn","systemEvent","SystemEvent","EventType","KEY_UP","event","keyCode","macro","KEY","back","isAndroidExit","isSystemRota","isHaveWebView","chargeWebView","remove","panel","showDialog","end","error","changeOrientation","bolOrientation","setOrientation","ORIENTATION_PORTRAIT","setResolutionPolicy","ResolutionPolicy","FIXED_WIDTH","ORIENTATION_LANDSCAPE","FIXED_HEIGHT","jsb","dispatchEvent","Event","EventCustom","recoverOrientation","frameSize","closeWebView","WEBVIEW_OFF","nodeRewrite","Node","maxTouchNum","touchNum","__dispatchEvent__","type","_canTouch","SYSTEM","TOUCH_BEGIN","touch","_point","TOUCH_MOVE","onPostActivated","_onPostActivated","active","__onPreDestroy__","_onPreDestroy","Toggle","_triggerEventInScript_isChecked","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 修改适配游戏的机制\r\n */\r\nlet SystemClass = function () { },\r\n    systemClass = SystemClass.prototype,\r\n    g_instance = null;\r\n\r\n\r\n//前后台切换事件\r\nsystemClass.enterFrontandback = function () {\r\n    cc.game.on(cc.game.EVENT_HIDE, () => {\r\n        if (window.isShow) {\r\n            glGame.emitter.emit(\"EnterBackground\");\r\n            window.isShow = false;\r\n        }\r\n    });\r\n    cc.game.on(cc.game.EVENT_SHOW, () => {\r\n        if (!window.isShow) {\r\n            glGame.emitter.emit(\"EnterForeground\");\r\n            window.isShow = true;\r\n        }\r\n    });\r\n}\r\n\r\nlet iponeXFit=function(){\r\n\r\n    let osVer = cc.sys.osVersion;\r\n    osVer = Number(osVer.substr(0,2))\r\n    if(isNaN(osVer)||osVer<=12){\r\n        return;\r\n    }\r\n\r\n    let radion=window.devicePixelRatio || 1\r\n    let screen={\r\n        width:window.screen.width* radion,\r\n        height:window.screen.height*radion\r\n    }\r\n    if (cc.sys.os==cc.sys.OS_IOS) {\r\n        if((window.orientation == 90 || window.orientation == -90) && (cc.sys.browserType==cc.sys.BROWSER_TYPE_SAFARI || cc.sys.browserType==cc.sys.BROWSER_TYPE_FIREFOX)){\r\n            if(screen.height % 896 == 0) //如果横屏之后的宽度除以896 能除尽， 那么就需要设置width 896 +1 主要是 一款XR 和 XS Max\r\n                document.querySelector('meta[name=viewport]').content = 'width=897,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n            \r\n            else if(screen.height % 812 == 0)//如果横屏之后的宽度除以812 能除尽， 那么就需要设置width 812 +1 主要是 x 和 XS 以及 一款 XR？\r\n                document.querySelector('meta[name=viewport]').content = 'width=813,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n            \r\n            else if(screen.height % 736 == 0)// 7 plus 8 plus\r\n                document.querySelector('meta[name=viewport]').content = 'width=737,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n            else if(screen.height % 667 == 0)// 7 和 8 6s\r\n                document.querySelector('meta[name=viewport]').content = 'width=668,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n            else //低于6s\r\n                document.querySelector('meta[name=viewport]').content = 'width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n        }\r\n        else\r\n            document.querySelector('meta[name=viewport]').content = 'width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,viewport-fit=cover'\r\n    }\r\n}\r\n\r\n//web子游戏旋转后适配\r\nsystemClass.webGameChange = function () {\r\n    var evt = \"onorientationchange\" in window ? \"orientationchange\" : \"resize\";\r\n    window.addEventListener(evt, function () {\r\n        console.log(\"onorientationchange\", window.orientation);\r\n        // glGame.emitter.emit(\"onorientationchange\");\r\n        if(cc.sys.isBrowser) {\r\n            return;\r\n        }\r\n\r\n        //glGame.panel.showMsgBox(\"\", cc.director.getScene().name+window.orientation)\r\n        if (cc.director.getScene().name == \"plaza\" || cc.director.getScene().name == \"login\") {\r\n            //通过深入 Document 内部对 body 进行检测，获取窗口大小\r\n            if (window.orientation == 0 || window.orientation == 180) {\r\n                glGame.scene.enterNowScene();\r\n                glGame.readyroom.reqExitArea();\r\n            } else if (window.orientation == 90 || window.orientation == -90) {\r\n                glGame.scene.enterNowScene();\r\n                glGame.readyroom.reqExitArea();\r\n            }\r\n        }\r\n    }, false);\r\n\r\n    window.addEventListener('resize', function() {\r\n        glGame.emitter.emit(\"resize\");\r\n    });\r\n\r\n    let _widgetManager=cc._widgetManager\r\n    let widgetInitFunc=_widgetManager.init\r\n    _widgetManager.init=function(director){\r\n        widgetInitFunc.call(this,director)\r\n        var thisOnResized = this.onResized.bind(this);\r\n        cc.view.on(\"canvas-resize\", thisOnResized);\r\n        //这里在手机横竖的时候  widget 不会  重新resize\r\n        //加一个判断\r\n        window.addEventListener(\"orientationchange\", thisOnResized);\r\n    }\r\n}\r\n\r\n// 获取转屏的设定(暂时废弃)\r\nsystemClass.webChange = function () {\r\n    if (!cc.sys.isNative) {\r\n        var evt = \"onorientationchange\" in window ? \"orientationchange\" : \"resize\";\r\n        window.addEventListener(evt, function () {\r\n            console.log(\"onorientationchange\", window.orientation);\r\n            //通过深入 Document 内部对 body 进行检测，获取窗口大小\r\n            let ratio = cc.view.getDevicePixelRatio(),\r\n                cutSize = cc.view.getFrameSize(),\r\n                winWidth = cutSize.width * ratio,//cc.view.getFrameSize().width,\r\n                winHeight = cutSize.height * ratio / 1.154700538379252;//cc.view.getFrameSize().height;\r\n            if (window.orientation == 0 || window.orientation == 180) {\r\n            } else {\r\n            }\r\n            cc.view.resizeWithBrowserSize(true);\r\n        }, false);\r\n    }\r\n    //ip x 适配\r\n    let size = cc.view.getFrameSize();\r\n    if (cc.sys.isNative && ((size.width == 2436 && size.height == 1125) || (size.width == 1125 && size.height == 2436))) {\r\n        cc.view.setFrameSize(size.width - 250, size.height);\r\n        cc.view.resizeWithBrowserSize(true);\r\n    }\r\n}\r\n\r\n// 强制热更判定\r\nsystemClass.updateBag = function () {\r\n    let version = \"2.0.0\";              //需要更换底包修改时修改（默认的底包为版本 1.0.0）\r\n    glGame.version = version;\r\n}\r\n\r\n//版本校验\r\nsystemClass.comparisonVersion = function (newVer) {\r\n    if (!newVer) return true;                                       //校验远程端传值为空，默认不升级 \r\n    let ver_list = glGame.version.split(\".\");\r\n    let new_ver = newVer.split(\".\");\r\n    let count = ver_list.length;\r\n    for (let i = 0; i < count; i++) {\r\n        if (ver_list[i] == null || !new_ver[i] == null) break;      //版本对比失败，默认不升级\r\n        if (Number(ver_list[i]) >= Number(new_ver[i])) continue;    //版本号校验\r\n        else return false;                                          //与本地版本号校验，本地版本比远程版本较高\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\n// 适配iPhonex\r\nsystemClass.iphonex = function () {\r\n    if(cc.sys.isBrowser) {\r\n        return;\r\n    }\r\n\r\n    let size = cc.view.getFrameSize();\r\n    //console.log(\"设备 size\", size);\r\n    if (\r\n        cc.sys.isNative && cc.sys.platform == cc.sys.IPHONE\r\n        && ((size.width == 2436 && size.height == 1125)\r\n            || (size.width == 1125 && size.height == 2436))\r\n        //size.width == 812 && size.height == 375\r\n    ) {\r\n        // let cvs = cc.director.getScene()._children[0].getComponent(cc.Canvas);\r\n        // cvs.fitHeight = true;\r\n        // cvs.fitWidth = true;\r\n        // glGame.emitter.emit(MESSAGE.UI.SCENE);\r\n        //适配的机型为 960x640(1.5)  2560x1600(1.6)  \r\n    } else if (size.width / size.height <= 1.6) {\r\n        let cvs = cc.director.getScene()._children[0].getComponent(cc.Canvas);\r\n        cvs.fitHeight = true;\r\n        cvs.fitWidth = true;\r\n        glGame.emitter.emit(MESSAGE.UI.SCENE);\r\n    }\r\n}\r\n\r\n// 1920 x 1080 尺寸转换缩放比例（子游戏尺寸适配）\r\n/**\r\n * @param {cc.size} size 页面尺寸强制处理\r\n */\r\nsystemClass.convertInterface = function (size) {\r\n    let designSize = size || cc.size(1920, 1080);        //修改设置尺寸，服务底尺寸的设计分辨率\r\n    let cvs = cc.director.getScene()._children[0].getComponent(cc.Canvas);\r\n    let nowSize = cvs.designResolution;\r\n    let widthRate = nowSize.width / designSize.width;\r\n    let heightRate = nowSize.height / designSize.height;\r\n    return widthRate > heightRate ? heightRate : widthRate;\r\n}\r\n\r\n\r\n//android: 返回键监听注册到全局\r\nsystemClass.androidOn = function () {\r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, (event) => {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.back: //2.12版本的传入参数有所不同\r\n                // glGame.emitter.emit(\"backPressed\");\r\n                if (glGame.isAndroidExit || !glGame.isSystemRota) return;\r\n                if (glGame.isHaveWebView) {\r\n                    glGame.chargeWebView.remove();\r\n                    glGame.chargeWebView = null;\r\n                    return;\r\n                }\r\n                glGame.isAndroidExit = true;\r\n                glGame.panel.showDialog(\"提示\", \"是否立即关闭游戏?\", () => {\r\n                    glGame.isAndroidExit = false;\r\n                    cc.game.end();\r\n                }, () => { glGame.isAndroidExit = false });\r\n                break;\r\n            default:\r\n                console.error(\"啥瘠薄key, 不处理\")\r\n        }\r\n    }, window)\r\n}\r\n\r\n//真机旋转刷新排版布局函数\r\nsystemClass.changeOrientation = function (bolOrientation) {\r\n    if (glGame.isSystemRota) return;\r\n\r\n    if (!bolOrientation) {\r\n        cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);\r\n\r\n        cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_WIDTH);\r\n    }\r\n    else {\r\n        cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\r\n\r\n        cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_HEIGHT);\r\n    }\r\n    //手动调用触发 Wdiget 组件重新布局\r\n    if (window.jsb)\r\n        window.dispatchEvent(new cc.Event.EventCustom('resize', true));\r\n}\r\n\r\n\r\n//恢复排版布局函数\r\nsystemClass.recoverOrientation = function () {\r\n    if (glGame.isSystemRota) return;\r\n    let frameSize = cc.view.getFrameSize();\r\n    cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\r\n\r\n    //if (frameSize.height > frameSize.width) cc.view.setFrameSize(frameSize.height, frameSize.width);\r\n\r\n    console.log(\"iphonex else scene\", frameSize.width, frameSize.height);\r\n\r\n    cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_HEIGHT);\r\n\r\n    glGame.emitter.emit(MESSAGE.UI.SCENE);\r\n    //手动调用触发 Wdiget 组件重新布局\r\n    if (window.jsb)\r\n        window.dispatchEvent(new cc.Event.EventCustom('resize', true));\r\n}\r\n\r\n\r\n\r\n//关闭web并重置布局排版\r\nsystemClass.closeWebView = function () {\r\n    this.changeOrientation(true);\r\n    glGame.isSystemRota = true;     //重置固定旋转设置\r\n    glGame.emitter.emit(MESSAGE.UI.WEBVIEW_OFF);\r\n}\r\n\r\n//多点触控的函数\r\nsystemClass.nodeRewrite = function () {\r\n    cc.Node.maxTouchNum = 1;\r\n    cc.Node.touchNum = 0;\r\n    var __dispatchEvent__ = cc.Node.prototype.dispatchEvent;\r\n    cc.Node.prototype.dispatchEvent = function (event) {\r\n        switch (event.type) {\r\n            case 'touchstart':\r\n                if (cc.Node.touchNum < cc.Node.maxTouchNum) {\r\n                    cc.Node.touchNum++;\r\n                    cc.Node.touchNum = cc.Node.touchNum > 1 ? 1 : cc.Node.touchNum\r\n                    this._canTouch = true;\r\n                    __dispatchEvent__.call(this, event);\r\n                    glGame.emitter.emit(MESSAGE.SYSTEM.TOUCH_BEGIN, event.touch._point);\r\n                }\r\n                break;\r\n            case 'touchmove':\r\n                if (!this._canTouch && cc.Node.touchNum < cc.Node.maxTouchNum) {\r\n                    this._canTouch = true;\r\n                    cc.Node.touchNum++;\r\n                    cc.Node.touchNum = cc.Node.touchNum > 1 ? 1 : cc.Node.touchNum\r\n                }\r\n\r\n                if (this._canTouch) {\r\n                    __dispatchEvent__.call(this, event);\r\n                }\r\n                glGame.emitter.emit(MESSAGE.SYSTEM.TOUCH_MOVE, event.touch._point);\r\n                break;\r\n            case 'touchend':\r\n                if (this._canTouch) {\r\n                    this._canTouch = false;\r\n                    cc.Node.touchNum--;\r\n                    cc.Node.touchNum = cc.Node.touchNum < 0 ? 0 : cc.Node.touchNum\r\n                    __dispatchEvent__.call(this, event);\r\n                }\r\n                break;\r\n            case 'touchcancel':\r\n                if (this._canTouch) {\r\n                    this._canTouch = true;\r\n                    cc.Node.touchNum--;\r\n                    cc.Node.touchNum = cc.Node.touchNum < 0 ? 0 : cc.Node.touchNum\r\n                    __dispatchEvent__.call(this, event);\r\n                }\r\n                break;\r\n            default:\r\n                __dispatchEvent__.call(this, event);\r\n        }\r\n    };\r\n\r\n    var onPostActivated = cc.Node.prototype._onPostActivated;\r\n    cc.Node.prototype._onPostActivated = function (active) {\r\n        if (!active && this._canTouch) {\r\n            this._canTouch = false;\r\n            cc.Node.touchNum--;\r\n            cc.Node.touchNum = cc.Node.touchNum < 0 ? 0 : cc.Node.touchNum\r\n        }\r\n        onPostActivated.call(this, active);\r\n    };\r\n\r\n    var __onPreDestroy__ = cc.Node.prototype._onPreDestroy;\r\n    cc.Node.prototype._onPreDestroy = function () {\r\n        if (this._canTouch) {\r\n            this._canTouch = false;\r\n            cc.Node.touchNum--;\r\n            cc.Node.touchNum = cc.Node.touchNum < 0 ? 0 : cc.Node.touchNum\r\n        }\r\n\r\n        __onPreDestroy__.call(this);\r\n    };\r\n}\r\n\r\n/*\r\n * This script is automatically generated by Cocos Creator and is only used for projects compatible with the v2.1.0 ～ 2.2.1 version.\r\n * You do not need to manually add this script in any other project.\r\n * If you don't use cc.Toggle in your project, you can delete this script directly.\r\n * If your project is hosted in VCS such as git, submit this script together.\r\n *\r\n * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 ~ 2.2.1 版本的工程，\r\n * 你无需在任何其它项目中手动添加此脚本。\r\n * 如果你的项目中没用到 Toggle，可直接删除该脚本。\r\n * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。\r\n */\r\n\r\nif (cc.Toggle) {\r\n    // Whether to trigger 'toggle' and 'checkEvents' events when modifying 'toggle.isChecked' in the code\r\n    // 在代码中修改 'toggle.isChecked' 时是否触发 'toggle' 与 'checkEvents' 事件\r\n    cc.Toggle._triggerEventInScript_isChecked = true;\r\n}\r\n\r\nmodule.exports = function () {\r\n    if (!g_instance) {\r\n        g_instance = new SystemClass();\r\n    }\r\n    return g_instance;\r\n};\r\n"]}