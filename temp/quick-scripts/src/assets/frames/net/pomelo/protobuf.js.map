{"version":3,"sources":["assets\\frames\\net\\pomelo\\protobuf.js"],"names":["exports","global","Protobuf","init","opts","encoder","encoderProtos","decoder","decoderProtos","encode","key","msg","decode","module","window","protobuf","constants","TYPES","uInt32","sInt32","int32","string","message","Util","util","isSimpleType","type","Codec","codec","buffer","ArrayBuffer","float32Array","Float32Array","float64Array","Float64Array","uInt8Array","Uint8Array","encodeUInt32","n","parseInt","isNaN","result","tmp","next","Math","floor","push","encodeSInt32","abs","decodeUInt32","bytes","i","length","m","pow","decodeSInt32","flag","encodeFloat","float","decodeFloat","offset","encodeDouble","double","subarray","decodeDouble","encodeStr","str","code","charCodeAt","codes","encode2UTF8","j","decodeStr","array","end","String","fromCharCode","apply","slice","byteLength","codeLength","charCode","MsgEncoder","constant","protos","route","checkMsg","JSON","stringify","encodeMsg","name","proto","option","__messages","writeBytes","encodeTag","tag","encodeProp","encodeArray","value","tmpBuffer","MsgDecoder","setProtos","buf","decodeMsg","head","getHead","__tags","decodeProp","decodeArray","isFinish","peekHead","getBytes","peekBytes","pos","b"],"mappings":"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","sourceRoot":"/","sourcesContent":["/* ProtocolBuffer client 0.1.0*/\r\n\r\n/**\r\n * pomelo-protobuf\r\n * @author <zhang0935@gmail.com>\r\n */\r\n\r\n/**\r\n * Protocol buffer root\r\n * In browser, it will be window.protbuf\r\n */\r\n(function (exports, global){\r\n  var Protobuf = exports;\r\n\r\n  Protobuf.init = function(opts){\r\n    //On the serverside, use serverProtos to encode messages send to client\r\n    Protobuf.encoder.init(opts.encoderProtos);\r\n\r\n    //On the serverside, user clientProtos to decode messages receive from clients\r\n    Protobuf.decoder.init(opts.decoderProtos);\r\n  };\r\n\r\n  Protobuf.encode = function(key, msg){\r\n    return Protobuf.encoder.encode(key, msg);\r\n  };\r\n\r\n  Protobuf.decode = function(key, msg){\r\n    return Protobuf.decoder.decode(key, msg);\r\n  };\r\n\r\n  // exports to support for components\r\n  module.exports = Protobuf;\r\n  if(typeof(window) != \"undefined\") {\r\n    window.protobuf = Protobuf;\r\n  }\r\n  \r\n})(typeof(window) == \"undefined\" ? module.exports :{}, this);\r\n\r\n/**\r\n * constants\r\n */\r\n(function (exports, global){\r\n  var constants = exports.constants = {};\r\n\r\n  constants.TYPES = {\r\n    uInt32 : 0,\r\n    sInt32 : 0,\r\n    int32 : 0,\r\n    double : 1,\r\n    string : 2,\r\n    message : 2,\r\n    float : 5\r\n  };\r\n\r\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\r\n\r\n/**\r\n * util module\r\n */\r\n(function (exports, global){\r\n\r\n  var Util = exports.util = {};\r\n\r\n  Util.isSimpleType = function(type){\r\n    return ( type === 'uInt32' ||\r\n             type === 'sInt32' ||\r\n             type === 'int32'  ||\r\n             type === 'uInt64' ||\r\n             type === 'sInt64' ||\r\n             type === 'float'  ||\r\n             type === 'double' );\r\n  };\r\n\r\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\r\n\r\n/**\r\n * codec module\r\n */\r\n(function (exports, global){\r\n\r\n  var Codec = exports.codec = {};\r\n\r\n  var buffer = new ArrayBuffer(8);\r\n  var float32Array = new Float32Array(buffer);\r\n  var float64Array = new Float64Array(buffer);\r\n  var uInt8Array = new Uint8Array(buffer);\r\n\r\n  Codec.encodeUInt32 = function(n){\r\n    var n = parseInt(n);\r\n    if(isNaN(n) || n < 0){\r\n      return null;\r\n    }\r\n\r\n    var result = [];\r\n    do{\r\n      var tmp = n % 128;\r\n      var next = Math.floor(n/128);\r\n\r\n      if(next !== 0){\r\n        tmp = tmp + 128;\r\n      }\r\n      result.push(tmp);\r\n      n = next;\r\n    }while(n !== 0);\r\n\r\n    return result;\r\n  };\r\n\r\n  Codec.encodeSInt32 = function(n){\r\n    var n = parseInt(n);\r\n    if(isNaN(n)){\r\n      return null;\r\n    }\r\n    n = n<0?(Math.abs(n)*2-1):n*2;\r\n\r\n    return Codec.encodeUInt32(n);\r\n  };\r\n\r\n  Codec.decodeUInt32 = function(bytes){\r\n    var n = 0;\r\n\r\n    for(var i = 0; i < bytes.length; i++){\r\n      var m = parseInt(bytes[i]);\r\n      n = n + ((m & 0x7f) * Math.pow(2,(7*i)));\r\n      if(m < 128){\r\n        return n;\r\n      }\r\n    }\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  Codec.decodeSInt32 = function(bytes){\r\n    var n = this.decodeUInt32(bytes);\r\n    var flag = ((n%2) === 1)?-1:1;\r\n\r\n    n = ((n%2 + n)/2)*flag;\r\n\r\n    return n;\r\n  };\r\n\r\n  Codec.encodeFloat = function(float){\r\n    float32Array[0] = float;\r\n    return uInt8Array;\r\n  };\r\n\r\n  Codec.decodeFloat = function(bytes, offset){\r\n    if(!bytes || bytes.length < (offset +4)){\r\n      return null;\r\n    }\r\n\r\n    for(var i = 0; i < 4; i++){\r\n      uInt8Array[i] = bytes[offset + i];\r\n    }\r\n\r\n    return float32Array[0];\r\n  };\r\n\r\n  Codec.encodeDouble = function(double){\r\n    float64Array[0] = double;\r\n    return uInt8Array.subarray(0, 8);\r\n  };\r\n\r\n  Codec.decodeDouble = function(bytes, offset){\r\n    if(!bytes || bytes.length < (8 + offset)){\r\n      return null;\r\n    }\r\n\r\n    for(var i = 0; i < 8; i++){\r\n      uInt8Array[i] = bytes[offset + i];\r\n    }\r\n\r\n    return float64Array[0];\r\n  };\r\n\r\n  Codec.encodeStr = function(bytes, offset, str){\r\n    for(var i = 0; i < str.length; i++){\r\n      var code = str.charCodeAt(i);\r\n      var codes = encode2UTF8(code);\r\n\r\n      for(var j = 0; j < codes.length; j++){\r\n        bytes[offset] = codes[j];\r\n        offset++;\r\n      }\r\n    }\r\n\r\n    return offset;\r\n  };\r\n\r\n  /**\r\n   * Decode string from utf8 bytes\r\n   */\r\n  Codec.decodeStr = function(bytes, offset, length){\r\n    var array = [];\r\n    var end = offset + length;\r\n\r\n    while(offset < end){\r\n      var code = 0;\r\n\r\n      if(bytes[offset] < 128){\r\n        code = bytes[offset];\r\n\r\n        offset += 1;\r\n      }else if(bytes[offset] < 224){\r\n        code = ((bytes[offset] & 0x3f)<<6) + (bytes[offset+1] & 0x3f);\r\n        offset += 2;\r\n      }else{\r\n        code = ((bytes[offset] & 0x0f)<<12) + ((bytes[offset+1] & 0x3f)<<6) + (bytes[offset+2] & 0x3f);\r\n        offset += 3;\r\n      }\r\n\r\n      array.push(code);\r\n\r\n    }\r\n\r\n    var str = '';\r\n    for(var i = 0; i < array.length;){\r\n      str += String.fromCharCode.apply(null, array.slice(i, i + 10000));\r\n      i += 10000;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n  /**\r\n   * Return the byte length of the str use utf8\r\n   */\r\n  Codec.byteLength = function(str){\r\n    if(typeof(str) !== 'string'){\r\n      return -1;\r\n    }\r\n\r\n    var length = 0;\r\n\r\n    for(var i = 0; i < str.length; i++){\r\n      var code = str.charCodeAt(i);\r\n      length += codeLength(code);\r\n    }\r\n\r\n    return length;\r\n  };\r\n\r\n  /**\r\n   * Encode a unicode16 char code to utf8 bytes\r\n   */\r\n  function encode2UTF8(charCode){\r\n    if(charCode <= 0x7f){\r\n      return [charCode];\r\n    }else if(charCode <= 0x7ff){\r\n      return [0xc0|(charCode>>6), 0x80|(charCode & 0x3f)];\r\n    }else{\r\n      return [0xe0|(charCode>>12), 0x80|((charCode & 0xfc0)>>6), 0x80|(charCode & 0x3f)];\r\n    }\r\n  }\r\n\r\n  function codeLength(code){\r\n    if(code <= 0x7f){\r\n      return 1;\r\n    }else if(code <= 0x7ff){\r\n      return 2;\r\n    }else{\r\n      return 3;\r\n    }\r\n  }\r\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\r\n\r\n/**\r\n * encoder module\r\n */\r\n(function (exports, global){\r\n\r\n  var protobuf = exports;\r\n  var MsgEncoder = exports.encoder = {};\r\n\r\n  var codec = protobuf.codec;\r\n  var constant = protobuf.constants;\r\n  var util = protobuf.util;\r\n\r\n  MsgEncoder.init = function(protos){\r\n    this.protos = protos || {};\r\n  };\r\n\r\n  MsgEncoder.encode = function(route, msg){\r\n    //Get protos from protos map use the route as key\r\n    var protos = this.protos[route];\r\n\r\n    //Check msg\r\n    if(!checkMsg(msg, protos)){\r\n      return null;\r\n    }\r\n\r\n    //Set the length of the buffer 2 times bigger to prevent overflow\r\n    var length = codec.byteLength(JSON.stringify(msg));\r\n\r\n    //Init buffer and offset\r\n    var buffer = new ArrayBuffer(length);\r\n    var uInt8Array = new Uint8Array(buffer);\r\n    var offset = 0;\r\n\r\n    if(!!protos){\r\n      offset = encodeMsg(uInt8Array, offset, protos, msg);\r\n      if(offset > 0){\r\n        return uInt8Array.subarray(0, offset);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * Check if the msg follow the defination in the protos\r\n   */\r\n  function checkMsg(msg, protos){\r\n    if(!protos){\r\n      return false;\r\n    }\r\n\r\n    for(var name in protos){\r\n      var proto = protos[name];\r\n\r\n      //All required element must exist\r\n      switch(proto.option){\r\n        case 'required' :\r\n          if(typeof(msg[name]) === 'undefined'){\r\n            return false;\r\n          }\r\n        case 'optional' :\r\n          if(typeof(msg[name]) !== 'undefined'){\r\n            if(!!protos.__messages[proto.type]){\r\n              checkMsg(msg[name], protos.__messages[proto.type]);\r\n            }\r\n          }\r\n        break;\r\n        case 'repeated' :\r\n          //Check nest message in repeated elements\r\n          if(!!msg[name] && !!protos.__messages[proto.type]){\r\n            for(var i = 0; i < msg[name].length; i++){\r\n              if(!checkMsg(msg[name][i], protos.__messages[proto.type])){\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n        break;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function encodeMsg(buffer, offset, protos, msg){\r\n    for(var name in msg){\r\n      if(!!protos[name]){\r\n        var proto = protos[name];\r\n\r\n        switch(proto.option){\r\n          case 'required' :\r\n          case 'optional' :\r\n            offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\r\n            offset = encodeProp(msg[name], proto.type, offset, buffer, protos);\r\n          break;\r\n          case 'repeated' :\r\n            if(msg[name].length > 0){\r\n              offset = encodeArray(msg[name], proto, offset, buffer, protos);\r\n            }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return offset;\r\n  }\r\n\r\n  function encodeProp(value, type, offset, buffer, protos){\r\n    switch(type){\r\n      case 'uInt32':\r\n        offset = writeBytes(buffer, offset, codec.encodeUInt32(value));\r\n      break;\r\n      case 'int32' :\r\n      case 'sInt32':\r\n        offset = writeBytes(buffer, offset, codec.encodeSInt32(value));\r\n      break;\r\n      case 'float':\r\n        writeBytes(buffer, offset, codec.encodeFloat(value));\r\n        offset += 4;\r\n      break;\r\n      case 'double':\r\n        writeBytes(buffer, offset, codec.encodeDouble(value));\r\n        offset += 8;\r\n      break;\r\n      case 'string':\r\n        var length = codec.byteLength(value);\r\n\r\n        //Encode length\r\n        offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\r\n        //write string\r\n        codec.encodeStr(buffer, offset, value);\r\n        offset += length;\r\n      break;\r\n      default :\r\n        if(!!protos.__messages[type]){\r\n          //Use a tmp buffer to build an internal msg\r\n          var tmpBuffer = new ArrayBuffer(codec.byteLength(JSON.stringify(value)));\r\n          var length = 0;\r\n\r\n          length = encodeMsg(tmpBuffer, length, protos.__messages[type], value);\r\n          //Encode length\r\n          offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\r\n          //contact the object\r\n          for(var i = 0; i < length; i++){\r\n            buffer[offset] = tmpBuffer[i];\r\n            offset++;\r\n          }\r\n        }\r\n      break;\r\n    }\r\n\r\n    return offset;\r\n  }\r\n\r\n  /**\r\n   * Encode reapeated properties, simple msg and object are decode differented\r\n   */\r\n  function encodeArray(array, proto, offset, buffer, protos){\r\n    var i = 0;\r\n\r\n    if(util.isSimpleType(proto.type)){\r\n      offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\r\n      offset = writeBytes(buffer, offset, codec.encodeUInt32(array.length));\r\n      for(i = 0; i < array.length; i++){\r\n        offset = encodeProp(array[i], proto.type, offset, buffer);\r\n      }\r\n    }else{\r\n      for(i = 0; i < array.length; i++){\r\n        offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\r\n        offset = encodeProp(array[i], proto.type, offset, buffer, protos);\r\n      }\r\n    }\r\n\r\n    return offset;\r\n  }\r\n\r\n  function writeBytes(buffer, offset, bytes){\r\n    for(var i = 0; i < bytes.length; i++, offset++){\r\n      buffer[offset] = bytes[i];\r\n    }\r\n\r\n    return offset;\r\n  }\r\n\r\n  function encodeTag(type, tag){\r\n    var value = constant.TYPES[type]||2;\r\n    return codec.encodeUInt32((tag<<3)|value);\r\n  }\r\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\r\n\r\n/**\r\n * decoder module\r\n */\r\n(function (exports, global){\r\n  var protobuf = exports;\r\n  var MsgDecoder = exports.decoder = {};\r\n\r\n  var codec = protobuf.codec;\r\n  var util = protobuf.util;\r\n\r\n  var buffer;\r\n  var offset = 0;\r\n\r\n  MsgDecoder.init = function(protos){\r\n    this.protos = protos || {};\r\n  };\r\n\r\n  MsgDecoder.setProtos = function(protos){\r\n    if(!!protos){\r\n      this.protos = protos;\r\n    }\r\n  };\r\n\r\n  MsgDecoder.decode = function(route, buf){\r\n    var protos = this.protos[route];\r\n\r\n    buffer = buf;\r\n    offset = 0;\r\n\r\n    if(!!protos){\r\n      return decodeMsg({}, protos, buffer.length);\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  function decodeMsg(msg, protos, length){\r\n    while(offset<length){\r\n      var head = getHead();\r\n      var type = head.type;\r\n      var tag = head.tag;\r\n      var name = protos.__tags[tag];\r\n\r\n      switch(protos[name].option){\r\n        case 'optional' :\r\n        case 'required' :\r\n          msg[name] = decodeProp(protos[name].type, protos);\r\n        break;\r\n        case 'repeated' :\r\n          if(!msg[name]){\r\n            msg[name] = [];\r\n          }\r\n          decodeArray(msg[name], protos[name].type, protos);\r\n        break;\r\n      }\r\n    }\r\n\r\n    return msg;\r\n  }\r\n\r\n  /**\r\n   * Test if the given msg is finished\r\n   */\r\n  function isFinish(msg, protos){\r\n    return (!protos.__tags[peekHead().tag]);\r\n  }\r\n  /**\r\n   * Get property head from protobuf\r\n   */\r\n  function getHead(){\r\n    var tag = codec.decodeUInt32(getBytes());\r\n\r\n    return {\r\n      type : tag&0x7,\r\n      tag : tag>>3\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get tag head without move the offset\r\n   */\r\n  function peekHead(){\r\n    var tag = codec.decodeUInt32(peekBytes());\r\n\r\n    return {\r\n      type : tag&0x7,\r\n      tag : tag>>3\r\n    };\r\n  }\r\n\r\n  function decodeProp(type, protos){\r\n    switch(type){\r\n      case 'uInt32':\r\n        return codec.decodeUInt32(getBytes());\r\n      case 'int32' :\r\n      case 'sInt32' :\r\n        return codec.decodeSInt32(getBytes());\r\n      case 'float' :\r\n        var float = codec.decodeFloat(buffer, offset);\r\n        offset += 4;\r\n        return float;\r\n      case 'double' :\r\n        var double = codec.decodeDouble(buffer, offset);\r\n        offset += 8;\r\n        return double;\r\n      case 'string' :\r\n        var length = codec.decodeUInt32(getBytes());\r\n\r\n        var str =  codec.decodeStr(buffer, offset, length);\r\n        offset += length;\r\n\r\n        return str;\r\n      default :\r\n        if(!!protos && !!protos.__messages[type]){\r\n          var length = codec.decodeUInt32(getBytes());\r\n          var msg = {};\r\n          decodeMsg(msg, protos.__messages[type], offset+length);\r\n          return msg;\r\n        }\r\n      break;\r\n    }\r\n  }\r\n\r\n  function decodeArray(array, type, protos){\r\n    if(util.isSimpleType(type)){\r\n      var length = codec.decodeUInt32(getBytes());\r\n\r\n      for(var i = 0; i < length; i++){\r\n        array.push(decodeProp(type));\r\n      }\r\n    }else{\r\n      array.push(decodeProp(type, protos));\r\n    }\r\n  }\r\n\r\n  function getBytes(flag){\r\n    var bytes = [];\r\n    var pos = offset;\r\n    flag = flag || false;\r\n\r\n    var b;\r\n\r\n    do{\r\n      b = buffer[pos];\r\n      bytes.push(b);\r\n      pos++;\r\n    }while(b >= 128);\r\n\r\n    if(!flag){\r\n      offset = pos;\r\n    }\r\n    return bytes;\r\n  }\r\n\r\n  function peekBytes(){\r\n    return getBytes(true);\r\n  }\r\n\r\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\r\n\r\n"]}